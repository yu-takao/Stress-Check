/** * Reads SSM environment context from a known Amplify environment variable, * fetches values from SSM and places those values in the corresponding environment variables */export const internalAmplifyFunctionResolveSsmParams = async (client) => {    const envPathObject = JSON.parse(process.env.AMPLIFY_SSM_ENV_CONFIG ?? '{}');    const paths = Object.values(envPathObject).map((paths) => paths.path);    if (paths.length === 0) {        return;    }    let actualSsmClient;    if (client) {        actualSsmClient = client;    }    else {        const ssmSdk = await import('@aws-sdk/client-ssm');        actualSsmClient = new ssmSdk.SSM();    }    const chunkArray = (array, chunkSize) => {        const chunks = [];        for (let i = 0; i < array.length; i += chunkSize) {            chunks.push(array.slice(i, i + chunkSize));        }        return chunks;    };    const resolveSecrets = async (paths) => {        const response = (await Promise.all(chunkArray(paths, 10).map(async (chunkedPaths) => await actualSsmClient.getParameters({            Names: chunkedPaths,            WithDecryption: true,        })))).reduce((accumulator, res) => {            accumulator.Parameters?.push(...(res.Parameters ?? []));            accumulator.InvalidParameters?.push(...(res.InvalidParameters ?? []));            return accumulator;        }, {            Parameters: [],            InvalidParameters: [],        });        if (response.Parameters && response.Parameters.length > 0) {            for (const parameter of response.Parameters) {                if (parameter.Name) {                    const envKey = Object.keys(envPathObject).find((key) => envPathObject[key].sharedPath === parameter.Name ||                        envPathObject[key].path === parameter.Name);                    if (envKey) {                        process.env[envKey] = parameter.Value;                    }                }            }        }        return response;    };    const response = await resolveSecrets(paths);    const sharedPaths = (response?.InvalidParameters || [])        .map((invalidParam) => Object.values(envPathObject).find((paths) => paths.path === invalidParam)?.sharedPath)        .filter((sharedParam) => !!sharedParam);     if (sharedPaths.length > 0) {        await resolveSecrets(sharedPaths);    }};await internalAmplifyFunctionResolveSsmParams();const SSM_PARAMETER_REFRESH_MS = 1000 * 60;setInterval(async () => {    try {        await internalAmplifyFunctionResolveSsmParams();    }    catch (error) {        try {                        console.debug(error);                    }        catch {                    }    }}, SSM_PARAMETER_REFRESH_MS);export {};
var lI=Object.create;var xs=Object.defineProperty;var dI=Object.getOwnPropertyDescriptor;var uI=Object.getOwnPropertyNames;var pI=Object.getPrototypeOf,fI=Object.prototype.hasOwnProperty;var F=(e=>typeof require<"u"?require:typeof Proxy<"u"?new Proxy(e,{get:(t,r)=>(typeof require<"u"?require:t)[r]}):e)(function(e){if(typeof require<"u")return require.apply(this,arguments);throw Error('Dynamic require of "'+e+'" is not supported')});var y=(e,t)=>()=>(e&&(t=e(e=0)),t);var w=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports),Ye=(e,t)=>{for(var r in t)xs(e,r,{get:t[r],enumerable:!0})},Hm=(e,t,r,n)=>{if(t&&typeof t=="object"||typeof t=="function")for(let o of uI(t))!fI.call(e,o)&&o!==r&&xs(e,o,{get:()=>t[o],enumerable:!(n=dI(t,o))||n.enumerable});return e};var E=(e,t,r)=>(r=e!=null?lI(pI(e)):{},Hm(t||!e||!e.__esModule?xs(r,"default",{value:e,enumerable:!0}):r,e)),D=e=>Hm(xs({},"__esModule",{value:!0}),e);import{createRequire as mI}from"node:module";import gI from"node:path";import hI from"node:url";var c=y(()=>{global.require=mI(import.meta.url);global.__filename=hI.fileURLToPath(import.meta.url);global.__dirname=gI.dirname(__filename)});var Je=w((tK,Ym)=>{c();var Ps=Object.defineProperty,yI=Object.getOwnPropertyDescriptor,_I=Object.getOwnPropertyNames,vI=Object.prototype.hasOwnProperty,As=(e,t)=>Ps(e,"name",{value:t,configurable:!0}),SI=(e,t)=>{for(var r in t)Ps(e,r,{get:t[r],enumerable:!0})},EI=(e,t,r,n)=>{if(t&&typeof t=="object"||typeof t=="function")for(let o of _I(t))!vI.call(e,o)&&o!==r&&Ps(e,o,{get:()=>t[o],enumerable:!(n=yI(t,o))||n.enumerable});return e},wI=e=>EI(Ps({},"__esModule",{value:!0}),e),jm={};SI(jm,{AlgorithmId:()=>Vm,EndpointURLScheme:()=>Gm,FieldPosition:()=>zm,HttpApiKeyAuthLocation:()=>qm,HttpAuthLocation:()=>$m,IniSectionType:()=>Wm,RequestHandlerProtocol:()=>Km,SMITHY_CONTEXT_KEY:()=>AI,getDefaultClientConfiguration:()=>xI,resolveDefaultRuntimeConfig:()=>PI});Ym.exports=wI(jm);var $m=(e=>(e.HEADER="header",e.QUERY="query",e))($m||{}),qm=(e=>(e.HEADER="header",e.QUERY="query",e))(qm||{}),Gm=(e=>(e.HTTP="http",e.HTTPS="https",e))(Gm||{}),Vm=(e=>(e.MD5="md5",e.CRC32="crc32",e.CRC32C="crc32c",e.SHA1="sha1",e.SHA256="sha256",e))(Vm||{}),bI=As(e=>{let t=[];return e.sha256!==void 0&&t.push({algorithmId:()=>"sha256",checksumConstructor:()=>e.sha256}),e.md5!=null&&t.push({algorithmId:()=>"md5",checksumConstructor:()=>e.md5}),{addChecksumAlgorithm(r){t.push(r)},checksumAlgorithms(){return t}}},"getChecksumConfiguration"),CI=As(e=>{let t={};return e.checksumAlgorithms().forEach(r=>{t[r.algorithmId()]=r.checksumConstructor()}),t},"resolveChecksumRuntimeConfig"),xI=As(e=>bI(e),"getDefaultClientConfiguration"),PI=As(e=>CI(e),"resolveDefaultRuntimeConfig"),zm=(e=>(e[e.HEADER=0]="HEADER",e[e.TRAILER=1]="TRAILER",e))(zm||{}),AI="__smithy_context",Wm=(e=>(e.PROFILE="profile",e.SSO_SESSION="sso-session",e.SERVICES="services",e))(Wm||{}),Km=(e=>(e.HTTP_0_9="http/0.9",e.HTTP_1_0="http/1.0",e.TDS_8_0="tds/8.0",e))(Km||{})});var q=w((nK,eg)=>{c();var Ts=Object.defineProperty,TI=Object.getOwnPropertyDescriptor,OI=Object.getOwnPropertyNames,RI=Object.prototype.hasOwnProperty,Ft=(e,t)=>Ts(e,"name",{value:t,configurable:!0}),II=(e,t)=>{for(var r in t)Ts(e,r,{get:t[r],enumerable:!0})},NI=(e,t,r,n)=>{if(t&&typeof t=="object"||typeof t=="function")for(let o of OI(t))!RI.call(e,o)&&o!==r&&Ts(e,o,{get:()=>t[o],enumerable:!(n=TI(t,o))||n.enumerable});return e},kI=e=>NI(Ts({},"__esModule",{value:!0}),e),Jm={};II(Jm,{Field:()=>FI,Fields:()=>BI,HttpRequest:()=>LI,HttpResponse:()=>UI,IHttpRequest:()=>Xm.HttpRequest,getHttpHandlerExtensionConfiguration:()=>DI,isValidHostname:()=>Zm,resolveHttpHandlerRuntimeConfig:()=>MI});eg.exports=kI(Jm);var DI=Ft(e=>({setHttpHandler(t){e.httpHandler=t},httpHandler(){return e.httpHandler},updateHttpClientConfig(t,r){e.httpHandler?.updateHttpClientConfig(t,r)},httpHandlerConfigs(){return e.httpHandler.httpHandlerConfigs()}}),"getHttpHandlerExtensionConfiguration"),MI=Ft(e=>({httpHandler:e.httpHandler()}),"resolveHttpHandlerRuntimeConfig"),Xm=Je(),FI=class{static{Ft(this,"Field")}constructor({name:e,kind:t=Xm.FieldPosition.HEADER,values:r=[]}){this.name=e,this.kind=t,this.values=r}add(e){this.values.push(e)}set(e){this.values=e}remove(e){this.values=this.values.filter(t=>t!==e)}toString(){return this.values.map(e=>e.includes(",")||e.includes(" ")?`"${e}"`:e).join(", ")}get(){return this.values}},BI=class{constructor({fields:e=[],encoding:t="utf-8"}){this.entries={},e.forEach(this.setField.bind(this)),this.encoding=t}static{Ft(this,"Fields")}setField(e){this.entries[e.name.toLowerCase()]=e}getField(e){return this.entries[e.toLowerCase()]}removeField(e){delete this.entries[e.toLowerCase()]}getByType(e){return Object.values(this.entries).filter(t=>t.kind===e)}},LI=class Nl{static{Ft(this,"HttpRequest")}constructor(t){this.method=t.method||"GET",this.hostname=t.hostname||"localhost",this.port=t.port,this.query=t.query||{},this.headers=t.headers||{},this.body=t.body,this.protocol=t.protocol?t.protocol.slice(-1)!==":"?`${t.protocol}:`:t.protocol:"https:",this.path=t.path?t.path.charAt(0)!=="/"?`/${t.path}`:t.path:"/",this.username=t.username,this.password=t.password,this.fragment=t.fragment}static clone(t){let r=new Nl({...t,headers:{...t.headers}});return r.query&&(r.query=Qm(r.query)),r}static isInstance(t){if(!t)return!1;let r=t;return"method"in r&&"protocol"in r&&"hostname"in r&&"path"in r&&typeof r.query=="object"&&typeof r.headers=="object"}clone(){return Nl.clone(this)}};function Qm(e){return Object.keys(e).reduce((t,r)=>{let n=e[r];return{...t,[r]:Array.isArray(n)?[...n]:n}},{})}Ft(Qm,"cloneQuery");var UI=class{static{Ft(this,"HttpResponse")}constructor(e){this.statusCode=e.statusCode,this.reason=e.reason,this.headers=e.headers||{},this.body=e.body}static isInstance(e){if(!e)return!1;let t=e;return typeof t.statusCode=="number"&&typeof t.headers=="object"}};function Zm(e){return/^[a-z0-9][a-z0-9\.\-]*[a-z0-9]$/.test(e)}Ft(Zm,"isValidHostname")});var lg=w((cK,cg)=>{"use strict";c();var Os=Object.defineProperty,HI=Object.getOwnPropertyDescriptor,jI=Object.getOwnPropertyNames,$I=Object.prototype.hasOwnProperty,Bn=(e,t)=>Os(e,"name",{value:t,configurable:!0}),qI=(e,t)=>{for(var r in t)Os(e,r,{get:t[r],enumerable:!0})},GI=(e,t,r,n)=>{if(t&&typeof t=="object"||typeof t=="function")for(let o of jI(t))!$I.call(e,o)&&o!==r&&Os(e,o,{get:()=>t[o],enumerable:!(n=HI(t,o))||n.enumerable});return e},VI=e=>GI(Os({},"__esModule",{value:!0}),e),tg={};qI(tg,{eventStreamHandlingMiddleware:()=>og,eventStreamHandlingMiddlewareOptions:()=>sg,eventStreamHeaderMiddleware:()=>ig,eventStreamHeaderMiddlewareOptions:()=>ag,getEventStreamPlugin:()=>zI,resolveEventStreamConfig:()=>rg});cg.exports=VI(tg);function rg(e){let t=e.signer,r=e.signer,n=Object.assign(e,{eventSigner:t,messageSigner:r}),o=n.eventStreamPayloadHandlerProvider(n);return Object.assign(n,{eventStreamPayloadHandler:o})}Bn(rg,"resolveEventStreamConfig");var ng=q(),og=Bn(e=>(t,r)=>async n=>{let{request:o}=n;return ng.HttpRequest.isInstance(o)?e.eventStreamPayloadHandler.handle(t,n,r):t(n)},"eventStreamHandlingMiddleware"),sg={tags:["EVENT_STREAM","SIGNATURE","HANDLE"],name:"eventStreamHandlingMiddleware",relation:"after",toMiddleware:"awsAuthMiddleware",override:!0},ig=Bn(e=>async t=>{let{request:r}=t;return ng.HttpRequest.isInstance(r)?(r.headers={...r.headers,"content-type":"application/vnd.amazon.eventstream","x-amz-content-sha256":"STREAMING-AWS4-HMAC-SHA256-EVENTS"},e({...t,request:r})):e(t)},"eventStreamHeaderMiddleware"),ag={step:"build",tags:["EVENT_STREAM","HEADER","CONTENT_TYPE","CONTENT_SHA256"],name:"eventStreamHeaderMiddleware",override:!0},zI=Bn(e=>({applyToStack:Bn(t=>{t.addRelativeTo(og(e),sg),t.add(ig,ag)},"applyToStack")}),"getEventStreamPlugin")});var Ln=w((dK,mg)=>{"use strict";c();var Is=Object.defineProperty,WI=Object.getOwnPropertyDescriptor,KI=Object.getOwnPropertyNames,YI=Object.prototype.hasOwnProperty,Rs=(e,t)=>Is(e,"name",{value:t,configurable:!0}),JI=(e,t)=>{for(var r in t)Is(e,r,{get:t[r],enumerable:!0})},XI=(e,t,r,n)=>{if(t&&typeof t=="object"||typeof t=="function")for(let o of KI(t))!YI.call(e,o)&&o!==r&&Is(e,o,{get:()=>t[o],enumerable:!(n=WI(t,o))||n.enumerable});return e},QI=e=>XI(Is({},"__esModule",{value:!0}),e),dg={};JI(dg,{getHostHeaderPlugin:()=>eN,hostHeaderMiddleware:()=>pg,hostHeaderMiddlewareOptions:()=>fg,resolveHostHeaderConfig:()=>ug});mg.exports=QI(dg);var ZI=q();function ug(e){return e}Rs(ug,"resolveHostHeaderConfig");var pg=Rs(e=>t=>async r=>{if(!ZI.HttpRequest.isInstance(r.request))return t(r);let{request:n}=r,{handlerProtocol:o=""}=e.requestHandler.metadata||{};if(o.indexOf("h2")>=0&&!n.headers[":authority"])delete n.headers.host,n.headers[":authority"]=n.hostname+(n.port?":"+n.port:"");else if(!n.headers.host){let s=n.hostname;n.port!=null&&(s+=`:${n.port}`),n.headers.host=s}return t(r)},"hostHeaderMiddleware"),fg={name:"hostHeaderMiddleware",step:"build",priority:"low",tags:["HOST"],override:!0},eN=Rs(e=>({applyToStack:Rs(t=>{t.add(pg(e),fg)},"applyToStack")}),"getHostHeaderPlugin")});var Un=w((pK,_g)=>{"use strict";c();var Ns=Object.defineProperty,tN=Object.getOwnPropertyDescriptor,rN=Object.getOwnPropertyNames,nN=Object.prototype.hasOwnProperty,kl=(e,t)=>Ns(e,"name",{value:t,configurable:!0}),oN=(e,t)=>{for(var r in t)Ns(e,r,{get:t[r],enumerable:!0})},sN=(e,t,r,n)=>{if(t&&typeof t=="object"||typeof t=="function")for(let o of rN(t))!nN.call(e,o)&&o!==r&&Ns(e,o,{get:()=>t[o],enumerable:!(n=tN(t,o))||n.enumerable});return e},iN=e=>sN(Ns({},"__esModule",{value:!0}),e),gg={};oN(gg,{getLoggerPlugin:()=>aN,loggerMiddleware:()=>hg,loggerMiddlewareOptions:()=>yg});_g.exports=iN(gg);var hg=kl(()=>(e,t)=>async r=>{try{let n=await e(r),{clientName:o,commandName:s,logger:i,dynamoDbDocumentClientOptions:a={}}=t,{overrideInputFilterSensitiveLog:l,overrideOutputFilterSensitiveLog:d}=a,u=l??t.inputFilterSensitiveLog,f=d??t.outputFilterSensitiveLog,{$metadata:g,...h}=n.output;return i?.info?.({clientName:o,commandName:s,input:u(r.input),output:f(h),metadata:g}),n}catch(n){let{clientName:o,commandName:s,logger:i,dynamoDbDocumentClientOptions:a={}}=t,{overrideInputFilterSensitiveLog:l}=a,d=l??t.inputFilterSensitiveLog;throw i?.error?.({clientName:o,commandName:s,input:d(r.input),error:n,metadata:n.$metadata}),n}},"loggerMiddleware"),yg={name:"loggerMiddleware",tags:["LOGGER"],step:"initialize",override:!0},aN=kl(e=>({applyToStack:kl(t=>{t.add(hg(),yg)},"applyToStack")}),"getLoggerPlugin")});var Hn=w((mK,wg)=>{"use strict";c();var Ds=Object.defineProperty,cN=Object.getOwnPropertyDescriptor,lN=Object.getOwnPropertyNames,dN=Object.prototype.hasOwnProperty,ks=(e,t)=>Ds(e,"name",{value:t,configurable:!0}),uN=(e,t)=>{for(var r in t)Ds(e,r,{get:t[r],enumerable:!0})},pN=(e,t,r,n)=>{if(t&&typeof t=="object"||typeof t=="function")for(let o of lN(t))!dN.call(e,o)&&o!==r&&Ds(e,o,{get:()=>t[o],enumerable:!(n=cN(t,o))||n.enumerable});return e},fN=e=>pN(Ds({},"__esModule",{value:!0}),e),vg={};uN(vg,{addRecursionDetectionMiddlewareOptions:()=>Eg,getRecursionDetectionPlugin:()=>yN,recursionDetectionMiddleware:()=>Sg});wg.exports=fN(vg);var mN=q(),Dl="X-Amzn-Trace-Id",gN="AWS_LAMBDA_FUNCTION_NAME",hN="_X_AMZN_TRACE_ID",Sg=ks(e=>t=>async r=>{let{request:n}=r;if(!mN.HttpRequest.isInstance(n)||e.runtime!=="node")return t(r);let o=Object.keys(n.headers??{}).find(l=>l.toLowerCase()===Dl.toLowerCase())??Dl;if(n.headers.hasOwnProperty(o))return t(r);let s=process.env[gN],i=process.env[hN],a=ks(l=>typeof l=="string"&&l.length>0,"nonEmptyString");return a(s)&&a(i)&&(n.headers[Dl]=i),t({...r,request:n})},"recursionDetectionMiddleware"),Eg={step:"build",tags:["RECURSION_DETECTION"],name:"recursionDetectionMiddleware",override:!0,priority:"low"},yN=ks(e=>({applyToStack:ks(t=>{t.add(Sg(e),Eg)},"applyToStack")}),"getRecursionDetectionPlugin")});var Ml,_N,bg=y(()=>{c();Ml=E(Je()),_N=e=>e[Ml.SMITHY_CONTEXT_KEY]||(e[Ml.SMITHY_CONTEXT_KEY]={})});var Ge=w((_K,Ag)=>{c();var Ms=Object.defineProperty,vN=Object.getOwnPropertyDescriptor,SN=Object.getOwnPropertyNames,EN=Object.prototype.hasOwnProperty,xg=(e,t)=>Ms(e,"name",{value:t,configurable:!0}),wN=(e,t)=>{for(var r in t)Ms(e,r,{get:t[r],enumerable:!0})},bN=(e,t,r,n)=>{if(t&&typeof t=="object"||typeof t=="function")for(let o of SN(t))!EN.call(e,o)&&o!==r&&Ms(e,o,{get:()=>t[o],enumerable:!(n=vN(t,o))||n.enumerable});return e},CN=e=>bN(Ms({},"__esModule",{value:!0}),e),Pg={};wN(Pg,{getSmithyContext:()=>xN,normalizeProvider:()=>PN});Ag.exports=CN(Pg);var Cg=Je(),xN=xg(e=>e[Cg.SMITHY_CONTEXT_KEY]||(e[Cg.SMITHY_CONTEXT_KEY]={}),"getSmithyContext"),PN=xg(e=>{if(typeof e=="function")return e;let t=Promise.resolve(e);return()=>t},"normalizeProvider")});var Tg,Og=y(()=>{c();Tg=(e,t)=>{if(!t||t.length===0)return e;let r=[];for(let n of t)for(let o of e)o.schemeId.split("#")[1]===n&&r.push(o);for(let n of e)r.find(({schemeId:o})=>o===n.schemeId)||r.push(n);return r}});function AN(e){let t=new Map;for(let r of e)t.set(r.schemeId,r);return t}var wK,Rg,jn,Fs=y(()=>{c();wK=E(Je()),Rg=E(Ge());Og();jn=(e,t)=>(r,n)=>async o=>{let s=e.httpAuthSchemeProvider(await t.httpAuthSchemeParametersProvider(e,n,o.input)),i=e.authSchemePreference?await e.authSchemePreference():[],a=Tg(s,i),l=AN(e.httpAuthSchemes),d=(0,Rg.getSmithyContext)(n),u=[];for(let f of a){let g=l.get(f.schemeId);if(!g){u.push(`HttpAuthScheme \`${f.schemeId}\` was not enabled for this service.`);continue}let h=g.identityProvider(await t.identityProviderConfigProvider(e));if(!h){u.push(`HttpAuthScheme \`${f.schemeId}\` did not have an IdentityProvider configured.`);continue}let{identityProperties:_={},signingProperties:v={}}=f.propertiesExtractor?.(e,n)||{};f.identityProperties=Object.assign(f.identityProperties||{},_),f.signingProperties=Object.assign(f.signingProperties||{},v),d.selectedHttpAuthScheme={httpAuthOption:f,identity:await h(f.identityProperties),signer:g.signer};break}if(!d.selectedHttpAuthScheme)throw new Error(u.join(`
`));return r(o)}});var Ig,$n,Ng=y(()=>{c();Fs();Ig={step:"serialize",tags:["HTTP_AUTH_SCHEME"],name:"httpAuthSchemeMiddleware",override:!0,relation:"before",toMiddleware:"endpointV2Middleware"},$n=(e,{httpAuthSchemeParametersProvider:t,identityProviderConfigProvider:r})=>({applyToStack:n=>{n.addRelativeTo(jn(e,{httpAuthSchemeParametersProvider:t,identityProviderConfigProvider:r}),Ig)}})});var Bt=w((RK,Ug)=>{c();var Bs=Object.defineProperty,TN=Object.getOwnPropertyDescriptor,ON=Object.getOwnPropertyNames,RN=Object.prototype.hasOwnProperty,Ls=(e,t)=>Bs(e,"name",{value:t,configurable:!0}),IN=(e,t)=>{for(var r in t)Bs(e,r,{get:t[r],enumerable:!0})},NN=(e,t,r,n)=>{if(t&&typeof t=="object"||typeof t=="function")for(let o of ON(t))!RN.call(e,o)&&o!==r&&Bs(e,o,{get:()=>t[o],enumerable:!(n=TN(t,o))||n.enumerable});return e},kN=e=>NN(Bs({},"__esModule",{value:!0}),e),kg={};IN(kg,{deserializerMiddleware:()=>Dg,deserializerMiddlewareOption:()=>Fg,getSerdePlugin:()=>Lg,serializerMiddleware:()=>Mg,serializerMiddlewareOption:()=>Bg});Ug.exports=kN(kg);var DN=q(),Dg=Ls((e,t)=>(r,n)=>async o=>{let{response:s}=await r(o);try{let i=await t(s,e);return{response:s,output:i}}catch(i){if(Object.defineProperty(i,"$response",{value:s}),!("$metadata"in i)){let a="Deserialization error: to see the raw response, inspect the hidden field {error}.$response on this object.";try{i.message+=`
  `+a}catch{!n.logger||n.logger?.constructor?.name==="NoOpLogger"?console.warn(a):n.logger?.warn?.(a)}typeof i.$responseBodyText<"u"&&i.$response&&(i.$response.body=i.$responseBodyText);try{if(DN.HttpResponse.isInstance(s)){let{headers:l={}}=s,d=Object.entries(l);i.$metadata={httpStatusCode:s.statusCode,requestId:Fl(/^x-[\w-]+-request-?id$/,d),extendedRequestId:Fl(/^x-[\w-]+-id-2$/,d),cfId:Fl(/^x-[\w-]+-cf-id$/,d)}}}catch{}}throw i}},"deserializerMiddleware"),Fl=Ls((e,t)=>(t.find(([r])=>r.match(e))||[void 0,void 0])[1],"findHeader"),Mg=Ls((e,t)=>(r,n)=>async o=>{let s=e,i=n.endpointV2?.url&&s.urlParser?async()=>s.urlParser(n.endpointV2.url):s.endpoint;if(!i)throw new Error("No valid endpoint provider available.");let a=await t(o.input,{...e,endpoint:i});return r({...o,request:a})},"serializerMiddleware"),Fg={name:"deserializerMiddleware",step:"deserialize",tags:["DESERIALIZER"],override:!0},Bg={name:"serializerMiddleware",step:"serialize",tags:["SERIALIZER"],override:!0};function Lg(e,t,r){return{applyToStack:n=>{n.add(Dg(e,r),Fg),n.add(Mg(e,t),Bg)}}}Ls(Lg,"getSerdePlugin")});var Hg,jg,MN,$g=y(()=>{c();Hg=E(Bt());Fs();jg={step:"serialize",tags:["HTTP_AUTH_SCHEME"],name:"httpAuthSchemeMiddleware",override:!0,relation:"before",toMiddleware:Hg.serializerMiddlewareOption.name},MN=(e,{httpAuthSchemeParametersProvider:t,identityProviderConfigProvider:r})=>({applyToStack:n=>{n.addRelativeTo(jn(e,{httpAuthSchemeParametersProvider:t,identityProviderConfigProvider:r}),jg)}})});var qg=y(()=>{c();Fs();Ng();$g()});var Gg,HK,Vg,FN,BN,Bl,Ll=y(()=>{c();Gg=E(q()),HK=E(Je()),Vg=E(Ge()),FN=e=>t=>{throw t},BN=(e,t)=>{},Bl=e=>(t,r)=>async n=>{if(!Gg.HttpRequest.isInstance(n.request))return t(n);let s=(0,Vg.getSmithyContext)(r).selectedHttpAuthScheme;if(!s)throw new Error("No HttpAuthScheme was selected: unable to sign request");let{httpAuthOption:{signingProperties:i={}},identity:a,signer:l}=s,d=await t({...n,request:await l.sign(n.request,a,i)}).catch((l.errorHandler||FN)(i));return(l.successHandler||BN)(d.response,i),d}});var zg,qn,Wg=y(()=>{c();Ll();zg={step:"finalizeRequest",tags:["HTTP_SIGNING"],name:"httpSigningMiddleware",aliases:["apiKeyMiddleware","tokenMiddleware","awsAuthMiddleware"],override:!0,relation:"after",toMiddleware:"retryMiddleware"},qn=e=>({applyToStack:t=>{t.addRelativeTo(Bl(e),zg)}})});var Kg=y(()=>{c();Ll();Wg()});var Lt,Yg=y(()=>{c();Lt=e=>{if(typeof e=="function")return e;let t=Promise.resolve(e);return()=>t}});function Jg(e,t,r,n,o){return async function*(i,a,...l){let d=a,u=i.startingToken??d[r],f=!0,g;for(;f;){if(d[r]=u,o&&(d[o]=d[o]??i.pageSize),i.client instanceof e)g=await LN(t,i.client,a,i.withCommand,...l);else throw new Error(`Invalid client, expected instance of ${e.name}`);yield g;let h=u;u=UN(g,n),f=!!(u&&(!i.stopOnSameToken||u!==h))}return void 0}}var LN,UN,Xg=y(()=>{c();LN=async(e,t,r,n=s=>s,...o)=>{let s=new e(r);return s=n(s)??s,await t.send(s,...o)};UN=(e,t)=>{let r=e,n=t.split(".");for(let o of n){if(!r||typeof r!="object")return;r=r[o]}return r}});var Ul=w((t9,Zg)=>{c();var Us=Object.defineProperty,HN=Object.getOwnPropertyDescriptor,jN=Object.getOwnPropertyNames,$N=Object.prototype.hasOwnProperty,qN=(e,t)=>Us(e,"name",{value:t,configurable:!0}),GN=(e,t)=>{for(var r in t)Us(e,r,{get:t[r],enumerable:!0})},VN=(e,t,r,n)=>{if(t&&typeof t=="object"||typeof t=="function")for(let o of jN(t))!$N.call(e,o)&&o!==r&&Us(e,o,{get:()=>t[o],enumerable:!(n=HN(t,o))||n.enumerable});return e},zN=e=>VN(Us({},"__esModule",{value:!0}),e),Qg={};GN(Qg,{isArrayBuffer:()=>WN});Zg.exports=zN(Qg);var WN=qN(e=>typeof ArrayBuffer=="function"&&e instanceof ArrayBuffer||Object.prototype.toString.call(e)==="[object ArrayBuffer]","isArrayBuffer")});var Vr=w((n9,rh)=>{c();var Hs=Object.defineProperty,KN=Object.getOwnPropertyDescriptor,YN=Object.getOwnPropertyNames,JN=Object.prototype.hasOwnProperty,eh=(e,t)=>Hs(e,"name",{value:t,configurable:!0}),XN=(e,t)=>{for(var r in t)Hs(e,r,{get:t[r],enumerable:!0})},QN=(e,t,r,n)=>{if(t&&typeof t=="object"||typeof t=="function")for(let o of YN(t))!JN.call(e,o)&&o!==r&&Hs(e,o,{get:()=>t[o],enumerable:!(n=KN(t,o))||n.enumerable});return e},ZN=e=>QN(Hs({},"__esModule",{value:!0}),e),th={};XN(th,{fromArrayBuffer:()=>tk,fromString:()=>rk});rh.exports=ZN(th);var ek=Ul(),Hl=F("buffer"),tk=eh((e,t=0,r=e.byteLength-t)=>{if(!(0,ek.isArrayBuffer)(e))throw new TypeError(`The "input" argument must be ArrayBuffer. Received type ${typeof e} (${e})`);return Hl.Buffer.from(e,t,r)},"fromArrayBuffer"),rk=eh((e,t)=>{if(typeof e!="string")throw new TypeError(`The "input" argument must be of type string. Received type ${typeof e} (${e})`);return t?Hl.Buffer.from(e,t):Hl.Buffer.from(e)},"fromString")});var nh=w(js=>{"use strict";c();Object.defineProperty(js,"__esModule",{value:!0});js.fromBase64=void 0;var nk=Vr(),ok=/^[A-Za-z0-9+/]*={0,2}$/,sk=e=>{if(e.length*3%4!==0)throw new TypeError("Incorrect padding on base64 string.");if(!ok.exec(e))throw new TypeError("Invalid base64 string.");let t=(0,nk.fromString)(e,"base64");return new Uint8Array(t.buffer,t.byteOffset,t.byteLength)};js.fromBase64=sk});var ie=w((a9,ah)=>{c();var $s=Object.defineProperty,ik=Object.getOwnPropertyDescriptor,ak=Object.getOwnPropertyNames,ck=Object.prototype.hasOwnProperty,jl=(e,t)=>$s(e,"name",{value:t,configurable:!0}),lk=(e,t)=>{for(var r in t)$s(e,r,{get:t[r],enumerable:!0})},dk=(e,t,r,n)=>{if(t&&typeof t=="object"||typeof t=="function")for(let o of ak(t))!ck.call(e,o)&&o!==r&&$s(e,o,{get:()=>t[o],enumerable:!(n=ik(t,o))||n.enumerable});return e},uk=e=>dk($s({},"__esModule",{value:!0}),e),oh={};lk(oh,{fromUtf8:()=>ih,toUint8Array:()=>pk,toUtf8:()=>fk});ah.exports=uk(oh);var sh=Vr(),ih=jl(e=>{let t=(0,sh.fromString)(e,"utf8");return new Uint8Array(t.buffer,t.byteOffset,t.byteLength/Uint8Array.BYTES_PER_ELEMENT)},"fromUtf8"),pk=jl(e=>typeof e=="string"?ih(e):ArrayBuffer.isView(e)?new Uint8Array(e.buffer,e.byteOffset,e.byteLength/Uint8Array.BYTES_PER_ELEMENT):new Uint8Array(e),"toUint8Array"),fk=jl(e=>{if(typeof e=="string")return e;if(typeof e!="object"||typeof e.byteOffset!="number"||typeof e.byteLength!="number")throw new Error("@smithy/util-utf8: toUtf8 encoder function only accepts string | Uint8Array.");return(0,sh.fromArrayBuffer)(e.buffer,e.byteOffset,e.byteLength).toString("utf8")},"toUtf8")});var ch=w(qs=>{"use strict";c();Object.defineProperty(qs,"__esModule",{value:!0});qs.toBase64=void 0;var mk=Vr(),gk=ie(),hk=e=>{let t;if(typeof e=="string"?t=(0,gk.fromUtf8)(e):t=e,typeof t!="object"||typeof t.byteOffset!="number"||typeof t.byteLength!="number")throw new Error("@smithy/util-base64: toBase64 encoder function only accepts string | Uint8Array.");return(0,mk.fromArrayBuffer)(t.buffer,t.byteOffset,t.byteLength).toString("base64")};qs.toBase64=hk});var ge=w((u9,Gs)=>{c();var lh=Object.defineProperty,yk=Object.getOwnPropertyDescriptor,_k=Object.getOwnPropertyNames,vk=Object.prototype.hasOwnProperty,$l=(e,t,r,n)=>{if(t&&typeof t=="object"||typeof t=="function")for(let o of _k(t))!vk.call(e,o)&&o!==r&&lh(e,o,{get:()=>t[o],enumerable:!(n=yk(t,o))||n.enumerable});return e},dh=(e,t,r)=>($l(e,t,"default"),r&&$l(r,t,"default")),Sk=e=>$l(lh({},"__esModule",{value:!0}),e),ql={};Gs.exports=Sk(ql);dh(ql,nh(),Gs.exports);dh(ql,ch(),Gs.exports)});var Vl=w(Vs=>{"use strict";c();Object.defineProperty(Vs,"__esModule",{value:!0});Vs.ChecksumStream=void 0;var Ek=ge(),wk=F("stream"),Gl=class extends wk.Duplex{constructor({expectedChecksum:t,checksum:r,source:n,checksumSourceLocation:o,base64Encoder:s}){var i,a;if(super(),typeof n.pipe=="function")this.source=n;else throw new Error(`@smithy/util-stream: unsupported source type ${(a=(i=n?.constructor)===null||i===void 0?void 0:i.name)!==null&&a!==void 0?a:n} in ChecksumStream.`);this.base64Encoder=s??Ek.toBase64,this.expectedChecksum=t,this.checksum=r,this.checksumSourceLocation=o,this.source.pipe(this)}_read(t){}_write(t,r,n){try{this.checksum.update(t),this.push(t)}catch(o){return n(o)}return n()}async _final(t){try{let r=await this.checksum.digest(),n=this.base64Encoder(r);if(this.expectedChecksum!==n)return t(new Error(`Checksum mismatch: expected "${this.expectedChecksum}" but received "${n}" in response header "${this.checksumSourceLocation}".`))}catch(r){return t(r)}return this.push(null),t()}};Vs.ChecksumStream=Gl});var Ut=w(zr=>{"use strict";c();Object.defineProperty(zr,"__esModule",{value:!0});zr.isBlob=zr.isReadableStream=void 0;var bk=e=>{var t;return typeof ReadableStream=="function"&&(((t=e?.constructor)===null||t===void 0?void 0:t.name)===ReadableStream.name||e instanceof ReadableStream)};zr.isReadableStream=bk;var Ck=e=>{var t;return typeof Blob=="function"&&(((t=e?.constructor)===null||t===void 0?void 0:t.name)===Blob.name||e instanceof Blob)};zr.isBlob=Ck});var uh=w(zs=>{"use strict";c();Object.defineProperty(zs,"__esModule",{value:!0});zs.ChecksumStream=void 0;var xk=typeof ReadableStream=="function"?ReadableStream:function(){},zl=class extends xk{};zs.ChecksumStream=zl});var ph=w(Ws=>{"use strict";c();Object.defineProperty(Ws,"__esModule",{value:!0});Ws.createChecksumStream=void 0;var Pk=ge(),Ak=Ut(),Tk=uh(),Ok=({expectedChecksum:e,checksum:t,source:r,checksumSourceLocation:n,base64Encoder:o})=>{var s,i;if(!(0,Ak.isReadableStream)(r))throw new Error(`@smithy/util-stream: unsupported source type ${(i=(s=r?.constructor)===null||s===void 0?void 0:s.name)!==null&&i!==void 0?i:r} in ChecksumStream.`);let a=o??Pk.toBase64;if(typeof TransformStream!="function")throw new Error("@smithy/util-stream: unable to instantiate ChecksumStream because API unavailable: ReadableStream/TransformStream.");let l=new TransformStream({start(){},async transform(u,f){t.update(u),f.enqueue(u)},async flush(u){let f=await t.digest(),g=a(f);if(e!==g){let h=new Error(`Checksum mismatch: expected "${e}" but received "${g}" in response header "${n}".`);u.error(h)}else u.terminate()}});r.pipeThrough(l);let d=l.readable;return Object.setPrototypeOf(d,Tk.ChecksumStream.prototype),d};Ws.createChecksumStream=Ok});var fh=w(Wl=>{"use strict";c();Object.defineProperty(Wl,"__esModule",{value:!0});Wl.createChecksumStream=kk;var Rk=Ut(),Ik=Vl(),Nk=ph();function kk(e){return typeof ReadableStream=="function"&&(0,Rk.isReadableStream)(e.source)?(0,Nk.createChecksumStream)(e):new Ik.ChecksumStream(e)}});var Yl=w(Ks=>{"use strict";c();Object.defineProperty(Ks,"__esModule",{value:!0});Ks.ByteArrayCollector=void 0;var Kl=class{constructor(t){this.allocByteArray=t,this.byteLength=0,this.byteArrays=[]}push(t){this.byteArrays.push(t),this.byteLength+=t.byteLength}flush(){if(this.byteArrays.length===1){let n=this.byteArrays[0];return this.reset(),n}let t=this.allocByteArray(this.byteLength),r=0;for(let n=0;n<this.byteArrays.length;++n){let o=this.byteArrays[n];t.set(o,r),r+=o.byteLength}return this.reset(),t}reset(){this.byteArrays=[],this.byteLength=0}};Ks.ByteArrayCollector=Kl});var yh=w(yt=>{"use strict";c();Object.defineProperty(yt,"__esModule",{value:!0});yt.createBufferedReadable=void 0;yt.createBufferedReadableStream=mh;yt.merge=gh;yt.flush=Ys;yt.sizeOf=Wr;yt.modeOf=hh;var Dk=Yl();function mh(e,t,r){let n=e.getReader(),o=!1,s=0,i=["",new Dk.ByteArrayCollector(d=>new Uint8Array(d))],a=-1,l=async d=>{let{value:u,done:f}=await n.read(),g=u;if(f){if(a!==-1){let h=Ys(i,a);Wr(h)>0&&d.enqueue(h)}d.close()}else{let h=hh(g,!1);if(a!==h&&(a>=0&&d.enqueue(Ys(i,a)),a=h),a===-1){d.enqueue(g);return}let _=Wr(g);s+=_;let v=Wr(i[a]);if(_>=t&&v===0)d.enqueue(g);else{let S=gh(i,a,g);!o&&s>t*2&&(o=!0,r?.warn(`@smithy/util-stream - stream chunk size ${_} is below threshold of ${t}, automatically buffering.`)),S>=t?d.enqueue(Ys(i,a)):await l(d)}}};return new ReadableStream({pull:l})}yt.createBufferedReadable=mh;function gh(e,t,r){switch(t){case 0:return e[0]+=r,Wr(e[0]);case 1:case 2:return e[t].push(r),Wr(e[t])}}function Ys(e,t){switch(t){case 0:let r=e[0];return e[0]="",r;case 1:case 2:return e[t].flush()}throw new Error(`@smithy/util-stream - invalid index ${t} given to flush()`)}function Wr(e){var t,r;return(r=(t=e?.byteLength)!==null&&t!==void 0?t:e?.length)!==null&&r!==void 0?r:0}function hh(e,t=!0){return t&&typeof Buffer<"u"&&e instanceof Buffer?2:e instanceof Uint8Array?1:typeof e=="string"?0:-1}});var vh=w(Jl=>{"use strict";c();Object.defineProperty(Jl,"__esModule",{value:!0});Jl.createBufferedReadable=Bk;var Mk=F("node:stream"),_h=Yl(),_t=yh(),Fk=Ut();function Bk(e,t,r){if((0,Fk.isReadableStream)(e))return(0,_t.createBufferedReadableStream)(e,t,r);let n=new Mk.Readable({read(){}}),o=!1,s=0,i=["",new _h.ByteArrayCollector(l=>new Uint8Array(l)),new _h.ByteArrayCollector(l=>Buffer.from(new Uint8Array(l)))],a=-1;return e.on("data",l=>{let d=(0,_t.modeOf)(l,!0);if(a!==d&&(a>=0&&n.push((0,_t.flush)(i,a)),a=d),a===-1){n.push(l);return}let u=(0,_t.sizeOf)(l);s+=u;let f=(0,_t.sizeOf)(i[a]);if(u>=t&&f===0)n.push(l);else{let g=(0,_t.merge)(i,a,l);!o&&s>t*2&&(o=!0,r?.warn(`@smithy/util-stream - stream chunk size ${u} is below threshold of ${t}, automatically buffering.`)),g>=t&&n.push((0,_t.flush)(i,a))}}),e.on("end",()=>{if(a!==-1){let l=(0,_t.flush)(i,a);(0,_t.sizeOf)(l)>0&&n.push(l)}n.push(null)}),n}});var Sh=w(Js=>{"use strict";c();Object.defineProperty(Js,"__esModule",{value:!0});Js.getAwsChunkedEncodingStream=void 0;var Lk=F("stream"),Uk=(e,t)=>{let{base64Encoder:r,bodyLengthChecker:n,checksumAlgorithmFn:o,checksumLocationName:s,streamHasher:i}=t,a=r!==void 0&&o!==void 0&&s!==void 0&&i!==void 0,l=a?i(o,e):void 0,d=new Lk.Readable({read:()=>{}});return e.on("data",u=>{let f=n(u)||0;d.push(`${f.toString(16)}\r
`),d.push(u),d.push(`\r
`)}),e.on("end",async()=>{if(d.push(`0\r
`),a){let u=r(await l);d.push(`${s}:${u}\r
`),d.push(`\r
`)}d.push(null)}),d};Js.getAwsChunkedEncodingStream=Uk});var Eh=w(Xl=>{"use strict";c();Object.defineProperty(Xl,"__esModule",{value:!0});Xl.headStream=Hk;async function Hk(e,t){var r;let n=0,o=[],s=e.getReader(),i=!1;for(;!i;){let{done:d,value:u}=await s.read();if(u&&(o.push(u),n+=(r=u?.byteLength)!==null&&r!==void 0?r:0),n>=t)break;i=d}s.releaseLock();let a=new Uint8Array(Math.min(t,n)),l=0;for(let d of o){if(d.byteLength>a.byteLength-l){a.set(d.subarray(0,a.byteLength-l),l);break}else a.set(d,l);l+=d.length}return a}});var wh=w(Xs=>{"use strict";c();Object.defineProperty(Xs,"__esModule",{value:!0});Xs.headStream=void 0;var jk=F("stream"),$k=Eh(),qk=Ut(),Gk=(e,t)=>(0,qk.isReadableStream)(e)?(0,$k.headStream)(e,t):new Promise((r,n)=>{let o=new Ql;o.limit=t,e.pipe(o),e.on("error",s=>{o.end(),n(s)}),o.on("error",n),o.on("finish",function(){let s=new Uint8Array(Buffer.concat(this.buffers));r(s)})});Xs.headStream=Gk;var Ql=class extends jk.Writable{constructor(){super(...arguments),this.buffers=[],this.limit=1/0,this.bytesBuffered=0}_write(t,r,n){var o;if(this.buffers.push(t),this.bytesBuffered+=(o=t.byteLength)!==null&&o!==void 0?o:0,this.bytesBuffered>=this.limit){let s=this.bytesBuffered-this.limit,i=this.buffers[this.buffers.length-1];this.buffers[this.buffers.length-1]=i.subarray(0,i.byteLength-s),this.emit("finish")}n()}}});var ed=w((M9,xh)=>{c();var Qs=Object.defineProperty,Vk=Object.getOwnPropertyDescriptor,zk=Object.getOwnPropertyNames,Wk=Object.prototype.hasOwnProperty,Zl=(e,t)=>Qs(e,"name",{value:t,configurable:!0}),Kk=(e,t)=>{for(var r in t)Qs(e,r,{get:t[r],enumerable:!0})},Yk=(e,t,r,n)=>{if(t&&typeof t=="object"||typeof t=="function")for(let o of zk(t))!Wk.call(e,o)&&o!==r&&Qs(e,o,{get:()=>t[o],enumerable:!(n=Vk(t,o))||n.enumerable});return e},Jk=e=>Yk(Qs({},"__esModule",{value:!0}),e),bh={};Kk(bh,{escapeUri:()=>Ch,escapeUriPath:()=>Qk});xh.exports=Jk(bh);var Ch=Zl(e=>encodeURIComponent(e).replace(/[!'()*]/g,Xk),"escapeUri"),Xk=Zl(e=>`%${e.charCodeAt(0).toString(16).toUpperCase()}`,"hexEncode"),Qk=Zl(e=>e.split("/").map(Ch).join("/"),"escapeUriPath")});var ei=w((B9,Th)=>{c();var Zs=Object.defineProperty,Zk=Object.getOwnPropertyDescriptor,eD=Object.getOwnPropertyNames,tD=Object.prototype.hasOwnProperty,rD=(e,t)=>Zs(e,"name",{value:t,configurable:!0}),nD=(e,t)=>{for(var r in t)Zs(e,r,{get:t[r],enumerable:!0})},oD=(e,t,r,n)=>{if(t&&typeof t=="object"||typeof t=="function")for(let o of eD(t))!tD.call(e,o)&&o!==r&&Zs(e,o,{get:()=>t[o],enumerable:!(n=Zk(t,o))||n.enumerable});return e},sD=e=>oD(Zs({},"__esModule",{value:!0}),e),Ph={};nD(Ph,{buildQueryString:()=>Ah});Th.exports=sD(Ph);var td=ed();function Ah(e){let t=[];for(let r of Object.keys(e).sort()){let n=e[r];if(r=(0,td.escapeUri)(r),Array.isArray(n))for(let o=0,s=n.length;o<s;o++)t.push(`${r}=${(0,td.escapeUri)(n[o])}`);else{let o=r;(n||typeof n=="string")&&(o+=`=${(0,td.escapeUri)(n)}`),t.push(o)}}return t.join("&")}rD(Ah,"buildQueryString")});var mr=w((U9,qh)=>{c();var iD=Object.create,Gn=Object.defineProperty,aD=Object.getOwnPropertyDescriptor,cD=Object.getOwnPropertyNames,lD=Object.getPrototypeOf,dD=Object.prototype.hasOwnProperty,G=(e,t)=>Gn(e,"name",{value:t,configurable:!0}),uD=(e,t)=>{for(var r in t)Gn(e,r,{get:t[r],enumerable:!0})},kh=(e,t,r,n)=>{if(t&&typeof t=="object"||typeof t=="function")for(let o of cD(t))!dD.call(e,o)&&o!==r&&Gn(e,o,{get:()=>t[o],enumerable:!(n=aD(t,o))||n.enumerable});return e},pD=(e,t,r)=>(r=e!=null?iD(lD(e)):{},kh(t||!e||!e.__esModule?Gn(r,"default",{value:e,enumerable:!0}):r,e)),fD=e=>kh(Gn({},"__esModule",{value:!0}),e),Dh={};uD(Dh,{DEFAULT_REQUEST_TIMEOUT:()=>Hh,NodeHttp2Handler:()=>bD,NodeHttpHandler:()=>vD,streamCollector:()=>xD});qh.exports=fD(Dh);var Mh=q(),Fh=ei(),rd=F("http"),nd=F("https"),mD=["ECONNRESET","EPIPE","ETIMEDOUT"],Bh=G(e=>{let t={};for(let r of Object.keys(e)){let n=e[r];t[r]=Array.isArray(n)?n.join(","):n}return t},"getTransformedHeaders"),Ee={setTimeout:(e,t)=>setTimeout(e,t),clearTimeout:e=>clearTimeout(e)},Oh=1e3,gD=G((e,t,r=0)=>{if(!r)return-1;let n=G(o=>{let s=Ee.setTimeout(()=>{e.destroy(),t(Object.assign(new Error(`Socket timed out without establishing a connection within ${r} ms`),{name:"TimeoutError"}))},r-o),i=G(a=>{a?.connecting?a.on("connect",()=>{Ee.clearTimeout(s)}):Ee.clearTimeout(s)},"doWithSocket");e.socket?i(e.socket):e.on("socket",i)},"registerTimeout");return r<2e3?(n(0),0):Ee.setTimeout(n.bind(null,Oh),Oh)},"setConnectionTimeout"),hD=3e3,yD=G((e,{keepAlive:t,keepAliveMsecs:r},n=hD)=>{if(t!==!0)return-1;let o=G(()=>{e.socket?e.socket.setKeepAlive(t,r||0):e.on("socket",s=>{s.setKeepAlive(t,r||0)})},"registerListener");return n===0?(o(),0):Ee.setTimeout(o,n)},"setSocketKeepAlive"),Rh=3e3,_D=G((e,t,r=Hh)=>{let n=G(o=>{let s=r-o,i=G(()=>{e.destroy(),t(Object.assign(new Error(`Connection timed out after ${r} ms`),{name:"TimeoutError"}))},"onTimeout");e.socket?(e.socket.setTimeout(s,i),e.on("close",()=>e.socket?.removeListener("timeout",i))):e.setTimeout(s,i)},"registerTimeout");return 0<r&&r<6e3?(n(0),0):Ee.setTimeout(n.bind(null,r===0?0:Rh),Rh)},"setSocketTimeout"),Lh=F("stream"),Ih=6e3;async function sd(e,t,r=Ih){let n=t.headers??{},o=n.Expect||n.expect,s=-1,i=!0;o==="100-continue"&&(i=await Promise.race([new Promise(a=>{s=Number(Ee.setTimeout(()=>a(!0),Math.max(Ih,r)))}),new Promise(a=>{e.on("continue",()=>{Ee.clearTimeout(s),a(!0)}),e.on("response",()=>{Ee.clearTimeout(s),a(!1)}),e.on("error",()=>{Ee.clearTimeout(s),a(!1)})})])),i&&Uh(e,t.body)}G(sd,"writeRequestBody");function Uh(e,t){if(t instanceof Lh.Readable){t.pipe(e);return}if(t){if(Buffer.isBuffer(t)||typeof t=="string"){e.end(t);return}let r=t;if(typeof r=="object"&&r.buffer&&typeof r.byteOffset=="number"&&typeof r.byteLength=="number"){e.end(Buffer.from(r.buffer,r.byteOffset,r.byteLength));return}e.end(Buffer.from(t));return}e.end()}G(Uh,"writeBody");var Hh=0,vD=class od{constructor(t){this.socketWarningTimestamp=0,this.metadata={handlerProtocol:"http/1.1"},this.configProvider=new Promise((r,n)=>{typeof t=="function"?t().then(o=>{r(this.resolveDefaultConfig(o))}).catch(n):r(this.resolveDefaultConfig(t))})}static{G(this,"NodeHttpHandler")}static create(t){return typeof t?.handle=="function"?t:new od(t)}static checkSocketUsage(t,r,n=console){let{sockets:o,requests:s,maxSockets:i}=t;if(typeof i!="number"||i===1/0||Date.now()-15e3<r)return r;if(o&&s)for(let l in o){let d=o[l]?.length??0,u=s[l]?.length??0;if(d>=i&&u>=2*i)return n?.warn?.(`@smithy/node-http-handler:WARN - socket usage at capacity=${d} and ${u} additional requests are enqueued.
See https://docs.aws.amazon.com/sdk-for-javascript/v3/developer-guide/node-configuring-maxsockets.html
or increase socketAcquisitionWarningTimeout=(millis) in the NodeHttpHandler config.`),Date.now()}return r}resolveDefaultConfig(t){let{requestTimeout:r,connectionTimeout:n,socketTimeout:o,socketAcquisitionWarningTimeout:s,httpAgent:i,httpsAgent:a}=t||{},l=!0,d=50;return{connectionTimeout:n,requestTimeout:r??o,socketAcquisitionWarningTimeout:s,httpAgent:i instanceof rd.Agent||typeof i?.destroy=="function"?i:new rd.Agent({keepAlive:l,maxSockets:d,...i}),httpsAgent:a instanceof nd.Agent||typeof a?.destroy=="function"?a:new nd.Agent({keepAlive:l,maxSockets:d,...a}),logger:console}}destroy(){this.config?.httpAgent?.destroy(),this.config?.httpsAgent?.destroy()}async handle(t,{abortSignal:r,requestTimeout:n}={}){return this.config||(this.config=await this.configProvider),new Promise((o,s)=>{let i,a=[],l=G(async T=>{await i,a.forEach(Ee.clearTimeout),o(T)},"resolve"),d=G(async T=>{await i,a.forEach(Ee.clearTimeout),s(T)},"reject");if(!this.config)throw new Error("Node HTTP request handler config is not resolved");if(r?.aborted){let T=new Error("Request aborted");T.name="AbortError",d(T);return}let u=t.protocol==="https:",f=u?this.config.httpsAgent:this.config.httpAgent;a.push(Ee.setTimeout(()=>{this.socketWarningTimestamp=od.checkSocketUsage(f,this.socketWarningTimestamp,this.config.logger)},this.config.socketAcquisitionWarningTimeout??(this.config.requestTimeout??2e3)+(this.config.connectionTimeout??1e3)));let g=(0,Fh.buildQueryString)(t.query||{}),h;if(t.username!=null||t.password!=null){let T=t.username??"",j=t.password??"";h=`${T}:${j}`}let _=t.path;g&&(_+=`?${g}`),t.fragment&&(_+=`#${t.fragment}`);let v=t.hostname??"";v[0]==="["&&v.endsWith("]")?v=t.hostname.slice(1,-1):v=t.hostname;let S={headers:t.headers,host:v,method:t.method,path:_,port:t.port,agent:f,auth:h},C=(u?nd.request:rd.request)(S,T=>{let j=new Mh.HttpResponse({statusCode:T.statusCode||-1,reason:T.statusMessage,headers:Bh(T.headers),body:T});l({response:j})});if(C.on("error",T=>{mD.includes(T.code)?d(Object.assign(T,{name:"TimeoutError"})):d(T)}),r){let T=G(()=>{C.destroy();let j=new Error("Request aborted");j.name="AbortError",d(j)},"onAbort");if(typeof r.addEventListener=="function"){let j=r;j.addEventListener("abort",T,{once:!0}),C.once("close",()=>j.removeEventListener("abort",T))}else r.onabort=T}let I=n??this.config.requestTimeout;a.push(gD(C,d,this.config.connectionTimeout)),a.push(_D(C,d,I));let R=S.agent;typeof R=="object"&&"keepAlive"in R&&a.push(yD(C,{keepAlive:R.keepAlive,keepAliveMsecs:R.keepAliveMsecs})),i=sd(C,t,I).catch(T=>(a.forEach(Ee.clearTimeout),s(T)))})}updateHttpClientConfig(t,r){this.config=void 0,this.configProvider=this.configProvider.then(n=>({...n,[t]:r}))}httpHandlerConfigs(){return this.config??{}}},Nh=F("http2"),SD=pD(F("http2")),ED=class{constructor(e){this.sessions=[],this.sessions=e??[]}static{G(this,"NodeHttp2ConnectionPool")}poll(){if(this.sessions.length>0)return this.sessions.shift()}offerLast(e){this.sessions.push(e)}contains(e){return this.sessions.includes(e)}remove(e){this.sessions=this.sessions.filter(t=>t!==e)}[Symbol.iterator](){return this.sessions[Symbol.iterator]()}destroy(e){for(let t of this.sessions)t===e&&(t.destroyed||t.destroy())}},wD=class{constructor(e){if(this.sessionCache=new Map,this.config=e,this.config.maxConcurrency&&this.config.maxConcurrency<=0)throw new RangeError("maxConcurrency must be greater than zero.")}static{G(this,"NodeHttp2ConnectionManager")}lease(e,t){let r=this.getUrlString(e),n=this.sessionCache.get(r);if(n){let a=n.poll();if(a&&!this.config.disableConcurrency)return a}let o=SD.default.connect(r);this.config.maxConcurrency&&o.settings({maxConcurrentStreams:this.config.maxConcurrency},a=>{if(a)throw new Error("Fail to set maxConcurrentStreams to "+this.config.maxConcurrency+"when creating new session for "+e.destination.toString())}),o.unref();let s=G(()=>{o.destroy(),this.deleteSession(r,o)},"destroySessionCb");o.on("goaway",s),o.on("error",s),o.on("frameError",s),o.on("close",()=>this.deleteSession(r,o)),t.requestTimeout&&o.setTimeout(t.requestTimeout,s);let i=this.sessionCache.get(r)||new ED;return i.offerLast(o),this.sessionCache.set(r,i),o}deleteSession(e,t){let r=this.sessionCache.get(e);r&&r.contains(t)&&(r.remove(t),this.sessionCache.set(e,r))}release(e,t){let r=this.getUrlString(e);this.sessionCache.get(r)?.offerLast(t)}destroy(){for(let[e,t]of this.sessionCache){for(let r of t)r.destroyed||r.destroy(),t.remove(r);this.sessionCache.delete(e)}}setMaxConcurrentStreams(e){if(e&&e<=0)throw new RangeError("maxConcurrentStreams must be greater than zero.");this.config.maxConcurrency=e}setDisableConcurrentStreams(e){this.config.disableConcurrency=e}getUrlString(e){return e.destination.toString()}},bD=class jh{constructor(t){this.metadata={handlerProtocol:"h2"},this.connectionManager=new wD({}),this.configProvider=new Promise((r,n)=>{typeof t=="function"?t().then(o=>{r(o||{})}).catch(n):r(t||{})})}static{G(this,"NodeHttp2Handler")}static create(t){return typeof t?.handle=="function"?t:new jh(t)}destroy(){this.connectionManager.destroy()}async handle(t,{abortSignal:r,requestTimeout:n}={}){this.config||(this.config=await this.configProvider,this.connectionManager.setDisableConcurrentStreams(this.config.disableConcurrentStreams||!1),this.config.maxConcurrentStreams&&this.connectionManager.setMaxConcurrentStreams(this.config.maxConcurrentStreams));let{requestTimeout:o,disableConcurrentStreams:s}=this.config,i=n??o;return new Promise((a,l)=>{let d=!1,u,f=G(async K=>{await u,a(K)},"resolve"),g=G(async K=>{await u,l(K)},"reject");if(r?.aborted){d=!0;let K=new Error("Request aborted");K.name="AbortError",g(K);return}let{hostname:h,method:_,port:v,protocol:S,query:b}=t,C="";if(t.username!=null||t.password!=null){let K=t.username??"",qe=t.password??"";C=`${K}:${qe}@`}let I=`${S}//${C}${h}${v?`:${v}`:""}`,R={destination:new URL(I)},T=this.connectionManager.lease(R,{requestTimeout:this.config?.sessionTimeout,disableConcurrentStreams:s||!1}),j=G(K=>{s&&this.destroySession(T),d=!0,g(K)},"rejectWithDestroy"),ht=(0,Fh.buildQueryString)(b||{}),se=t.path;ht&&(se+=`?${ht}`),t.fragment&&(se+=`#${t.fragment}`);let Re=T.request({...t.headers,[Nh.constants.HTTP2_HEADER_PATH]:se,[Nh.constants.HTTP2_HEADER_METHOD]:_});if(T.ref(),Re.on("response",K=>{let qe=new Mh.HttpResponse({statusCode:K[":status"]||-1,headers:Bh(K),body:Re});d=!0,f({response:qe}),s&&(T.close(),this.connectionManager.deleteSession(I,T))}),i&&Re.setTimeout(i,()=>{Re.close();let K=new Error(`Stream timed out because of no activity for ${i} ms`);K.name="TimeoutError",j(K)}),r){let K=G(()=>{Re.close();let qe=new Error("Request aborted");qe.name="AbortError",j(qe)},"onAbort");if(typeof r.addEventListener=="function"){let qe=r;qe.addEventListener("abort",K,{once:!0}),Re.once("close",()=>qe.removeEventListener("abort",K))}else r.onabort=K}Re.on("frameError",(K,qe,cI)=>{j(new Error(`Frame type id ${K} in stream id ${cI} has failed with code ${qe}.`))}),Re.on("error",j),Re.on("aborted",()=>{j(new Error(`HTTP/2 stream is abnormally aborted in mid-communication with result code ${Re.rstCode}.`))}),Re.on("close",()=>{T.unref(),s&&T.destroy(),d||j(new Error("Unexpected error: http2 request did not get a response"))}),u=sd(Re,t,i)})}updateHttpClientConfig(t,r){this.config=void 0,this.configProvider=this.configProvider.then(n=>({...n,[t]:r}))}httpHandlerConfigs(){return this.config??{}}destroySession(t){t.destroyed||t.destroy()}},CD=class extends Lh.Writable{constructor(){super(...arguments),this.bufferedBytes=[]}static{G(this,"Collector")}_write(e,t,r){this.bufferedBytes.push(e),r()}},xD=G(e=>PD(e)?$h(e):new Promise((t,r)=>{let n=new CD;e.pipe(n),e.on("error",o=>{n.end(),r(o)}),n.on("error",r),n.on("finish",function(){let o=new Uint8Array(Buffer.concat(this.bufferedBytes));t(o)})}),"streamCollector"),PD=G(e=>typeof ReadableStream=="function"&&e instanceof ReadableStream,"isReadableStreamInstance");async function $h(e){let t=[],r=e.getReader(),n=!1,o=0;for(;!n;){let{done:a,value:l}=await r.read();l&&(t.push(l),o+=l.length),n=a}let s=new Uint8Array(o),i=0;for(let a of t)s.set(a,i),i+=a.length;return s}G($h,"collectReadableStream")});var ad=w((G9,Xh)=>{c();var ri=Object.defineProperty,AD=Object.getOwnPropertyDescriptor,TD=Object.getOwnPropertyNames,OD=Object.prototype.hasOwnProperty,Xe=(e,t)=>ri(e,"name",{value:t,configurable:!0}),RD=(e,t)=>{for(var r in t)ri(e,r,{get:t[r],enumerable:!0})},ID=(e,t,r,n)=>{if(t&&typeof t=="object"||typeof t=="function")for(let o of TD(t))!OD.call(e,o)&&o!==r&&ri(e,o,{get:()=>t[o],enumerable:!(n=AD(t,o))||n.enumerable});return e},ND=e=>ID(ri({},"__esModule",{value:!0}),e),Vh={};RD(Vh,{FetchHttpHandler:()=>DD,keepAliveSupport:()=>ti,streamCollector:()=>FD});Xh.exports=ND(Vh);var Gh=q(),kD=ei();function id(e,t){return new Request(e,t)}Xe(id,"createRequest");function zh(e=0){return new Promise((t,r)=>{e&&setTimeout(()=>{let n=new Error(`Request did not complete within ${e} ms`);n.name="TimeoutError",r(n)},e)})}Xe(zh,"requestTimeout");var ti={supported:void 0},DD=class Wh{static{Xe(this,"FetchHttpHandler")}static create(t){return typeof t?.handle=="function"?t:new Wh(t)}constructor(t){typeof t=="function"?this.configProvider=t().then(r=>r||{}):(this.config=t??{},this.configProvider=Promise.resolve(this.config)),ti.supported===void 0&&(ti.supported=typeof Request<"u"&&"keepalive"in id("https://[::1]"))}destroy(){}async handle(t,{abortSignal:r,requestTimeout:n}={}){this.config||(this.config=await this.configProvider);let o=n??this.config.requestTimeout,s=this.config.keepAlive===!0,i=this.config.credentials;if(r?.aborted){let C=new Error("Request aborted");return C.name="AbortError",Promise.reject(C)}let a=t.path,l=(0,kD.buildQueryString)(t.query||{});l&&(a+=`?${l}`),t.fragment&&(a+=`#${t.fragment}`);let d="";if(t.username!=null||t.password!=null){let C=t.username??"",I=t.password??"";d=`${C}:${I}@`}let{port:u,method:f}=t,g=`${t.protocol}//${d}${t.hostname}${u?`:${u}`:""}${a}`,h=f==="GET"||f==="HEAD"?void 0:t.body,_={body:h,headers:new Headers(t.headers),method:f,credentials:i};this.config?.cache&&(_.cache=this.config.cache),h&&(_.duplex="half"),typeof AbortController<"u"&&(_.signal=r),ti.supported&&(_.keepalive=s),typeof this.config.requestInit=="function"&&Object.assign(_,this.config.requestInit(t));let v=Xe(()=>{},"removeSignalEventListener"),S=id(g,_),b=[fetch(S).then(C=>{let I=C.headers,R={};for(let j of I.entries())R[j[0]]=j[1];return C.body!=null?{response:new Gh.HttpResponse({headers:R,reason:C.statusText,statusCode:C.status,body:C.body})}:C.blob().then(j=>({response:new Gh.HttpResponse({headers:R,reason:C.statusText,statusCode:C.status,body:j})}))}),zh(o)];return r&&b.push(new Promise((C,I)=>{let R=Xe(()=>{let T=new Error("Request aborted");T.name="AbortError",I(T)},"onAbort");if(typeof r.addEventListener=="function"){let T=r;T.addEventListener("abort",R,{once:!0}),v=Xe(()=>T.removeEventListener("abort",R),"removeSignalEventListener")}else r.onabort=R})),Promise.race(b).finally(v)}updateHttpClientConfig(t,r){this.config=void 0,this.configProvider=this.configProvider.then(n=>(n[t]=r,n))}httpHandlerConfigs(){return this.config??{}}},MD=ge(),FD=Xe(async e=>typeof Blob=="function"&&e instanceof Blob||e.constructor?.name==="Blob"?Blob.prototype.arrayBuffer!==void 0?new Uint8Array(await e.arrayBuffer()):Kh(e):Yh(e),"streamCollector");async function Kh(e){let t=await Jh(e),r=(0,MD.fromBase64)(t);return new Uint8Array(r)}Xe(Kh,"collectBlob");async function Yh(e){let t=[],r=e.getReader(),n=!1,o=0;for(;!n;){let{done:a,value:l}=await r.read();l&&(t.push(l),o+=l.length),n=a}let s=new Uint8Array(o),i=0;for(let a of t)s.set(a,i),i+=a.length;return s}Xe(Yh,"collectStream");function Jh(e){return new Promise((t,r)=>{let n=new FileReader;n.onloadend=()=>{if(n.readyState!==2)return r(new Error("Reader aborted too early"));let o=n.result??"",s=o.indexOf(","),i=s>-1?s+1:o.length;t(o.substring(i))},n.onabort=()=>r(new Error("Read aborted")),n.onerror=()=>r(n.error),n.readAsDataURL(e)})}Xe(Jh,"readToBase64")});var Vn=w((z9,ny)=>{c();var ni=Object.defineProperty,BD=Object.getOwnPropertyDescriptor,LD=Object.getOwnPropertyNames,UD=Object.prototype.hasOwnProperty,Qh=(e,t)=>ni(e,"name",{value:t,configurable:!0}),HD=(e,t)=>{for(var r in t)ni(e,r,{get:t[r],enumerable:!0})},jD=(e,t,r,n)=>{if(t&&typeof t=="object"||typeof t=="function")for(let o of LD(t))!UD.call(e,o)&&o!==r&&ni(e,o,{get:()=>t[o],enumerable:!(n=BD(t,o))||n.enumerable});return e},$D=e=>jD(ni({},"__esModule",{value:!0}),e),Zh={};HD(Zh,{fromHex:()=>ty,toHex:()=>ry});ny.exports=$D(Zh);var ey={},cd={};for(let e=0;e<256;e++){let t=e.toString(16).toLowerCase();t.length===1&&(t=`0${t}`),ey[e]=t,cd[t]=e}function ty(e){if(e.length%2!==0)throw new Error("Hex encoded strings must have an even number length");let t=new Uint8Array(e.length/2);for(let r=0;r<e.length;r+=2){let n=e.slice(r,r+2).toLowerCase();if(n in cd)t[r/2]=cd[n];else throw new Error(`Cannot decode unrecognized sequence ${n} as hexadecimal`)}return t}Qh(ty,"fromHex");function ry(e){let t="";for(let r=0;r<e.byteLength;r++)t+=ey[e[r]];return t}Qh(ry,"toHex")});var ay=w(oi=>{"use strict";c();Object.defineProperty(oi,"__esModule",{value:!0});oi.sdkStreamMixin=void 0;var qD=ad(),GD=ge(),VD=Vn(),zD=ie(),oy=Ut(),sy="The stream has already been transformed.",WD=e=>{var t,r;if(!iy(e)&&!(0,oy.isReadableStream)(e)){let i=((r=(t=e?.__proto__)===null||t===void 0?void 0:t.constructor)===null||r===void 0?void 0:r.name)||e;throw new Error(`Unexpected stream implementation, expect Blob or ReadableStream, got ${i}`)}let n=!1,o=async()=>{if(n)throw new Error(sy);return n=!0,await(0,qD.streamCollector)(e)},s=i=>{if(typeof i.stream!="function")throw new Error(`Cannot transform payload Blob to web stream. Please make sure the Blob.stream() is polyfilled.
If you are using React Native, this API is not yet supported, see: https://react-native.canny.io/feature-requests/p/fetch-streaming-body`);return i.stream()};return Object.assign(e,{transformToByteArray:o,transformToString:async i=>{let a=await o();if(i==="base64")return(0,GD.toBase64)(a);if(i==="hex")return(0,VD.toHex)(a);if(i===void 0||i==="utf8"||i==="utf-8")return(0,zD.toUtf8)(a);if(typeof TextDecoder=="function")return new TextDecoder(i).decode(a);throw new Error("TextDecoder is not available, please make sure polyfill is provided.")},transformToWebStream:()=>{if(n)throw new Error(sy);if(n=!0,iy(e))return s(e);if((0,oy.isReadableStream)(e))return e;throw new Error(`Cannot transform payload to web stream, got ${e}`)}})};oi.sdkStreamMixin=WD;var iy=e=>typeof Blob=="function"&&e instanceof Blob});var ly=w(si=>{"use strict";c();Object.defineProperty(si,"__esModule",{value:!0});si.sdkStreamMixin=void 0;var KD=mr(),YD=Vr(),ld=F("stream"),JD=ay(),cy="The stream has already been transformed.",XD=e=>{var t,r;if(!(e instanceof ld.Readable))try{return(0,JD.sdkStreamMixin)(e)}catch{let i=((r=(t=e?.__proto__)===null||t===void 0?void 0:t.constructor)===null||r===void 0?void 0:r.name)||e;throw new Error(`Unexpected stream implementation, expect Stream.Readable instance, got ${i}`)}let n=!1,o=async()=>{if(n)throw new Error(cy);return n=!0,await(0,KD.streamCollector)(e)};return Object.assign(e,{transformToByteArray:o,transformToString:async s=>{let i=await o();return s===void 0||Buffer.isEncoding(s)?(0,YD.fromArrayBuffer)(i.buffer,i.byteOffset,i.byteLength).toString(s):new TextDecoder(s).decode(i)},transformToWebStream:()=>{if(n)throw new Error(cy);if(e.readableFlowing!==null)throw new Error("The stream has been consumed by other callbacks.");if(typeof ld.Readable.toWeb!="function")throw new Error("Readable.toWeb() is not supported. Please ensure a polyfill is available.");return n=!0,ld.Readable.toWeb(e)}})};si.sdkStreamMixin=XD});var dy=w(dd=>{"use strict";c();Object.defineProperty(dd,"__esModule",{value:!0});dd.splitStream=QD;async function QD(e){return typeof e.stream=="function"&&(e=e.stream()),e.tee()}});var fy=w(ud=>{"use strict";c();Object.defineProperty(ud,"__esModule",{value:!0});ud.splitStream=eM;var uy=F("stream"),ZD=dy(),py=Ut();async function eM(e){if((0,py.isReadableStream)(e)||(0,py.isBlob)(e))return(0,ZD.splitStream)(e);let t=new uy.PassThrough,r=new uy.PassThrough;return e.pipe(t),e.pipe(r),[t,r]}});var ai=w((rY,Ze)=>{c();var ii=Object.defineProperty,tM=Object.getOwnPropertyDescriptor,rM=Object.getOwnPropertyNames,nM=Object.prototype.hasOwnProperty,md=(e,t)=>ii(e,"name",{value:t,configurable:!0}),oM=(e,t)=>{for(var r in t)ii(e,r,{get:t[r],enumerable:!0})},pd=(e,t,r,n)=>{if(t&&typeof t=="object"||typeof t=="function")for(let o of rM(t))!nM.call(e,o)&&o!==r&&ii(e,o,{get:()=>t[o],enumerable:!(n=tM(t,o))||n.enumerable});return e},Ht=(e,t,r)=>(pd(e,t,"default"),r&&pd(r,t,"default")),sM=e=>pd(ii({},"__esModule",{value:!0}),e),Qe={};oM(Qe,{Uint8ArrayBlobAdapter:()=>fd});Ze.exports=sM(Qe);var my=ge(),gy=ie();function hy(e,t="utf-8"){return t==="base64"?(0,my.toBase64)(e):(0,gy.toUtf8)(e)}md(hy,"transformToString");function yy(e,t){return t==="base64"?fd.mutate((0,my.fromBase64)(e)):fd.mutate((0,gy.fromUtf8)(e))}md(yy,"transformFromString");var fd=class _y extends Uint8Array{static{md(this,"Uint8ArrayBlobAdapter")}static fromString(t,r="utf-8"){switch(typeof t){case"string":return yy(t,r);default:throw new Error(`Unsupported conversion from ${typeof t} to Uint8ArrayBlobAdapter.`)}}static mutate(t){return Object.setPrototypeOf(t,_y.prototype),t}transformToString(t="utf-8"){return hy(this,t)}};Ht(Qe,Vl(),Ze.exports);Ht(Qe,fh(),Ze.exports);Ht(Qe,vh(),Ze.exports);Ht(Qe,Sh(),Ze.exports);Ht(Qe,wh(),Ze.exports);Ht(Qe,ly(),Ze.exports);Ht(Qe,fy(),Ze.exports);Ht(Qe,Ut(),Ze.exports)});var ci,Ie,zn=y(()=>{c();ci=E(ai()),Ie=async(e=new Uint8Array,t)=>{if(e instanceof Uint8Array)return ci.Uint8ArrayBlobAdapter.mutate(e);if(!e)return ci.Uint8ArrayBlobAdapter.mutate(new Uint8Array);let r=t.streamCollector(e);return ci.Uint8ArrayBlobAdapter.mutate(await r)}});function et(e){return encodeURIComponent(e).replace(/[!'()*]/g,function(t){return"%"+t.charCodeAt(0).toString(16).toUpperCase()})}var li=y(()=>{c()});var vt,gd=y(()=>{c();vt=e=>typeof e=="function"?e():e});var vy=y(()=>{c()});var he,Sy=y(()=>{c();he=class e{constructor(t,r=new Map){this.namespace=t,this.schemas=r}static for(t){return e.registries.has(t)||e.registries.set(t,new e(t)),e.registries.get(t)}register(t,r){let n=this.normalizeShapeId(t);e.for(this.getNamespace(t)).schemas.set(n,r)}getSchema(t){let r=this.normalizeShapeId(t);if(!this.schemas.has(r))throw new Error(`@smithy/core/schema - schema not found for ${r}`);return this.schemas.get(r)}getBaseException(){for(let[t,r]of this.schemas.entries())if(t.startsWith("smithy.ts.sdk.synthetic.")&&t.endsWith("ServiceException"))return r}find(t){return[...this.schemas.values()].find(t)}destroy(){e.registries.delete(this.namespace),this.schemas.clear()}normalizeShapeId(t){return t.includes("#")?t:this.namespace+"#"+t}getNamespace(t){return this.normalizeShapeId(t).split("#")[0]}};he.registries=new Map});var tt,Kr=y(()=>{c();tt=class{constructor(t,r){this.name=t,this.traits=r}}});var Wn,hd=y(()=>{c();Kr();Wn=class e extends tt{constructor(t,r,n){super(t,r),this.name=t,this.traits=r,this.valueSchema=n,this.symbol=e.symbol}static[Symbol.hasInstance](t){let r=e.prototype.isPrototypeOf(t);return!r&&typeof t=="object"&&t!==null?t.symbol===e.symbol:r}};Wn.symbol=Symbol.for("@smithy/core/schema::ListSchema")});var Kn,yd=y(()=>{c();Kr();Kn=class e extends tt{constructor(t,r,n,o){super(t,r),this.name=t,this.traits=r,this.keySchema=n,this.valueSchema=o,this.symbol=e.symbol}static[Symbol.hasInstance](t){let r=e.prototype.isPrototypeOf(t);return!r&&typeof t=="object"&&t!==null?t.symbol===e.symbol:r}};Kn.symbol=Symbol.for("@smithy/core/schema::MapSchema")});var Ey=y(()=>{c()});var gr,di=y(()=>{c();Kr();gr=class e extends tt{constructor(t,r,n,o){super(t,r),this.name=t,this.traits=r,this.memberNames=n,this.memberList=o,this.symbol=e.symbol,this.members={};for(let s=0;s<n.length;++s)this.members[n[s]]=Array.isArray(o[s])?o[s]:[o[s],0]}static[Symbol.hasInstance](t){let r=e.prototype.isPrototypeOf(t);return!r&&typeof t=="object"&&t!==null?t.symbol===e.symbol:r}};gr.symbol=Symbol.for("@smithy/core/schema::StructureSchema")});var _d,wy=y(()=>{c();di();_d=class e extends gr{constructor(t,r,n,o,s){super(t,r,n,o),this.name=t,this.traits=r,this.memberNames=n,this.memberList=o,this.ctor=s,this.symbol=e.symbol}static[Symbol.hasInstance](t){let r=e.prototype.isPrototypeOf(t);return!r&&typeof t=="object"&&t!==null?t.symbol===e.symbol:r}};_d.symbol=Symbol.for("@smithy/core/schema::ErrorSchema")});var P,vd=y(()=>{c();P={BLOB:21,STREAMING_BLOB:42,BOOLEAN:2,STRING:0,NUMERIC:1,BIG_INTEGER:17,BIG_DECIMAL:19,DOCUMENT:15,TIMESTAMP_DEFAULT:4,TIMESTAMP_DATE_TIME:5,TIMESTAMP_HTTP_DATE:6,TIMESTAMP_EPOCH_SECONDS:7,LIST_MODIFIER:64,MAP_MODIFIER:128}});var Yn,Sd=y(()=>{c();Kr();Yn=class e extends tt{constructor(t,r,n){super(t,n),this.name=t,this.schemaRef=r,this.traits=n,this.symbol=e.symbol}static[Symbol.hasInstance](t){let r=e.prototype.isPrototypeOf(t);return!r&&typeof t=="object"&&t!==null?t.symbol===e.symbol:r}};Yn.symbol=Symbol.for("@smithy/core/schema::SimpleSchema")});var O,by=y(()=>{c();gd();hd();yd();vd();Sd();di();O=class e{constructor(t,r){this.ref=t,this.memberName=r,this.symbol=e.symbol;let n=[],o=t,s=t;for(this._isMemberSchema=!1;Array.isArray(o);)n.push(o[1]),o=o[0],s=vt(o),this._isMemberSchema=!0;if(n.length>0){this.memberTraits={};for(let i=n.length-1;i>=0;--i){let a=n[i];Object.assign(this.memberTraits,e.translateTraits(a))}}else this.memberTraits=0;if(s instanceof e){this.name=s.name,this.traits=s.traits,this._isMemberSchema=s._isMemberSchema,this.schema=s.schema,this.memberTraits=Object.assign({},s.getMemberTraits(),this.getMemberTraits()),this.normalizedTraits=void 0,this.ref=s.ref,this.memberName=r??s.memberName;return}if(this.schema=vt(s),this.schema&&typeof this.schema=="object"?this.traits=this.schema?.traits??{}:this.traits=0,this.name=(typeof this.schema=="object"?this.schema?.name:void 0)??this.memberName??this.getSchemaName(),this._isMemberSchema&&!r)throw new Error(`@smithy/core/schema - NormalizedSchema member schema ${this.getName(!0)} must initialize with memberName argument.`)}static[Symbol.hasInstance](t){let r=e.prototype.isPrototypeOf(t);return!r&&typeof t=="object"&&t!==null?t.symbol===e.symbol:r}static of(t,r){return t instanceof e?t:new e(t,r)}static translateTraits(t){if(typeof t=="object")return t;t=t|0;let r={};return(t&1)===1&&(r.httpLabel=1),(t>>1&1)===1&&(r.idempotent=1),(t>>2&1)===1&&(r.idempotencyToken=1),(t>>3&1)===1&&(r.sensitive=1),(t>>4&1)===1&&(r.httpPayload=1),(t>>5&1)===1&&(r.httpResponseCode=1),(t>>6&1)===1&&(r.httpQueryParams=1),r}static memberFrom(t,r){return t instanceof e?(t.memberName=r,t._isMemberSchema=!0,t):new e(t,r)}getSchema(){return this.schema instanceof e?this.schema=this.schema.getSchema():this.schema instanceof Yn?vt(this.schema.schemaRef):vt(this.schema)}getName(t=!1){return!t&&this.name&&this.name.includes("#")?this.name.split("#")[1]:this.name||void 0}getMemberName(){if(!this.isMemberSchema())throw new Error(`@smithy/core/schema - cannot get member name on non-member schema: ${this.getName(!0)}`);return this.memberName}isMemberSchema(){return this._isMemberSchema}isUnitSchema(){return this.getSchema()==="unit"}isListSchema(){let t=this.getSchema();return typeof t=="number"?t>=P.LIST_MODIFIER&&t<P.MAP_MODIFIER:t instanceof Wn}isMapSchema(){let t=this.getSchema();return typeof t=="number"?t>=P.MAP_MODIFIER&&t<=255:t instanceof Kn}isDocumentSchema(){return this.getSchema()===P.DOCUMENT}isStructSchema(){let t=this.getSchema();return t!==null&&typeof t=="object"&&"members"in t||t instanceof gr}isBlobSchema(){return this.getSchema()===P.BLOB||this.getSchema()===P.STREAMING_BLOB}isTimestampSchema(){let t=this.getSchema();return typeof t=="number"&&t>=P.TIMESTAMP_DEFAULT&&t<=P.TIMESTAMP_EPOCH_SECONDS}isStringSchema(){return this.getSchema()===P.STRING}isBooleanSchema(){return this.getSchema()===P.BOOLEAN}isNumericSchema(){return this.getSchema()===P.NUMERIC}isBigIntegerSchema(){return this.getSchema()===P.BIG_INTEGER}isBigDecimalSchema(){return this.getSchema()===P.BIG_DECIMAL}isStreaming(){return this.getMergedTraits().streaming?!0:this.getSchema()===P.STREAMING_BLOB}getMergedTraits(){return this.normalizedTraits?this.normalizedTraits:(this.normalizedTraits={...this.getOwnTraits(),...this.getMemberTraits()},this.normalizedTraits)}getMemberTraits(){return e.translateTraits(this.memberTraits)}getOwnTraits(){return e.translateTraits(this.traits)}getKeySchema(){if(this.isDocumentSchema())return e.memberFrom([P.DOCUMENT,0],"key");if(!this.isMapSchema())throw new Error(`@smithy/core/schema - cannot get key schema for non-map schema: ${this.getName(!0)}`);let t=this.getSchema();return typeof t=="number"?e.memberFrom([63&t,0],"key"):e.memberFrom([t.keySchema,0],"key")}getValueSchema(){let t=this.getSchema();if(typeof t=="number"){if(this.isMapSchema())return e.memberFrom([63&t,0],"value");if(this.isListSchema())return e.memberFrom([63&t,0],"member")}if(t&&typeof t=="object"){if(this.isStructSchema())throw new Error(`cannot call getValueSchema() with StructureSchema ${this.getName(!0)}`);let r=t;if("valueSchema"in r){if(this.isMapSchema())return e.memberFrom([r.valueSchema,0],"value");if(this.isListSchema())return e.memberFrom([r.valueSchema,0],"member")}}if(this.isDocumentSchema())return e.memberFrom([P.DOCUMENT,0],"value");throw new Error(`@smithy/core/schema - the schema ${this.getName(!0)} does not have a value member.`)}getMemberSchema(t){if(this.isStructSchema()){let r=this.getSchema();if(!(t in r.members))throw new Error(`@smithy/core/schema - the schema ${this.getName(!0)} does not have a member with name=${t}.`);return e.memberFrom(r.members[t],t)}if(this.isDocumentSchema())return e.memberFrom([P.DOCUMENT,0],t);throw new Error(`@smithy/core/schema - the schema ${this.getName(!0)} does not have members.`)}getMemberSchemas(){let{schema:t}=this,r=t;if(!r||typeof r!="object")return{};if("members"in r){let n={};for(let o of r.memberNames)n[o]=this.getMemberSchema(o);return n}return{}}*structIterator(){if(this.isUnitSchema())return;if(!this.isStructSchema())throw new Error("@smithy/core/schema - cannot acquire structIterator on non-struct schema.");let t=this.getSchema();for(let r=0;r<t.memberNames.length;++r)yield[t.memberNames[r],e.memberFrom([t.memberList[r],0],t.memberNames[r])]}getSchemaName(){let t=this.getSchema();if(typeof t=="number"){let r=63&t,n=192&t,o=Object.entries(P).find(([,s])=>s===r)?.[0]??"Unknown";switch(n){case P.MAP_MODIFIER:return`${o}Map`;case P.LIST_MODIFIER:return`${o}List`;case 0:return o}}return"Unknown"}};O.symbol=Symbol.for("@smithy/core/schema::NormalizedSchema")});var re=y(()=>{c();gd();vy();hd();yd();Ey();wy();by();Kr();Sd();di();vd();Sy()});var Jn,Cy=y(()=>{c();re();Jn=(e,t,r=n=>n)=>{let n=O.of(t);switch(typeof e){case"undefined":case"boolean":case"number":case"string":case"bigint":case"symbol":return r(e,n);case"function":case"object":if(e===null)return r(null,n);if(Array.isArray(e)){let s=new Array(e.length),i=0;for(let a of e)s[i++]=Jn(a,n.getValueSchema(),r);return r(s,n)}if("byteLength"in e){let s=new Uint8Array(e.byteLength);return s.set(e,0),r(s,n)}if(e instanceof Date)return r(e,n);let o={};if(n.isMapSchema())for(let s of Object.keys(e))o[s]=Jn(e[s],n.getValueSchema(),r);else if(n.isStructSchema())for(let[s,i]of n.structIterator())o[s]=Jn(e[s],i,r);else if(n.isDocumentSchema())for(let s of Object.keys(e))o[s]=Jn(e[s],n.getValueSchema(),r);return r(o,n);default:return r(e,n)}}});var iM,aM,Xn,cM,ui,Qn,lM,Ed,wd,bd,Cd,dM,uM,xy,pM,fM,fi,mM,xd,gM,Yr,Pd,hM,yM,_M,Py,Ay,vM,SM,hr,Ad,pi,Zn,Td=y(()=>{c();iM=e=>{switch(e){case"true":return!0;case"false":return!1;default:throw new Error(`Unable to parse boolean value "${e}"`)}},aM=e=>{if(e!=null){if(typeof e=="number"){if((e===0||e===1)&&Zn.warn(pi(`Expected boolean, got ${typeof e}: ${e}`)),e===0)return!1;if(e===1)return!0}if(typeof e=="string"){let t=e.toLowerCase();if((t==="false"||t==="true")&&Zn.warn(pi(`Expected boolean, got ${typeof e}: ${e}`)),t==="false")return!1;if(t==="true")return!0}if(typeof e=="boolean")return e;throw new TypeError(`Expected boolean, got ${typeof e}: ${e}`)}},Xn=e=>{if(e!=null){if(typeof e=="string"){let t=parseFloat(e);if(!Number.isNaN(t))return String(t)!==String(e)&&Zn.warn(pi(`Expected number but observed string: ${e}`)),t}if(typeof e=="number")return e;throw new TypeError(`Expected number, got ${typeof e}: ${e}`)}},cM=Math.ceil(34028234663852886e22),ui=e=>{let t=Xn(e);if(t!==void 0&&!Number.isNaN(t)&&t!==1/0&&t!==-1/0&&Math.abs(t)>cM)throw new TypeError(`Expected 32-bit float, got ${e}`);return t},Qn=e=>{if(e!=null){if(Number.isInteger(e)&&!Number.isNaN(e))return e;throw new TypeError(`Expected integer, got ${typeof e}: ${e}`)}},lM=Qn,Ed=e=>Cd(e,32),wd=e=>Cd(e,16),bd=e=>Cd(e,8),Cd=(e,t)=>{let r=Qn(e);if(r!==void 0&&dM(r,t)!==r)throw new TypeError(`Expected ${t}-bit integer, got ${e}`);return r},dM=(e,t)=>{switch(t){case 32:return Int32Array.of(e)[0];case 16:return Int16Array.of(e)[0];case 8:return Int8Array.of(e)[0]}},uM=(e,t)=>{if(e==null)throw t?new TypeError(`Expected a non-null value for ${t}`):new TypeError("Expected a non-null value");return e},xy=e=>{if(e==null)return;if(typeof e=="object"&&!Array.isArray(e))return e;let t=Array.isArray(e)?"array":typeof e;throw new TypeError(`Expected object, got ${t}: ${e}`)},pM=e=>{if(e!=null){if(typeof e=="string")return e;if(["boolean","number","bigint"].includes(typeof e))return Zn.warn(pi(`Expected string, got ${typeof e}: ${e}`)),String(e);throw new TypeError(`Expected string, got ${typeof e}: ${e}`)}},fM=e=>{if(e==null)return;let t=xy(e),r=Object.entries(t).filter(([,n])=>n!=null).map(([n])=>n);if(r.length===0)throw new TypeError("Unions must have exactly one non-null member. None were found.");if(r.length>1)throw new TypeError(`Unions must have exactly one non-null member. Keys ${r} were not null.`);return t},fi=e=>Xn(typeof e=="string"?Yr(e):e),mM=fi,xd=e=>ui(typeof e=="string"?Yr(e):e),gM=/(-?(?:0|[1-9]\d*)(?:\.\d+)?(?:[eE][+-]?\d+)?)|(-?Infinity)|(NaN)/g,Yr=e=>{let t=e.match(gM);if(t===null||t[0].length!==e.length)throw new TypeError("Expected real number, got implicit NaN");return parseFloat(e)},Pd=e=>typeof e=="string"?Py(e):Xn(e),hM=Pd,yM=Pd,_M=e=>typeof e=="string"?Py(e):ui(e),Py=e=>{switch(e){case"NaN":return NaN;case"Infinity":return 1/0;case"-Infinity":return-1/0;default:throw new Error(`Unable to parse float value: ${e}`)}},Ay=e=>Qn(typeof e=="string"?Yr(e):e),vM=Ay,SM=e=>Ed(typeof e=="string"?Yr(e):e),hr=e=>wd(typeof e=="string"?Yr(e):e),Ad=e=>bd(typeof e=="string"?Yr(e):e),pi=e=>String(new TypeError(e).stack||e).split(`
`).slice(0,5).filter(t=>!t.includes("stackTraceWarning")).join(`
`),Zn={warn:console.warn}});function to(e){let t=e.getUTCFullYear(),r=e.getUTCMonth(),n=e.getUTCDay(),o=e.getUTCDate(),s=e.getUTCHours(),i=e.getUTCMinutes(),a=e.getUTCSeconds(),l=o<10?`0${o}`:`${o}`,d=s<10?`0${s}`:`${s}`,u=i<10?`0${i}`:`${i}`,f=a<10?`0${a}`:`${a}`;return`${EM[n]}, ${l} ${Rd[r]} ${t} ${d}:${u}:${f} GMT`}var EM,Rd,wM,bM,CM,ro,xM,PM,AM,no,oo,eo,TM,OM,RM,Od,IM,NM,kM,rt,DM,MM,Jr,Ty=y(()=>{c();Td();EM=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],Rd=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];wM=new RegExp(/^(\d{4})-(\d{2})-(\d{2})[tT](\d{2}):(\d{2}):(\d{2})(?:\.(\d+))?[zZ]$/),bM=e=>{if(e==null)return;if(typeof e!="string")throw new TypeError("RFC-3339 date-times must be expressed as strings");let t=wM.exec(e);if(!t)throw new TypeError("Invalid RFC-3339 date-time value");let[r,n,o,s,i,a,l,d]=t,u=hr(Jr(n)),f=rt(o,"month",1,12),g=rt(s,"day",1,31);return eo(u,f,g,{hours:i,minutes:a,seconds:l,fractionalMilliseconds:d})},CM=new RegExp(/^(\d{4})-(\d{2})-(\d{2})[tT](\d{2}):(\d{2}):(\d{2})(?:\.(\d+))?(([-+]\d{2}\:\d{2})|[zZ])$/),ro=e=>{if(e==null)return;if(typeof e!="string")throw new TypeError("RFC-3339 date-times must be expressed as strings");let t=CM.exec(e);if(!t)throw new TypeError("Invalid RFC-3339 date-time value");let[r,n,o,s,i,a,l,d,u]=t,f=hr(Jr(n)),g=rt(o,"month",1,12),h=rt(s,"day",1,31),_=eo(f,g,h,{hours:i,minutes:a,seconds:l,fractionalMilliseconds:d});return u.toUpperCase()!="Z"&&_.setTime(_.getTime()-MM(u)),_},xM=new RegExp(/^(?:Mon|Tue|Wed|Thu|Fri|Sat|Sun), (\d{2}) (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) (\d{4}) (\d{1,2}):(\d{2}):(\d{2})(?:\.(\d+))? GMT$/),PM=new RegExp(/^(?:Monday|Tuesday|Wednesday|Thursday|Friday|Saturday|Sunday), (\d{2})-(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)-(\d{2}) (\d{1,2}):(\d{2}):(\d{2})(?:\.(\d+))? GMT$/),AM=new RegExp(/^(?:Mon|Tue|Wed|Thu|Fri|Sat|Sun) (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) ( [1-9]|\d{2}) (\d{1,2}):(\d{2}):(\d{2})(?:\.(\d+))? (\d{4})$/),no=e=>{if(e==null)return;if(typeof e!="string")throw new TypeError("RFC-7231 date-times must be expressed as strings");let t=xM.exec(e);if(t){let[r,n,o,s,i,a,l,d]=t;return eo(hr(Jr(s)),Od(o),rt(n,"day",1,31),{hours:i,minutes:a,seconds:l,fractionalMilliseconds:d})}if(t=PM.exec(e),t){let[r,n,o,s,i,a,l,d]=t;return RM(eo(TM(s),Od(o),rt(n,"day",1,31),{hours:i,minutes:a,seconds:l,fractionalMilliseconds:d}))}if(t=AM.exec(e),t){let[r,n,o,s,i,a,l,d]=t;return eo(hr(Jr(d)),Od(n),rt(o.trimLeft(),"day",1,31),{hours:s,minutes:i,seconds:a,fractionalMilliseconds:l})}throw new TypeError("Invalid RFC-7231 date-time value")},oo=e=>{if(e==null)return;let t;if(typeof e=="number")t=e;else if(typeof e=="string")t=fi(e);else if(typeof e=="object"&&e.tag===1)t=e.value;else throw new TypeError("Epoch timestamps must be expressed as floating point numbers or their string representation");if(Number.isNaN(t)||t===1/0||t===-1/0)throw new TypeError("Epoch timestamps must be valid, non-Infinite, non-NaN numerics");return new Date(Math.round(t*1e3))},eo=(e,t,r,n)=>{let o=t-1;return NM(e,o,r),new Date(Date.UTC(e,o,r,rt(n.hours,"hour",0,23),rt(n.minutes,"minute",0,59),rt(n.seconds,"seconds",0,60),DM(n.fractionalMilliseconds)))},TM=e=>{let t=new Date().getUTCFullYear(),r=Math.floor(t/100)*100+hr(Jr(e));return r<t?r+100:r},OM=50*365*24*60*60*1e3,RM=e=>e.getTime()-new Date().getTime()>OM?new Date(Date.UTC(e.getUTCFullYear()-100,e.getUTCMonth(),e.getUTCDate(),e.getUTCHours(),e.getUTCMinutes(),e.getUTCSeconds(),e.getUTCMilliseconds())):e,Od=e=>{let t=Rd.indexOf(e);if(t<0)throw new TypeError(`Invalid month: ${e}`);return t+1},IM=[31,28,31,30,31,30,31,31,30,31,30,31],NM=(e,t,r)=>{let n=IM[t];if(t===1&&kM(e)&&(n=29),r>n)throw new TypeError(`Invalid day for ${Rd[t]} in ${e}: ${r}`)},kM=e=>e%4===0&&(e%100!==0||e%400===0),rt=(e,t,r,n)=>{let o=Ad(Jr(e));if(o<r||o>n)throw new TypeError(`${t} must be between ${r} and ${n}, inclusive`);return o},DM=e=>e==null?0:xd("0."+e)*1e3,MM=e=>{let t=e[0],r=1;if(t=="+")r=1;else if(t=="-")r=-1;else throw new TypeError(`Offset direction, ${t}, must be "+" or "-"`);let n=Number(e.substring(1,3)),o=Number(e.substring(4,6));return r*(n*60+o)*60*1e3},Jr=e=>{let t=0;for(;t<e.length-1&&e.charAt(t)==="0";)t++;return t===0?e:e.slice(t)}});var ye,Oy=y(()=>{c();ye=function(t){return Object.assign(new String(t),{deserializeJSON(){return JSON.parse(String(t))},toString(){return String(t)},toJSON(){return String(t)}})};ye.from=e=>e&&typeof e=="object"&&(e instanceof ye||"deserializeJSON"in e)?e:typeof e=="string"||Object.getPrototypeOf(e)===String.prototype?ye(String(e)):ye(JSON.stringify(e));ye.fromObject=ye.from});function Id(e){return(e.includes(",")||e.includes('"'))&&(e=`"${e.replace(/"/g,'\\"')}"`),e}var Ry=y(()=>{c()});function Nd(e,t,r){if(r<=0||!Number.isInteger(r))throw new Error("Invalid number of delimiters ("+r+") for splitEvery.");let n=e.split(t);if(r===1)return n;let o=[],s="";for(let i=0;i<n.length;i++)s===""?s=n[i]:s+=t+n[i],(i+1)%r===0&&(o.push(s),s="");return s!==""&&o.push(s),o}var Iy=y(()=>{c()});var so,Ny=y(()=>{c();so=e=>{let t=e.length,r=[],n=!1,o,s=0;for(let i=0;i<t;++i){let a=e[i];switch(a){case'"':o!=="\\"&&(n=!n);break;case",":n||(r.push(e.slice(s,i)),s=i+1);break;default:}o=a}return r.push(e.slice(s)),r.map(i=>{i=i.trim();let a=i.length;return a<2?i:(i[0]==='"'&&i[a-1]==='"'&&(i=i.slice(1,a-1)),i.replace(/\\"/g,'"'))})}});function FM(e){return new ae(String(e),"bigDecimal")}var ae,ky=y(()=>{c();ae=class e{constructor(t,r){this.string=t,this.type=r;let n=0;for(let o=0;o<t.length;++o){let s=t.charCodeAt(o);if(!(o===0&&s===45)){if(s===46){if(n)throw new Error("@smithy/core/serde - NumericValue must contain at most one decimal point.");n=1;continue}if(s<48||s>57)throw new Error('@smithy/core/serde - NumericValue must only contain [0-9], at most one decimal point ".", and an optional negation prefix "-".')}}}toString(){return this.string}static[Symbol.hasInstance](t){if(!t||typeof t!="object")return!1;let r=t,n=e.prototype.isPrototypeOf(t.constructor?.prototype);return n||(typeof r.string=="string"&&typeof r.type=="string"&&r.constructor?.name==="NumericValue"?!0:n)}}});var Dy={};Ye(Dy,{LazyJsonString:()=>ye,NumericValue:()=>ae,copyDocumentWithTransform:()=>Jn,dateToUtcString:()=>to,expectBoolean:()=>aM,expectByte:()=>bd,expectFloat32:()=>ui,expectInt:()=>lM,expectInt32:()=>Ed,expectLong:()=>Qn,expectNonNull:()=>uM,expectNumber:()=>Xn,expectObject:()=>xy,expectShort:()=>wd,expectString:()=>pM,expectUnion:()=>fM,handleFloat:()=>hM,limitedParseDouble:()=>Pd,limitedParseFloat:()=>yM,limitedParseFloat32:()=>_M,logger:()=>Zn,nv:()=>FM,parseBoolean:()=>iM,parseEpochTimestamp:()=>oo,parseRfc3339DateTime:()=>bM,parseRfc3339DateTimeWithOffset:()=>ro,parseRfc7231DateTime:()=>no,quoteHeader:()=>Id,splitEvery:()=>Nd,splitHeader:()=>so,strictParseByte:()=>Ad,strictParseDouble:()=>fi,strictParseFloat:()=>mM,strictParseFloat32:()=>xd,strictParseInt:()=>vM,strictParseInt32:()=>SM,strictParseLong:()=>Ay,strictParseShort:()=>hr});var Ne=y(()=>{c();Cy();Ty();Oy();Td();Ry();Iy();Ny();ky()});var mi,My,Xr,kd=y(()=>{c();re();Ne();mi=E(q()),My=E(ai());zn();Xr=class{constructor(t){this.options=t}getRequestType(){return mi.HttpRequest}getResponseType(){return mi.HttpResponse}setSerdeContext(t){this.serdeContext=t,this.serializer.setSerdeContext(t),this.deserializer.setSerdeContext(t),this.getPayloadCodec()&&this.getPayloadCodec().setSerdeContext(t)}updateServiceEndpoint(t,r){if("url"in r){t.protocol=r.url.protocol,t.hostname=r.url.hostname,t.port=r.url.port?Number(r.url.port):void 0,t.path=r.url.pathname,t.fragment=r.url.hash||void 0,t.username=r.url.username||void 0,t.password=r.url.password||void 0;for(let[n,o]of r.url.searchParams.entries())t.query||(t.query={}),t.query[n]=o;return t}else return t.protocol=r.protocol,t.hostname=r.hostname,t.port=r.port?Number(r.port):void 0,t.path=r.path,t.query={...r.query},t}setHostPrefix(t,r,n){let o=O.of(r),s=O.of(r.input);if(o.getMergedTraits().endpoint){let i=o.getMergedTraits().endpoint?.[0];if(typeof i=="string"){let a=[...s.structIterator()].filter(([,l])=>l.getMergedTraits().hostLabel);for(let[l]of a){let d=n[l];if(typeof d!="string")throw new Error(`@smithy/core/schema - ${l} in input must be a string as hostLabel.`);i=i.replace(`{${l}}`,d)}t.hostname=i+t.hostname}}}deserializeMetadata(t){return{httpStatusCode:t.statusCode,requestId:t.headers["x-amzn-requestid"]??t.headers["x-amzn-request-id"]??t.headers["x-amz-request-id"],extendedRequestId:t.headers["x-amz-id-2"],cfId:t.headers["x-amz-cf-id"]}}async deserializeHttpMessage(t,r,n,o,s){let i;o instanceof Set?i=s:i=o;let a=this.deserializer,l=O.of(t),d=[];for(let[u,f]of l.structIterator()){let g=f.getMemberTraits();if(g.httpPayload){if(f.isStreaming())if(f.isStructSchema()){let v=this.serdeContext;if(!v.eventStreamMarshaller)throw new Error("@smithy/core - HttpProtocol: eventStreamMarshaller missing in serdeContext.");let S=f.getMemberSchemas();i[u]=v.eventStreamMarshaller.deserialize(n.body,async b=>{let C=Object.keys(b).find(I=>I!=="__type")??"";if(C in S){let I=S[C];return{[C]:await a.read(I,b[C].body)}}else return{$unknown:b}})}else i[u]=(0,My.sdkStreamMixin)(n.body);else if(n.body){let _=await Ie(n.body,r);_.byteLength>0&&(i[u]=await a.read(f,_))}}else if(g.httpHeader){let h=String(g.httpHeader).toLowerCase(),_=n.headers[h];if(_!=null)if(f.isListSchema()){let v=f.getValueSchema(),S;v.isTimestampSchema()&&v.getSchema()===P.TIMESTAMP_DEFAULT?S=Nd(_,",",2):S=so(_);let b=[];for(let C of S)b.push(await a.read([v,{httpHeader:h}],C.trim()));i[u]=b}else i[u]=await a.read(f,_)}else if(g.httpPrefixHeaders!==void 0){i[u]={};for(let[h,_]of Object.entries(n.headers))h.startsWith(g.httpPrefixHeaders)&&(i[u][h.slice(g.httpPrefixHeaders.length)]=await a.read([f.getValueSchema(),{httpHeader:h}],_))}else g.httpResponseCode?i[u]=n.statusCode:d.push(u)}return d}}});var Fy,yr,By=y(()=>{c();re();Fy=E(q());zn();li();kd();yr=class extends Xr{async serializeRequest(t,r,n){let o={...r??{}},s=this.serializer,i={},a={},l=await n.endpoint(),d=O.of(t?.input),u=d.getSchema(),f=!1,g,h=new Fy.HttpRequest({protocol:"",hostname:"",port:void 0,path:"",fragment:void 0,query:i,headers:a,body:void 0});if(l){this.updateServiceEndpoint(h,l),this.setHostPrefix(h,t,o);let _=O.translateTraits(t.traits);if(_.http){h.method=_.http[0];let[v,S]=_.http[1].split("?");h.path=="/"?h.path=v:h.path+=v;let b=new URLSearchParams(S??"");Object.assign(i,Object.fromEntries(b))}}for(let[_,v]of d.structIterator()){let S=v.getMergedTraits()??{},b=o[_];if(b!=null)if(S.httpPayload){if(v.isStreaming()){if(v.isStructSchema())throw new Error("serialization of event streams is not yet implemented");g=b}else s.write(v,b),g=s.flush();delete o[_]}else if(S.httpLabel){s.write(v,b);let C=s.flush();h.path.includes(`{${_}+}`)?h.path=h.path.replace(`{${_}+}`,C.split("/").map(et).join("/")):h.path.includes(`{${_}}`)&&(h.path=h.path.replace(`{${_}}`,et(C))),delete o[_]}else if(S.httpHeader)s.write(v,b),a[S.httpHeader.toLowerCase()]=String(s.flush()),delete o[_];else if(typeof S.httpPrefixHeaders=="string"){for(let[C,I]of Object.entries(b)){let R=S.httpPrefixHeaders+C;s.write([v.getValueSchema(),{httpHeader:R}],I),a[R.toLowerCase()]=s.flush()}delete o[_]}else S.httpQuery||S.httpQueryParams?(this.serializeQuery(v,b,i),delete o[_]):f=!0}return f&&o&&(s.write(u,o),g=s.flush()),h.headers=a,h.query=i,h.body=g,h}serializeQuery(t,r,n){let o=this.serializer,s=t.getMergedTraits();if(s.httpQueryParams){for(let[i,a]of Object.entries(r))i in n||this.serializeQuery(O.of([t.getValueSchema(),{...s,httpQuery:i,httpQueryParams:void 0}]),a,n);return}if(t.isListSchema()){let i=!!t.getMergedTraits().sparse,a=[];for(let l of r){o.write([t.getValueSchema(),s],l);let d=o.flush();(i||d!==void 0)&&a.push(d)}n[s.httpQuery]=a}else o.write([t,s],r),n[s.httpQuery]=o.flush()}async deserializeResponse(t,r,n){let o=this.deserializer,s=O.of(t.output),i={};if(n.statusCode>=300){let d=await Ie(n.body,r);throw d.byteLength>0&&Object.assign(i,await o.read(P.DOCUMENT,d)),await this.handleError(t,r,n,i,this.deserializeMetadata(n)),new Error("@smithy/core/protocols - HTTP Protocol error handler failed to throw.")}for(let d in n.headers){let u=n.headers[d];delete n.headers[d],n.headers[d.toLowerCase()]=u}let a=await this.deserializeHttpMessage(s,r,n,i);if(a.length){let d=await Ie(n.body,r);if(d.byteLength>0){let u=await o.read(s,d);for(let f of a)i[f]=u[f]}}return{$metadata:this.deserializeMetadata(n),...i}}}});var Ly,_r,Uy=y(()=>{c();re();Ly=E(q());zn();kd();_r=class extends Xr{async serializeRequest(t,r,n){let o=this.serializer,s={},i={},a=await n.endpoint(),d=O.of(t?.input).getSchema(),u,f=new Ly.HttpRequest({protocol:"",hostname:"",port:void 0,path:"/",fragment:void 0,query:s,headers:i,body:void 0});a&&(this.updateServiceEndpoint(f,a),this.setHostPrefix(f,t,r));let g={...r};return r&&(o.write(d,g),u=o.flush()),f.headers=i,f.query=s,f.body=u,f.method="POST",f}async deserializeResponse(t,r,n){let o=this.deserializer,s=O.of(t.output),i={};if(n.statusCode>=300){let d=await Ie(n.body,r);throw d.byteLength>0&&Object.assign(i,await o.read(P.DOCUMENT,d)),await this.handleError(t,r,n,i,this.deserializeMetadata(n)),new Error("@smithy/core/protocols - RPC Protocol error handler failed to throw.")}for(let d in n.headers){let u=n.headers[d];delete n.headers[d],n.headers[d.toLowerCase()]=u}let a=await Ie(n.body,r);return a.byteLength>0&&Object.assign(i,await o.read(s,a)),{$metadata:this.deserializeMetadata(n),...i}}}});var Dd,Md=y(()=>{c();li();Dd=(e,t,r,n,o,s)=>{if(t!=null&&t[r]!==void 0){let i=n();if(i.length<=0)throw new Error("Empty value provided for input HTTP label: "+r+".");e=e.replace(o,s?i.split("/").map(a=>et(a)).join("/"):et(i))}else throw new Error("No value provided for input HTTP label: "+r+".");return e}});function io(e,t){return new gi(e,t)}var Hy,gi,jy=y(()=>{c();Hy=E(q());Md();gi=class{constructor(t,r){this.input=t,this.context=r,this.query={},this.method="",this.headers={},this.path="",this.body=null,this.hostname="",this.resolvePathStack=[]}async build(){let{hostname:t,protocol:r="https",port:n,path:o}=await this.context.endpoint();this.path=o;for(let s of this.resolvePathStack)s(this.path);return new Hy.HttpRequest({protocol:r,hostname:this.hostname||t,port:n,method:this.method,path:this.path,query:this.query,body:this.body,headers:this.headers})}hn(t){return this.hostname=t,this}bp(t){return this.resolvePathStack.push(r=>{this.path=`${r?.endsWith("/")?r.slice(0,-1):r||""}`+t}),this}p(t,r,n,o){return this.resolvePathStack.push(s=>{this.path=Dd(s,this.input,t,r,n,o)}),this}h(t){return this.headers=t,this}q(t){return this.query=t,this}b(t){return this.body=t,this}m(t){return this.method=t,this}}});function vr(e,t){if(t.timestampFormat.useTrait&&e.isTimestampSchema()&&(e.getSchema()===P.TIMESTAMP_DATE_TIME||e.getSchema()===P.TIMESTAMP_HTTP_DATE||e.getSchema()===P.TIMESTAMP_EPOCH_SECONDS))return e.getSchema();let{httpLabel:r,httpPrefixHeaders:n,httpHeader:o,httpQuery:s}=e.getMergedTraits();return(t.httpBindings?typeof n=="string"||o?P.TIMESTAMP_HTTP_DATE:s||r?P.TIMESTAMP_DATE_TIME:void 0:void 0)??t.timestampFormat.default}var hi=y(()=>{c();re()});var Fd,$y,Sr,Bd=y(()=>{c();re();Ne();Fd=E(ge()),$y=E(ie());hi();Sr=class{constructor(t){this.settings=t}setSerdeContext(t){this.serdeContext=t}read(t,r){let n=O.of(t);if(n.isListSchema())return so(r).map(o=>this.read(n.getValueSchema(),o));if(n.isBlobSchema())return(this.serdeContext?.base64Decoder??Fd.fromBase64)(r);if(n.isTimestampSchema())switch(vr(n,this.settings)){case P.TIMESTAMP_DATE_TIME:return ro(r);case P.TIMESTAMP_HTTP_DATE:return no(r);case P.TIMESTAMP_EPOCH_SECONDS:return oo(r);default:return console.warn("Missing timestamp format, parsing value with Date constructor:",r),new Date(r)}if(n.isStringSchema()){let o=n.getMergedTraits().mediaType,s=r;if(o)return n.getMergedTraits().httpHeader&&(s=this.base64ToUtf8(s)),(o==="application/json"||o.endsWith("+json"))&&(s=ye.from(s)),s}switch(!0){case n.isNumericSchema():return Number(r);case n.isBigIntegerSchema():return BigInt(r);case n.isBigDecimalSchema():return new ae(r,"bigDecimal");case n.isBooleanSchema():return String(r).toLowerCase()==="true"}return r}base64ToUtf8(t){return(this.serdeContext?.utf8Encoder??$y.toUtf8)((this.serdeContext?.base64Decoder??Fd.fromBase64)(t))}}});var yi,Er,qy=y(()=>{c();re();yi=E(ie());Bd();Er=class{constructor(t,r){this.codecDeserializer=t,this.stringDeserializer=new Sr(r)}setSerdeContext(t){this.stringDeserializer.setSerdeContext(t),this.codecDeserializer.setSerdeContext(t),this.serdeContext=t}read(t,r){let n=O.of(t),o=n.getMergedTraits(),s=this.serdeContext?.utf8Encoder??yi.toUtf8;if(o.httpHeader||o.httpResponseCode)return this.stringDeserializer.read(n,s(r));if(o.httpPayload){if(n.isBlobSchema()){let i=this.serdeContext?.utf8Decoder??yi.fromUtf8;return typeof r=="string"?i(r):r}else if(n.isStringSchema())return"byteLength"in r?s(r):r}return this.codecDeserializer.read(n,r)}}});var Ld,ao,Ud=y(()=>{c();re();Ne();Ld=E(ge());hi();ao=class{constructor(t){this.settings=t,this.stringBuffer="",this.serdeContext=void 0}setSerdeContext(t){this.serdeContext=t}write(t,r){let n=O.of(t);switch(typeof r){case"object":if(r===null){this.stringBuffer="null";return}if(n.isTimestampSchema()){if(!(r instanceof Date))throw new Error(`@smithy/core/protocols - received non-Date value ${r} when schema expected Date in ${n.getName(!0)}`);switch(vr(n,this.settings)){case P.TIMESTAMP_DATE_TIME:this.stringBuffer=r.toISOString().replace(".000Z","Z");break;case P.TIMESTAMP_HTTP_DATE:this.stringBuffer=to(r);break;case P.TIMESTAMP_EPOCH_SECONDS:this.stringBuffer=String(r.getTime()/1e3);break;default:console.warn("Missing timestamp format, using epoch seconds",r),this.stringBuffer=String(r.getTime()/1e3)}return}if(n.isBlobSchema()&&"byteLength"in r){this.stringBuffer=(this.serdeContext?.base64Encoder??Ld.toBase64)(r);return}if(n.isListSchema()&&Array.isArray(r)){let i="";for(let a of r){this.write([n.getValueSchema(),n.getMergedTraits()],a);let l=this.flush(),d=n.getValueSchema().isTimestampSchema()?l:Id(l);i!==""&&(i+=", "),i+=d}this.stringBuffer=i;return}this.stringBuffer=JSON.stringify(r,null,2);break;case"string":let o=n.getMergedTraits().mediaType,s=r;if(o&&((o==="application/json"||o.endsWith("+json"))&&(s=ye.from(s)),n.getMergedTraits().httpHeader)){this.stringBuffer=(this.serdeContext?.base64Encoder??Ld.toBase64)(s.toString());return}this.stringBuffer=r;break;default:this.stringBuffer=String(r)}}flush(){let t=this.stringBuffer;return this.stringBuffer="",t}}});var wr,Gy=y(()=>{c();re();Ud();wr=class{constructor(t,r,n=new ao(r)){this.codecSerializer=t,this.stringSerializer=n}setSerdeContext(t){this.codecSerializer.setSerdeContext(t),this.stringSerializer.setSerdeContext(t)}write(t,r){let n=O.of(t),o=n.getMergedTraits();if(o.httpHeader||o.httpLabel||o.httpQuery){this.stringSerializer.write(n,r),this.buffer=this.stringSerializer.flush();return}return this.codecSerializer.write(n,r)}flush(){if(this.buffer!==void 0){let t=this.buffer;return this.buffer=void 0,t}return this.codecSerializer.flush()}}});var Vy={};Ye(Vy,{FromStringShapeDeserializer:()=>Sr,HttpBindingProtocol:()=>yr,HttpInterceptingShapeDeserializer:()=>Er,HttpInterceptingShapeSerializer:()=>wr,RequestBuilder:()=>gi,RpcProtocol:()=>_r,ToStringShapeSerializer:()=>ao,collectBody:()=>Ie,determineTimestampFormat:()=>vr,extendedEncodeURIComponent:()=>et,requestBuilder:()=>io,resolvedPath:()=>Dd});var St=y(()=>{c();zn();li();By();Uy();jy();Md();Bd();qy();Gy();Ud();hi()});var zy=y(()=>{c();St()});function BM(e,t,r){e.__smithy_context?e.__smithy_context.features||(e.__smithy_context.features={}):e.__smithy_context={features:{}},e.__smithy_context.features[t]=r}var Wy=y(()=>{c()});var br,Ky=y(()=>{c();br=class{constructor(t){this.authSchemes=new Map;for(let[r,n]of Object.entries(t))n!==void 0&&this.authSchemes.set(r,n)}getIdentityProvider(t){return this.authSchemes.get(t)}}});var Yy,Hd,jd,Jy=y(()=>{c();Yy=E(q()),Hd=E(Je()),jd=class{async sign(t,r,n){if(!n)throw new Error("request could not be signed with `apiKey` since the `name` and `in` signer properties are missing");if(!n.name)throw new Error("request could not be signed with `apiKey` since the `name` signer property is missing");if(!n.in)throw new Error("request could not be signed with `apiKey` since the `in` signer property is missing");if(!r.apiKey)throw new Error("request could not be signed with `apiKey` since the `apiKey` is not defined");let o=Yy.HttpRequest.clone(t);if(n.in===Hd.HttpApiKeyAuthLocation.QUERY)o.query[n.name]=r.apiKey;else if(n.in===Hd.HttpApiKeyAuthLocation.HEADER)o.headers[n.name]=n.scheme?`${n.scheme} ${r.apiKey}`:r.apiKey;else throw new Error("request can only be signed with `apiKey` locations `query` or `header`, but found: `"+n.in+"`");return o}}});var Xy,$d,Qy=y(()=>{c();Xy=E(q()),$d=class{async sign(t,r,n){let o=Xy.HttpRequest.clone(t);if(!r.token)throw new Error("request could not be signed with `token` since the `token` is not defined");return o.headers.Authorization=`Bearer ${r.token}`,o}}});var Et,Zy=y(()=>{c();Et=class{async sign(t,r,n){return t}}});var e_=y(()=>{c();Jy();Qy();Zy()});var t_,LM,qd,_i,Gd,r_=y(()=>{c();t_=e=>t=>_i(t)&&t.expiration.getTime()-Date.now()<e,LM=3e5,qd=t_(3e5),_i=e=>e.expiration!==void 0,Gd=(e,t,r)=>{if(e===void 0)return;let n=typeof e!="function"?async()=>Promise.resolve(e):e,o,s,i,a=!1,l=async d=>{s||(s=n(d));try{o=await s,i=!0,a=!1}finally{s=void 0}return o};return t===void 0?async d=>((!i||d?.forceRefresh)&&(o=await l(d)),o):async d=>((!i||d?.forceRefresh)&&(o=await l(d)),a?o:r(o)?(t(o)&&await l(d),o):(a=!0,o))}});var n_=y(()=>{c();Ky();e_();r_()});var wt={};Ye(wt,{DefaultIdentityProviderConfig:()=>br,EXPIRATION_MS:()=>LM,HttpApiKeyAuthSigner:()=>jd,HttpBearerAuthSigner:()=>$d,NoAuthSigner:()=>Et,createIsIdentityExpiredFunction:()=>t_,createPaginator:()=>Jg,doesIdentityRequireRefresh:()=>_i,getHttpAuthSchemeEndpointRuleSetPlugin:()=>$n,getHttpAuthSchemePlugin:()=>MN,getHttpSigningPlugin:()=>qn,getSmithyContext:()=>_N,httpAuthSchemeEndpointRuleSetMiddlewareOptions:()=>Ig,httpAuthSchemeMiddleware:()=>jn,httpAuthSchemeMiddlewareOptions:()=>jg,httpSigningMiddleware:()=>Bl,httpSigningMiddlewareOptions:()=>zg,isIdentityExpired:()=>qd,memoizeIdentityProvider:()=>Gd,normalizeProvider:()=>Lt,requestBuilder:()=>io,setFeature:()=>BM});var ce=y(()=>{c();bg();qg();Kg();Yg();Xg();zy();Wy();n_()});var Qr=w((uX,p_)=>{c();var vi=Object.defineProperty,UM=Object.getOwnPropertyDescriptor,HM=Object.getOwnPropertyNames,jM=Object.prototype.hasOwnProperty,$=(e,t)=>vi(e,"name",{value:t,configurable:!0}),$M=(e,t)=>{for(var r in t)vi(e,r,{get:t[r],enumerable:!0})},qM=(e,t,r,n)=>{if(t&&typeof t=="object"||typeof t=="function")for(let o of HM(t))!jM.call(e,o)&&o!==r&&vi(e,o,{get:()=>t[o],enumerable:!(n=UM(t,o))||n.enumerable});return e},GM=e=>qM(vi({},"__esModule",{value:!0}),e),o_={};$M(o_,{EndpointCache:()=>VM,EndpointError:()=>we,customEndpointFunctions:()=>zd,isIpAddress:()=>s_,isValidHostLabel:()=>Kd,resolveEndpoint:()=>dF});p_.exports=GM(o_);var VM=class{constructor({size:e,params:t}){this.data=new Map,this.parameters=[],this.capacity=e??50,t&&(this.parameters=t)}static{$(this,"EndpointCache")}get(e,t){let r=this.hash(e);if(r===!1)return t();if(!this.data.has(r)){if(this.data.size>this.capacity+10){let n=this.data.keys(),o=0;for(;;){let{value:s,done:i}=n.next();if(this.data.delete(s),i||++o>10)break}}this.data.set(r,t())}return this.data.get(r)}size(){return this.data.size}hash(e){let t="",{parameters:r}=this;if(r.length===0)return!1;for(let n of r){let o=String(e[n]??"");if(o.includes("|;"))return!1;t+=o+"|;"}return t}},zM=new RegExp("^(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)(?:\\.(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)){3}$"),s_=$(e=>zM.test(e)||e.startsWith("[")&&e.endsWith("]"),"isIpAddress"),WM=new RegExp("^(?!.*-$)(?!-)[a-zA-Z0-9-]{1,63}$"),Kd=$((e,t=!1)=>{if(!t)return WM.test(e);let r=e.split(".");for(let n of r)if(!Kd(n))return!1;return!0},"isValidHostLabel"),zd={},co="endpoints";function bt(e){return typeof e!="object"||e==null?e:"ref"in e?`$${bt(e.ref)}`:"fn"in e?`${e.fn}(${(e.argv||[]).map(bt).join(", ")})`:JSON.stringify(e,null,2)}$(bt,"toDebugString");var we=class extends Error{static{$(this,"EndpointError")}constructor(e){super(e),this.name="EndpointError"}},KM=$((e,t)=>e===t,"booleanEquals"),YM=$(e=>{let t=e.split("."),r=[];for(let n of t){let o=n.indexOf("[");if(o!==-1){if(n.indexOf("]")!==n.length-1)throw new we(`Path: '${e}' does not end with ']'`);let s=n.slice(o+1,-1);if(Number.isNaN(parseInt(s)))throw new we(`Invalid array index: '${s}' in path: '${e}'`);o!==0&&r.push(n.slice(0,o)),r.push(s)}else r.push(n)}return r},"getAttrPathList"),i_=$((e,t)=>YM(t).reduce((r,n)=>{if(typeof r!="object")throw new we(`Index '${n}' in '${t}' not found in '${JSON.stringify(e)}'`);return Array.isArray(r)?r[parseInt(n)]:r[n]},e),"getAttr"),JM=$(e=>e!=null,"isSet"),XM=$(e=>!e,"not"),Wd=Je(),Vd={[Wd.EndpointURLScheme.HTTP]:80,[Wd.EndpointURLScheme.HTTPS]:443},QM=$(e=>{let t=(()=>{try{if(e instanceof URL)return e;if(typeof e=="object"&&"hostname"in e){let{hostname:g,port:h,protocol:_="",path:v="",query:S={}}=e,b=new URL(`${_}//${g}${h?`:${h}`:""}${v}`);return b.search=Object.entries(S).map(([C,I])=>`${C}=${I}`).join("&"),b}return new URL(e)}catch{return null}})();if(!t)return console.error(`Unable to parse ${JSON.stringify(e)} as a whatwg URL.`),null;let r=t.href,{host:n,hostname:o,pathname:s,protocol:i,search:a}=t;if(a)return null;let l=i.slice(0,-1);if(!Object.values(Wd.EndpointURLScheme).includes(l))return null;let d=s_(o),u=r.includes(`${n}:${Vd[l]}`)||typeof e=="string"&&e.includes(`${n}:${Vd[l]}`),f=`${n}${u?`:${Vd[l]}`:""}`;return{scheme:l,authority:f,path:s,normalizedPath:s.endsWith("/")?s:`${s}/`,isIp:d}},"parseURL"),ZM=$((e,t)=>e===t,"stringEquals"),eF=$((e,t,r,n)=>t>=r||e.length<r?null:n?e.substring(e.length-r,e.length-t):e.substring(t,r),"substring"),tF=$(e=>encodeURIComponent(e).replace(/[!*'()]/g,t=>`%${t.charCodeAt(0).toString(16).toUpperCase()}`),"uriEncode"),rF={booleanEquals:KM,getAttr:i_,isSet:JM,isValidHostLabel:Kd,not:XM,parseURL:QM,stringEquals:ZM,substring:eF,uriEncode:tF},a_=$((e,t)=>{let r=[],n={...t.endpointParams,...t.referenceRecord},o=0;for(;o<e.length;){let s=e.indexOf("{",o);if(s===-1){r.push(e.slice(o));break}r.push(e.slice(o,s));let i=e.indexOf("}",s);if(i===-1){r.push(e.slice(s));break}e[s+1]==="{"&&e[i+1]==="}"&&(r.push(e.slice(s+1,i)),o=i+2);let a=e.substring(s+1,i);if(a.includes("#")){let[l,d]=a.split("#");r.push(i_(n[l],d))}else r.push(n[a]);o=i+1}return r.join("")},"evaluateTemplate"),nF=$(({ref:e},t)=>({...t.endpointParams,...t.referenceRecord})[e],"getReferenceValue"),Si=$((e,t,r)=>{if(typeof e=="string")return a_(e,r);if(e.fn)return c_(e,r);if(e.ref)return nF(e,r);throw new we(`'${t}': ${String(e)} is not a string, function or reference.`)},"evaluateExpression"),c_=$(({fn:e,argv:t},r)=>{let n=t.map(s=>["boolean","number"].includes(typeof s)?s:Si(s,"arg",r)),o=e.split(".");return o[0]in zd&&o[1]!=null?zd[o[0]][o[1]](...n):rF[e](...n)},"callFunction"),oF=$(({assign:e,...t},r)=>{if(e&&e in r.referenceRecord)throw new we(`'${e}' is already defined in Reference Record.`);let n=c_(t,r);return r.logger?.debug?.(`${co} evaluateCondition: ${bt(t)} = ${bt(n)}`),{result:n===""?!0:!!n,...e!=null&&{toAssign:{name:e,value:n}}}},"evaluateCondition"),Yd=$((e=[],t)=>{let r={};for(let n of e){let{result:o,toAssign:s}=oF(n,{...t,referenceRecord:{...t.referenceRecord,...r}});if(!o)return{result:o};s&&(r[s.name]=s.value,t.logger?.debug?.(`${co} assign: ${s.name} := ${bt(s.value)}`))}return{result:!0,referenceRecord:r}},"evaluateConditions"),sF=$((e,t)=>Object.entries(e).reduce((r,[n,o])=>({...r,[n]:o.map(s=>{let i=Si(s,"Header value entry",t);if(typeof i!="string")throw new we(`Header '${n}' value '${i}' is not a string`);return i})}),{}),"getEndpointHeaders"),l_=$((e,t)=>{if(Array.isArray(e))return e.map(r=>l_(r,t));switch(typeof e){case"string":return a_(e,t);case"object":if(e===null)throw new we(`Unexpected endpoint property: ${e}`);return d_(e,t);case"boolean":return e;default:throw new we(`Unexpected endpoint property type: ${typeof e}`)}},"getEndpointProperty"),d_=$((e,t)=>Object.entries(e).reduce((r,[n,o])=>({...r,[n]:l_(o,t)}),{}),"getEndpointProperties"),iF=$((e,t)=>{let r=Si(e,"Endpoint URL",t);if(typeof r=="string")try{return new URL(r)}catch(n){throw console.error(`Failed to construct URL with ${r}`,n),n}throw new we(`Endpoint URL must be a string, got ${typeof r}`)},"getEndpointUrl"),aF=$((e,t)=>{let{conditions:r,endpoint:n}=e,{result:o,referenceRecord:s}=Yd(r,t);if(!o)return;let i={...t,referenceRecord:{...t.referenceRecord,...s}},{url:a,properties:l,headers:d}=n;return t.logger?.debug?.(`${co} Resolving endpoint from template: ${bt(n)}`),{...d!=null&&{headers:sF(d,i)},...l!=null&&{properties:d_(l,i)},url:iF(a,i)}},"evaluateEndpointRule"),cF=$((e,t)=>{let{conditions:r,error:n}=e,{result:o,referenceRecord:s}=Yd(r,t);if(o)throw new we(Si(n,"Error",{...t,referenceRecord:{...t.referenceRecord,...s}}))},"evaluateErrorRule"),lF=$((e,t)=>{let{conditions:r,rules:n}=e,{result:o,referenceRecord:s}=Yd(r,t);if(o)return u_(n,{...t,referenceRecord:{...t.referenceRecord,...s}})},"evaluateTreeRule"),u_=$((e,t)=>{for(let r of e)if(r.type==="endpoint"){let n=aF(r,t);if(n)return n}else if(r.type==="error")cF(r,t);else if(r.type==="tree"){let n=lF(r,t);if(n)return n}else throw new we(`Unknown endpoint rule: ${r}`);throw new we("Rules evaluation failed")},"evaluateRules"),dF=$((e,t)=>{let{endpointParams:r,logger:n}=t,{parameters:o,rules:s}=e;t.logger?.debug?.(`${co} Initial EndpointParams: ${bt(r)}`);let i=Object.entries(o).filter(([,d])=>d.default!=null).map(([d,u])=>[d,u.default]);if(i.length>0)for(let[d,u]of i)r[d]=r[d]??u;let a=Object.entries(o).filter(([,d])=>d.required).map(([d])=>d);for(let d of a)if(r[d]==null)throw new we(`Missing required parameter: '${d}'`);let l=u_(s,{endpointParams:r,logger:n,referenceRecord:{}});return t.logger?.debug?.(`${co} Resolved endpoint: ${bt(l)}`),l},"resolveEndpoint")});var h_=w((gX,g_)=>{c();var Ei=Object.defineProperty,uF=Object.getOwnPropertyDescriptor,pF=Object.getOwnPropertyNames,fF=Object.prototype.hasOwnProperty,mF=(e,t)=>Ei(e,"name",{value:t,configurable:!0}),gF=(e,t)=>{for(var r in t)Ei(e,r,{get:t[r],enumerable:!0})},hF=(e,t,r,n)=>{if(t&&typeof t=="object"||typeof t=="function")for(let o of pF(t))!fF.call(e,o)&&o!==r&&Ei(e,o,{get:()=>t[o],enumerable:!(n=uF(t,o))||n.enumerable});return e},yF=e=>hF(Ei({},"__esModule",{value:!0}),e),f_={};gF(f_,{parseQueryString:()=>m_});g_.exports=yF(f_);function m_(e){let t={};if(e=e.replace(/^\?/,""),e)for(let r of e.split("&")){let[n,o=null]=r.split("=");n=decodeURIComponent(n),o&&(o=decodeURIComponent(o)),n in t?Array.isArray(t[n])?t[n].push(o):t[n]=[t[n],o]:t[n]=o}return t}mF(m_,"parseQueryString")});var jt=w((yX,v_)=>{c();var wi=Object.defineProperty,_F=Object.getOwnPropertyDescriptor,vF=Object.getOwnPropertyNames,SF=Object.prototype.hasOwnProperty,EF=(e,t)=>wi(e,"name",{value:t,configurable:!0}),wF=(e,t)=>{for(var r in t)wi(e,r,{get:t[r],enumerable:!0})},bF=(e,t,r,n)=>{if(t&&typeof t=="object"||typeof t=="function")for(let o of vF(t))!SF.call(e,o)&&o!==r&&wi(e,o,{get:()=>t[o],enumerable:!(n=_F(t,o))||n.enumerable});return e},CF=e=>bF(wi({},"__esModule",{value:!0}),e),y_={};wF(y_,{parseUrl:()=>__});v_.exports=CF(y_);var xF=h_(),__=EF(e=>{if(typeof e=="string")return __(new URL(e));let{hostname:t,pathname:r,port:n,protocol:o,search:s}=e,i;return s&&(i=(0,xF.parseQueryString)(s)),{hostname:t,port:n?parseInt(n):void 0,protocol:o,path:r,query:i}},"parseUrl")});var Zr=w((vX,R_)=>{"use strict";c();var bi=Object.defineProperty,PF=Object.getOwnPropertyDescriptor,AF=Object.getOwnPropertyNames,TF=Object.prototype.hasOwnProperty,$t=(e,t)=>bi(e,"name",{value:t,configurable:!0}),OF=(e,t)=>{for(var r in t)bi(e,r,{get:t[r],enumerable:!0})},RF=(e,t,r,n)=>{if(t&&typeof t=="object"||typeof t=="function")for(let o of AF(t))!TF.call(e,o)&&o!==r&&bi(e,o,{get:()=>t[o],enumerable:!(n=PF(t,o))||n.enumerable});return e},IF=e=>RF(bi({},"__esModule",{value:!0}),e),E_={};OF(E_,{ConditionObject:()=>V.ConditionObject,DeprecatedObject:()=>V.DeprecatedObject,EndpointError:()=>V.EndpointError,EndpointObject:()=>V.EndpointObject,EndpointObjectHeaders:()=>V.EndpointObjectHeaders,EndpointObjectProperties:()=>V.EndpointObjectProperties,EndpointParams:()=>V.EndpointParams,EndpointResolverOptions:()=>V.EndpointResolverOptions,EndpointRuleObject:()=>V.EndpointRuleObject,ErrorRuleObject:()=>V.ErrorRuleObject,EvaluateOptions:()=>V.EvaluateOptions,Expression:()=>V.Expression,FunctionArgv:()=>V.FunctionArgv,FunctionObject:()=>V.FunctionObject,FunctionReturn:()=>V.FunctionReturn,ParameterObject:()=>V.ParameterObject,ReferenceObject:()=>V.ReferenceObject,ReferenceRecord:()=>V.ReferenceRecord,RuleSetObject:()=>V.RuleSetObject,RuleSetRules:()=>V.RuleSetRules,TreeRuleObject:()=>V.TreeRuleObject,awsEndpointFunctions:()=>T_,getUserAgentPrefix:()=>MF,isIpAddress:()=>V.isIpAddress,partition:()=>P_,resolveDefaultAwsRegionalEndpointsConfig:()=>BF,resolveEndpoint:()=>V.resolveEndpoint,setPartitionInfo:()=>A_,toEndpointV1:()=>O_,useDefaultPartitionInfo:()=>DF});R_.exports=IF(E_);var V=Qr(),w_=$t((e,t=!1)=>{if(t){for(let r of e.split("."))if(!w_(r))return!1;return!0}return!(!(0,V.isValidHostLabel)(e)||e.length<3||e.length>63||e!==e.toLowerCase()||(0,V.isIpAddress)(e))},"isVirtualHostableS3Bucket"),S_=":",NF="/",kF=$t(e=>{let t=e.split(S_);if(t.length<6)return null;let[r,n,o,s,i,...a]=t;if(r!=="arn"||n===""||o===""||a.join(S_)==="")return null;let l=a.map(d=>d.split(NF)).flat();return{partition:n,service:o,region:s,accountId:i,resourceId:l}},"parseArn"),b_={partitions:[{id:"aws",outputs:{dnsSuffix:"amazonaws.com",dualStackDnsSuffix:"api.aws",implicitGlobalRegion:"us-east-1",name:"aws",supportsDualStack:!0,supportsFIPS:!0},regionRegex:"^(us|eu|ap|sa|ca|me|af|il|mx)\\-\\w+\\-\\d+$",regions:{"af-south-1":{description:"Africa (Cape Town)"},"ap-east-1":{description:"Asia Pacific (Hong Kong)"},"ap-east-2":{description:"Asia Pacific (Taipei)"},"ap-northeast-1":{description:"Asia Pacific (Tokyo)"},"ap-northeast-2":{description:"Asia Pacific (Seoul)"},"ap-northeast-3":{description:"Asia Pacific (Osaka)"},"ap-south-1":{description:"Asia Pacific (Mumbai)"},"ap-south-2":{description:"Asia Pacific (Hyderabad)"},"ap-southeast-1":{description:"Asia Pacific (Singapore)"},"ap-southeast-2":{description:"Asia Pacific (Sydney)"},"ap-southeast-3":{description:"Asia Pacific (Jakarta)"},"ap-southeast-4":{description:"Asia Pacific (Melbourne)"},"ap-southeast-5":{description:"Asia Pacific (Malaysia)"},"ap-southeast-7":{description:"Asia Pacific (Thailand)"},"aws-global":{description:"AWS Standard global region"},"ca-central-1":{description:"Canada (Central)"},"ca-west-1":{description:"Canada West (Calgary)"},"eu-central-1":{description:"Europe (Frankfurt)"},"eu-central-2":{description:"Europe (Zurich)"},"eu-north-1":{description:"Europe (Stockholm)"},"eu-south-1":{description:"Europe (Milan)"},"eu-south-2":{description:"Europe (Spain)"},"eu-west-1":{description:"Europe (Ireland)"},"eu-west-2":{description:"Europe (London)"},"eu-west-3":{description:"Europe (Paris)"},"il-central-1":{description:"Israel (Tel Aviv)"},"me-central-1":{description:"Middle East (UAE)"},"me-south-1":{description:"Middle East (Bahrain)"},"mx-central-1":{description:"Mexico (Central)"},"sa-east-1":{description:"South America (Sao Paulo)"},"us-east-1":{description:"US East (N. Virginia)"},"us-east-2":{description:"US East (Ohio)"},"us-west-1":{description:"US West (N. California)"},"us-west-2":{description:"US West (Oregon)"}}},{id:"aws-cn",outputs:{dnsSuffix:"amazonaws.com.cn",dualStackDnsSuffix:"api.amazonwebservices.com.cn",implicitGlobalRegion:"cn-northwest-1",name:"aws-cn",supportsDualStack:!0,supportsFIPS:!0},regionRegex:"^cn\\-\\w+\\-\\d+$",regions:{"aws-cn-global":{description:"AWS China global region"},"cn-north-1":{description:"China (Beijing)"},"cn-northwest-1":{description:"China (Ningxia)"}}},{id:"aws-us-gov",outputs:{dnsSuffix:"amazonaws.com",dualStackDnsSuffix:"api.aws",implicitGlobalRegion:"us-gov-west-1",name:"aws-us-gov",supportsDualStack:!0,supportsFIPS:!0},regionRegex:"^us\\-gov\\-\\w+\\-\\d+$",regions:{"aws-us-gov-global":{description:"AWS GovCloud (US) global region"},"us-gov-east-1":{description:"AWS GovCloud (US-East)"},"us-gov-west-1":{description:"AWS GovCloud (US-West)"}}},{id:"aws-iso",outputs:{dnsSuffix:"c2s.ic.gov",dualStackDnsSuffix:"c2s.ic.gov",implicitGlobalRegion:"us-iso-east-1",name:"aws-iso",supportsDualStack:!1,supportsFIPS:!0},regionRegex:"^us\\-iso\\-\\w+\\-\\d+$",regions:{"aws-iso-global":{description:"AWS ISO (US) global region"},"us-iso-east-1":{description:"US ISO East"},"us-iso-west-1":{description:"US ISO WEST"}}},{id:"aws-iso-b",outputs:{dnsSuffix:"sc2s.sgov.gov",dualStackDnsSuffix:"sc2s.sgov.gov",implicitGlobalRegion:"us-isob-east-1",name:"aws-iso-b",supportsDualStack:!1,supportsFIPS:!0},regionRegex:"^us\\-isob\\-\\w+\\-\\d+$",regions:{"aws-iso-b-global":{description:"AWS ISOB (US) global region"},"us-isob-east-1":{description:"US ISOB East (Ohio)"}}},{id:"aws-iso-e",outputs:{dnsSuffix:"cloud.adc-e.uk",dualStackDnsSuffix:"cloud.adc-e.uk",implicitGlobalRegion:"eu-isoe-west-1",name:"aws-iso-e",supportsDualStack:!1,supportsFIPS:!0},regionRegex:"^eu\\-isoe\\-\\w+\\-\\d+$",regions:{"aws-iso-e-global":{description:"AWS ISOE (Europe) global region"},"eu-isoe-west-1":{description:"EU ISOE West"}}},{id:"aws-iso-f",outputs:{dnsSuffix:"csp.hci.ic.gov",dualStackDnsSuffix:"csp.hci.ic.gov",implicitGlobalRegion:"us-isof-south-1",name:"aws-iso-f",supportsDualStack:!1,supportsFIPS:!0},regionRegex:"^us\\-isof\\-\\w+\\-\\d+$",regions:{"aws-iso-f-global":{description:"AWS ISOF global region"},"us-isof-east-1":{description:"US ISOF EAST"},"us-isof-south-1":{description:"US ISOF SOUTH"}}},{id:"aws-eusc",outputs:{dnsSuffix:"amazonaws.eu",dualStackDnsSuffix:"amazonaws.eu",implicitGlobalRegion:"eusc-de-east-1",name:"aws-eusc",supportsDualStack:!1,supportsFIPS:!0},regionRegex:"^eusc\\-(de)\\-\\w+\\-\\d+$",regions:{"eusc-de-east-1":{description:"EU (Germany)"}}}],version:"1.1"},C_=b_,x_="",P_=$t(e=>{let{partitions:t}=C_;for(let n of t){let{regions:o,outputs:s}=n;for(let[i,a]of Object.entries(o))if(i===e)return{...s,...a}}for(let n of t){let{regionRegex:o,outputs:s}=n;if(new RegExp(o).test(e))return{...s}}let r=t.find(n=>n.id==="aws");if(!r)throw new Error("Provided region was not found in the partition array or regex, and default partition with id 'aws' doesn't exist.");return{...r.outputs}},"partition"),A_=$t((e,t="")=>{C_=e,x_=t},"setPartitionInfo"),DF=$t(()=>{A_(b_,"")},"useDefaultPartitionInfo"),MF=$t(()=>x_,"getUserAgentPrefix"),T_={isVirtualHostableS3Bucket:w_,parseArn:kF,partition:P_};V.customEndpointFunctions.aws=T_;var FF=jt(),BF=$t(e=>{if(typeof e.endpointProvider!="function")throw new Error("@aws-sdk/util-endpoint - endpointProvider and endpoint missing in config for this client.");let{endpoint:t}=e;return t===void 0&&(e.endpoint=async()=>O_(e.endpointProvider({Region:typeof e.region=="function"?await e.region():e.region,UseDualStack:typeof e.useDualstackEndpoint=="function"?await e.useDualstackEndpoint():e.useDualstackEndpoint,UseFIPS:typeof e.useFipsEndpoint=="function"?await e.useFipsEndpoint():e.useFipsEndpoint,Endpoint:void 0},{logger:e.logger}))),e},"resolveDefaultAwsRegionalEndpointsConfig"),O_=$t(e=>(0,FF.parseUrl)(e.url),"toEndpointV1")});var Ci,en,I_=y(()=>{c();Ci={warningEmitted:!1},en=e=>{e&&!Ci.warningEmitted&&parseInt(e.substring(1,e.indexOf(".")))<18&&(Ci.warningEmitted=!0,process.emitWarning(`NodeDeprecationWarning: The AWS SDK for JavaScript (v3) will
no longer support Node.js 16.x on January 6, 2025.

To continue receiving updates to AWS services, bug fixes, and security
updates please upgrade to a supported Node.js LTS version.

More information can be found at: https://a.co/74kJMmI`))}});function qt(e,t,r){return e.$source||(e.$source={}),e.$source[t]=r,e}var N_=y(()=>{c()});function k_(e,t,r){e.__aws_sdk_context?e.__aws_sdk_context.features||(e.__aws_sdk_context.features={}):e.__aws_sdk_context={features:{}},e.__aws_sdk_context.features[t]=r}var D_=y(()=>{c()});function M_(e,t,r){return e.$source||(e.$source={}),e.$source[t]=r,e}var F_=y(()=>{c()});var Gt={};Ye(Gt,{emitWarningIfUnsupportedVersion:()=>en,setCredentialFeature:()=>qt,setFeature:()=>k_,setTokenFeature:()=>M_,state:()=>Ci});var Ve=y(()=>{c();I_();N_();D_();F_()});var B_,Jd,L_=y(()=>{c();B_=E(q()),Jd=e=>B_.HttpResponse.isInstance(e)?e.headers?.date??e.headers?.Date:void 0});var tn,Xd=y(()=>{c();tn=e=>new Date(Date.now()+e)});var U_,H_=y(()=>{c();Xd();U_=(e,t)=>Math.abs(tn(t).getTime()-e)>=3e5});var Qd,j_=y(()=>{c();H_();Qd=(e,t)=>{let r=Date.parse(e);return U_(r,t)?r-Date.now():t}});var Zd=y(()=>{c();L_();Xd();j_()});var $_,lo,rn,be,eu,tu=y(()=>{c();$_=E(q());Zd();lo=(e,t)=>{if(!t)throw new Error(`Property \`${e}\` is not resolved for AWS SDK SigV4Auth`);return t},rn=async e=>{let t=lo("context",e.context),r=lo("config",e.config),n=t.endpointV2?.properties?.authSchemes?.[0],s=await lo("signer",r.signer)(n),i=e?.signingRegion,a=e?.signingRegionSet,l=e?.signingName;return{config:r,signer:s,signingRegion:i,signingRegionSet:a,signingName:l}},be=class{async sign(t,r,n){if(!$_.HttpRequest.isInstance(t))throw new Error("The request is not an instance of `HttpRequest` and cannot be signed");let o=await rn(n),{config:s,signer:i}=o,{signingRegion:a,signingName:l}=o,d=n.context;if(d?.authSchemes?.length??!1){let[f,g]=d.authSchemes;f?.name==="sigv4a"&&g?.name==="sigv4"&&(a=g?.signingRegion??a,l=g?.signingName??l)}return await i.sign(t,{signingDate:tn(s.systemClockOffset),signingRegion:a,signingService:l})}errorHandler(t){return r=>{let n=r.ServerTime??Jd(r.$response);if(n){let o=lo("config",t.config),s=o.systemClockOffset;o.systemClockOffset=Qd(n,o.systemClockOffset),o.systemClockOffset!==s&&r.$metadata&&(r.$metadata.clockSkewCorrected=!0)}throw r}}successHandler(t,r){let n=Jd(t);if(n){let o=lo("config",r.config);o.systemClockOffset=Qd(n,o.systemClockOffset)}}},eu=be});var q_,uo,G_=y(()=>{c();q_=E(q());Zd();tu();uo=class extends be{async sign(t,r,n){if(!q_.HttpRequest.isInstance(t))throw new Error("The request is not an instance of `HttpRequest` and cannot be signed");let{config:o,signer:s,signingRegion:i,signingRegionSet:a,signingName:l}=await rn(n),u=(await o.sigv4aSigningRegionSet?.()??a??[i]).join(",");return await s.sign(t,{signingDate:tn(o.systemClockOffset),signingRegion:u,signingService:l})}}});var ru,V_=y(()=>{c();ru=e=>typeof e=="string"&&e.length>0?e.split(",").map(t=>t.trim()):[]});var xi,nu=y(()=>{c();xi=e=>`AWS_BEARER_TOKEN_${e.replace(/[\s-]/g,"_").toUpperCase()}`});var z_,W_,nn,K_=y(()=>{c();V_();nu();z_="AWS_AUTH_SCHEME_PREFERENCE",W_="auth_scheme_preference",nn={environmentVariableSelector:(e,t)=>{if(t?.signingName&&xi(t.signingName)in e)return["httpBearerAuth"];if(z_ in e)return ru(e[z_])},configFileSelector:e=>{if(W_ in e)return ru(e[W_])},default:[]}});var _e=w((dQ,Z_)=>{c();var Pi=Object.defineProperty,LF=Object.getOwnPropertyDescriptor,UF=Object.getOwnPropertyNames,HF=Object.prototype.hasOwnProperty,Cr=(e,t)=>Pi(e,"name",{value:t,configurable:!0}),jF=(e,t)=>{for(var r in t)Pi(e,r,{get:t[r],enumerable:!0})},$F=(e,t,r,n)=>{if(t&&typeof t=="object"||typeof t=="function")for(let o of UF(t))!HF.call(e,o)&&o!==r&&Pi(e,o,{get:()=>t[o],enumerable:!(n=LF(t,o))||n.enumerable});return e},qF=e=>$F(Pi({},"__esModule",{value:!0}),e),Y_={};jF(Y_,{CredentialsProviderError:()=>GF,ProviderError:()=>Ai,TokenProviderError:()=>VF,chain:()=>zF,fromStatic:()=>WF,memoize:()=>KF});Z_.exports=qF(Y_);var Ai=class J_ extends Error{constructor(t,r=!0){let n,o=!0;typeof r=="boolean"?(n=void 0,o=r):r!=null&&typeof r=="object"&&(n=r.logger,o=r.tryNextLink??!0),super(t),this.name="ProviderError",this.tryNextLink=o,Object.setPrototypeOf(this,J_.prototype),n?.debug?.(`@smithy/property-provider ${o?"->":"(!)"} ${t}`)}static{Cr(this,"ProviderError")}static from(t,r=!0){return Object.assign(new this(t.message,r),t)}},GF=class X_ extends Ai{constructor(t,r=!0){super(t,r),this.name="CredentialsProviderError",Object.setPrototypeOf(this,X_.prototype)}static{Cr(this,"CredentialsProviderError")}},VF=class Q_ extends Ai{constructor(t,r=!0){super(t,r),this.name="TokenProviderError",Object.setPrototypeOf(this,Q_.prototype)}static{Cr(this,"TokenProviderError")}},zF=Cr((...e)=>async()=>{if(e.length===0)throw new Ai("No providers in chain");let t;for(let r of e)try{return await r()}catch(n){if(t=n,n?.tryNextLink)continue;throw n}throw t},"chain"),WF=Cr(e=>()=>Promise.resolve(e),"fromStatic"),KF=Cr((e,t,r)=>{let n,o,s,i=!1,a=Cr(async()=>{o||(o=e());try{n=await o,s=!0,i=!1}finally{o=void 0}return n},"coalesceProvider");return t===void 0?async l=>((!s||l?.forceRefresh)&&(n=await a()),n):async l=>((!s||l?.forceRefresh)&&(n=await a()),i?n:r&&!r(n)?(i=!0,n):(t(n)&&await a(),n))},"memoize")});var ou,ev,tv,rv=y(()=>{c();ce();ou=E(_e()),ev=e=>(e.sigv4aSigningRegionSet=Lt(e.sigv4aSigningRegionSet),e),tv={environmentVariableSelector(e){if(e.AWS_SIGV4A_SIGNING_REGION_SET)return e.AWS_SIGV4A_SIGNING_REGION_SET.split(",").map(t=>t.trim());throw new ou.ProviderError("AWS_SIGV4A_SIGNING_REGION_SET not set in env.",{tryNextLink:!0})},configFileSelector(e){if(e.sigv4a_signing_region_set)return(e.sigv4a_signing_region_set??"").split(",").map(t=>t.trim());throw new ou.ProviderError("sigv4a_signing_region_set not set in profile.",{tryNextLink:!0})},default:void 0}});var Nv=w((gQ,Iv)=>{c();var Di=Object.defineProperty,YF=Object.getOwnPropertyDescriptor,JF=Object.getOwnPropertyNames,XF=Object.prototype.hasOwnProperty,le=(e,t)=>Di(e,"name",{value:t,configurable:!0}),QF=(e,t)=>{for(var r in t)Di(e,r,{get:t[r],enumerable:!0})},ZF=(e,t,r,n)=>{if(t&&typeof t=="object"||typeof t=="function")for(let o of JF(t))!XF.call(e,o)&&o!==r&&Di(e,o,{get:()=>t[o],enumerable:!(n=YF(t,o))||n.enumerable});return e},eB=e=>ZF(Di({},"__esModule",{value:!0}),e),cv={};QF(cv,{ALGORITHM_IDENTIFIER:()=>Ti,ALGORITHM_IDENTIFIER_V4A:()=>oB,ALGORITHM_QUERY_PARAM:()=>lv,ALWAYS_UNSIGNABLE_HEADERS:()=>yv,AMZ_DATE_HEADER:()=>pu,AMZ_DATE_QUERY_PARAM:()=>cu,AUTH_HEADER:()=>uu,CREDENTIAL_QUERY_PARAM:()=>dv,DATE_HEADER:()=>fv,EVENT_ALGORITHM_IDENTIFIER:()=>Sv,EXPIRES_QUERY_PARAM:()=>pv,GENERATED_HEADERS:()=>mv,HOST_HEADER:()=>rB,KEY_TYPE_IDENTIFIER:()=>fu,MAX_CACHE_SIZE:()=>wv,MAX_PRESIGNED_TTL:()=>bv,PROXY_HEADER_PATTERN:()=>_v,REGION_SET_PARAM:()=>tB,SEC_HEADER_PATTERN:()=>vv,SHA256_HEADER:()=>ki,SIGNATURE_HEADER:()=>gv,SIGNATURE_QUERY_PARAM:()=>lu,SIGNED_HEADERS_QUERY_PARAM:()=>uv,SignatureV4:()=>gB,SignatureV4Base:()=>Rv,TOKEN_HEADER:()=>hv,TOKEN_QUERY_PARAM:()=>du,UNSIGNABLE_PATTERNS:()=>nB,UNSIGNED_PAYLOAD:()=>Ev,clearCredentialCache:()=>iB,createScope:()=>Ri,getCanonicalHeaders:()=>su,getCanonicalQuery:()=>Ov,getPayloadHash:()=>Ii,getSigningKey:()=>Cv,hasHeader:()=>Pv,moveHeadersToQuery:()=>Tv,prepareRequest:()=>au,signatureV4aContainer:()=>hB});Iv.exports=eB(cv);var ov=ie(),lv="X-Amz-Algorithm",dv="X-Amz-Credential",cu="X-Amz-Date",uv="X-Amz-SignedHeaders",pv="X-Amz-Expires",lu="X-Amz-Signature",du="X-Amz-Security-Token",tB="X-Amz-Region-Set",uu="authorization",pu=cu.toLowerCase(),fv="date",mv=[uu,pu,fv],gv=lu.toLowerCase(),ki="x-amz-content-sha256",hv=du.toLowerCase(),rB="host",yv={authorization:!0,"cache-control":!0,connection:!0,expect:!0,from:!0,"keep-alive":!0,"max-forwards":!0,pragma:!0,referer:!0,te:!0,trailer:!0,"transfer-encoding":!0,upgrade:!0,"user-agent":!0,"x-amzn-trace-id":!0},_v=/^proxy-/,vv=/^sec-/,nB=[/^proxy-/i,/^sec-/i],Ti="AWS4-HMAC-SHA256",oB="AWS4-ECDSA-P256-SHA256",Sv="AWS4-HMAC-SHA256-PAYLOAD",Ev="UNSIGNED-PAYLOAD",wv=50,fu="aws4_request",bv=3600*24*7,Vt=Vn(),sB=ie(),on={},Oi=[],Ri=le((e,t,r)=>`${e}/${t}/${r}/${fu}`,"createScope"),Cv=le(async(e,t,r,n,o)=>{let s=await sv(e,t.secretAccessKey,t.accessKeyId),i=`${r}:${n}:${o}:${(0,Vt.toHex)(s)}:${t.sessionToken}`;if(i in on)return on[i];for(Oi.push(i);Oi.length>wv;)delete on[Oi.shift()];let a=`AWS4${t.secretAccessKey}`;for(let l of[r,n,o,fu])a=await sv(e,a,l);return on[i]=a},"getSigningKey"),iB=le(()=>{Oi.length=0,Object.keys(on).forEach(e=>{delete on[e]})},"clearCredentialCache"),sv=le((e,t,r)=>{let n=new e(t);return n.update((0,sB.toUint8Array)(r)),n.digest()},"hmac"),su=le(({headers:e},t,r)=>{let n={};for(let o of Object.keys(e).sort()){if(e[o]==null)continue;let s=o.toLowerCase();(s in yv||t?.has(s)||_v.test(s)||vv.test(s))&&(!r||r&&!r.has(s))||(n[s]=e[o].trim().replace(/\s+/g," "))}return n},"getCanonicalHeaders"),aB=Ul(),cB=ie(),Ii=le(async({headers:e,body:t},r)=>{for(let n of Object.keys(e))if(n.toLowerCase()===ki)return e[n];if(t==null)return"e3b0c44298fc1c149afbf4c8996fb92427ae41e4649b934ca495991b7852b855";if(typeof t=="string"||ArrayBuffer.isView(t)||(0,aB.isArrayBuffer)(t)){let n=new r;return n.update((0,cB.toUint8Array)(t)),(0,Vt.toHex)(await n.digest())}return Ev},"getPayloadHash"),iv=ie(),lB=class{static{le(this,"HeaderFormatter")}format(e){let t=[];for(let o of Object.keys(e)){let s=(0,iv.fromUtf8)(o);t.push(Uint8Array.from([s.byteLength]),s,this.formatHeaderValue(e[o]))}let r=new Uint8Array(t.reduce((o,s)=>o+s.byteLength,0)),n=0;for(let o of t)r.set(o,n),n+=o.byteLength;return r}formatHeaderValue(e){switch(e.type){case"boolean":return Uint8Array.from([e.value?0:1]);case"byte":return Uint8Array.from([2,e.value]);case"short":let t=new DataView(new ArrayBuffer(3));return t.setUint8(0,3),t.setInt16(1,e.value,!1),new Uint8Array(t.buffer);case"integer":let r=new DataView(new ArrayBuffer(5));return r.setUint8(0,4),r.setInt32(1,e.value,!1),new Uint8Array(r.buffer);case"long":let n=new Uint8Array(9);return n[0]=5,n.set(e.value.bytes,1),n;case"binary":let o=new DataView(new ArrayBuffer(3+e.value.byteLength));o.setUint8(0,6),o.setUint16(1,e.value.byteLength,!1);let s=new Uint8Array(o.buffer);return s.set(e.value,3),s;case"string":let i=(0,iv.fromUtf8)(e.value),a=new DataView(new ArrayBuffer(3+i.byteLength));a.setUint8(0,7),a.setUint16(1,i.byteLength,!1);let l=new Uint8Array(a.buffer);return l.set(i,3),l;case"timestamp":let d=new Uint8Array(9);return d[0]=8,d.set(uB.fromNumber(e.value.valueOf()).bytes,1),d;case"uuid":if(!dB.test(e.value))throw new Error(`Invalid UUID received: ${e.value}`);let u=new Uint8Array(17);return u[0]=9,u.set((0,Vt.fromHex)(e.value.replace(/\-/g,"")),1),u}}},dB=/^[a-f0-9]{8}-[a-f0-9]{4}-[a-f0-9]{4}-[a-f0-9]{4}-[a-f0-9]{12}$/,uB=class xv{constructor(t){if(this.bytes=t,t.byteLength!==8)throw new Error("Int64 buffers must be exactly 8 bytes")}static{le(this,"Int64")}static fromNumber(t){if(t>9223372036854776e3||t<-9223372036854776e3)throw new Error(`${t} is too large (or, if negative, too small) to represent as an Int64`);let r=new Uint8Array(8);for(let n=7,o=Math.abs(Math.round(t));n>-1&&o>0;n--,o/=256)r[n]=o;return t<0&&iu(r),new xv(r)}valueOf(){let t=this.bytes.slice(0),r=t[0]&128;return r&&iu(t),parseInt((0,Vt.toHex)(t),16)*(r?-1:1)}toString(){return String(this.valueOf())}};function iu(e){for(let t=0;t<8;t++)e[t]^=255;for(let t=7;t>-1&&(e[t]++,e[t]===0);t--);}le(iu,"negate");var Pv=le((e,t)=>{e=e.toLowerCase();for(let r of Object.keys(t))if(e===r.toLowerCase())return!0;return!1},"hasHeader"),Av=q(),Tv=le((e,t={})=>{let{headers:r,query:n={}}=Av.HttpRequest.clone(e);for(let o of Object.keys(r)){let s=o.toLowerCase();(s.slice(0,6)==="x-amz-"&&!t.unhoistableHeaders?.has(s)||t.hoistableHeaders?.has(s))&&(n[o]=r[o],delete r[o])}return{...e,headers:r,query:n}},"moveHeadersToQuery"),au=le(e=>{e=Av.HttpRequest.clone(e);for(let t of Object.keys(e.headers))mv.indexOf(t.toLowerCase())>-1&&delete e.headers[t];return e},"prepareRequest"),av=Ge(),pB=ie(),Ni=ed(),Ov=le(({query:e={}})=>{let t=[],r={};for(let n of Object.keys(e)){if(n.toLowerCase()===gv)continue;let o=(0,Ni.escapeUri)(n);t.push(o);let s=e[n];typeof s=="string"?r[o]=`${o}=${(0,Ni.escapeUri)(s)}`:Array.isArray(s)&&(r[o]=s.slice(0).reduce((i,a)=>i.concat([`${o}=${(0,Ni.escapeUri)(a)}`]),[]).sort().join("&"))}return t.sort().map(n=>r[n]).filter(n=>n).join("&")},"getCanonicalQuery"),fB=le(e=>mB(e).toISOString().replace(/\.\d{3}Z$/,"Z"),"iso8601"),mB=le(e=>typeof e=="number"?new Date(e*1e3):typeof e=="string"?Number(e)?new Date(Number(e)*1e3):new Date(e):e,"toDate"),Rv=class{static{le(this,"SignatureV4Base")}constructor({applyChecksum:e,credentials:t,region:r,service:n,sha256:o,uriEscapePath:s=!0}){this.service=n,this.sha256=o,this.uriEscapePath=s,this.applyChecksum=typeof e=="boolean"?e:!0,this.regionProvider=(0,av.normalizeProvider)(r),this.credentialProvider=(0,av.normalizeProvider)(t)}createCanonicalRequest(e,t,r){let n=Object.keys(t).sort();return`${e.method}
${this.getCanonicalPath(e)}
${Ov(e)}
${n.map(o=>`${o}:${t[o]}`).join(`
`)}

${n.join(";")}
${r}`}async createStringToSign(e,t,r,n){let o=new this.sha256;o.update((0,pB.toUint8Array)(r));let s=await o.digest();return`${n}
${e}
${t}
${(0,Vt.toHex)(s)}`}getCanonicalPath({path:e}){if(this.uriEscapePath){let t=[];for(let o of e.split("/"))o?.length!==0&&o!=="."&&(o===".."?t.pop():t.push(o));let r=`${e?.startsWith("/")?"/":""}${t.join("/")}${t.length>0&&e?.endsWith("/")?"/":""}`;return(0,Ni.escapeUri)(r).replace(/%2F/g,"/")}return e}validateResolvedCredentials(e){if(typeof e!="object"||typeof e.accessKeyId!="string"||typeof e.secretAccessKey!="string")throw new Error("Resolved credential object is not valid")}formatDate(e){let t=fB(e).replace(/[\-:]/g,"");return{longDate:t,shortDate:t.slice(0,8)}}getCanonicalHeaderList(e){return Object.keys(e).sort().join(";")}},gB=class extends Rv{constructor({applyChecksum:e,credentials:t,region:r,service:n,sha256:o,uriEscapePath:s=!0}){super({applyChecksum:e,credentials:t,region:r,service:n,sha256:o,uriEscapePath:s}),this.headerFormatter=new lB}static{le(this,"SignatureV4")}async presign(e,t={}){let{signingDate:r=new Date,expiresIn:n=3600,unsignableHeaders:o,unhoistableHeaders:s,signableHeaders:i,hoistableHeaders:a,signingRegion:l,signingService:d}=t,u=await this.credentialProvider();this.validateResolvedCredentials(u);let f=l??await this.regionProvider(),{longDate:g,shortDate:h}=this.formatDate(r);if(n>bv)return Promise.reject("Signature version 4 presigned URLs must have an expiration date less than one week in the future");let _=Ri(h,f,d??this.service),v=Tv(au(e),{unhoistableHeaders:s,hoistableHeaders:a});u.sessionToken&&(v.query[du]=u.sessionToken),v.query[lv]=Ti,v.query[dv]=`${u.accessKeyId}/${_}`,v.query[cu]=g,v.query[pv]=n.toString(10);let S=su(v,o,i);return v.query[uv]=this.getCanonicalHeaderList(S),v.query[lu]=await this.getSignature(g,_,this.getSigningKey(u,f,h,d),this.createCanonicalRequest(v,S,await Ii(e,this.sha256))),v}async sign(e,t){return typeof e=="string"?this.signString(e,t):e.headers&&e.payload?this.signEvent(e,t):e.message?this.signMessage(e,t):this.signRequest(e,t)}async signEvent({headers:e,payload:t},{signingDate:r=new Date,priorSignature:n,signingRegion:o,signingService:s}){let i=o??await this.regionProvider(),{shortDate:a,longDate:l}=this.formatDate(r),d=Ri(a,i,s??this.service),u=await Ii({headers:{},body:t},this.sha256),f=new this.sha256;f.update(e);let g=(0,Vt.toHex)(await f.digest()),h=[Sv,l,d,n,g,u].join(`
`);return this.signString(h,{signingDate:r,signingRegion:i,signingService:s})}async signMessage(e,{signingDate:t=new Date,signingRegion:r,signingService:n}){return this.signEvent({headers:this.headerFormatter.format(e.message.headers),payload:e.message.body},{signingDate:t,signingRegion:r,signingService:n,priorSignature:e.priorSignature}).then(s=>({message:e.message,signature:s}))}async signString(e,{signingDate:t=new Date,signingRegion:r,signingService:n}={}){let o=await this.credentialProvider();this.validateResolvedCredentials(o);let s=r??await this.regionProvider(),{shortDate:i}=this.formatDate(t),a=new this.sha256(await this.getSigningKey(o,s,i,n));return a.update((0,ov.toUint8Array)(e)),(0,Vt.toHex)(await a.digest())}async signRequest(e,{signingDate:t=new Date,signableHeaders:r,unsignableHeaders:n,signingRegion:o,signingService:s}={}){let i=await this.credentialProvider();this.validateResolvedCredentials(i);let a=o??await this.regionProvider(),l=au(e),{longDate:d,shortDate:u}=this.formatDate(t),f=Ri(u,a,s??this.service);l.headers[pu]=d,i.sessionToken&&(l.headers[hv]=i.sessionToken);let g=await Ii(l,this.sha256);!Pv(ki,l.headers)&&this.applyChecksum&&(l.headers[ki]=g);let h=su(l,n,r),_=await this.getSignature(d,f,this.getSigningKey(i,a,u,s),this.createCanonicalRequest(l,h,g));return l.headers[uu]=`${Ti} Credential=${i.accessKeyId}/${f}, SignedHeaders=${this.getCanonicalHeaderList(h)}, Signature=${_}`,l}async getSignature(e,t,r,n){let o=await this.createStringToSign(e,t,n,Ti),s=new this.sha256(await r);return s.update((0,ov.toUint8Array)(o)),(0,Vt.toHex)(await s.digest())}getSigningKey(e,t,r,n){return Cv(this.sha256,e,r,t,n||this.service)}},hB={SignatureV4a:null}});function yB(e,{credentials:t,credentialDefaultProvider:r}){let n;return t?t?.memoized?n=t:n=Gd(t,qd,_i):r?n=Lt(r(Object.assign({},e,{parentClientConfig:e}))):n=async()=>{throw new Error("@aws-sdk/core::resolveAwsSdkSigV4Config - `credentials` not provided and no credentialDefaultProvider was configured.")},n.memoized=!0,n}function _B(e,t){if(t.configBound)return t;let r=async n=>t({...n,callerClientConfig:e});return r.memoized=t.memoized,r.configBound=!0,r}var mu,xr,kv,Dv=y(()=>{c();Ve();ce();mu=E(Nv()),xr=e=>{let t=e.credentials,r=!!e.credentials,n;Object.defineProperty(e,"credentials",{set(d){d&&d!==t&&d!==n&&(r=!0),t=d;let u=yB(e,{credentials:t,credentialDefaultProvider:e.credentialDefaultProvider}),f=_B(e,u);r&&!f.attributed?(n=async g=>f(g).then(h=>qt(h,"CREDENTIALS_CODE","e")),n.memoized=f.memoized,n.configBound=f.configBound,n.attributed=!0):n=f},get(){return n},enumerable:!0,configurable:!0}),e.credentials=t;let{signingEscapePath:o=!0,systemClockOffset:s=e.systemClockOffset||0,sha256:i}=e,a;return e.signer?a=Lt(e.signer):e.regionInfoProvider?a=()=>Lt(e.region)().then(async d=>[await e.regionInfoProvider(d,{useFipsEndpoint:await e.useFipsEndpoint(),useDualstackEndpoint:await e.useDualstackEndpoint()})||{},d]).then(([d,u])=>{let{signingRegion:f,signingService:g}=d;e.signingRegion=e.signingRegion||f||u,e.signingName=e.signingName||g||e.serviceId;let h={...e,credentials:e.credentials,region:e.signingRegion,service:e.signingName,sha256:i,uriEscapePath:o},_=e.signerConstructor||mu.SignatureV4;return new _(h)}):a=async d=>{d=Object.assign({},{name:"sigv4",signingName:e.signingName||e.defaultSigningName,signingRegion:await Lt(e.region)(),properties:{}},d);let u=d.signingRegion,f=d.signingName;e.signingRegion=e.signingRegion||u,e.signingName=e.signingName||f||e.serviceId;let g={...e,credentials:e.credentials,region:e.signingRegion,service:e.signingName,sha256:i,uriEscapePath:o},h=e.signerConstructor||mu.SignatureV4;return new h(g)},Object.assign(e,{systemClockOffset:s,signingEscapePath:o,signer:a})},kv=xr});var Mv=y(()=>{c();tu();G_();K_();rv();Dv()});var Fv={};Ye(Fv,{AWSSDKSigV4Signer:()=>eu,AwsSdkSigV4ASigner:()=>uo,AwsSdkSigV4Signer:()=>be,NODE_AUTH_SCHEME_PREFERENCE_OPTIONS:()=>nn,NODE_SIGV4A_CONFIG_OPTIONS:()=>tv,getBearerTokenEnvKey:()=>xi,resolveAWSSDKSigV4Config:()=>kv,resolveAwsSdkSigV4AConfig:()=>ev,resolveAwsSdkSigV4Config:()=>xr,validateSigningProperties:()=>rn});var gu=y(()=>{c();Mv();nu()});var vB,SB,EB,Bv=y(()=>{c();vB=e=>{if(e==null)return e;if(typeof e=="number"||typeof e=="bigint"){let t=new Error(`Received number ${e} where a string was expected.`);return t.name="Warning",console.warn(t),String(e)}if(typeof e=="boolean"){let t=new Error(`Received boolean ${e} where a string was expected.`);return t.name="Warning",console.warn(t),String(e)}return e},SB=e=>{if(e==null)return e;if(typeof e=="string"){let t=e.toLowerCase();if(e!==""&&t!=="false"&&t!=="true"){let r=new Error(`Received string "${e}" where a boolean was expected.`);r.name="Warning",console.warn(r)}return e!==""&&t!=="false"}return e},EB=e=>{if(e==null)return e;if(typeof e=="string"){let t=Number(e);if(t.toString()!==e){let r=new Error(`Received string "${e}" where a number was expected.`);return r.name="Warning",console.warn(r),e}return t}return e}});var po=w((FQ,Hv)=>{c();var Mi=Object.defineProperty,wB=Object.getOwnPropertyDescriptor,bB=Object.getOwnPropertyNames,CB=Object.prototype.hasOwnProperty,xB=(e,t)=>Mi(e,"name",{value:t,configurable:!0}),PB=(e,t)=>{for(var r in t)Mi(e,r,{get:t[r],enumerable:!0})},AB=(e,t,r,n)=>{if(t&&typeof t=="object"||typeof t=="function")for(let o of bB(t))!CB.call(e,o)&&o!==r&&Mi(e,o,{get:()=>t[o],enumerable:!(n=wB(t,o))||n.enumerable});return e},TB=e=>AB(Mi({},"__esModule",{value:!0}),e),Uv={};PB(Uv,{calculateBodyLength:()=>OB});Hv.exports=TB(Uv);var Lv=typeof TextEncoder=="function"?new TextEncoder:null,OB=xB(e=>{if(typeof e=="string"){if(Lv)return Lv.encode(e).byteLength;let t=e.length;for(let r=t-1;r>=0;r--){let n=e.charCodeAt(r);n>127&&n<=2047?t++:n>2047&&n<=65535&&(t+=2),n>=56320&&n<=57343&&r--}return t}else{if(typeof e.byteLength=="number")return e.byteLength;if(typeof e.size=="number")return e.size}throw new Error(`Body Length computation failed for ${e}`)},"calculateBodyLength")});var fe,zt=y(()=>{c();fe=class{serdeContext;setSerdeContext(t){this.serdeContext=t}}});function jv(e,t,r){if(r?.source){let n=r.source;if(typeof t=="number"&&(t>Number.MAX_SAFE_INTEGER||t<Number.MIN_SAFE_INTEGER||n!==String(t)))return n.includes(".")?new ae(n,"bigDecimal"):BigInt(n)}return t}var $v=y(()=>{c();Ne()});var Wv=w((qQ,zv)=>{c();var Fi=Object.defineProperty,RB=Object.getOwnPropertyDescriptor,IB=Object.getOwnPropertyNames,NB=Object.prototype.hasOwnProperty,ke=(e,t)=>Fi(e,"name",{value:t,configurable:!0}),kB=(e,t)=>{for(var r in t)Fi(e,r,{get:t[r],enumerable:!0})},DB=(e,t,r,n)=>{if(t&&typeof t=="object"||typeof t=="function")for(let o of IB(t))!NB.call(e,o)&&o!==r&&Fi(e,o,{get:()=>t[o],enumerable:!(n=RB(t,o))||n.enumerable});return e},MB=e=>DB(Fi({},"__esModule",{value:!0}),e),Vv={};kB(Vv,{constructStack:()=>hu});zv.exports=MB(Vv);var Pr=ke((e,t)=>{let r=[];if(e&&r.push(e),t)for(let n of t)r.push(n);return r},"getAllAliases"),Wt=ke((e,t)=>`${e||"anonymous"}${t&&t.length>0?` (a.k.a. ${t.join(",")})`:""}`,"getMiddlewareNameWithAliases"),hu=ke(()=>{let e=[],t=[],r=!1,n=new Set,o=ke(f=>f.sort((g,h)=>qv[h.step]-qv[g.step]||Gv[h.priority||"normal"]-Gv[g.priority||"normal"]),"sort"),s=ke(f=>{let g=!1,h=ke(_=>{let v=Pr(_.name,_.aliases);if(v.includes(f)){g=!0;for(let S of v)n.delete(S);return!1}return!0},"filterCb");return e=e.filter(h),t=t.filter(h),g},"removeByName"),i=ke(f=>{let g=!1,h=ke(_=>{if(_.middleware===f){g=!0;for(let v of Pr(_.name,_.aliases))n.delete(v);return!1}return!0},"filterCb");return e=e.filter(h),t=t.filter(h),g},"removeByReference"),a=ke(f=>(e.forEach(g=>{f.add(g.middleware,{...g})}),t.forEach(g=>{f.addRelativeTo(g.middleware,{...g})}),f.identifyOnResolve?.(u.identifyOnResolve()),f),"cloneTo"),l=ke(f=>{let g=[];return f.before.forEach(h=>{h.before.length===0&&h.after.length===0?g.push(h):g.push(...l(h))}),g.push(f),f.after.reverse().forEach(h=>{h.before.length===0&&h.after.length===0?g.push(h):g.push(...l(h))}),g},"expandRelativeMiddlewareList"),d=ke((f=!1)=>{let g=[],h=[],_={};return e.forEach(S=>{let b={...S,before:[],after:[]};for(let C of Pr(b.name,b.aliases))_[C]=b;g.push(b)}),t.forEach(S=>{let b={...S,before:[],after:[]};for(let C of Pr(b.name,b.aliases))_[C]=b;h.push(b)}),h.forEach(S=>{if(S.toMiddleware){let b=_[S.toMiddleware];if(b===void 0){if(f)return;throw new Error(`${S.toMiddleware} is not found when adding ${Wt(S.name,S.aliases)} middleware ${S.relation} ${S.toMiddleware}`)}S.relation==="after"&&b.after.push(S),S.relation==="before"&&b.before.push(S)}}),o(g).map(l).reduce((S,b)=>(S.push(...b),S),[])},"getMiddlewareList"),u={add:(f,g={})=>{let{name:h,override:_,aliases:v}=g,S={step:"initialize",priority:"normal",middleware:f,...g},b=Pr(h,v);if(b.length>0){if(b.some(C=>n.has(C))){if(!_)throw new Error(`Duplicate middleware name '${Wt(h,v)}'`);for(let C of b){let I=e.findIndex(T=>T.name===C||T.aliases?.some(j=>j===C));if(I===-1)continue;let R=e[I];if(R.step!==S.step||S.priority!==R.priority)throw new Error(`"${Wt(R.name,R.aliases)}" middleware with ${R.priority} priority in ${R.step} step cannot be overridden by "${Wt(h,v)}" middleware with ${S.priority} priority in ${S.step} step.`);e.splice(I,1)}}for(let C of b)n.add(C)}e.push(S)},addRelativeTo:(f,g)=>{let{name:h,override:_,aliases:v}=g,S={middleware:f,...g},b=Pr(h,v);if(b.length>0){if(b.some(C=>n.has(C))){if(!_)throw new Error(`Duplicate middleware name '${Wt(h,v)}'`);for(let C of b){let I=t.findIndex(T=>T.name===C||T.aliases?.some(j=>j===C));if(I===-1)continue;let R=t[I];if(R.toMiddleware!==S.toMiddleware||R.relation!==S.relation)throw new Error(`"${Wt(R.name,R.aliases)}" middleware ${R.relation} "${R.toMiddleware}" middleware cannot be overridden by "${Wt(h,v)}" middleware ${S.relation} "${S.toMiddleware}" middleware.`);t.splice(I,1)}}for(let C of b)n.add(C)}t.push(S)},clone:()=>a(hu()),use:f=>{f.applyToStack(u)},remove:f=>typeof f=="string"?s(f):i(f),removeByTag:f=>{let g=!1,h=ke(_=>{let{tags:v,name:S,aliases:b}=_;if(v&&v.includes(f)){let C=Pr(S,b);for(let I of C)n.delete(I);return g=!0,!1}return!0},"filterCb");return e=e.filter(h),t=t.filter(h),g},concat:f=>{let g=a(hu());return g.use(f),g.identifyOnResolve(r||g.identifyOnResolve()||(f.identifyOnResolve?.()??!1)),g},applyToStack:a,identify:()=>d(!0).map(f=>{let g=f.step??f.relation+" "+f.toMiddleware;return Wt(f.name,f.aliases)+" - "+g}),identifyOnResolve(f){return typeof f=="boolean"&&(r=f),r},resolve:(f,g)=>{for(let h of d().map(_=>_.middleware).reverse())f=h(f,g);return r&&console.log(u.identify()),f}};return u},"constructStack"),qv={initialize:5,serialize:4,build:3,finalizeRequest:2,deserialize:1},Gv={high:3,normal:2,low:1}});var M=w((VQ,bu)=>{c();var Bi=Object.defineProperty,FB=Object.getOwnPropertyDescriptor,BB=Object.getOwnPropertyNames,LB=Object.prototype.hasOwnProperty,U=(e,t)=>Bi(e,"name",{value:t,configurable:!0}),UB=(e,t)=>{for(var r in t)Bi(e,r,{get:t[r],enumerable:!0})},_u=(e,t,r,n)=>{if(t&&typeof t=="object"||typeof t=="function")for(let o of BB(t))!LB.call(e,o)&&o!==r&&Bi(e,o,{get:()=>t[o],enumerable:!(n=FB(t,o))||n.enumerable});return e},HB=(e,t,r)=>(_u(e,t,"default"),r&&_u(r,t,"default")),jB=e=>_u(Bi({},"__esModule",{value:!0}),e),Eu={};UB(Eu,{Client:()=>$B,Command:()=>Jv,NoOpLogger:()=>sL,SENSITIVE_STRING:()=>GB,ServiceException:()=>zB,_json:()=>Su,collectBody:()=>yu.collectBody,convertMap:()=>iL,createAggregatedClient:()=>VB,decorateServiceException:()=>Xv,emitWarningIfUnsupportedVersion:()=>JB,extendedEncodeURIComponent:()=>yu.extendedEncodeURIComponent,getArrayIfSingleItem:()=>nL,getDefaultClientConfiguration:()=>tL,getDefaultExtensionConfiguration:()=>Zv,getValueFromTextNode:()=>eS,isSerializableHeaderValue:()=>oL,loadConfigsForDefaultMode:()=>YB,map:()=>wu,resolveDefaultRuntimeConfig:()=>rL,resolvedPath:()=>yu.resolvedPath,serializeDateTime:()=>pL,serializeFloat:()=>uL,take:()=>aL,throwDefaultError:()=>Qv,withBaseException:()=>WB});bu.exports=jB(Eu);var Yv=Wv(),$B=class{constructor(e){this.config=e,this.middlewareStack=(0,Yv.constructStack)()}static{U(this,"Client")}send(e,t,r){let n=typeof t!="function"?t:void 0,o=typeof t=="function"?t:r,s=n===void 0&&this.config.cacheMiddleware===!0,i;if(s){this.handlers||(this.handlers=new WeakMap);let a=this.handlers;a.has(e.constructor)?i=a.get(e.constructor):(i=e.resolveMiddleware(this.middlewareStack,this.config,n),a.set(e.constructor,i))}else delete this.handlers,i=e.resolveMiddleware(this.middlewareStack,this.config,n);if(o)i(e).then(a=>o(null,a.output),a=>o(a)).catch(()=>{});else return i(e).then(a=>a.output)}destroy(){this.config?.requestHandler?.destroy?.(),delete this.handlers}},yu=(St(),D(Vy)),vu=Je(),Jv=class{constructor(){this.middlewareStack=(0,Yv.constructStack)()}static{U(this,"Command")}static classBuilder(){return new qB}resolveMiddlewareWithContext(e,t,r,{middlewareFn:n,clientName:o,commandName:s,inputFilterSensitiveLog:i,outputFilterSensitiveLog:a,smithyContext:l,additionalContext:d,CommandCtor:u}){for(let v of n.bind(this)(u,e,t,r))this.middlewareStack.use(v);let f=e.concat(this.middlewareStack),{logger:g}=t,h={logger:g,clientName:o,commandName:s,inputFilterSensitiveLog:i,outputFilterSensitiveLog:a,[vu.SMITHY_CONTEXT_KEY]:{commandInstance:this,...l},...d},{requestHandler:_}=t;return f.resolve(v=>_.handle(v.request,r||{}),h)}},qB=class{constructor(){this._init=()=>{},this._ep={},this._middlewareFn=()=>[],this._commandName="",this._clientName="",this._additionalContext={},this._smithyContext={},this._inputFilterSensitiveLog=e=>e,this._outputFilterSensitiveLog=e=>e,this._serializer=null,this._deserializer=null}static{U(this,"ClassBuilder")}init(e){this._init=e}ep(e){return this._ep=e,this}m(e){return this._middlewareFn=e,this}s(e,t,r={}){return this._smithyContext={service:e,operation:t,...r},this}c(e={}){return this._additionalContext=e,this}n(e,t){return this._clientName=e,this._commandName=t,this}f(e=r=>r,t=r=>r){return this._inputFilterSensitiveLog=e,this._outputFilterSensitiveLog=t,this}ser(e){return this._serializer=e,this}de(e){return this._deserializer=e,this}sc(e){return this._operationSchema=e,this._smithyContext.operationSchema=e,this}build(){let e=this,t;return t=class extends Jv{constructor(...[r]){super(),this.serialize=e._serializer,this.deserialize=e._deserializer,this.input=r??{},e._init(this),this.schema=e._operationSchema}static{U(this,"CommandRef")}static getEndpointParameterInstructions(){return e._ep}resolveMiddleware(r,n,o){return this.resolveMiddlewareWithContext(r,n,o,{CommandCtor:t,middlewareFn:e._middlewareFn,clientName:e._clientName,commandName:e._commandName,inputFilterSensitiveLog:e._inputFilterSensitiveLog,outputFilterSensitiveLog:e._outputFilterSensitiveLog,smithyContext:e._smithyContext,additionalContext:e._additionalContext})}}}},GB="***SensitiveInformation***",VB=U((e,t)=>{for(let r of Object.keys(e)){let n=e[r],o=U(async function(i,a,l){let d=new n(i);if(typeof a=="function")this.send(d,a);else if(typeof l=="function"){if(typeof a!="object")throw new Error(`Expected http options but got ${typeof a}`);this.send(d,a||{},l)}else return this.send(d,a)},"methodImpl"),s=(r[0].toLowerCase()+r.slice(1)).replace(/Command$/,"");t.prototype[s]=o}},"createAggregatedClient"),zB=class fo extends Error{static{U(this,"ServiceException")}constructor(t){super(t.message),Object.setPrototypeOf(this,Object.getPrototypeOf(this).constructor.prototype),this.name=t.name,this.$fault=t.$fault,this.$metadata=t.$metadata}static isInstance(t){if(!t)return!1;let r=t;return fo.prototype.isPrototypeOf(r)||!!r.$fault&&!!r.$metadata&&(r.$fault==="client"||r.$fault==="server")}static[Symbol.hasInstance](t){if(!t)return!1;let r=t;return this===fo?fo.isInstance(t):fo.isInstance(t)?r.name&&this.name?this.prototype.isPrototypeOf(t)||r.name===this.name:this.prototype.isPrototypeOf(t):!1}},Xv=U((e,t={})=>{Object.entries(t).filter(([,n])=>n!==void 0).forEach(([n,o])=>{(e[n]==null||e[n]==="")&&(e[n]=o)});let r=e.message||e.Message||"UnknownError";return e.message=r,delete e.Message,e},"decorateServiceException"),Qv=U(({output:e,parsedBody:t,exceptionCtor:r,errorCode:n})=>{let o=KB(e),s=o.httpStatusCode?o.httpStatusCode+"":void 0,i=new r({name:t?.code||t?.Code||n||s||"UnknownError",$fault:"client",$metadata:o});throw Xv(i,t)},"throwDefaultError"),WB=U(e=>({output:t,parsedBody:r,errorCode:n})=>{Qv({output:t,parsedBody:r,exceptionCtor:e,errorCode:n})},"withBaseException"),KB=U(e=>({httpStatusCode:e.statusCode,requestId:e.headers["x-amzn-requestid"]??e.headers["x-amzn-request-id"]??e.headers["x-amz-request-id"],extendedRequestId:e.headers["x-amz-id-2"],cfId:e.headers["x-amz-cf-id"]}),"deserializeMetadata"),YB=U(e=>{switch(e){case"standard":return{retryMode:"standard",connectionTimeout:3100};case"in-region":return{retryMode:"standard",connectionTimeout:1100};case"cross-region":return{retryMode:"standard",connectionTimeout:3100};case"mobile":return{retryMode:"standard",connectionTimeout:3e4};default:return{}}},"loadConfigsForDefaultMode"),Kv=!1,JB=U(e=>{e&&!Kv&&parseInt(e.substring(1,e.indexOf(".")))<16&&(Kv=!0)},"emitWarningIfUnsupportedVersion"),XB=U(e=>{let t=[];for(let r in vu.AlgorithmId){let n=vu.AlgorithmId[r];e[n]!==void 0&&t.push({algorithmId:()=>n,checksumConstructor:()=>e[n]})}return{addChecksumAlgorithm(r){t.push(r)},checksumAlgorithms(){return t}}},"getChecksumConfiguration"),QB=U(e=>{let t={};return e.checksumAlgorithms().forEach(r=>{t[r.algorithmId()]=r.checksumConstructor()}),t},"resolveChecksumRuntimeConfig"),ZB=U(e=>({setRetryStrategy(t){e.retryStrategy=t},retryStrategy(){return e.retryStrategy}}),"getRetryConfiguration"),eL=U(e=>{let t={};return t.retryStrategy=e.retryStrategy(),t},"resolveRetryRuntimeConfig"),Zv=U(e=>Object.assign(XB(e),ZB(e)),"getDefaultExtensionConfiguration"),tL=Zv,rL=U(e=>Object.assign(QB(e),eL(e)),"resolveDefaultRuntimeConfig"),nL=U(e=>Array.isArray(e)?e:[e],"getArrayIfSingleItem"),eS=U(e=>{let t="#text";for(let r in e)e.hasOwnProperty(r)&&e[r][t]!==void 0?e[r]=e[r][t]:typeof e[r]=="object"&&e[r]!==null&&(e[r]=eS(e[r]));return e},"getValueFromTextNode"),oL=U(e=>e!=null,"isSerializableHeaderValue"),sL=class{static{U(this,"NoOpLogger")}trace(){}debug(){}info(){}warn(){}error(){}};function wu(e,t,r){let n,o,s;if(typeof t>"u"&&typeof r>"u")n={},s=e;else{if(n=e,typeof t=="function")return o=t,s=r,cL(n,o,s);s=t}for(let i of Object.keys(s)){if(!Array.isArray(s[i])){n[i]=s[i];continue}tS(n,null,s,i)}return n}U(wu,"map");var iL=U(e=>{let t={};for(let[r,n]of Object.entries(e||{}))t[r]=[,n];return t},"convertMap"),aL=U((e,t)=>{let r={};for(let n in t)tS(r,e,t,n);return r},"take"),cL=U((e,t,r)=>wu(e,Object.entries(r).reduce((n,[o,s])=>(Array.isArray(s)?n[o]=s:typeof s=="function"?n[o]=[t,s()]:n[o]=[t,s],n),{})),"mapWithFilter"),tS=U((e,t,r,n)=>{if(t!==null){let i=r[n];typeof i=="function"&&(i=[,i]);let[a=lL,l=dL,d=n]=i;(typeof a=="function"&&a(t[d])||typeof a!="function"&&a)&&(e[n]=l(t[d]));return}let[o,s]=r[n];if(typeof s=="function"){let i,a=o===void 0&&(i=s())!=null,l=typeof o=="function"&&!!o(void 0)||typeof o!="function"&&!!o;a?e[n]=i:l&&(e[n]=s())}else{let i=o===void 0&&s!=null,a=typeof o=="function"&&!!o(s)||typeof o!="function"&&!!o;(i||a)&&(e[n]=s)}},"applyInstruction"),lL=U(e=>e!=null,"nonNullish"),dL=U(e=>e,"pass"),uL=U(e=>{if(e!==e)return"NaN";switch(e){case 1/0:return"Infinity";case-1/0:return"-Infinity";default:return e}},"serializeFloat"),pL=U(e=>e.toISOString().replace(".000Z","Z"),"serializeDateTime"),Su=U(e=>{if(e==null)return{};if(Array.isArray(e))return e.filter(t=>t!=null).map(Su);if(typeof e=="object"){let t={};for(let r of Object.keys(e))e[r]!=null&&(t[r]=Su(e[r]));return t}return e},"_json");HB(Eu,(Ne(),D(Dy)),bu.exports)});var rS,Li,Cu=y(()=>{c();rS=E(M()),Li=(e,t)=>(0,rS.collectBody)(e,t).then(r=>t.utf8Encoder(r))});var sn,xu,Ar,mo=y(()=>{c();Cu();sn=(e,t)=>Li(e,t).then(r=>{if(r.length)try{return JSON.parse(r)}catch(n){throw n?.name==="SyntaxError"&&Object.defineProperty(n,"$responseBodyText",{value:r}),n}return{}}),xu=async(e,t)=>{let r=await sn(e,t);return r.message=r.message??r.Message,r},Ar=(e,t)=>{let r=(s,i)=>Object.keys(s).find(a=>a.toLowerCase()===i.toLowerCase()),n=s=>{let i=s;return typeof i=="number"&&(i=i.toString()),i.indexOf(",")>=0&&(i=i.split(",")[0]),i.indexOf(":")>=0&&(i=i.split(":")[0]),i.indexOf("#")>=0&&(i=i.split("#")[1]),i},o=r(e.headers,"x-amzn-errortype");if(o!==void 0)return n(e.headers[o]);if(t&&typeof t=="object"){let s=r(t,"code");if(s&&t[s]!==void 0)return n(t[s]);if(t.__type!==void 0)return n(t.__type)}}});var nS,go,Pu=y(()=>{c();re();Ne();nS=E(ge());zt();$v();mo();go=class extends fe{settings;constructor(t){super(),this.settings=t}async read(t,r){return this._read(t,typeof r=="string"?JSON.parse(r,jv):await sn(r,this.serdeContext))}readObject(t,r){return this._read(t,r)}_read(t,r){let n=r!==null&&typeof r=="object",o=O.of(t);if(o.isListSchema()&&Array.isArray(r)){let i=o.getValueSchema(),a=[],l=!!o.getMergedTraits().sparse;for(let d of r)(l||d!=null)&&a.push(this._read(i,d));return a}else if(o.isMapSchema()&&n){let i=o.getValueSchema(),a={},l=!!o.getMergedTraits().sparse;for(let[d,u]of Object.entries(r))(l||u!=null)&&(a[d]=this._read(i,u));return a}else if(o.isStructSchema()&&n){let i={};for(let[a,l]of o.structIterator()){let d=this.settings.jsonName?l.getMergedTraits().jsonName??a:a,u=this._read(l,r[d]);u!=null&&(i[a]=u)}return i}if(o.isBlobSchema()&&typeof r=="string")return(0,nS.fromBase64)(r);let s=o.getMergedTraits().mediaType;if(o.isStringSchema()&&typeof r=="string"&&s&&(s==="application/json"||s.endsWith("+json")))return ye.from(r);if(o.isTimestampSchema()){let i=this.settings.timestampFormat;switch(i.useTrait?o.getSchema()===P.TIMESTAMP_DEFAULT?i.default:o.getSchema()??i.default:i.default){case P.TIMESTAMP_DATE_TIME:return ro(r);case P.TIMESTAMP_HTTP_DATE:return no(r);case P.TIMESTAMP_EPOCH_SECONDS:return oo(r);default:return console.warn("Missing timestamp format, parsing value with Date constructor:",r),new Date(r)}}if(o.isBigIntegerSchema()&&(typeof r=="number"||typeof r=="string"))return BigInt(r);if(o.isBigDecimalSchema()&&r!=null)return r instanceof ae?r:new ae(String(r),"bigDecimal");if(o.isNumericSchema()&&typeof r=="string")switch(r){case"Infinity":return 1/0;case"-Infinity":return-1/0;case"NaN":return NaN}return r}}});var oS,Ui,sS=y(()=>{c();Ne();oS="\u039D",Ui=class{values=new Map;counter=0;stage=0;createReplacer(){if(this.stage===1)throw new Error("@aws-sdk/core/protocols - JsonReplacer already created.");if(this.stage===2)throw new Error("@aws-sdk/core/protocols - JsonReplacer exhausted.");return this.stage=1,(t,r)=>{if(r instanceof ae){let n=`${oS+ +"nv"+this.counter++}_`+r.string;return this.values.set(`"${n}"`,r.string),n}if(typeof r=="bigint"){let n=r.toString(),o=`${oS+"b"+this.counter++}_`+n;return this.values.set(`"${o}"`,n),o}return r}}replaceInJson(t){if(this.stage===0)throw new Error("@aws-sdk/core/protocols - JsonReplacer not created yet.");if(this.stage===2)throw new Error("@aws-sdk/core/protocols - JsonReplacer exhausted.");if(this.stage=2,this.counter===0)return t;for(let[r,n]of this.values)t=t.replace(r,n);return t}}});var ho,Au=y(()=>{c();re();Ne();Ne();zt();sS();ho=class extends fe{settings;buffer;rootSchema;constructor(t){super(),this.settings=t}write(t,r){this.rootSchema=O.of(t),this.buffer=this._write(this.rootSchema,r)}flush(){if(this.rootSchema?.isStructSchema()||this.rootSchema?.isDocumentSchema()){let t=new Ui;return t.replaceInJson(JSON.stringify(this.buffer,t.createReplacer(),0))}return this.buffer}_write(t,r,n){let o=r!==null&&typeof r=="object",s=O.of(t);if(s.isListSchema()&&Array.isArray(r)){let a=s.getValueSchema(),l=[],d=!!s.getMergedTraits().sparse;for(let u of r)(d||u!=null)&&l.push(this._write(a,u));return l}else if(s.isMapSchema()&&o){let a=s.getValueSchema(),l={},d=!!s.getMergedTraits().sparse;for(let[u,f]of Object.entries(r))(d||f!=null)&&(l[u]=this._write(a,f));return l}else if(s.isStructSchema()&&o){let a={};for(let[l,d]of s.structIterator()){let u=this.settings.jsonName?d.getMergedTraits().jsonName??l:l,f=this._write(d,r[l],s);f!==void 0&&(a[u]=f)}return a}if(r===null&&n?.isStructSchema())return;if(s.isBlobSchema()&&(r instanceof Uint8Array||typeof r=="string")){if(s===this.rootSchema)return r;if(!this.serdeContext?.base64Encoder)throw new Error("Missing base64Encoder in serdeContext");return this.serdeContext?.base64Encoder(r)}if(s.isTimestampSchema()&&r instanceof Date){let a=this.settings.timestampFormat;switch(a.useTrait?s.getSchema()===P.TIMESTAMP_DEFAULT?a.default:s.getSchema()??a.default:a.default){case P.TIMESTAMP_DATE_TIME:return r.toISOString().replace(".000Z","Z");case P.TIMESTAMP_HTTP_DATE:return to(r);case P.TIMESTAMP_EPOCH_SECONDS:return r.getTime()/1e3;default:return console.warn("Missing timestamp format, using epoch seconds",r),r.getTime()/1e3}}if(s.isNumericSchema()&&typeof r=="number"&&(Math.abs(r)===1/0||isNaN(r)))return String(r);let i=s.getMergedTraits().mediaType;return s.isStringSchema()&&typeof r=="string"&&i&&(i==="application/json"||i.endsWith("+json"))?ye.from(r):r}}});var Tr,Hi=y(()=>{c();zt();Pu();Au();Tr=class extends fe{settings;constructor(t){super(),this.settings=t}createSerializer(){let t=new ho(this.settings);return t.setSerdeContext(this.serdeContext),t}createDeserializer(){let t=new go(this.settings);return t.setSerdeContext(this.serdeContext),t}}});var iS,Or,ji=y(()=>{c();St();re();iS=E(po());Hi();mo();Or=class extends _r{serializer;deserializer;codec;constructor({defaultNamespace:t}){super({defaultNamespace:t}),this.codec=new Tr({timestampFormat:{useTrait:!0,default:P.TIMESTAMP_EPOCH_SECONDS},jsonName:!1}),this.serializer=this.codec.createSerializer(),this.deserializer=this.codec.createDeserializer()}async serializeRequest(t,r,n){let o=await super.serializeRequest(t,r,n);o.path.endsWith("/")||(o.path+="/"),Object.assign(o.headers,{"content-type":`application/x-amz-json-${this.getJsonRpcVersion()}`,"x-amz-target":(this.getJsonRpcVersion()==="1.0"?"JsonRpc10.":"JsonProtocol.")+O.of(t).getName()}),(vt(t.input)==="unit"||!o.body)&&(o.body="{}");try{o.headers["content-length"]=String((0,iS.calculateBodyLength)(o.body))}catch{}return o}getPayloadCodec(){return this.codec}async handleError(t,r,n,o,s){let i=Ar(n,o)??"Unknown",a=this.options.defaultNamespace,l=i;i.includes("#")&&([a,l]=i.split("#"));let d=he.for(a),u;try{u=d.getSchema(i)}catch{let S=he.for("smithy.ts.sdk.synthetic."+a).getBaseException();if(S){let b=S.ctor;throw Object.assign(new b(l),o)}throw new Error(l)}let f=O.of(u),g=o.message??o.Message??"Unknown",h=new u.ctor(g);await this.deserializeHttpMessage(u,r,n,o);let _={};for(let[v,S]of f.structIterator()){let b=S.getMergedTraits().jsonName??v;_[v]=this.codec.createDeserializer().readObject(S,o[b])}throw Object.assign(h,{$metadata:s,$response:n,$fault:f.getMergedTraits().error,message:g,..._}),h}}});var Tu,aS=y(()=>{c();ji();Tu=class extends Or{constructor({defaultNamespace:t}){super({defaultNamespace:t})}getShapeId(){return"aws.protocols#awsJson1_0"}getJsonRpcVersion(){return"1.0"}}});var Ou,cS=y(()=>{c();ji();Ou=class extends Or{constructor({defaultNamespace:t}){super({defaultNamespace:t})}getShapeId(){return"aws.protocols#awsJson1_1"}getJsonRpcVersion(){return"1.1"}}});var lS,Ru,dS=y(()=>{c();St();re();lS=E(po());Hi();mo();Ru=class extends yr{serializer;deserializer;codec;constructor({defaultNamespace:t}){super({defaultNamespace:t});let r={timestampFormat:{useTrait:!0,default:P.TIMESTAMP_EPOCH_SECONDS},httpBindings:!0,jsonName:!0};this.codec=new Tr(r),this.serializer=new wr(this.codec.createSerializer(),r),this.deserializer=new Er(this.codec.createDeserializer(),r)}getShapeId(){return"aws.protocols#restJson1"}getPayloadCodec(){return this.codec}setSerdeContext(t){this.codec.setSerdeContext(t),super.setSerdeContext(t)}async serializeRequest(t,r,n){let o=await super.serializeRequest(t,r,n),s=O.of(t.input),i=s.getMemberSchemas();if(!o.headers["content-type"]){let a=Object.values(i).find(l=>!!l.getMergedTraits().httpPayload);if(a){let l=a.getMergedTraits().mediaType;l?o.headers["content-type"]=l:a.isStringSchema()?o.headers["content-type"]="text/plain":a.isBlobSchema()?o.headers["content-type"]="application/octet-stream":o.headers["content-type"]="application/json"}else s.isUnitSchema()||Object.values(i).find(d=>{let{httpQuery:u,httpQueryParams:f,httpHeader:g,httpLabel:h,httpPrefixHeaders:_}=d.getMergedTraits();return!u&&!f&&!g&&!h&&_===void 0})&&(o.headers["content-type"]="application/json")}if(o.headers["content-type"]&&!o.body&&(o.body="{}"),o.body)try{o.headers["content-length"]=String((0,lS.calculateBodyLength)(o.body))}catch{}return o}async handleError(t,r,n,o,s){let i=Ar(n,o)??"Unknown",a=this.options.defaultNamespace,l=i;i.includes("#")&&([a,l]=i.split("#"));let d=he.for(a),u;try{u=d.getSchema(i)}catch{let S=he.for("smithy.ts.sdk.synthetic."+a).getBaseException();if(S){let b=S.ctor;throw Object.assign(new b(l),o)}throw new Error(l)}let f=O.of(u),g=o.message??o.Message??"Unknown",h=new u.ctor(g);await this.deserializeHttpMessage(u,r,n,o);let _={};for(let[v,S]of f.structIterator()){let b=S.getMergedTraits().jsonName??v;_[v]=this.codec.createDeserializer().readObject(S,o[b])}throw Object.assign(h,{$metadata:s,$response:n,$fault:f.getMergedTraits().error,message:g,..._}),h}}});var uS,fL,pS=y(()=>{c();uS=E(M()),fL=e=>{if(e!=null)return typeof e=="object"&&"__type"in e&&delete e.__type,(0,uS.expectUnion)(e)}});function $i(e,t){let r=[],n=t.exec(e);for(;n;){let o=[];o.startIndex=t.lastIndex-n[0].length;let s=n.length;for(let i=0;i<s;i++)o.push(n[i]);r.push(o),n=t.exec(e)}return r}function mS(e){return typeof e<"u"}var fS,mL,gL,hL,yo,qi=y(()=>{"use strict";c();fS=":A-Za-z_\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD",mL=fS+"\\-.\\d\\u00B7\\u0300-\\u036F\\u203F-\\u2040",gL="["+fS+"]["+mL+"]*",hL=new RegExp("^"+gL+"$");yo=function(e){let t=hL.exec(e);return!(t===null||typeof t>"u")}});function vS(e,t){t=Object.assign({},yL,t);let r=[],n=!1,o=!1;e[0]==="\uFEFF"&&(e=e.substr(1));for(let s=0;s<e.length;s++)if(e[s]==="<"&&e[s+1]==="?"){if(s+=2,s=hS(e,s),s.err)return s}else if(e[s]==="<"){let i=s;if(s++,e[s]==="!"){s=yS(e,s);continue}else{let a=!1;e[s]==="/"&&(a=!0,s++);let l="";for(;s<e.length&&e[s]!==">"&&e[s]!==" "&&e[s]!=="	"&&e[s]!==`
`&&e[s]!=="\r";s++)l+=e[s];if(l=l.trim(),l[l.length-1]==="/"&&(l=l.substring(0,l.length-1),s--),!xL(l)){let f;return l.trim().length===0?f="Invalid space after '<'.":f="Tag '"+l+"' is an invalid name.",Y("InvalidTag",f,ve(e,s))}let d=SL(e,s);if(d===!1)return Y("InvalidAttr","Attributes for '"+l+"' have open quote.",ve(e,s));let u=d.value;if(s=d.index,u[u.length-1]==="/"){let f=s-u.length;u=u.substring(0,u.length-1);let g=_S(u,t);if(g===!0)n=!0;else return Y(g.err.code,g.err.msg,ve(e,f+g.err.line))}else if(a)if(d.tagClosed){if(u.trim().length>0)return Y("InvalidTag","Closing tag '"+l+"' can't have attributes or invalid starting.",ve(e,i));if(r.length===0)return Y("InvalidTag","Closing tag '"+l+"' has not been opened.",ve(e,i));{let f=r.pop();if(l!==f.tagName){let g=ve(e,f.tagStartPos);return Y("InvalidTag","Expected closing tag '"+f.tagName+"' (opened in line "+g.line+", col "+g.col+") instead of closing tag '"+l+"'.",ve(e,i))}r.length==0&&(o=!0)}}else return Y("InvalidTag","Closing tag '"+l+"' doesn't have proper closing.",ve(e,s));else{let f=_S(u,t);if(f!==!0)return Y(f.err.code,f.err.msg,ve(e,s-u.length+f.err.line));if(o===!0)return Y("InvalidXml","Multiple possible root nodes found.",ve(e,s));t.unpairedTags.indexOf(l)!==-1||r.push({tagName:l,tagStartPos:i}),n=!0}for(s++;s<e.length;s++)if(e[s]==="<")if(e[s+1]==="!"){s++,s=yS(e,s);continue}else if(e[s+1]==="?"){if(s=hS(e,++s),s.err)return s}else break;else if(e[s]==="&"){let f=bL(e,s);if(f==-1)return Y("InvalidChar","char '&' is not expected.",ve(e,s));s=f}else if(o===!0&&!gS(e[s]))return Y("InvalidXml","Extra text at the end",ve(e,s));e[s]==="<"&&s--}}else{if(gS(e[s]))continue;return Y("InvalidChar","char '"+e[s]+"' is not expected.",ve(e,s))}if(n){if(r.length==1)return Y("InvalidTag","Unclosed tag '"+r[0].tagName+"'.",ve(e,r[0].tagStartPos));if(r.length>0)return Y("InvalidXml","Invalid '"+JSON.stringify(r.map(s=>s.tagName),null,4).replace(/\r?\n/g,"")+"' found.",{line:1,col:1})}else return Y("InvalidXml","Start tag expected.",1);return!0}function gS(e){return e===" "||e==="	"||e===`
`||e==="\r"}function hS(e,t){let r=t;for(;t<e.length;t++)if(e[t]=="?"||e[t]==" "){let n=e.substr(r,t-r);if(t>5&&n==="xml")return Y("InvalidXml","XML declaration allowed only at the start of the document.",ve(e,t));if(e[t]=="?"&&e[t+1]==">"){t++;break}else continue}return t}function yS(e,t){if(e.length>t+5&&e[t+1]==="-"&&e[t+2]==="-"){for(t+=3;t<e.length;t++)if(e[t]==="-"&&e[t+1]==="-"&&e[t+2]===">"){t+=2;break}}else if(e.length>t+8&&e[t+1]==="D"&&e[t+2]==="O"&&e[t+3]==="C"&&e[t+4]==="T"&&e[t+5]==="Y"&&e[t+6]==="P"&&e[t+7]==="E"){let r=1;for(t+=8;t<e.length;t++)if(e[t]==="<")r++;else if(e[t]===">"&&(r--,r===0))break}else if(e.length>t+9&&e[t+1]==="["&&e[t+2]==="C"&&e[t+3]==="D"&&e[t+4]==="A"&&e[t+5]==="T"&&e[t+6]==="A"&&e[t+7]==="["){for(t+=8;t<e.length;t++)if(e[t]==="]"&&e[t+1]==="]"&&e[t+2]===">"){t+=2;break}}return t}function SL(e,t){let r="",n="",o=!1;for(;t<e.length;t++){if(e[t]===_L||e[t]===vL)n===""?n=e[t]:n!==e[t]||(n="");else if(e[t]===">"&&n===""){o=!0;break}r+=e[t]}return n!==""?!1:{value:r,index:t,tagClosed:o}}function _S(e,t){let r=$i(e,EL),n={};for(let o=0;o<r.length;o++){if(r[o][1].length===0)return Y("InvalidAttr","Attribute '"+r[o][2]+"' has no space in starting.",_o(r[o]));if(r[o][3]!==void 0&&r[o][4]===void 0)return Y("InvalidAttr","Attribute '"+r[o][2]+"' is without value.",_o(r[o]));if(r[o][3]===void 0&&!t.allowBooleanAttributes)return Y("InvalidAttr","boolean attribute '"+r[o][2]+"' is not allowed.",_o(r[o]));let s=r[o][2];if(!CL(s))return Y("InvalidAttr","Attribute '"+s+"' is an invalid name.",_o(r[o]));if(!n.hasOwnProperty(s))n[s]=1;else return Y("InvalidAttr","Attribute '"+s+"' is repeated.",_o(r[o]))}return!0}function wL(e,t){let r=/\d/;for(e[t]==="x"&&(t++,r=/[\da-fA-F]/);t<e.length;t++){if(e[t]===";")return t;if(!e[t].match(r))break}return-1}function bL(e,t){if(t++,e[t]===";")return-1;if(e[t]==="#")return t++,wL(e,t);let r=0;for(;t<e.length;t++,r++)if(!(e[t].match(/\w/)&&r<20)){if(e[t]===";")break;return-1}return t}function Y(e,t,r){return{err:{code:e,msg:t,line:r.line||r,col:r.col}}}function CL(e){return yo(e)}function xL(e){return yo(e)}function ve(e,t){let r=e.substring(0,t).split(/\r?\n/);return{line:r.length,col:r[r.length-1].length+1}}function _o(e){return e.startIndex+e[1].length}var yL,_L,vL,EL,SS=y(()=>{"use strict";c();qi();yL={allowBooleanAttributes:!1,unpairedTags:[]};_L='"',vL="'";EL=new RegExp(`(\\s*)([^\\s=]+)(\\s*=)?(\\s*(['"])(([\\s\\S])*?)\\5)?`,"g")});var PL,ES,wS=y(()=>{c();PL={preserveOrder:!1,attributeNamePrefix:"@_",attributesGroupName:!1,textNodeName:"#text",ignoreAttributes:!0,removeNSPrefix:!1,allowBooleanAttributes:!1,parseTagValue:!0,parseAttributeValue:!1,trimValues:!0,cdataPropName:!1,numberParseOptions:{hex:!0,leadingZeros:!0,eNotation:!0},tagValueProcessor:function(e,t){return t},attributeValueProcessor:function(e,t){return t},stopNodes:[],alwaysCreateTextNode:!1,isArray:()=>!1,commentPropName:!1,unpairedTags:[],processEntities:!0,htmlEntities:!1,ignoreDeclaration:!1,ignorePiTags:!1,transformTagName:!1,transformAttributeName:!1,updateTag:function(e,t,r){return e},captureMetaData:!1},ES=function(e){return Object.assign({},PL,e)}});var Gi,Pe,Vi=y(()=>{"use strict";c();typeof Symbol!="function"?Gi="@@xmlMetadata":Gi=Symbol("XML Node Metadata");Pe=class{constructor(t){this.tagname=t,this.child=[],this[":@"]={}}add(t,r){t==="__proto__"&&(t="#__proto__"),this.child.push({[t]:r})}addChild(t,r){t.tagname==="__proto__"&&(t.tagname="#__proto__"),t[":@"]&&Object.keys(t[":@"]).length>0?this.child.push({[t.tagname]:t.child,":@":t[":@"]}):this.child.push({[t.tagname]:t.child}),r!==void 0&&(this.child[this.child.length-1][Gi]={startIndex:r})}static getMetaDataSymbol(){return Gi}}});function Iu(e,t){let r={};if(e[t+3]==="O"&&e[t+4]==="C"&&e[t+5]==="T"&&e[t+6]==="Y"&&e[t+7]==="P"&&e[t+8]==="E"){t=t+9;let n=1,o=!1,s=!1,i="";for(;t<e.length;t++)if(e[t]==="<"&&!s){if(o&&Rr(e,"!ENTITY",t)){t+=7;let a,l;[a,l,t]=AL(e,t+1),l.indexOf("&")===-1&&(r[a]={regx:RegExp(`&${a};`,"g"),val:l})}else if(o&&Rr(e,"!ELEMENT",t)){t+=8;let{index:a}=OL(e,t+1);t=a}else if(o&&Rr(e,"!ATTLIST",t))t+=8;else if(o&&Rr(e,"!NOTATION",t)){t+=9;let{index:a}=TL(e,t+1);t=a}else if(Rr(e,"!--",t))s=!0;else throw new Error("Invalid DOCTYPE");n++,i=""}else if(e[t]===">"){if(s?e[t-1]==="-"&&e[t-2]==="-"&&(s=!1,n--):n--,n===0)break}else e[t]==="["?o=!0:i+=e[t];if(n!==0)throw new Error("Unclosed DOCTYPE")}else throw new Error("Invalid Tag instead of DOCTYPE");return{entities:r,i:t}}function AL(e,t){t=Kt(e,t);let r="";for(;t<e.length&&!/\s/.test(e[t])&&e[t]!=='"'&&e[t]!=="'";)r+=e[t],t++;if(Nu(r),t=Kt(e,t),e.substring(t,t+6).toUpperCase()==="SYSTEM")throw new Error("External entities are not supported");if(e[t]==="%")throw new Error("Parameter entities are not supported");let n="";return[t,n]=zi(e,t,"entity"),t--,[r,n,t]}function TL(e,t){t=Kt(e,t);let r="";for(;t<e.length&&!/\s/.test(e[t]);)r+=e[t],t++;Nu(r),t=Kt(e,t);let n=e.substring(t,t+6).toUpperCase();if(n!=="SYSTEM"&&n!=="PUBLIC")throw new Error(`Expected SYSTEM or PUBLIC, found "${n}"`);t+=n.length,t=Kt(e,t);let o=null,s=null;if(n==="PUBLIC")[t,o]=zi(e,t,"publicIdentifier"),t=Kt(e,t),(e[t]==='"'||e[t]==="'")&&([t,s]=zi(e,t,"systemIdentifier"));else if(n==="SYSTEM"&&([t,s]=zi(e,t,"systemIdentifier"),!s))throw new Error("Missing mandatory system identifier for SYSTEM notation");return{notationName:r,publicIdentifier:o,systemIdentifier:s,index:--t}}function zi(e,t,r){let n="",o=e[t];if(o!=='"'&&o!=="'")throw new Error(`Expected quoted string, found "${o}"`);for(t++;t<e.length&&e[t]!==o;)n+=e[t],t++;if(e[t]!==o)throw new Error(`Unterminated ${r} value`);return t++,[t,n]}function OL(e,t){t=Kt(e,t);let r="";for(;t<e.length&&!/\s/.test(e[t]);)r+=e[t],t++;if(!Nu(r))throw new Error(`Invalid element name: "${r}"`);t=Kt(e,t);let n="";if(e[t]==="E"&&Rr(e,"MPTY",t))t+=4;else if(e[t]==="A"&&Rr(e,"NY",t))t+=2;else if(e[t]==="("){for(t++;t<e.length&&e[t]!==")";)n+=e[t],t++;if(e[t]!==")")throw new Error("Unterminated content model")}else throw new Error(`Invalid Element Expression, found "${e[t]}"`);return{elementName:r,contentModel:n.trim(),index:t}}function Rr(e,t,r){for(let n=0;n<t.length;n++)if(t[n]!==e[r+n+1])return!1;return!0}function Nu(e){if(yo(e))return e;throw new Error(`Invalid entity name ${e}`)}var Kt,bS=y(()=>{c();qi();Kt=(e,t)=>{for(;t<e.length&&/\s/.test(e[t]);)t++;return t}});function ku(e,t={}){if(t=Object.assign({},NL,t),!e||typeof e!="string")return e;let r=e.trim();if(t.skipLike!==void 0&&t.skipLike.test(r))return e;if(e==="0")return 0;if(t.hex&&RL.test(r))return FL(r,16);if(r.search(/.+[eE].+/)!==-1)return DL(e,r,t);{let n=IL.exec(r);if(n){let o=n[1]||"",s=n[2],i=ML(n[3]),a=o?e[s.length+1]===".":e[s.length]===".";if(!t.leadingZeros&&(s.length>1||s.length===1&&!a))return e;{let l=Number(r),d=String(l);if(l===0)return l;if(d.search(/[eE]/)!==-1)return t.eNotation?l:e;if(r.indexOf(".")!==-1)return d==="0"||d===i||d===`${o}${i}`?l:e;let u=s?i:r;return s?u===d||o+u===d?l:e:u===d||u===o+d?l:e}}else return e}}function DL(e,t,r){if(!r.eNotation)return e;let n=t.match(kL);if(n){let o=n[1]||"",s=n[3].indexOf("e")===-1?"E":"e",i=n[2],a=o?e[i.length+1]===s:e[i.length]===s;return i.length>1&&a?e:i.length===1&&(n[3].startsWith(`.${s}`)||n[3][0]===s)?Number(t):r.leadingZeros&&!a?(t=(n[1]||"")+n[3],Number(t)):e}else return e}function ML(e){return e&&e.indexOf(".")!==-1&&(e=e.replace(/0+$/,""),e==="."?e="0":e[0]==="."?e="0"+e:e[e.length-1]==="."&&(e=e.substring(0,e.length-1))),e}function FL(e,t){if(parseInt)return parseInt(e,t);if(Number.parseInt)return Number.parseInt(e,t);if(window&&window.parseInt)return window.parseInt(e,t);throw new Error("parseInt, Number.parseInt, window.parseInt are not supported")}var RL,IL,NL,kL,CS=y(()=>{c();RL=/^[-+]?0x[a-fA-F0-9]+$/,IL=/^([\-\+])?(0*)([0-9]*(\.[0-9]*)?)$/,NL={hex:!0,leadingZeros:!0,decimalPoint:".",eNotation:!0};kL=/^([-+])?(0*)(\d*(\.\d*)?[eE][-\+]?\d+)$/});function Du(e){return typeof e=="function"?e:Array.isArray(e)?t=>{for(let r of e)if(typeof r=="string"&&t===r||r instanceof RegExp&&r.test(t))return!0}:()=>!1}var xS=y(()=>{c()});function BL(e){let t=Object.keys(e);for(let r=0;r<t.length;r++){let n=t[r];this.lastEntities[n]={regex:new RegExp("&"+n+";","g"),val:e[n]}}}function LL(e,t,r,n,o,s,i){if(e!==void 0&&(this.options.trimValues&&!n&&(e=e.trim()),e.length>0)){i||(e=this.replaceEntitiesValue(e));let a=this.options.tagValueProcessor(t,e,r,o,s);return a==null?e:typeof a!=typeof e||a!==e?a:this.options.trimValues?Fu(e,this.options.parseTagValue,this.options.numberParseOptions):e.trim()===e?Fu(e,this.options.parseTagValue,this.options.numberParseOptions):e}}function UL(e){if(this.options.removeNSPrefix){let t=e.split(":"),r=e.charAt(0)==="/"?"/":"";if(t[0]==="xmlns")return"";t.length===2&&(e=r+t[1])}return e}function jL(e,t,r){if(this.options.ignoreAttributes!==!0&&typeof e=="string"){let n=$i(e,HL),o=n.length,s={};for(let i=0;i<o;i++){let a=this.resolveNameSpace(n[i][1]);if(this.ignoreAttributesFn(a,t))continue;let l=n[i][4],d=this.options.attributeNamePrefix+a;if(a.length)if(this.options.transformAttributeName&&(d=this.options.transformAttributeName(d)),d==="__proto__"&&(d="#__proto__"),l!==void 0){this.options.trimValues&&(l=l.trim()),l=this.replaceEntitiesValue(l);let u=this.options.attributeValueProcessor(a,l,t);u==null?s[d]=l:typeof u!=typeof l||u!==l?s[d]=u:s[d]=Fu(l,this.options.parseAttributeValue,this.options.numberParseOptions)}else this.options.allowBooleanAttributes&&(s[d]=!0)}if(!Object.keys(s).length)return;if(this.options.attributesGroupName){let i={};return i[this.options.attributesGroupName]=s,i}return s}}function qL(e,t,r,n){this.options.captureMetaData||(n=void 0);let o=this.options.updateTag(t.tagname,r,t[":@"]);o===!1||(typeof o=="string"&&(t.tagname=o),e.addChild(t,n))}function VL(e,t,r,n){return e&&(n===void 0&&(n=t.child.length===0),e=this.parseTextData(e,t.tagname,r,!1,t[":@"]?Object.keys(t[":@"]).length!==0:!1,n),e!==void 0&&e!==""&&t.add(this.options.textNodeName,e),e=""),e}function zL(e,t,r){let n="*."+r;for(let o in e){let s=e[o];if(n===s||t===s)return!0}return!1}function WL(e,t,r=">"){let n,o="";for(let s=t;s<e.length;s++){let i=e[s];if(n)i===n&&(n="");else if(i==='"'||i==="'")n=i;else if(i===r[0])if(r[1]){if(e[s+1]===r[1])return{data:o,index:s}}else return{data:o,index:s};else i==="	"&&(i=" ");o+=i}}function Ir(e,t,r,n){let o=e.indexOf(t,r);if(o===-1)throw new Error(n);return o+t.length-1}function Mu(e,t,r,n=">"){let o=WL(e,t+1,n);if(!o)return;let s=o.data,i=o.index,a=s.search(/\s/),l=s,d=!0;a!==-1&&(l=s.substring(0,a),s=s.substring(a+1).trimStart());let u=l;if(r){let f=l.indexOf(":");f!==-1&&(l=l.substr(f+1),d=l!==o.data.substr(f+1))}return{tagName:l,tagExp:s,closeIndex:i,attrExpPresent:d,rawTagName:u}}function KL(e,t,r){let n=r,o=1;for(;r<e.length;r++)if(e[r]==="<")if(e[r+1]==="/"){let s=Ir(e,">",r,`${t} is not closed`);if(e.substring(r+2,s).trim()===t&&(o--,o===0))return{tagContent:e.substring(n,r),i:s};r=s}else if(e[r+1]==="?")r=Ir(e,"?>",r+1,"StopNode is not closed.");else if(e.substr(r+1,3)==="!--")r=Ir(e,"-->",r+3,"StopNode is not closed.");else if(e.substr(r+1,2)==="![")r=Ir(e,"]]>",r,"StopNode is not closed.")-2;else{let s=Mu(e,r,">");s&&((s&&s.tagName)===t&&s.tagExp[s.tagExp.length-1]!=="/"&&o++,r=s.closeIndex)}}function Fu(e,t,r){if(t&&typeof e=="string"){let n=e.trim();return n==="true"?!0:n==="false"?!1:ku(e,r)}else return mS(e)?e:""}var vo,HL,$L,GL,PS=y(()=>{"use strict";c();qi();Vi();bS();CS();xS();vo=class{constructor(t){this.options=t,this.currentNode=null,this.tagsNodeStack=[],this.docTypeEntities={},this.lastEntities={apos:{regex:/&(apos|#39|#x27);/g,val:"'"},gt:{regex:/&(gt|#62|#x3E);/g,val:">"},lt:{regex:/&(lt|#60|#x3C);/g,val:"<"},quot:{regex:/&(quot|#34|#x22);/g,val:'"'}},this.ampEntity={regex:/&(amp|#38|#x26);/g,val:"&"},this.htmlEntities={space:{regex:/&(nbsp|#160);/g,val:" "},cent:{regex:/&(cent|#162);/g,val:"\xA2"},pound:{regex:/&(pound|#163);/g,val:"\xA3"},yen:{regex:/&(yen|#165);/g,val:"\xA5"},euro:{regex:/&(euro|#8364);/g,val:"\u20AC"},copyright:{regex:/&(copy|#169);/g,val:"\xA9"},reg:{regex:/&(reg|#174);/g,val:"\xAE"},inr:{regex:/&(inr|#8377);/g,val:"\u20B9"},num_dec:{regex:/&#([0-9]{1,7});/g,val:(r,n)=>String.fromCodePoint(Number.parseInt(n,10))},num_hex:{regex:/&#x([0-9a-fA-F]{1,6});/g,val:(r,n)=>String.fromCodePoint(Number.parseInt(n,16))}},this.addExternalEntities=BL,this.parseXml=$L,this.parseTextData=LL,this.resolveNameSpace=UL,this.buildAttributesMap=jL,this.isItStopNode=zL,this.replaceEntitiesValue=GL,this.readStopNodeData=KL,this.saveTextToParentTag=VL,this.addChild=qL,this.ignoreAttributesFn=Du(this.options.ignoreAttributes)}};HL=new RegExp(`([^\\s=]+)\\s*(=\\s*(['"])([\\s\\S]*?)\\3)?`,"gm");$L=function(e){e=e.replace(/\r\n?/g,`
`);let t=new Pe("!xml"),r=t,n="",o="";for(let s=0;s<e.length;s++)if(e[s]==="<")if(e[s+1]==="/"){let a=Ir(e,">",s,"Closing Tag is not closed."),l=e.substring(s+2,a).trim();if(this.options.removeNSPrefix){let f=l.indexOf(":");f!==-1&&(l=l.substr(f+1))}this.options.transformTagName&&(l=this.options.transformTagName(l)),r&&(n=this.saveTextToParentTag(n,r,o));let d=o.substring(o.lastIndexOf(".")+1);if(l&&this.options.unpairedTags.indexOf(l)!==-1)throw new Error(`Unpaired tag can not be used as closing tag: </${l}>`);let u=0;d&&this.options.unpairedTags.indexOf(d)!==-1?(u=o.lastIndexOf(".",o.lastIndexOf(".")-1),this.tagsNodeStack.pop()):u=o.lastIndexOf("."),o=o.substring(0,u),r=this.tagsNodeStack.pop(),n="",s=a}else if(e[s+1]==="?"){let a=Mu(e,s,!1,"?>");if(!a)throw new Error("Pi Tag is not closed.");if(n=this.saveTextToParentTag(n,r,o),!(this.options.ignoreDeclaration&&a.tagName==="?xml"||this.options.ignorePiTags)){let l=new Pe(a.tagName);l.add(this.options.textNodeName,""),a.tagName!==a.tagExp&&a.attrExpPresent&&(l[":@"]=this.buildAttributesMap(a.tagExp,o,a.tagName)),this.addChild(r,l,o,s)}s=a.closeIndex+1}else if(e.substr(s+1,3)==="!--"){let a=Ir(e,"-->",s+4,"Comment is not closed.");if(this.options.commentPropName){let l=e.substring(s+4,a-2);n=this.saveTextToParentTag(n,r,o),r.add(this.options.commentPropName,[{[this.options.textNodeName]:l}])}s=a}else if(e.substr(s+1,2)==="!D"){let a=Iu(e,s);this.docTypeEntities=a.entities,s=a.i}else if(e.substr(s+1,2)==="!["){let a=Ir(e,"]]>",s,"CDATA is not closed.")-2,l=e.substring(s+9,a);n=this.saveTextToParentTag(n,r,o);let d=this.parseTextData(l,r.tagname,o,!0,!1,!0,!0);d==null&&(d=""),this.options.cdataPropName?r.add(this.options.cdataPropName,[{[this.options.textNodeName]:l}]):r.add(this.options.textNodeName,d),s=a+2}else{let a=Mu(e,s,this.options.removeNSPrefix),l=a.tagName,d=a.rawTagName,u=a.tagExp,f=a.attrExpPresent,g=a.closeIndex;this.options.transformTagName&&(l=this.options.transformTagName(l)),r&&n&&r.tagname!=="!xml"&&(n=this.saveTextToParentTag(n,r,o,!1));let h=r;h&&this.options.unpairedTags.indexOf(h.tagname)!==-1&&(r=this.tagsNodeStack.pop(),o=o.substring(0,o.lastIndexOf("."))),l!==t.tagname&&(o+=o?"."+l:l);let _=s;if(this.isItStopNode(this.options.stopNodes,o,l)){let v="";if(u.length>0&&u.lastIndexOf("/")===u.length-1)l[l.length-1]==="/"?(l=l.substr(0,l.length-1),o=o.substr(0,o.length-1),u=l):u=u.substr(0,u.length-1),s=a.closeIndex;else if(this.options.unpairedTags.indexOf(l)!==-1)s=a.closeIndex;else{let b=this.readStopNodeData(e,d,g+1);if(!b)throw new Error(`Unexpected end of ${d}`);s=b.i,v=b.tagContent}let S=new Pe(l);l!==u&&f&&(S[":@"]=this.buildAttributesMap(u,o,l)),v&&(v=this.parseTextData(v,l,o,!0,f,!0,!0)),o=o.substr(0,o.lastIndexOf(".")),S.add(this.options.textNodeName,v),this.addChild(r,S,o,_)}else{if(u.length>0&&u.lastIndexOf("/")===u.length-1){l[l.length-1]==="/"?(l=l.substr(0,l.length-1),o=o.substr(0,o.length-1),u=l):u=u.substr(0,u.length-1),this.options.transformTagName&&(l=this.options.transformTagName(l));let v=new Pe(l);l!==u&&f&&(v[":@"]=this.buildAttributesMap(u,o,l)),this.addChild(r,v,o,_),o=o.substr(0,o.lastIndexOf("."))}else{let v=new Pe(l);this.tagsNodeStack.push(r),l!==u&&f&&(v[":@"]=this.buildAttributesMap(u,o,l)),this.addChild(r,v,o,_),r=v}n="",s=g}}else n+=e[s];return t.child};GL=function(e){if(this.options.processEntities){for(let t in this.docTypeEntities){let r=this.docTypeEntities[t];e=e.replace(r.regx,r.val)}for(let t in this.lastEntities){let r=this.lastEntities[t];e=e.replace(r.regex,r.val)}if(this.options.htmlEntities)for(let t in this.htmlEntities){let r=this.htmlEntities[t];e=e.replace(r.regex,r.val)}e=e.replace(this.ampEntity.regex,this.ampEntity.val)}return e}});function Lu(e,t){return AS(e,t)}function AS(e,t,r){let n,o={};for(let s=0;s<e.length;s++){let i=e[s],a=YL(i),l="";if(r===void 0?l=a:l=r+"."+a,a===t.textNodeName)n===void 0?n=i[a]:n+=""+i[a];else{if(a===void 0)continue;if(i[a]){let d=AS(i[a],t,l),u=XL(d,t);i[Bu]!==void 0&&(d[Bu]=i[Bu]),i[":@"]?JL(d,i[":@"],l,t):Object.keys(d).length===1&&d[t.textNodeName]!==void 0&&!t.alwaysCreateTextNode?d=d[t.textNodeName]:Object.keys(d).length===0&&(t.alwaysCreateTextNode?d[t.textNodeName]="":d=""),o[a]!==void 0&&o.hasOwnProperty(a)?(Array.isArray(o[a])||(o[a]=[o[a]]),o[a].push(d)):t.isArray(a,l,u)?o[a]=[d]:o[a]=d}}}return typeof n=="string"?n.length>0&&(o[t.textNodeName]=n):n!==void 0&&(o[t.textNodeName]=n),o}function YL(e){let t=Object.keys(e);for(let r=0;r<t.length;r++){let n=t[r];if(n!==":@")return n}}function JL(e,t,r,n){if(t){let o=Object.keys(t),s=o.length;for(let i=0;i<s;i++){let a=o[i];n.isArray(a,r+"."+a,!0,!0)?e[a]=[t[a]]:e[a]=t[a]}}}function XL(e,t){let{textNodeName:r}=t,n=Object.keys(e).length;return!!(n===0||n===1&&(e[r]||typeof e[r]=="boolean"||e[r]===0))}var Bu,TS=y(()=>{"use strict";c();Vi();Bu=Pe.getMetaDataSymbol()});var Yt,OS=y(()=>{c();wS();PS();TS();SS();Vi();Yt=class{constructor(t){this.externalEntities={},this.options=ES(t)}parse(t,r){if(typeof t!="string")if(t.toString)t=t.toString();else throw new Error("XML data is accepted in String or Bytes[] form.");if(r){r===!0&&(r={});let s=vS(t,r);if(s!==!0)throw Error(`${s.err.msg}:${s.err.line}:${s.err.col}`)}let n=new vo(this.options);n.addExternalEntities(this.externalEntities);let o=n.parseXml(t);return this.options.preserveOrder||o===void 0?o:Lu(o,this.options)}addEntity(t,r){if(r.indexOf("&")!==-1)throw new Error("Entity value can't have '&'");if(t.indexOf("&")!==-1||t.indexOf(";")!==-1)throw new Error("An entity must be set without '&' and ';'. Eg. use '#xD' for '&#xD;'");if(r==="&")throw new Error("An entity with value '&' is not permitted");this.externalEntities[t]=r}static getMetaDataSymbol(){return Pe.getMetaDataSymbol()}}});var Uu=y(()=>{"use strict";c();OS()});var RS,IS,Nr,Wi=y(()=>{c();St();re();RS=E(M()),IS=E(ie());Uu();zt();Nr=class extends fe{settings;stringDeserializer;constructor(t){super(),this.settings=t,this.stringDeserializer=new Sr(t)}setSerdeContext(t){this.serdeContext=t,this.stringDeserializer.setSerdeContext(t)}read(t,r,n){let o=O.of(t),s=o.getMemberSchemas();if(o.isStructSchema()&&o.isMemberSchema()&&!!Object.values(s).find(d=>!!d.getMemberTraits().eventPayload)){let d={},u=Object.keys(s)[0];return s[u].isBlobSchema()?d[u]=r:d[u]=this.read(s[u],r),d}let a=(this.serdeContext?.utf8Encoder??IS.toUtf8)(r),l=this.parseXml(a);return this.readSchema(t,n?l[n]:l)}readSchema(t,r){let n=O.of(t),o=n.getMergedTraits();if(n.isListSchema()&&!Array.isArray(r))return this.readSchema(n,[r]);if(r==null)return r;if(typeof r=="object"){let s=!!o.sparse,i=!!o.xmlFlattened;if(n.isListSchema()){let l=n.getValueSchema(),d=[],u=l.getMergedTraits().xmlName??"member",f=i?r:(r[0]??r)[u],g=Array.isArray(f)?f:[f];for(let h of g)(h!=null||s)&&d.push(this.readSchema(l,h));return d}let a={};if(n.isMapSchema()){let l=n.getKeySchema(),d=n.getValueSchema(),u;i?u=Array.isArray(r)?r:[r]:u=Array.isArray(r.entry)?r.entry:[r.entry];let f=l.getMergedTraits().xmlName??"key",g=d.getMergedTraits().xmlName??"value";for(let h of u){let _=h[f],v=h[g];(v!=null||s)&&(a[_]=this.readSchema(d,v))}return a}if(n.isStructSchema()){for(let[l,d]of n.structIterator()){let u=d.getMergedTraits(),f=u.httpPayload?u.xmlName??d.getName():d.getMemberTraits().xmlName??l;r[f]!=null&&(a[l]=this.readSchema(d,r[f]))}return a}if(n.isDocumentSchema())return r;throw new Error(`@aws-sdk/core/protocols - xml deserializer unhandled schema type for ${n.getName(!0)}`)}return n.isListSchema()?[]:n.isMapSchema()||n.isStructSchema()?{}:this.stringDeserializer.read(n,r)}parseXml(t){if(t.length){let r=new Yt({attributeNamePrefix:"",htmlEntities:!0,ignoreAttributes:!1,ignoreDeclaration:!0,parseTagValue:!1,trimValues:!1,tagValueProcessor:(a,l)=>l.trim()===""&&l.includes(`
`)?"":void 0});r.addEntity("#xD","\r"),r.addEntity("#10",`
`);let n;try{n=r.parse(t,!0)}catch(a){throw a&&typeof a=="object"&&Object.defineProperty(a,"$responseBodyText",{value:t}),a}let o="#text",s=Object.keys(n)[0],i=n[s];return i[o]&&(i[s]=i[o],delete i[o]),(0,RS.getValueFromTextNode)(i)}return{}}}});var NS,kS,Ki,DS=y(()=>{c();St();re();Ne();NS=E(M()),kS=E(ge());zt();Ki=class extends fe{settings;buffer;constructor(t){super(),this.settings=t}write(t,r,n=""){this.buffer===void 0&&(this.buffer="");let o=O.of(t);if(n&&!n.endsWith(".")&&(n+="."),o.isBlobSchema())(typeof r=="string"||r instanceof Uint8Array)&&(this.writeKey(n),this.writeValue((this.serdeContext?.base64Encoder??kS.toBase64)(r)));else if(o.isBooleanSchema()||o.isNumericSchema()||o.isStringSchema())r!=null&&(this.writeKey(n),this.writeValue(String(r)));else if(o.isBigIntegerSchema())r!=null&&(this.writeKey(n),this.writeValue(String(r)));else if(o.isBigDecimalSchema())r!=null&&(this.writeKey(n),this.writeValue(r instanceof ae?r.string:String(r)));else if(o.isTimestampSchema()){if(r instanceof Date)switch(this.writeKey(n),vr(o,this.settings)){case P.TIMESTAMP_DATE_TIME:this.writeValue(r.toISOString().replace(".000Z","Z"));break;case P.TIMESTAMP_HTTP_DATE:this.writeValue((0,NS.dateToUtcString)(r));break;case P.TIMESTAMP_EPOCH_SECONDS:this.writeValue(String(r.getTime()/1e3));break}}else{if(o.isDocumentSchema())throw new Error(`@aws-sdk/core/protocols - QuerySerializer unsupported document type ${o.getName(!0)}`);if(o.isListSchema()){if(Array.isArray(r))if(r.length===0)this.settings.serializeEmptyLists&&(this.writeKey(n),this.writeValue(""));else{let s=o.getValueSchema(),i=this.settings.flattenLists||o.getMergedTraits().xmlFlattened,a=1;for(let l of r){if(l==null)continue;let d=this.getKey("member",s.getMergedTraits().xmlName),u=i?`${n}${a}`:`${n}${d}.${a}`;this.write(s,l,u),++a}}}else if(o.isMapSchema()){if(r&&typeof r=="object"){let s=o.getKeySchema(),i=o.getValueSchema(),a=o.getMergedTraits().xmlFlattened,l=1;for(let[d,u]of Object.entries(r)){if(u==null)continue;let f=this.getKey("key",s.getMergedTraits().xmlName),g=a?`${n}${l}.${f}`:`${n}entry.${l}.${f}`,h=this.getKey("value",i.getMergedTraits().xmlName),_=a?`${n}${l}.${h}`:`${n}entry.${l}.${h}`;this.write(s,d,g),this.write(i,u,_),++l}}}else if(o.isStructSchema()){if(r&&typeof r=="object")for(let[s,i]of o.structIterator()){if(r[s]==null)continue;let a=this.getKey(s,i.getMergedTraits().xmlName),l=`${n}${a}`;this.write(i,r[s],l)}}else if(!o.isUnitSchema())throw new Error(`@aws-sdk/core/protocols - QuerySerializer unrecognized schema type ${o.getName(!0)}`)}}flush(){if(this.buffer===void 0)throw new Error("@aws-sdk/core/protocols - QuerySerializer cannot flush with nothing written to buffer.");let t=this.buffer;return delete this.buffer,t}getKey(t,r){let n=r??t;return this.settings.capitalizeKeys?n[0].toUpperCase()+n.slice(1):n}writeKey(t){t.endsWith(".")&&(t=t.slice(0,t.length-1)),this.buffer+=`&${et(t)}=`}writeValue(t){this.buffer+=et(t)}}});var MS,So,Hu=y(()=>{c();St();re();MS=E(po());Wi();DS();So=class extends _r{options;serializer;deserializer;constructor(t){super({defaultNamespace:t.defaultNamespace}),this.options=t;let r={timestampFormat:{useTrait:!0,default:P.TIMESTAMP_DATE_TIME},httpBindings:!1,xmlNamespace:t.xmlNamespace,serviceNamespace:t.defaultNamespace,serializeEmptyLists:!0};this.serializer=new Ki(r),this.deserializer=new Nr(r)}getShapeId(){return"aws.protocols#awsQuery"}setSerdeContext(t){this.serializer.setSerdeContext(t),this.deserializer.setSerdeContext(t)}getPayloadCodec(){throw new Error("AWSQuery protocol has no payload codec.")}async serializeRequest(t,r,n){let o=await super.serializeRequest(t,r,n);o.path.endsWith("/")||(o.path+="/"),Object.assign(o.headers,{"content-type":"application/x-www-form-urlencoded"}),(vt(t.input)==="unit"||!o.body)&&(o.body=""),o.body=`Action=${t.name.split("#")[1]}&Version=${this.options.version}`+o.body,o.body.endsWith("&")&&(o.body=o.body.slice(-1));try{o.headers["content-length"]=String((0,MS.calculateBodyLength)(o.body))}catch{}return o}async deserializeResponse(t,r,n){let o=this.deserializer,s=O.of(t.output),i={};if(n.statusCode>=300){let u=await Ie(n.body,r);u.byteLength>0&&Object.assign(i,await o.read(P.DOCUMENT,u)),await this.handleError(t,r,n,i,this.deserializeMetadata(n))}for(let u in n.headers){let f=n.headers[u];delete n.headers[u],n.headers[u.toLowerCase()]=f}let a=s.isStructSchema()&&this.useNestedResult()?t.name.split("#")[1]+"Result":void 0,l=await Ie(n.body,r);return l.byteLength>0&&Object.assign(i,await o.read(s,l,a)),{$metadata:this.deserializeMetadata(n),...i}}useNestedResult(){return!0}async handleError(t,r,n,o,s){let i=this.loadQueryErrorCode(n,o)??"Unknown",a=this.options.defaultNamespace,l=i;i.includes("#")&&([a,l]=i.split("#"));let d=this.loadQueryError(o),u=he.for(a),f;try{f=u.find(S=>O.of(S).getMergedTraits().awsQueryError?.[0]===l),f||(f=u.getSchema(i))}catch{let b=he.for("smithy.ts.sdk.synthetic."+a).getBaseException();if(b){let C=b.ctor;throw Object.assign(new C(l),d)}throw new Error(l)}let g=O.of(f),h=this.loadQueryErrorMessage(o),_=new f.ctor(h),v={};for(let[S,b]of g.structIterator()){let C=b.getMergedTraits().xmlName??S,I=d[C]??o[C];v[S]=this.deserializer.readSchema(b,I)}throw Object.assign(_,{$metadata:s,$response:n,$fault:g.getMergedTraits().error,message:h,...v}),_}loadQueryErrorCode(t,r){let n=(r.Errors?.[0]?.Error??r.Errors?.Error??r.Error)?.Code;if(n!==void 0)return n;if(t.statusCode==404)return"NotFound"}loadQueryError(t){return t.Errors?.[0]?.Error??t.Errors?.Error??t.Error}loadQueryErrorMessage(t){let r=this.loadQueryError(t);return r?.message??r?.Message??t.message??t.Message??"Unknown"}}});var ju,FS=y(()=>{c();Hu();ju=class extends So{options;constructor(t){super(t),this.options=t;let r={capitalizeKeys:!0,flattenLists:!0,serializeEmptyLists:!1};Object.assign(this.serializer.settings,r)}useNestedResult(){return!1}}});var BS,Eo,$u,qu,Gu=y(()=>{c();BS=E(M());Uu();Cu();Eo=(e,t)=>Li(e,t).then(r=>{if(r.length){let n=new Yt({attributeNamePrefix:"",htmlEntities:!0,ignoreAttributes:!1,ignoreDeclaration:!0,parseTagValue:!1,trimValues:!1,tagValueProcessor:(l,d)=>d.trim()===""&&d.includes(`
`)?"":void 0});n.addEntity("#xD","\r"),n.addEntity("#10",`
`);let o;try{o=n.parse(r,!0)}catch(l){throw l&&typeof l=="object"&&Object.defineProperty(l,"$responseBodyText",{value:r}),l}let s="#text",i=Object.keys(o)[0],a=o[i];return a[s]&&(a[i]=a[s],delete a[s]),(0,BS.getValueFromTextNode)(a)}return{}}),$u=async(e,t)=>{let r=await Eo(e,t);return r.Error&&(r.Error.message=r.Error.message??r.Error.Message),r},qu=(e,t)=>{if(t?.Error?.Code!==void 0)return t.Error.Code;if(t?.Code!==void 0)return t.Code;if(e.statusCode==404)return"NotFound"}});var qS=w((Qee,$S)=>{"use strict";c();var Ji=Object.defineProperty,QL=Object.getOwnPropertyDescriptor,ZL=Object.getOwnPropertyNames,eU=Object.prototype.hasOwnProperty,Xi=(e,t)=>Ji(e,"name",{value:t,configurable:!0}),tU=(e,t)=>{for(var r in t)Ji(e,r,{get:t[r],enumerable:!0})},rU=(e,t,r,n)=>{if(t&&typeof t=="object"||typeof t=="function")for(let o of ZL(t))!eU.call(e,o)&&o!==r&&Ji(e,o,{get:()=>t[o],enumerable:!(n=QL(t,o))||n.enumerable});return e},nU=e=>rU(Ji({},"__esModule",{value:!0}),e),LS={};tU(LS,{XmlNode:()=>oU,XmlText:()=>jS});$S.exports=nU(LS);function US(e){return e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}Xi(US,"escapeAttribute");function HS(e){return e.replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&apos;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/\r/g,"&#x0D;").replace(/\n/g,"&#x0A;").replace(/\u0085/g,"&#x85;").replace(/\u2028/,"&#x2028;")}Xi(HS,"escapeElement");var jS=class{constructor(e){this.value=e}static{Xi(this,"XmlText")}toString(){return HS(""+this.value)}},oU=class Yi{constructor(t,r=[]){this.name=t,this.children=r}static{Xi(this,"XmlNode")}attributes={};static of(t,r,n){let o=new Yi(t);return r!==void 0&&o.addChildNode(new jS(r)),n!==void 0&&o.withName(n),o}withName(t){return this.name=t,this}addAttribute(t,r){return this.attributes[t]=r,this}addChildNode(t){return this.children.push(t),this}removeAttribute(t){return delete this.attributes[t],this}n(t){return this.name=t,this}c(t){return this.children.push(t),this}a(t,r){return r!=null&&(this.attributes[t]=r),this}cc(t,r,n=r){if(t[r]!=null){let o=Yi.of(r,t[r]).withName(n);this.c(o)}}l(t,r,n,o){t[r]!=null&&o().map(i=>{i.withName(n),this.c(i)})}lc(t,r,n,o){if(t[r]!=null){let s=o(),i=new Yi(n);s.map(a=>{i.c(a)}),this.c(i)}}toString(){let t=!!this.children.length,r=`<${this.name}`,n=this.attributes;for(let o of Object.keys(n)){let s=n[o];s!=null&&(r+=` ${o}="${US(""+s)}"`)}return r+=t?`>${this.children.map(o=>o.toString()).join("")}</${this.name}>`:"/>"}}});var De,Vu,Qi,wo,zu=y(()=>{c();De=E(qS());re();Ne();Vu=E(M()),Qi=E(ge());zt();wo=class extends fe{settings;stringBuffer;byteBuffer;buffer;constructor(t){super(),this.settings=t}write(t,r){let n=O.of(t);if(n.isStringSchema()&&typeof r=="string")this.stringBuffer=r;else if(n.isBlobSchema())this.byteBuffer="byteLength"in r?r:(this.serdeContext?.base64Decoder??Qi.fromBase64)(r);else{this.buffer=this.writeStruct(n,r,void 0);let o=n.getMergedTraits();o.httpPayload&&!o.xmlName&&this.buffer.withName(n.getName())}}flush(){if(this.byteBuffer!==void 0){let r=this.byteBuffer;return delete this.byteBuffer,r}if(this.stringBuffer!==void 0){let r=this.stringBuffer;return delete this.stringBuffer,r}let t=this.buffer;return this.settings.xmlNamespace&&(t?.attributes?.xmlns||t.addAttribute("xmlns",this.settings.xmlNamespace)),delete this.buffer,t.toString()}writeStruct(t,r,n){let o=t.getMergedTraits(),s=t.isMemberSchema()&&!o.httpPayload?t.getMemberTraits().xmlName??t.getMemberName():o.xmlName??t.getName();if(!s||!t.isStructSchema())throw new Error(`@aws-sdk/core/protocols - xml serializer, cannot write struct with empty name or non-struct, schema=${t.getName(!0)}.`);let i=De.XmlNode.of(s),[a,l]=this.getXmlnsAttribute(t,n);l&&i.addAttribute(a,l);for(let[d,u]of t.structIterator()){let f=r[d];if(f!=null){if(u.getMergedTraits().xmlAttribute){i.addAttribute(u.getMergedTraits().xmlName??d,this.writeSimple(u,f));continue}if(u.isListSchema())this.writeList(u,f,i,l);else if(u.isMapSchema())this.writeMap(u,f,i,l);else if(u.isStructSchema())i.addChildNode(this.writeStruct(u,f,l));else{let g=De.XmlNode.of(u.getMergedTraits().xmlName??u.getMemberName());this.writeSimpleInto(u,f,g,l),i.addChildNode(g)}}}return i}writeList(t,r,n,o){if(!t.isMemberSchema())throw new Error(`@aws-sdk/core/protocols - xml serializer, cannot write non-member list: ${t.getName(!0)}`);let s=t.getMergedTraits(),i=t.getValueSchema(),a=i.getMergedTraits(),l=!!a.sparse,d=!!s.xmlFlattened,[u,f]=this.getXmlnsAttribute(t,o),g=(h,_)=>{if(i.isListSchema())this.writeList(i,Array.isArray(_)?_:[_],h,f);else if(i.isMapSchema())this.writeMap(i,_,h,f);else if(i.isStructSchema()){let v=this.writeStruct(i,_,f);h.addChildNode(v.withName(d?s.xmlName??t.getMemberName():a.xmlName??"member"))}else{let v=De.XmlNode.of(d?s.xmlName??t.getMemberName():a.xmlName??"member");this.writeSimpleInto(i,_,v,f),h.addChildNode(v)}};if(d)for(let h of r)(l||h!=null)&&g(n,h);else{let h=De.XmlNode.of(s.xmlName??t.getMemberName());f&&h.addAttribute(u,f);for(let _ of r)(l||_!=null)&&g(h,_);n.addChildNode(h)}}writeMap(t,r,n,o,s=!1){if(!t.isMemberSchema())throw new Error(`@aws-sdk/core/protocols - xml serializer, cannot write non-member map: ${t.getName(!0)}`);let i=t.getMergedTraits(),a=t.getKeySchema(),d=a.getMergedTraits().xmlName??"key",u=t.getValueSchema(),f=u.getMergedTraits(),g=f.xmlName??"value",h=!!f.sparse,_=!!i.xmlFlattened,[v,S]=this.getXmlnsAttribute(t,o),b=(C,I,R)=>{let T=De.XmlNode.of(d,I),[j,ht]=this.getXmlnsAttribute(a,S);ht&&T.addAttribute(j,ht),C.addChildNode(T);let se=De.XmlNode.of(g);u.isListSchema()?this.writeList(u,R,se,S):u.isMapSchema()?this.writeMap(u,R,se,S,!0):u.isStructSchema()?se=this.writeStruct(u,R,S):this.writeSimpleInto(u,R,se,S),C.addChildNode(se)};if(_){for(let[C,I]of Object.entries(r))if(h||I!=null){let R=De.XmlNode.of(i.xmlName??t.getMemberName());b(R,C,I),n.addChildNode(R)}}else{let C;s||(C=De.XmlNode.of(i.xmlName??t.getMemberName()),S&&C.addAttribute(v,S),n.addChildNode(C));for(let[I,R]of Object.entries(r))if(h||R!=null){let T=De.XmlNode.of("entry");b(T,I,R),(s?n:C).addChildNode(T)}}}writeSimple(t,r){if(r===null)throw new Error("@aws-sdk/core/protocols - (XML serializer) cannot write null value.");let n=O.of(t),o=null;if(r&&typeof r=="object")if(n.isBlobSchema())o=(this.serdeContext?.base64Encoder??Qi.toBase64)(r);else if(n.isTimestampSchema()&&r instanceof Date){let s=this.settings.timestampFormat;switch(s.useTrait?n.getSchema()===P.TIMESTAMP_DEFAULT?s.default:n.getSchema()??s.default:s.default){case P.TIMESTAMP_DATE_TIME:o=r.toISOString().replace(".000Z","Z");break;case P.TIMESTAMP_HTTP_DATE:o=(0,Vu.dateToUtcString)(r);break;case P.TIMESTAMP_EPOCH_SECONDS:o=String(r.getTime()/1e3);break;default:console.warn("Missing timestamp format, using http date",r),o=(0,Vu.dateToUtcString)(r);break}}else{if(n.isBigDecimalSchema()&&r)return r instanceof ae?r.string:String(r);throw n.isMapSchema()||n.isListSchema()?new Error("@aws-sdk/core/protocols - xml serializer, cannot call _write() on List/Map schema, call writeList or writeMap() instead."):new Error(`@aws-sdk/core/protocols - xml serializer, unhandled schema type for object value and schema: ${n.getName(!0)}`)}if((n.isStringSchema()||n.isBooleanSchema()||n.isNumericSchema()||n.isBigIntegerSchema()||n.isBigDecimalSchema())&&(o=String(r)),o===null)throw new Error(`Unhandled schema-value pair ${n.getName(!0)}=${r}`);return o}writeSimpleInto(t,r,n,o){let s=this.writeSimple(t,r),i=O.of(t),a=new De.XmlText(s),[l,d]=this.getXmlnsAttribute(i,o);d&&n.addAttribute(l,d),n.addChildNode(a)}getXmlnsAttribute(t,r){let n=t.getMergedTraits(),[o,s]=n.xmlNamespace??[];return s&&s!==r?[o?`xmlns:${o}`:"xmlns",s]:[void 0,void 0]}}});var bo,Wu=y(()=>{c();zt();Wi();zu();bo=class extends fe{settings;constructor(t){super(),this.settings=t}createSerializer(){let t=new wo(this.settings);return t.setSerdeContext(this.serdeContext),t}createDeserializer(){let t=new Nr(this.settings);return t.setSerdeContext(this.serdeContext),t}}});var GS,Ku,VS=y(()=>{c();St();re();GS=E(po());Gu();Wu();Ku=class extends yr{codec;serializer;deserializer;constructor(t){super(t);let r={timestampFormat:{useTrait:!0,default:P.TIMESTAMP_DATE_TIME},httpBindings:!0,xmlNamespace:t.xmlNamespace,serviceNamespace:t.defaultNamespace};this.codec=new bo(r),this.serializer=new wr(this.codec.createSerializer(),r),this.deserializer=new Er(this.codec.createDeserializer(),r)}getPayloadCodec(){return this.codec}getShapeId(){return"aws.protocols#restXml"}async serializeRequest(t,r,n){let o=await super.serializeRequest(t,r,n),s=O.of(t.input),i=s.getMemberSchemas();if(o.path=String(o.path).split("/").filter(a=>a!=="{Bucket}").join("/")||"/",!o.headers["content-type"]){let a=Object.values(i).find(l=>!!l.getMergedTraits().httpPayload);if(a){let l=a.getMergedTraits().mediaType;l?o.headers["content-type"]=l:a.isStringSchema()?o.headers["content-type"]="text/plain":a.isBlobSchema()?o.headers["content-type"]="application/octet-stream":o.headers["content-type"]="application/xml"}else s.isUnitSchema()||Object.values(i).find(d=>{let{httpQuery:u,httpQueryParams:f,httpHeader:g,httpLabel:h,httpPrefixHeaders:_}=d.getMergedTraits();return!u&&!f&&!g&&!h&&_===void 0})&&(o.headers["content-type"]="application/xml")}if(o.headers["content-type"]==="application/xml"&&typeof o.body=="string"&&(o.body='<?xml version="1.0" encoding="UTF-8"?>'+o.body),o.body)try{o.headers["content-length"]=String((0,GS.calculateBodyLength)(o.body))}catch{}return o}async deserializeResponse(t,r,n){return super.deserializeResponse(t,r,n)}async handleError(t,r,n,o,s){let i=qu(n,o)??"Unknown",a=this.options.defaultNamespace,l=i;i.includes("#")&&([a,l]=i.split("#"));let d=he.for(a),u;try{u=d.getSchema(i)}catch{let S=he.for("smithy.ts.sdk.synthetic."+a).getBaseException();if(S){let b=S.ctor;throw Object.assign(new b(l),o)}throw new Error(l)}let f=O.of(u),g=o.Error?.message??o.Error?.Message??o.message??o.Message??"Unknown",h=new u.ctor(g);await this.deserializeHttpMessage(u,r,n,o);let _={};for(let[v,S]of f.structIterator()){let b=S.getMergedTraits().xmlName??v,C=o.Error?.[b]??o[b];_[v]=this.codec.createDeserializer().readSchema(S,C)}throw Object.assign(h,{$metadata:s,$response:n,$fault:f.getMergedTraits().error,message:g,..._}),h}}});var zS=y(()=>{c();Bv();aS();cS();ji();dS();Hi();Pu();Au();pS();mo();FS();Hu();VS();Wu();Wi();zu();Gu()});var nt={};Ye(nt,{AWSSDKSigV4Signer:()=>eu,AwsEc2QueryProtocol:()=>ju,AwsJson1_0Protocol:()=>Tu,AwsJson1_1Protocol:()=>Ou,AwsJsonRpcProtocol:()=>Or,AwsQueryProtocol:()=>So,AwsRestJsonProtocol:()=>Ru,AwsRestXmlProtocol:()=>Ku,AwsSdkSigV4ASigner:()=>uo,AwsSdkSigV4Signer:()=>be,JsonCodec:()=>Tr,JsonShapeDeserializer:()=>go,JsonShapeSerializer:()=>ho,NODE_AUTH_SCHEME_PREFERENCE_OPTIONS:()=>nn,NODE_SIGV4A_CONFIG_OPTIONS:()=>tv,XmlCodec:()=>bo,XmlShapeDeserializer:()=>Nr,XmlShapeSerializer:()=>wo,_toBool:()=>SB,_toNum:()=>EB,_toStr:()=>vB,awsExpectUnion:()=>fL,emitWarningIfUnsupportedVersion:()=>en,getBearerTokenEnvKey:()=>xi,loadRestJsonErrorCode:()=>Ar,loadRestXmlErrorCode:()=>qu,parseJsonBody:()=>sn,parseJsonErrorBody:()=>xu,parseXmlBody:()=>Eo,parseXmlErrorBody:()=>$u,resolveAWSSDKSigV4Config:()=>kv,resolveAwsSdkSigV4AConfig:()=>ev,resolveAwsSdkSigV4Config:()=>xr,setCredentialFeature:()=>qt,setFeature:()=>k_,setTokenFeature:()=>M_,state:()=>Ci,validateSigningProperties:()=>rn});var ne=y(()=>{c();Ve();gu();zS()});var an=w((Hte,oE)=>{"use strict";c();var ea=Object.defineProperty,sU=Object.getOwnPropertyDescriptor,iU=Object.getOwnPropertyNames,aU=Object.prototype.hasOwnProperty,Ct=(e,t)=>ea(e,"name",{value:t,configurable:!0}),cU=(e,t)=>{for(var r in t)ea(e,r,{get:t[r],enumerable:!0})},lU=(e,t,r,n)=>{if(t&&typeof t=="object"||typeof t=="function")for(let o of iU(t))!aU.call(e,o)&&o!==r&&ea(e,o,{get:()=>t[o],enumerable:!(n=sU(t,o))||n.enumerable});return e},dU=e=>lU(ea({},"__esModule",{value:!0}),e),JS={};cU(JS,{DEFAULT_UA_APP_ID:()=>XS,getUserAgentMiddlewareOptions:()=>nE,getUserAgentPlugin:()=>_U,resolveUserAgentConfig:()=>ZS,userAgentMiddleware:()=>rE});oE.exports=dU(JS);var uU=(ce(),D(wt)),XS=void 0;function QS(e){return e===void 0?!0:typeof e=="string"&&e.length<=50}Ct(QS,"isValidUserAgentAppId");function ZS(e){let t=(0,uU.normalizeProvider)(e.userAgentAppId??XS),{customUserAgent:r}=e;return Object.assign(e,{customUserAgent:typeof r=="string"?[[r]]:r,userAgentAppId:Ct(async()=>{let n=await t();if(!QS(n)){let o=e.logger?.constructor?.name==="NoOpLogger"||!e.logger?console:e.logger;typeof n!="string"?o?.warn("userAgentAppId must be a string or undefined."):n.length>50&&o?.warn("The provided userAgentAppId exceeds the maximum length of 50 characters.")}return n},"userAgentAppId")})}Ct(ZS,"resolveUserAgentConfig");var pU=Zr(),fU=q(),ot=(ne(),D(nt)),mU=/\d{12}\.ddb/;async function eE(e,t,r){if(r.request?.headers?.["smithy-protocol"]==="rpc-v2-cbor"&&(0,ot.setFeature)(e,"PROTOCOL_RPC_V2_CBOR","M"),typeof t.retryStrategy=="function"){let s=await t.retryStrategy();typeof s.acquireInitialRetryToken=="function"?s.constructor?.name?.includes("Adaptive")?(0,ot.setFeature)(e,"RETRY_MODE_ADAPTIVE","F"):(0,ot.setFeature)(e,"RETRY_MODE_STANDARD","E"):(0,ot.setFeature)(e,"RETRY_MODE_LEGACY","D")}if(typeof t.accountIdEndpointMode=="function"){let s=e.endpointV2;switch(String(s?.url?.hostname).match(mU)&&(0,ot.setFeature)(e,"ACCOUNT_ID_ENDPOINT","O"),await t.accountIdEndpointMode?.()){case"disabled":(0,ot.setFeature)(e,"ACCOUNT_ID_MODE_DISABLED","Q");break;case"preferred":(0,ot.setFeature)(e,"ACCOUNT_ID_MODE_PREFERRED","P");break;case"required":(0,ot.setFeature)(e,"ACCOUNT_ID_MODE_REQUIRED","R");break}}let o=e.__smithy_context?.selectedHttpAuthScheme?.identity;if(o?.$source){let s=o;s.accountId&&(0,ot.setFeature)(e,"RESOLVED_ACCOUNT_ID","T");for(let[i,a]of Object.entries(s.$source??{}))(0,ot.setFeature)(e,i,a)}}Ct(eE,"checkFeatures");var WS="user-agent",Yu="x-amz-user-agent",KS=" ",Ju="/",gU=/[^\!\$\%\&\'\*\+\-\.\^\_\`\|\~\d\w]/g,hU=/[^\!\$\%\&\'\*\+\-\.\^\_\`\|\~\d\w\#]/g,YS="-",yU=1024;function tE(e){let t="";for(let r in e){let n=e[r];if(t.length+n.length+1<=yU){t.length?t+=","+n:t+=n;continue}break}return t}Ct(tE,"encodeFeatures");var rE=Ct(e=>(t,r)=>async n=>{let{request:o}=n;if(!fU.HttpRequest.isInstance(o))return t(n);let{headers:s}=o,i=r?.userAgent?.map(Zi)||[],a=(await e.defaultUserAgentProvider()).map(Zi);await eE(r,e,n);let l=r;a.push(`m/${tE(Object.assign({},r.__smithy_context?.features,l.__aws_sdk_context?.features))}`);let d=e?.customUserAgent?.map(Zi)||[],u=await e.userAgentAppId();u&&a.push(Zi([`app/${u}`]));let f=(0,pU.getUserAgentPrefix)(),g=(f?[f]:[]).concat([...a,...i,...d]).join(KS),h=[...a.filter(_=>_.startsWith("aws-sdk-")),...d].join(KS);return e.runtime!=="browser"?(h&&(s[Yu]=s[Yu]?`${s[WS]} ${h}`:h),s[WS]=g):s[Yu]=g,t({...n,request:o})},"userAgentMiddleware"),Zi=Ct(e=>{let t=e[0].split(Ju).map(i=>i.replace(gU,YS)).join(Ju),r=e[1]?.replace(hU,YS),n=t.indexOf(Ju),o=t.substring(0,n),s=t.substring(n+1);return o==="api"&&(s=s.toLowerCase()),[o,s,r].filter(i=>i&&i.length>0).reduce((i,a,l)=>{switch(l){case 0:return a;case 1:return`${i}/${a}`;default:return`${i}#${a}`}},"")},"escapeUserAgent"),nE={name:"getUserAgentMiddleware",step:"build",priority:"low",tags:["SET_USER_AGENT","USER_AGENT"],override:!0},_U=Ct(e=>({applyToStack:Ct(t=>{t.add(rE(e),nE)},"applyToStack")}),"getUserAgentPlugin")});var ln={};Ye(ln,{__addDisposableResource:()=>OE,__assign:()=>ta,__asyncDelegator:()=>EE,__asyncGenerator:()=>SE,__asyncValues:()=>wE,__await:()=>cn,__awaiter:()=>mE,__classPrivateFieldGet:()=>PE,__classPrivateFieldIn:()=>TE,__classPrivateFieldSet:()=>AE,__createBinding:()=>na,__decorate:()=>aE,__disposeResources:()=>RE,__esDecorate:()=>lE,__exportStar:()=>hE,__extends:()=>sE,__generator:()=>gE,__importDefault:()=>xE,__importStar:()=>CE,__makeTemplateObject:()=>bE,__metadata:()=>fE,__param:()=>cE,__propKey:()=>uE,__read:()=>Zu,__rest:()=>iE,__rewriteRelativeImportExtension:()=>IE,__runInitializers:()=>dE,__setFunctionName:()=>pE,__spread:()=>yE,__spreadArray:()=>vE,__spreadArrays:()=>_E,__values:()=>ra,default:()=>EU});function sE(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");Xu(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}function iE(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,n=Object.getOwnPropertySymbols(e);o<n.length;o++)t.indexOf(n[o])<0&&Object.prototype.propertyIsEnumerable.call(e,n[o])&&(r[n[o]]=e[n[o]]);return r}function aE(e,t,r,n){var o=arguments.length,s=o<3?t:n===null?n=Object.getOwnPropertyDescriptor(t,r):n,i;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(e,t,r,n);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,r,s):i(t,r))||s);return o>3&&s&&Object.defineProperty(t,r,s),s}function cE(e,t){return function(r,n){t(r,n,e)}}function lE(e,t,r,n,o,s){function i(b){if(b!==void 0&&typeof b!="function")throw new TypeError("Function expected");return b}for(var a=n.kind,l=a==="getter"?"get":a==="setter"?"set":"value",d=!t&&e?n.static?e:e.prototype:null,u=t||(d?Object.getOwnPropertyDescriptor(d,n.name):{}),f,g=!1,h=r.length-1;h>=0;h--){var _={};for(var v in n)_[v]=v==="access"?{}:n[v];for(var v in n.access)_.access[v]=n.access[v];_.addInitializer=function(b){if(g)throw new TypeError("Cannot add initializers after decoration has completed");s.push(i(b||null))};var S=(0,r[h])(a==="accessor"?{get:u.get,set:u.set}:u[l],_);if(a==="accessor"){if(S===void 0)continue;if(S===null||typeof S!="object")throw new TypeError("Object expected");(f=i(S.get))&&(u.get=f),(f=i(S.set))&&(u.set=f),(f=i(S.init))&&o.unshift(f)}else(f=i(S))&&(a==="field"?o.unshift(f):u[l]=f)}d&&Object.defineProperty(d,n.name,u),g=!0}function dE(e,t,r){for(var n=arguments.length>2,o=0;o<t.length;o++)r=n?t[o].call(e,r):t[o].call(e);return n?r:void 0}function uE(e){return typeof e=="symbol"?e:"".concat(e)}function pE(e,t,r){return typeof t=="symbol"&&(t=t.description?"[".concat(t.description,"]"):""),Object.defineProperty(e,"name",{configurable:!0,value:r?"".concat(r," ",t):t})}function fE(e,t){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(e,t)}function mE(e,t,r,n){function o(s){return s instanceof r?s:new r(function(i){i(s)})}return new(r||(r=Promise))(function(s,i){function a(u){try{d(n.next(u))}catch(f){i(f)}}function l(u){try{d(n.throw(u))}catch(f){i(f)}}function d(u){u.done?s(u.value):o(u.value).then(a,l)}d((n=n.apply(e,t||[])).next())})}function gE(e,t){var r={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},n,o,s,i=Object.create((typeof Iterator=="function"?Iterator:Object).prototype);return i.next=a(0),i.throw=a(1),i.return=a(2),typeof Symbol=="function"&&(i[Symbol.iterator]=function(){return this}),i;function a(d){return function(u){return l([d,u])}}function l(d){if(n)throw new TypeError("Generator is already executing.");for(;i&&(i=0,d[0]&&(r=0)),r;)try{if(n=1,o&&(s=d[0]&2?o.return:d[0]?o.throw||((s=o.return)&&s.call(o),0):o.next)&&!(s=s.call(o,d[1])).done)return s;switch(o=0,s&&(d=[d[0]&2,s.value]),d[0]){case 0:case 1:s=d;break;case 4:return r.label++,{value:d[1],done:!1};case 5:r.label++,o=d[1],d=[0];continue;case 7:d=r.ops.pop(),r.trys.pop();continue;default:if(s=r.trys,!(s=s.length>0&&s[s.length-1])&&(d[0]===6||d[0]===2)){r=0;continue}if(d[0]===3&&(!s||d[1]>s[0]&&d[1]<s[3])){r.label=d[1];break}if(d[0]===6&&r.label<s[1]){r.label=s[1],s=d;break}if(s&&r.label<s[2]){r.label=s[2],r.ops.push(d);break}s[2]&&r.ops.pop(),r.trys.pop();continue}d=t.call(e,r)}catch(u){d=[6,u],o=0}finally{n=s=0}if(d[0]&5)throw d[1];return{value:d[0]?d[1]:void 0,done:!0}}}function hE(e,t){for(var r in e)r!=="default"&&!Object.prototype.hasOwnProperty.call(t,r)&&na(t,e,r)}function ra(e){var t=typeof Symbol=="function"&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function Zu(e,t){var r=typeof Symbol=="function"&&e[Symbol.iterator];if(!r)return e;var n=r.call(e),o,s=[],i;try{for(;(t===void 0||t-- >0)&&!(o=n.next()).done;)s.push(o.value)}catch(a){i={error:a}}finally{try{o&&!o.done&&(r=n.return)&&r.call(n)}finally{if(i)throw i.error}}return s}function yE(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(Zu(arguments[t]));return e}function _E(){for(var e=0,t=0,r=arguments.length;t<r;t++)e+=arguments[t].length;for(var n=Array(e),o=0,t=0;t<r;t++)for(var s=arguments[t],i=0,a=s.length;i<a;i++,o++)n[o]=s[i];return n}function vE(e,t,r){if(r||arguments.length===2)for(var n=0,o=t.length,s;n<o;n++)(s||!(n in t))&&(s||(s=Array.prototype.slice.call(t,0,n)),s[n]=t[n]);return e.concat(s||Array.prototype.slice.call(t))}function cn(e){return this instanceof cn?(this.v=e,this):new cn(e)}function SE(e,t,r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n=r.apply(e,t||[]),o,s=[];return o=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),a("next"),a("throw"),a("return",i),o[Symbol.asyncIterator]=function(){return this},o;function i(h){return function(_){return Promise.resolve(_).then(h,f)}}function a(h,_){n[h]&&(o[h]=function(v){return new Promise(function(S,b){s.push([h,v,S,b])>1||l(h,v)})},_&&(o[h]=_(o[h])))}function l(h,_){try{d(n[h](_))}catch(v){g(s[0][3],v)}}function d(h){h.value instanceof cn?Promise.resolve(h.value.v).then(u,f):g(s[0][2],h)}function u(h){l("next",h)}function f(h){l("throw",h)}function g(h,_){h(_),s.shift(),s.length&&l(s[0][0],s[0][1])}}function EE(e){var t,r;return t={},n("next"),n("throw",function(o){throw o}),n("return"),t[Symbol.iterator]=function(){return this},t;function n(o,s){t[o]=e[o]?function(i){return(r=!r)?{value:cn(e[o](i)),done:!1}:s?s(i):i}:s}}function wE(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t=e[Symbol.asyncIterator],r;return t?t.call(e):(e=typeof ra=="function"?ra(e):e[Symbol.iterator](),r={},n("next"),n("throw"),n("return"),r[Symbol.asyncIterator]=function(){return this},r);function n(s){r[s]=e[s]&&function(i){return new Promise(function(a,l){i=e[s](i),o(a,l,i.done,i.value)})}}function o(s,i,a,l){Promise.resolve(l).then(function(d){s({value:d,done:a})},i)}}function bE(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e}function CE(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var r=Qu(e),n=0;n<r.length;n++)r[n]!=="default"&&na(t,e,r[n]);return vU(t,e),t}function xE(e){return e&&e.__esModule?e:{default:e}}function PE(e,t,r,n){if(r==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof t=="function"?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return r==="m"?n:r==="a"?n.call(e):n?n.value:t.get(e)}function AE(e,t,r,n,o){if(n==="m")throw new TypeError("Private method is not writable");if(n==="a"&&!o)throw new TypeError("Private accessor was defined without a setter");if(typeof t=="function"?e!==t||!o:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return n==="a"?o.call(e,r):o?o.value=r:t.set(e,r),r}function TE(e,t){if(t===null||typeof t!="object"&&typeof t!="function")throw new TypeError("Cannot use 'in' operator on non-object");return typeof e=="function"?t===e:e.has(t)}function OE(e,t,r){if(t!=null){if(typeof t!="object"&&typeof t!="function")throw new TypeError("Object expected.");var n,o;if(r){if(!Symbol.asyncDispose)throw new TypeError("Symbol.asyncDispose is not defined.");n=t[Symbol.asyncDispose]}if(n===void 0){if(!Symbol.dispose)throw new TypeError("Symbol.dispose is not defined.");n=t[Symbol.dispose],r&&(o=n)}if(typeof n!="function")throw new TypeError("Object not disposable.");o&&(n=function(){try{o.call(this)}catch(s){return Promise.reject(s)}}),e.stack.push({value:t,dispose:n,async:r})}else r&&e.stack.push({async:!0});return t}function RE(e){function t(s){e.error=e.hasError?new SU(s,e.error,"An error was suppressed during disposal."):s,e.hasError=!0}var r,n=0;function o(){for(;r=e.stack.pop();)try{if(!r.async&&n===1)return n=0,e.stack.push(r),Promise.resolve().then(o);if(r.dispose){var s=r.dispose.call(r.value);if(r.async)return n|=2,Promise.resolve(s).then(o,function(i){return t(i),o()})}else n|=1}catch(i){t(i)}if(n===1)return e.hasError?Promise.reject(e.error):Promise.resolve();if(e.hasError)throw e.error}return o()}function IE(e,t){return typeof e=="string"&&/^\.\.?\//.test(e)?e.replace(/\.(tsx)$|((?:\.d)?)((?:\.[^./]+?)?)\.([cm]?)ts$/i,function(r,n,o,s,i){return n?t?".jsx":".js":o&&(!s||!i)?r:o+s+"."+i.toLowerCase()+"js"}):e}var Xu,ta,na,vU,Qu,SU,EU,dn=y(()=>{c();Xu=function(e,t){return Xu=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(r[o]=n[o])},Xu(e,t)};ta=function(){return ta=Object.assign||function(t){for(var r,n=1,o=arguments.length;n<o;n++){r=arguments[n];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(t[s]=r[s])}return t},ta.apply(this,arguments)};na=Object.create?function(e,t,r,n){n===void 0&&(n=r);var o=Object.getOwnPropertyDescriptor(t,r);(!o||("get"in o?!t.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,o)}:function(e,t,r,n){n===void 0&&(n=r),e[n]=t[r]};vU=Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t},Qu=function(e){return Qu=Object.getOwnPropertyNames||function(t){var r=[];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(r[r.length]=n);return r},Qu(e)};SU=typeof SuppressedError=="function"?SuppressedError:function(e,t,r){var n=new Error(r);return n.name="SuppressedError",n.error=e,n.suppressed=t,n};EU={__extends:sE,__assign:ta,__rest:iE,__decorate:aE,__param:cE,__esDecorate:lE,__runInitializers:dE,__propKey:uE,__setFunctionName:pE,__metadata:fE,__awaiter:mE,__generator:gE,__createBinding:na,__exportStar:hE,__values:ra,__read:Zu,__spread:yE,__spreadArrays:_E,__spreadArray:vE,__await:cn,__asyncGenerator:SE,__asyncDelegator:EE,__asyncValues:wE,__makeTemplateObject:bE,__importStar:CE,__importDefault:xE,__classPrivateFieldGet:PE,__classPrivateFieldSet:AE,__classPrivateFieldIn:TE,__addDisposableResource:OE,__disposeResources:RE,__rewriteRelativeImportExtension:IE}});var DE=w((qte,kE)=>{c();var oa=Object.defineProperty,wU=Object.getOwnPropertyDescriptor,bU=Object.getOwnPropertyNames,CU=Object.prototype.hasOwnProperty,xU=(e,t)=>oa(e,"name",{value:t,configurable:!0}),PU=(e,t)=>{for(var r in t)oa(e,r,{get:t[r],enumerable:!0})},AU=(e,t,r,n)=>{if(t&&typeof t=="object"||typeof t=="function")for(let o of bU(t))!CU.call(e,o)&&o!==r&&oa(e,o,{get:()=>t[o],enumerable:!(n=wU(t,o))||n.enumerable});return e},TU=e=>AU(oa({},"__esModule",{value:!0}),e),NE={};PU(NE,{isArrayBuffer:()=>OU});kE.exports=TU(NE);var OU=xU(e=>typeof ArrayBuffer=="function"&&e instanceof ArrayBuffer||Object.prototype.toString.call(e)==="[object ArrayBuffer]","isArrayBuffer")});var LE=w((Vte,BE)=>{c();var sa=Object.defineProperty,RU=Object.getOwnPropertyDescriptor,IU=Object.getOwnPropertyNames,NU=Object.prototype.hasOwnProperty,ME=(e,t)=>sa(e,"name",{value:t,configurable:!0}),kU=(e,t)=>{for(var r in t)sa(e,r,{get:t[r],enumerable:!0})},DU=(e,t,r,n)=>{if(t&&typeof t=="object"||typeof t=="function")for(let o of IU(t))!NU.call(e,o)&&o!==r&&sa(e,o,{get:()=>t[o],enumerable:!(n=RU(t,o))||n.enumerable});return e},MU=e=>DU(sa({},"__esModule",{value:!0}),e),FE={};kU(FE,{fromArrayBuffer:()=>BU,fromString:()=>LU});BE.exports=MU(FE);var FU=DE(),ep=F("buffer"),BU=ME((e,t=0,r=e.byteLength-t)=>{if(!(0,FU.isArrayBuffer)(e))throw new TypeError(`The "input" argument must be ArrayBuffer. Received type ${typeof e} (${e})`);return ep.Buffer.from(e,t,r)},"fromArrayBuffer"),LU=ME((e,t)=>{if(typeof e!="string")throw new TypeError(`The "input" argument must be of type string. Received type ${typeof e} (${e})`);return t?ep.Buffer.from(e,t):ep.Buffer.from(e)},"fromString")});var qE=w((Wte,$E)=>{c();var ia=Object.defineProperty,UU=Object.getOwnPropertyDescriptor,HU=Object.getOwnPropertyNames,jU=Object.prototype.hasOwnProperty,tp=(e,t)=>ia(e,"name",{value:t,configurable:!0}),$U=(e,t)=>{for(var r in t)ia(e,r,{get:t[r],enumerable:!0})},qU=(e,t,r,n)=>{if(t&&typeof t=="object"||typeof t=="function")for(let o of HU(t))!jU.call(e,o)&&o!==r&&ia(e,o,{get:()=>t[o],enumerable:!(n=UU(t,o))||n.enumerable});return e},GU=e=>qU(ia({},"__esModule",{value:!0}),e),UE={};$U(UE,{fromUtf8:()=>jE,toUint8Array:()=>VU,toUtf8:()=>zU});$E.exports=GU(UE);var HE=LE(),jE=tp(e=>{let t=(0,HE.fromString)(e,"utf8");return new Uint8Array(t.buffer,t.byteOffset,t.byteLength/Uint8Array.BYTES_PER_ELEMENT)},"fromUtf8"),VU=tp(e=>typeof e=="string"?jE(e):ArrayBuffer.isView(e)?new Uint8Array(e.buffer,e.byteOffset,e.byteLength/Uint8Array.BYTES_PER_ELEMENT):new Uint8Array(e),"toUint8Array"),zU=tp(e=>{if(typeof e=="string")return e;if(typeof e!="object"||typeof e.byteOffset!="number"||typeof e.byteLength!="number")throw new Error("@smithy/util-utf8: toUtf8 encoder function only accepts string | Uint8Array.");return(0,HE.fromArrayBuffer)(e.buffer,e.byteOffset,e.byteLength).toString("utf8")},"toUtf8")});var GE=w(aa=>{"use strict";c();Object.defineProperty(aa,"__esModule",{value:!0});aa.convertToBuffer=void 0;var WU=qE(),KU=typeof Buffer<"u"&&Buffer.from?function(e){return Buffer.from(e,"utf8")}:WU.fromUtf8;function YU(e){return e instanceof Uint8Array?e:typeof e=="string"?KU(e):ArrayBuffer.isView(e)?new Uint8Array(e.buffer,e.byteOffset,e.byteLength/Uint8Array.BYTES_PER_ELEMENT):new Uint8Array(e)}aa.convertToBuffer=YU});var VE=w(ca=>{"use strict";c();Object.defineProperty(ca,"__esModule",{value:!0});ca.isEmptyData=void 0;function JU(e){return typeof e=="string"?e.length===0:e.byteLength===0}ca.isEmptyData=JU});var zE=w(la=>{"use strict";c();Object.defineProperty(la,"__esModule",{value:!0});la.numToUint8=void 0;function XU(e){return new Uint8Array([(e&4278190080)>>24,(e&16711680)>>16,(e&65280)>>8,e&255])}la.numToUint8=XU});var WE=w(da=>{"use strict";c();Object.defineProperty(da,"__esModule",{value:!0});da.uint32ArrayFrom=void 0;function QU(e){if(!Uint32Array.from){for(var t=new Uint32Array(e.length),r=0;r<e.length;)t[r]=e[r],r+=1;return t}return Uint32Array.from(e)}da.uint32ArrayFrom=QU});var rp=w(st=>{"use strict";c();Object.defineProperty(st,"__esModule",{value:!0});st.uint32ArrayFrom=st.numToUint8=st.isEmptyData=st.convertToBuffer=void 0;var ZU=GE();Object.defineProperty(st,"convertToBuffer",{enumerable:!0,get:function(){return ZU.convertToBuffer}});var e1=VE();Object.defineProperty(st,"isEmptyData",{enumerable:!0,get:function(){return e1.isEmptyData}});var t1=zE();Object.defineProperty(st,"numToUint8",{enumerable:!0,get:function(){return t1.numToUint8}});var r1=WE();Object.defineProperty(st,"uint32ArrayFrom",{enumerable:!0,get:function(){return r1.uint32ArrayFrom}})});var JE=w(ua=>{"use strict";c();Object.defineProperty(ua,"__esModule",{value:!0});ua.AwsCrc32=void 0;var KE=(dn(),D(ln)),np=rp(),YE=pa(),n1=function(){function e(){this.crc32=new YE.Crc32}return e.prototype.update=function(t){(0,np.isEmptyData)(t)||this.crc32.update((0,np.convertToBuffer)(t))},e.prototype.digest=function(){return KE.__awaiter(this,void 0,void 0,function(){return KE.__generator(this,function(t){return[2,(0,np.numToUint8)(this.crc32.digest())]})})},e.prototype.reset=function(){this.crc32=new YE.Crc32},e}();ua.AwsCrc32=n1});var pa=w(Jt=>{"use strict";c();Object.defineProperty(Jt,"__esModule",{value:!0});Jt.AwsCrc32=Jt.Crc32=Jt.crc32=void 0;var o1=(dn(),D(ln)),s1=rp();function i1(e){return new XE().update(e).digest()}Jt.crc32=i1;var XE=function(){function e(){this.checksum=4294967295}return e.prototype.update=function(t){var r,n;try{for(var o=o1.__values(t),s=o.next();!s.done;s=o.next()){var i=s.value;this.checksum=this.checksum>>>8^c1[(this.checksum^i)&255]}}catch(a){r={error:a}}finally{try{s&&!s.done&&(n=o.return)&&n.call(o)}finally{if(r)throw r.error}}return this},e.prototype.digest=function(){return(this.checksum^4294967295)>>>0},e}();Jt.Crc32=XE;var a1=[0,1996959894,3993919788,2567524794,124634137,1886057615,3915621685,2657392035,249268274,2044508324,3772115230,2547177864,162941995,2125561021,3887607047,2428444049,498536548,1789927666,4089016648,2227061214,450548861,1843258603,4107580753,2211677639,325883990,1684777152,4251122042,2321926636,335633487,1661365465,4195302755,2366115317,997073096,1281953886,3579855332,2724688242,1006888145,1258607687,3524101629,2768942443,901097722,1119000684,3686517206,2898065728,853044451,1172266101,3705015759,2882616665,651767980,1373503546,3369554304,3218104598,565507253,1454621731,3485111705,3099436303,671266974,1594198024,3322730930,2970347812,795835527,1483230225,3244367275,3060149565,1994146192,31158534,2563907772,4023717930,1907459465,112637215,2680153253,3904427059,2013776290,251722036,2517215374,3775830040,2137656763,141376813,2439277719,3865271297,1802195444,476864866,2238001368,4066508878,1812370925,453092731,2181625025,4111451223,1706088902,314042704,2344532202,4240017532,1658658271,366619977,2362670323,4224994405,1303535960,984961486,2747007092,3569037538,1256170817,1037604311,2765210733,3554079995,1131014506,879679996,2909243462,3663771856,1141124467,855842277,2852801631,3708648649,1342533948,654459306,3188396048,3373015174,1466479909,544179635,3110523913,3462522015,1591671054,702138776,2966460450,3352799412,1504918807,783551873,3082640443,3233442989,3988292384,2596254646,62317068,1957810842,3939845945,2647816111,81470997,1943803523,3814918930,2489596804,225274430,2053790376,3826175755,2466906013,167816743,2097651377,4027552580,2265490386,503444072,1762050814,4150417245,2154129355,426522225,1852507879,4275313526,2312317920,282753626,1742555852,4189708143,2394877945,397917763,1622183637,3604390888,2714866558,953729732,1340076626,3518719985,2797360999,1068828381,1219638859,3624741850,2936675148,906185462,1090812512,3747672003,2825379669,829329135,1181335161,3412177804,3160834842,628085408,1382605366,3423369109,3138078467,570562233,1426400815,3317316542,2998733608,733239954,1555261956,3268935591,3050360625,752459403,1541320221,2607071920,3965973030,1969922972,40735498,2617837225,3943577151,1913087877,83908371,2512341634,3803740692,2075208622,213261112,2463272603,3855990285,2094854071,198958881,2262029012,4057260610,1759359992,534414190,2176718541,4139329115,1873836001,414664567,2282248934,4279200368,1711684554,285281116,2405801727,4167216745,1634467795,376229701,2685067896,3608007406,1308918612,956543938,2808555105,3495958263,1231636301,1047427035,2932959818,3654703836,1088359270,936918e3,2847714899,3736837829,1202900863,817233897,3183342108,3401237130,1404277552,615818150,3134207493,3453421203,1423857449,601450431,3009837614,3294710456,1567103746,711928724,3020668471,3272380065,1510334235,755167117],c1=(0,s1.uint32ArrayFrom)(a1),l1=JE();Object.defineProperty(Jt,"AwsCrc32",{enumerable:!0,get:function(){return l1.AwsCrc32}})});var ga=w((lre,ow)=>{c();var ma=Object.defineProperty,d1=Object.getOwnPropertyDescriptor,u1=Object.getOwnPropertyNames,p1=Object.prototype.hasOwnProperty,xt=(e,t)=>ma(e,"name",{value:t,configurable:!0}),f1=(e,t)=>{for(var r in t)ma(e,r,{get:t[r],enumerable:!0})},m1=(e,t,r,n)=>{if(t&&typeof t=="object"||typeof t=="function")for(let o of u1(t))!p1.call(e,o)&&o!==r&&ma(e,o,{get:()=>t[o],enumerable:!(n=d1(t,o))||n.enumerable});return e},g1=e=>m1(ma({},"__esModule",{value:!0}),e),ZE={};f1(ZE,{EventStreamCodec:()=>T1,HeaderMarshaller:()=>tw,Int64:()=>fa,MessageDecoderStream:()=>O1,MessageEncoderStream:()=>R1,SmithyMessageDecoderStream:()=>I1,SmithyMessageEncoderStream:()=>N1});ow.exports=g1(ZE);var h1=pa(),kr=Vn(),fa=class ew{constructor(t){if(this.bytes=t,t.byteLength!==8)throw new Error("Int64 buffers must be exactly 8 bytes")}static{xt(this,"Int64")}static fromNumber(t){if(t>9223372036854776e3||t<-9223372036854776e3)throw new Error(`${t} is too large (or, if negative, too small) to represent as an Int64`);let r=new Uint8Array(8);for(let n=7,o=Math.abs(Math.round(t));n>-1&&o>0;n--,o/=256)r[n]=o;return t<0&&op(r),new ew(r)}valueOf(){let t=this.bytes.slice(0),r=t[0]&128;return r&&op(t),parseInt((0,kr.toHex)(t),16)*(r?-1:1)}toString(){return String(this.valueOf())}};function op(e){for(let t=0;t<8;t++)e[t]^=255;for(let t=7;t>-1&&(e[t]++,e[t]===0);t--);}xt(op,"negate");var tw=class{constructor(e,t){this.toUtf8=e,this.fromUtf8=t}static{xt(this,"HeaderMarshaller")}format(e){let t=[];for(let o of Object.keys(e)){let s=this.fromUtf8(o);t.push(Uint8Array.from([s.byteLength]),s,this.formatHeaderValue(e[o]))}let r=new Uint8Array(t.reduce((o,s)=>o+s.byteLength,0)),n=0;for(let o of t)r.set(o,n),n+=o.byteLength;return r}formatHeaderValue(e){switch(e.type){case"boolean":return Uint8Array.from([e.value?0:1]);case"byte":return Uint8Array.from([2,e.value]);case"short":let t=new DataView(new ArrayBuffer(3));return t.setUint8(0,3),t.setInt16(1,e.value,!1),new Uint8Array(t.buffer);case"integer":let r=new DataView(new ArrayBuffer(5));return r.setUint8(0,4),r.setInt32(1,e.value,!1),new Uint8Array(r.buffer);case"long":let n=new Uint8Array(9);return n[0]=5,n.set(e.value.bytes,1),n;case"binary":let o=new DataView(new ArrayBuffer(3+e.value.byteLength));o.setUint8(0,6),o.setUint16(1,e.value.byteLength,!1);let s=new Uint8Array(o.buffer);return s.set(e.value,3),s;case"string":let i=this.fromUtf8(e.value),a=new DataView(new ArrayBuffer(3+i.byteLength));a.setUint8(0,7),a.setUint16(1,i.byteLength,!1);let l=new Uint8Array(a.buffer);return l.set(i,3),l;case"timestamp":let d=new Uint8Array(9);return d[0]=8,d.set(fa.fromNumber(e.value.valueOf()).bytes,1),d;case"uuid":if(!x1.test(e.value))throw new Error(`Invalid UUID received: ${e.value}`);let u=new Uint8Array(17);return u[0]=9,u.set((0,kr.fromHex)(e.value.replace(/\-/g,"")),1),u}}parse(e){let t={},r=0;for(;r<e.byteLength;){let n=e.getUint8(r++),o=this.toUtf8(new Uint8Array(e.buffer,e.byteOffset+r,n));switch(r+=n,e.getUint8(r++)){case 0:t[o]={type:QE,value:!0};break;case 1:t[o]={type:QE,value:!1};break;case 2:t[o]={type:y1,value:e.getInt8(r++)};break;case 3:t[o]={type:_1,value:e.getInt16(r,!1)},r+=2;break;case 4:t[o]={type:v1,value:e.getInt32(r,!1)},r+=4;break;case 5:t[o]={type:S1,value:new fa(new Uint8Array(e.buffer,e.byteOffset+r,8))},r+=8;break;case 6:let s=e.getUint16(r,!1);r+=2,t[o]={type:E1,value:new Uint8Array(e.buffer,e.byteOffset+r,s)},r+=s;break;case 7:let i=e.getUint16(r,!1);r+=2,t[o]={type:w1,value:this.toUtf8(new Uint8Array(e.buffer,e.byteOffset+r,i))},r+=i;break;case 8:t[o]={type:b1,value:new Date(new fa(new Uint8Array(e.buffer,e.byteOffset+r,8)).valueOf())},r+=8;break;case 9:let a=new Uint8Array(e.buffer,e.byteOffset+r,16);r+=16,t[o]={type:C1,value:`${(0,kr.toHex)(a.subarray(0,4))}-${(0,kr.toHex)(a.subarray(4,6))}-${(0,kr.toHex)(a.subarray(6,8))}-${(0,kr.toHex)(a.subarray(8,10))}-${(0,kr.toHex)(a.subarray(10))}`};break;default:throw new Error("Unrecognized header type tag")}}return t}},QE="boolean",y1="byte",_1="short",v1="integer",S1="long",E1="binary",w1="string",b1="timestamp",C1="uuid",x1=/^[a-f0-9]{8}-[a-f0-9]{4}-[a-f0-9]{4}-[a-f0-9]{4}-[a-f0-9]{12}$/,P1=pa(),rw=4,Xt=rw*2,Dr=4,A1=Xt+Dr*2;function nw({byteLength:e,byteOffset:t,buffer:r}){if(e<A1)throw new Error("Provided message too short to accommodate event stream message overhead");let n=new DataView(r,t,e),o=n.getUint32(0,!1);if(e!==o)throw new Error("Reported message length does not match received message length");let s=n.getUint32(rw,!1),i=n.getUint32(Xt,!1),a=n.getUint32(e-Dr,!1),l=new P1.Crc32().update(new Uint8Array(r,t,Xt));if(i!==l.digest())throw new Error(`The prelude checksum specified in the message (${i}) does not match the calculated CRC32 checksum (${l.digest()})`);if(l.update(new Uint8Array(r,t+Xt,e-(Xt+Dr))),a!==l.digest())throw new Error(`The message checksum (${l.digest()}) did not match the expected value of ${a}`);return{headers:new DataView(r,t+Xt+Dr,s),body:new Uint8Array(r,t+Xt+Dr+s,o-s-(Xt+Dr+Dr))}}xt(nw,"splitMessage");var T1=class{static{xt(this,"EventStreamCodec")}constructor(e,t){this.headerMarshaller=new tw(e,t),this.messageBuffer=[],this.isEndOfStream=!1}feed(e){this.messageBuffer.push(this.decode(e))}endOfStream(){this.isEndOfStream=!0}getMessage(){let e=this.messageBuffer.pop(),t=this.isEndOfStream;return{getMessage(){return e},isEndOfStream(){return t}}}getAvailableMessages(){let e=this.messageBuffer;this.messageBuffer=[];let t=this.isEndOfStream;return{getMessages(){return e},isEndOfStream(){return t}}}encode({headers:e,body:t}){let r=this.headerMarshaller.format(e),n=r.byteLength+t.byteLength+16,o=new Uint8Array(n),s=new DataView(o.buffer,o.byteOffset,o.byteLength),i=new h1.Crc32;return s.setUint32(0,n,!1),s.setUint32(4,r.byteLength,!1),s.setUint32(8,i.update(o.subarray(0,8)).digest(),!1),o.set(r,12),o.set(t,r.byteLength+12),s.setUint32(n-4,i.update(o.subarray(8,n-4)).digest(),!1),o}decode(e){let{headers:t,body:r}=nw(e);return{headers:this.headerMarshaller.parse(t),body:r}}formatHeaders(e){return this.headerMarshaller.format(e)}},O1=class{constructor(e){this.options=e}static{xt(this,"MessageDecoderStream")}[Symbol.asyncIterator](){return this.asyncIterator()}async*asyncIterator(){for await(let e of this.options.inputStream)yield this.options.decoder.decode(e)}},R1=class{constructor(e){this.options=e}static{xt(this,"MessageEncoderStream")}[Symbol.asyncIterator](){return this.asyncIterator()}async*asyncIterator(){for await(let e of this.options.messageStream)yield this.options.encoder.encode(e);this.options.includeEndFrame&&(yield new Uint8Array(0))}},I1=class{constructor(e){this.options=e}static{xt(this,"SmithyMessageDecoderStream")}[Symbol.asyncIterator](){return this.asyncIterator()}async*asyncIterator(){for await(let e of this.options.messageStream){let t=await this.options.deserializer(e);t!==void 0&&(yield t)}}},N1=class{constructor(e){this.options=e}static{xt(this,"SmithyMessageEncoderStream")}[Symbol.asyncIterator](){return this.asyncIterator()}async*asyncIterator(){for await(let e of this.options.inputStream)yield this.options.serializer(e)}}});var cw=w((yre,aw)=>{"use strict";c();var ha=Object.defineProperty,k1=Object.getOwnPropertyDescriptor,D1=Object.getOwnPropertyNames,M1=Object.prototype.hasOwnProperty,F1=(e,t)=>ha(e,"name",{value:t,configurable:!0}),B1=(e,t)=>{for(var r in t)ha(e,r,{get:t[r],enumerable:!0})},L1=(e,t,r,n)=>{if(t&&typeof t=="object"||typeof t=="function")for(let o of D1(t))!M1.call(e,o)&&o!==r&&ha(e,o,{get:()=>t[o],enumerable:!(n=k1(t,o))||n.enumerable});return e},U1=e=>L1(ha({},"__esModule",{value:!0}),e),sw={};B1(sw,{formatUrl:()=>iw});aw.exports=U1(sw);var H1=ei();function iw(e){let{port:t,query:r}=e,{protocol:n,path:o,hostname:s}=e;n&&n.slice(-1)!==":"&&(n+=":"),t&&(s+=`:${t}`),o&&o.charAt(0)!=="/"&&(o=`/${o}`);let i=r?(0,H1.buildQueryString)(r):"";i&&i[0]!=="?"&&(i=`?${i}`);let a="";if(e.username!=null||e.password!=null){let d=e.username??"",u=e.password??"";a=`${d}:${u}@`}let l="";return e.fragment&&(l=`#${e.fragment}`),`${n}//${a}${s}${o}${i}${l}`}F1(iw,"formatUrl")});var sp=w((vre,fw)=>{c();var ya=Object.defineProperty,j1=Object.getOwnPropertyDescriptor,$1=Object.getOwnPropertyNames,q1=Object.prototype.hasOwnProperty,un=(e,t)=>ya(e,"name",{value:t,configurable:!0}),G1=(e,t)=>{for(var r in t)ya(e,r,{get:t[r],enumerable:!0})},V1=(e,t,r,n)=>{if(t&&typeof t=="object"||typeof t=="function")for(let o of $1(t))!q1.call(e,o)&&o!==r&&ya(e,o,{get:()=>t[o],enumerable:!(n=j1(t,o))||n.enumerable});return e},z1=e=>V1(ya({},"__esModule",{value:!0}),e),lw={};G1(lw,{EventStreamMarshaller:()=>pw,eventStreamSerdeProvider:()=>W1});fw.exports=z1(lw);var Co=ga();function dw(e){let t=0,r=0,n=null,o=null,s=un(a=>{if(typeof a!="number")throw new Error("Attempted to allocate an event message where size was not a number: "+a);t=a,r=4,n=new Uint8Array(a),new DataView(n.buffer).setUint32(0,a,!1)},"allocateMessage"),i=un(async function*(){let a=e[Symbol.asyncIterator]();for(;;){let{value:l,done:d}=await a.next();if(d){if(t)if(t===r)yield n;else throw new Error("Truncated event message received.");else return;return}let u=l.length,f=0;for(;f<u;){if(!n){let h=u-f;o||(o=new Uint8Array(4));let _=Math.min(4-r,h);if(o.set(l.slice(f,f+_),r),r+=_,f+=_,r<4)break;s(new DataView(o.buffer).getUint32(0,!1)),o=null}let g=Math.min(t-r,u-f);n.set(l.slice(f,f+g),r),r+=g,f+=g,t&&t===r&&(yield n,n=null,t=0,r=0)}}},"iterator");return{[Symbol.asyncIterator]:i}}un(dw,"getChunkedStream");function uw(e,t){return async function(r){let{value:n}=r.headers[":message-type"];if(n==="error"){let o=new Error(r.headers[":error-message"].value||"UnknownError");throw o.name=r.headers[":error-code"].value,o}else if(n==="exception"){let o=r.headers[":exception-type"].value,s={[o]:r},i=await e(s);if(i.$unknown){let a=new Error(t(r.body));throw a.name=o,a}throw i[o]}else if(n==="event"){let o={[r.headers[":event-type"].value]:r},s=await e(o);return s.$unknown?void 0:s}else throw Error(`Unrecognizable event type: ${r.headers[":event-type"].value}`)}}un(uw,"getMessageUnmarshaller");var pw=class{static{un(this,"EventStreamMarshaller")}constructor({utf8Encoder:e,utf8Decoder:t}){this.eventStreamCodec=new Co.EventStreamCodec(e,t),this.utfEncoder=e}deserialize(e,t){let r=dw(e);return new Co.SmithyMessageDecoderStream({messageStream:new Co.MessageDecoderStream({inputStream:r,decoder:this.eventStreamCodec}),deserializer:uw(t,this.utfEncoder)})}serialize(e,t){return new Co.MessageEncoderStream({messageStream:new Co.SmithyMessageEncoderStream({inputStream:e,serializer:t}),encoder:this.eventStreamCodec,includeEndFrame:!0})}},W1=un(e=>new pw(e),"eventStreamSerdeProvider")});var vw=w((wre,_w)=>{c();var _a=Object.defineProperty,K1=Object.getOwnPropertyDescriptor,Y1=Object.getOwnPropertyNames,J1=Object.prototype.hasOwnProperty,xo=(e,t)=>_a(e,"name",{value:t,configurable:!0}),X1=(e,t)=>{for(var r in t)_a(e,r,{get:t[r],enumerable:!0})},Q1=(e,t,r,n)=>{if(t&&typeof t=="object"||typeof t=="function")for(let o of Y1(t))!J1.call(e,o)&&o!==r&&_a(e,o,{get:()=>t[o],enumerable:!(n=K1(t,o))||n.enumerable});return e},Z1=e=>Q1(_a({},"__esModule",{value:!0}),e),mw={};X1(mw,{EventStreamMarshaller:()=>yw,eventStreamSerdeProvider:()=>rH,iterableToReadableStream:()=>hw,readableStreamtoIterable:()=>gw});_w.exports=Z1(mw);var eH=sp(),gw=xo(e=>({[Symbol.asyncIterator]:async function*(){let t=e.getReader();try{for(;;){let{done:r,value:n}=await t.read();if(r)return;yield n}}finally{t.releaseLock()}}}),"readableStreamtoIterable"),hw=xo(e=>{let t=e[Symbol.asyncIterator]();return new ReadableStream({async pull(r){let{done:n,value:o}=await t.next();if(n)return r.close();r.enqueue(o)}})},"iterableToReadableStream"),yw=class{static{xo(this,"EventStreamMarshaller")}constructor({utf8Encoder:e,utf8Decoder:t}){this.universalMarshaller=new eH.EventStreamMarshaller({utf8Decoder:t,utf8Encoder:e})}deserialize(e,t){let r=tH(e)?gw(e):e;return this.universalMarshaller.deserialize(r,t)}serialize(e,t){let r=this.universalMarshaller.serialize(e,t);return typeof ReadableStream=="function"?hw(r):r}},tH=xo(e=>typeof ReadableStream=="function"&&e instanceof ReadableStream,"isReadableStream"),rH=xo(e=>new yw(e),"eventStreamSerdeProvider")});var Pw=w((xre,xw)=>{"use strict";c();var va=Object.defineProperty,nH=Object.getOwnPropertyDescriptor,oH=Object.getOwnPropertyNames,sH=Object.prototype.hasOwnProperty,Q=(e,t)=>va(e,"name",{value:t,configurable:!0}),iH=(e,t)=>{for(var r in t)va(e,r,{get:t[r],enumerable:!0})},aH=(e,t,r,n)=>{if(t&&typeof t=="object"||typeof t=="function")for(let o of oH(t))!sH.call(e,o)&&o!==r&&va(e,o,{get:()=>t[o],enumerable:!(n=nH(t,o))||n.enumerable});return e},cH=e=>aH(va({},"__esModule",{value:!0}),e),Ew={};iH(Ew,{WebSocketFetchHandler:()=>CH,eventStreamPayloadHandlerProvider:()=>fH,getWebSocketPlugin:()=>_H,resolveWebSocketConfig:()=>SH});xw.exports=cH(Ew);var lH=ga(),dH=Vn(),uH=Q((e,t,r,n)=>{let o=e,s={start(){},async transform(i,a){try{let l=new Date(Date.now()+await n()),d={":date":{type:"timestamp",value:l}},u=await t.sign({message:{body:i,headers:d},priorSignature:o},{signingDate:l});o=u.signature;let f=r.encode({headers:{...d,":chunk-signature":{type:"binary",value:(0,dH.fromHex)(u.signature)}},body:i});a.enqueue(f)}catch(l){a.error(l)}}};return new TransformStream({...s})},"getEventSigningTransformStream"),pH=class{static{Q(this,"EventStreamPayloadHandler")}messageSigner;eventStreamCodec;systemClockOffsetProvider;constructor(e){this.messageSigner=e.messageSigner,this.eventStreamCodec=new lH.EventStreamCodec(e.utf8Encoder,e.utf8Decoder),this.systemClockOffsetProvider=async()=>e.systemClockOffset??0}async handle(e,t,r={}){let n=t.request,{body:o,headers:s,query:i}=n;if(!(o instanceof ReadableStream))throw new Error("Eventstream payload must be a ReadableStream.");let a=new TransformStream;n.body=a.readable;let l;try{l=await e(t)}catch(h){throw n.body.cancel(),h}let u=((s.authorization||"").match(/Signature=([\w]+)$/)||[])[1]||i&&i["X-Amz-Signature"]||"",f=uH(u,await this.messageSigner(),this.eventStreamCodec,this.systemClockOffsetProvider);return o.pipeThrough(f).pipeThrough(a),l}},fH=Q(e=>new pH(e),"eventStreamPayloadHandlerProvider"),mH=Q(()=>e=>async t=>{let r={...t.input},n=await e(t),o=n.output;return r.SessionId&&o.SessionId==null&&(o.SessionId=r.SessionId),n},"injectSessionIdMiddleware"),gH={step:"initialize",name:"injectSessionIdMiddleware",tags:["WEBSOCKET","EVENT_STREAM"],override:!0},ip=q(),hH=Q((e,t)=>r=>n=>{let{request:o}=n;if(ip.HttpRequest.isInstance(o)&&e.requestHandler.metadata?.handlerProtocol?.toLowerCase().includes("websocket")){o.protocol="wss:",o.method="GET",o.path=`${o.path}-websocket`;let{headers:s}=o;delete s["content-type"],delete s["x-amz-content-sha256"];for(let i of Object.keys(s))if(i.indexOf(t.headerPrefix)===0){let a=i.replace(t.headerPrefix,"");o.query[a]=s[i]}s["x-amz-user-agent"]&&(o.query["user-agent"]=s["x-amz-user-agent"]),o.headers={host:s.host??o.hostname}}return r(n)},"websocketEndpointMiddleware"),yH={name:"websocketEndpointMiddleware",tags:["WEBSOCKET","EVENT_STREAM"],relation:"after",toMiddleware:"eventStreamHeaderMiddleware",override:!0},_H=Q((e,t)=>({applyToStack:Q(r=>{r.addRelativeTo(hH(e,t),yH),r.add(mH(),gH)},"applyToStack")}),"getWebSocketPlugin"),ww=Q(e=>e.protocol==="ws:"||e.protocol==="wss:","isWebSocketRequest"),vH=class{static{Q(this,"WebsocketSignatureV4")}signer;constructor(e){this.signer=e.signer}presign(e,t={}){return this.signer.presign(e,t)}async sign(e,t){return ip.HttpRequest.isInstance(e)&&ww(e)?{...await this.signer.presign({...e,body:""},{...t,expiresIn:60,unsignableHeaders:new Set(Object.keys(e.headers).filter(n=>n!=="host"))}),body:e.body}:this.signer.sign(e,t)}},SH=Q(e=>{let{signer:t}=e;return Object.assign(e,{signer:Q(async r=>{let n=await t(r);if(EH(n))return new vH({signer:n});throw new Error("Expected WebsocketSignatureV4 signer, please check the client constructor.")},"signer")})},"resolveWebSocketConfig"),EH=Q(e=>!!e,"validateSigner"),wH=cw(),bw=vw(),Sw=ad(),bH=2e3,CH=class Cw{static{Q(this,"WebSocketFetchHandler")}metadata={handlerProtocol:"websocket/h1.1"};config;configPromise;httpHandler;sockets={};static create(t,r=new Sw.FetchHttpHandler){return typeof t?.handle=="function"?t:new Cw(t,r)}constructor(t,r=new Sw.FetchHttpHandler){this.httpHandler=r,typeof t=="function"?(this.config={},this.configPromise=t().then(n=>this.config=n??{})):(this.config=t??{},this.configPromise=Promise.resolve(this.config))}destroy(){for(let[t,r]of Object.entries(this.sockets)){for(let n of r)n.close(1e3,"Socket closed through destroy() call");delete this.sockets[t]}}async handle(t){if(!ww(t))return this.httpHandler.handle(t);let r=(0,wH.formatUrl)(t),n=new WebSocket(r);this.sockets[r]||(this.sockets[r]=[]),this.sockets[r].push(n),n.binaryType="arraybuffer",this.config=await this.configPromise;let{connectionTimeout:o=bH}=this.config;await this.waitForReady(n,o);let{body:s}=t,i=xH(s),a=this.connect(n,i),l=PH(a);return{response:new ip.HttpResponse({statusCode:200,body:l})}}updateHttpClientConfig(t,r){this.configPromise=this.configPromise.then(n=>(n[t]=r,n))}httpHandlerConfigs(){return this.config??{}}removeNotUsableSockets(t){this.sockets[t]=(this.sockets[t]??[]).filter(r=>![WebSocket.CLOSING,WebSocket.CLOSED].includes(r.readyState))}waitForReady(t,r){return new Promise((n,o)=>{let s=setTimeout(()=>{this.removeNotUsableSockets(t.url),o({$metadata:{httpStatusCode:500}})},r);t.onopen=()=>{clearTimeout(s),n()}})}connect(t,r){let n,o=!1,s=Q(()=>{},"reject"),i=Q(()=>{},"resolve");t.onmessage=d=>{i({done:!1,value:new Uint8Array(d.data)})},t.onerror=d=>{o=!0,t.close(),s(d)},t.onclose=()=>{this.removeNotUsableSockets(t.url),!o&&(n?s(n):i({done:!0,value:void 0}))};let a={[Symbol.asyncIterator]:()=>({next:Q(()=>new Promise((d,u)=>{i=d,s=u}),"next")})};return Q(async()=>{try{for await(let d of r)t.send(d)}catch(d){n=d}finally{t.close(1e3)}},"send")(),a}},xH=Q(e=>e[Symbol.asyncIterator]?e:AH(e)?(0,bw.readableStreamtoIterable)(e):{[Symbol.asyncIterator]:async function*(){yield e}},"getIterator"),PH=Q(e=>typeof ReadableStream=="function"?(0,bw.iterableToReadableStream)(e):e,"toReadableStream"),AH=Q(e=>typeof ReadableStream=="function"&&e instanceof ReadableStream,"isReadableStream")});var Iw=w((Ore,Rw)=>{c();var Sa=Object.defineProperty,TH=Object.getOwnPropertyDescriptor,OH=Object.getOwnPropertyNames,RH=Object.prototype.hasOwnProperty,Aw=(e,t)=>Sa(e,"name",{value:t,configurable:!0}),IH=(e,t)=>{for(var r in t)Sa(e,r,{get:t[r],enumerable:!0})},NH=(e,t,r,n)=>{if(t&&typeof t=="object"||typeof t=="function")for(let o of OH(t))!RH.call(e,o)&&o!==r&&Sa(e,o,{get:()=>t[o],enumerable:!(n=TH(t,o))||n.enumerable});return e},kH=e=>NH(Sa({},"__esModule",{value:!0}),e),Tw={};IH(Tw,{SelectorType:()=>Ow,booleanSelector:()=>DH,numberSelector:()=>MH});Rw.exports=kH(Tw);var DH=Aw((e,t,r)=>{if(t in e){if(e[t]==="true")return!0;if(e[t]==="false")return!1;throw new Error(`Cannot load ${r} "${t}". Expected "true" or "false", got ${e[t]}.`)}},"booleanSelector"),MH=Aw((e,t,r)=>{if(!(t in e))return;let n=parseInt(e[t],10);if(Number.isNaN(n))throw new TypeError(`Cannot load ${r} '${t}'. Expected number, got '${e[t]}'.`);return n},"numberSelector"),Ow=(e=>(e.ENV="env",e.CONFIG="shared config entry",e))(Ow||{})});var it=w((Ire,$w)=>{c();var wa=Object.defineProperty,FH=Object.getOwnPropertyDescriptor,BH=Object.getOwnPropertyNames,LH=Object.prototype.hasOwnProperty,ze=(e,t)=>wa(e,"name",{value:t,configurable:!0}),UH=(e,t)=>{for(var r in t)wa(e,r,{get:t[r],enumerable:!0})},HH=(e,t,r,n)=>{if(t&&typeof t=="object"||typeof t=="function")for(let o of BH(t))!LH.call(e,o)&&o!==r&&wa(e,o,{get:()=>t[o],enumerable:!(n=FH(t,o))||n.enumerable});return e},jH=e=>HH(wa({},"__esModule",{value:!0}),e),Dw={};UH(Dw,{CONFIG_USE_DUALSTACK_ENDPOINT:()=>Fw,CONFIG_USE_FIPS_ENDPOINT:()=>Lw,DEFAULT_USE_DUALSTACK_ENDPOINT:()=>$H,DEFAULT_USE_FIPS_ENDPOINT:()=>GH,ENV_USE_DUALSTACK_ENDPOINT:()=>Mw,ENV_USE_FIPS_ENDPOINT:()=>Bw,NODE_REGION_CONFIG_FILE_OPTIONS:()=>JH,NODE_REGION_CONFIG_OPTIONS:()=>YH,NODE_USE_DUALSTACK_ENDPOINT_CONFIG_OPTIONS:()=>qH,NODE_USE_FIPS_ENDPOINT_CONFIG_OPTIONS:()=>VH,REGION_ENV_NAME:()=>Uw,REGION_INI_NAME:()=>Hw,getRegionInfo:()=>tj,resolveCustomEndpointsConfig:()=>zH,resolveEndpointsConfig:()=>KH,resolveRegionConfig:()=>XH});$w.exports=jH(Dw);var Qt=Iw(),Mw="AWS_USE_DUALSTACK_ENDPOINT",Fw="use_dualstack_endpoint",$H=!1,qH={environmentVariableSelector:e=>(0,Qt.booleanSelector)(e,Mw,Qt.SelectorType.ENV),configFileSelector:e=>(0,Qt.booleanSelector)(e,Fw,Qt.SelectorType.CONFIG),default:!1},Bw="AWS_USE_FIPS_ENDPOINT",Lw="use_fips_endpoint",GH=!1,VH={environmentVariableSelector:e=>(0,Qt.booleanSelector)(e,Bw,Qt.SelectorType.ENV),configFileSelector:e=>(0,Qt.booleanSelector)(e,Lw,Qt.SelectorType.CONFIG),default:!1},Ea=Ge(),zH=ze(e=>{let{tls:t,endpoint:r,urlParser:n,useDualstackEndpoint:o}=e;return Object.assign(e,{tls:t??!0,endpoint:(0,Ea.normalizeProvider)(typeof r=="string"?n(r):r),isCustomEndpoint:!0,useDualstackEndpoint:(0,Ea.normalizeProvider)(o??!1)})},"resolveCustomEndpointsConfig"),WH=ze(async e=>{let{tls:t=!0}=e,r=await e.region();if(!new RegExp(/^([a-zA-Z0-9]|[a-zA-Z0-9][a-zA-Z0-9-]{0,61}[a-zA-Z0-9])$/).test(r))throw new Error("Invalid region in client config");let o=await e.useDualstackEndpoint(),s=await e.useFipsEndpoint(),{hostname:i}=await e.regionInfoProvider(r,{useDualstackEndpoint:o,useFipsEndpoint:s})??{};if(!i)throw new Error("Cannot resolve hostname from client config");return e.urlParser(`${t?"https:":"http:"}//${i}`)},"getEndpointFromRegion"),KH=ze(e=>{let t=(0,Ea.normalizeProvider)(e.useDualstackEndpoint??!1),{endpoint:r,useFipsEndpoint:n,urlParser:o,tls:s}=e;return Object.assign(e,{tls:s??!0,endpoint:r?(0,Ea.normalizeProvider)(typeof r=="string"?o(r):r):()=>WH({...e,useDualstackEndpoint:t,useFipsEndpoint:n}),isCustomEndpoint:!!r,useDualstackEndpoint:t})},"resolveEndpointsConfig"),Uw="AWS_REGION",Hw="region",YH={environmentVariableSelector:e=>e[Uw],configFileSelector:e=>e[Hw],default:()=>{throw new Error("Region is missing")}},JH={preferredFile:"credentials"},jw=ze(e=>typeof e=="string"&&(e.startsWith("fips-")||e.endsWith("-fips")),"isFipsRegion"),Nw=ze(e=>jw(e)?["fips-aws-global","aws-fips"].includes(e)?"us-east-1":e.replace(/fips-(dkr-|prod-)?|-fips/,""):e,"getRealRegion"),XH=ze(e=>{let{region:t,useFipsEndpoint:r}=e;if(!t)throw new Error("Region is missing");return Object.assign(e,{region:async()=>{if(typeof t=="string")return Nw(t);let n=await t();return Nw(n)},useFipsEndpoint:async()=>{let n=typeof t=="string"?t:await t();return jw(n)?!0:typeof r!="function"?Promise.resolve(!!r):r()}})},"resolveRegionConfig"),kw=ze((e=[],{useFipsEndpoint:t,useDualstackEndpoint:r})=>e.find(({tags:n})=>t===n.includes("fips")&&r===n.includes("dualstack"))?.hostname,"getHostnameFromVariants"),QH=ze((e,{regionHostname:t,partitionHostname:r})=>t||(r?r.replace("{region}",e):void 0),"getResolvedHostname"),ZH=ze((e,{partitionHash:t})=>Object.keys(t||{}).find(r=>t[r].regions.includes(e))??"aws","getResolvedPartition"),ej=ze((e,{signingRegion:t,regionRegex:r,useFipsEndpoint:n})=>{if(t)return t;if(n){let o=r.replace("\\\\","\\").replace(/^\^/g,"\\.").replace(/\$$/g,"\\."),s=e.match(o);if(s)return s[0].slice(1,-1)}},"getResolvedSigningRegion"),tj=ze((e,{useFipsEndpoint:t=!1,useDualstackEndpoint:r=!1,signingService:n,regionHash:o,partitionHash:s})=>{let i=ZH(e,{partitionHash:s}),a=e in o?e:s[i]?.endpoint??e,l={useFipsEndpoint:t,useDualstackEndpoint:r},d=kw(o[a]?.variants,l),u=kw(s[i]?.variants,l),f=QH(a,{regionHostname:d,partitionHostname:u});if(f===void 0)throw new Error(`Endpoint resolution failed for: ${{resolvedRegion:a,useFipsEndpoint:t,useDualstackEndpoint:r}}`);let g=ej(f,{signingRegion:o[a]?.signingRegion,regionRegex:s[i].regionRegex,useFipsEndpoint:t});return{partition:i,signingService:n,hostname:f,...g&&{signingRegion:g},...o[a]?.signingService&&{signingService:o[a].signingService}}},"getRegionInfo")});var Vw=w((kre,Gw)=>{c();var ba=Object.defineProperty,rj=Object.getOwnPropertyDescriptor,nj=Object.getOwnPropertyNames,oj=Object.prototype.hasOwnProperty,sj=(e,t)=>ba(e,"name",{value:t,configurable:!0}),ij=(e,t)=>{for(var r in t)ba(e,r,{get:t[r],enumerable:!0})},aj=(e,t,r,n)=>{if(t&&typeof t=="object"||typeof t=="function")for(let o of nj(t))!oj.call(e,o)&&o!==r&&ba(e,o,{get:()=>t[o],enumerable:!(n=rj(t,o))||n.enumerable});return e},cj=e=>aj(ba({},"__esModule",{value:!0}),e),qw={};ij(qw,{resolveEventStreamSerdeConfig:()=>lj});Gw.exports=cj(qw);var lj=sj(e=>Object.assign(e,{eventStreamMarshaller:e.eventStreamSerdeProvider(e)}),"resolveEventStreamSerdeConfig")});var Po=w((Mre,Jw)=>{c();var Ca=Object.defineProperty,dj=Object.getOwnPropertyDescriptor,uj=Object.getOwnPropertyNames,pj=Object.prototype.hasOwnProperty,Ww=(e,t)=>Ca(e,"name",{value:t,configurable:!0}),fj=(e,t)=>{for(var r in t)Ca(e,r,{get:t[r],enumerable:!0})},mj=(e,t,r,n)=>{if(t&&typeof t=="object"||typeof t=="function")for(let o of uj(t))!pj.call(e,o)&&o!==r&&Ca(e,o,{get:()=>t[o],enumerable:!(n=dj(t,o))||n.enumerable});return e},gj=e=>mj(Ca({},"__esModule",{value:!0}),e),Kw={};fj(Kw,{contentLengthMiddleware:()=>ap,contentLengthMiddlewareOptions:()=>Yw,getContentLengthPlugin:()=>yj});Jw.exports=gj(Kw);var hj=q(),zw="content-length";function ap(e){return t=>async r=>{let n=r.request;if(hj.HttpRequest.isInstance(n)){let{body:o,headers:s}=n;if(o&&Object.keys(s).map(i=>i.toLowerCase()).indexOf(zw)===-1)try{let i=e(o);n.headers={...n.headers,[zw]:String(i)}}catch{}}return t({...r,request:n})}}Ww(ap,"contentLengthMiddleware");var Yw={step:"build",tags:["SET_CONTENT_LENGTH","CONTENT_LENGTH"],name:"contentLengthMiddleware",override:!0},yj=Ww(e=>({applyToStack:t=>{t.add(ap(e.bodyLengthChecker),Yw)}}),"getContentLengthPlugin")});var pn=w(xa=>{"use strict";c();Object.defineProperty(xa,"__esModule",{value:!0});xa.getHomeDir=void 0;var _j=F("os"),vj=F("path"),cp={},Sj=()=>process&&process.geteuid?`${process.geteuid()}`:"DEFAULT",Ej=()=>{let{HOME:e,USERPROFILE:t,HOMEPATH:r,HOMEDRIVE:n=`C:${vj.sep}`}=process.env;if(e)return e;if(t)return t;if(r)return`${n}${r}`;let o=Sj();return cp[o]||(cp[o]=(0,_j.homedir)()),cp[o]};xa.getHomeDir=Ej});var lp=w(Pa=>{"use strict";c();Object.defineProperty(Pa,"__esModule",{value:!0});Pa.getSSOTokenFilepath=void 0;var wj=F("crypto"),bj=F("path"),Cj=pn(),xj=e=>{let r=(0,wj.createHash)("sha1").update(e).digest("hex");return(0,bj.join)((0,Cj.getHomeDir)(),".aws","sso","cache",`${r}.json`)};Pa.getSSOTokenFilepath=xj});var Xw=w(Aa=>{"use strict";c();Object.defineProperty(Aa,"__esModule",{value:!0});Aa.getSSOTokenFromFile=void 0;var Pj=F("fs"),Aj=lp(),{readFile:Tj}=Pj.promises,Oj=async e=>{let t=(0,Aj.getSSOTokenFilepath)(e),r=await Tj(t,"utf8");return JSON.parse(r)};Aa.getSSOTokenFromFile=Oj});var up=w(Ta=>{"use strict";c();Object.defineProperty(Ta,"__esModule",{value:!0});Ta.slurpFile=void 0;var Rj=F("fs"),{readFile:Ij}=Rj.promises,dp={},Nj=(e,t)=>((!dp[e]||t?.ignoreCache)&&(dp[e]=Ij(e,"utf8")),dp[e]);Ta.slurpFile=Nj});var Zt=w((Vre,To)=>{c();var Ia=Object.defineProperty,kj=Object.getOwnPropertyDescriptor,Dj=Object.getOwnPropertyNames,Mj=Object.prototype.hasOwnProperty,Me=(e,t)=>Ia(e,"name",{value:t,configurable:!0}),Fj=(e,t)=>{for(var r in t)Ia(e,r,{get:t[r],enumerable:!0})},pp=(e,t,r,n)=>{if(t&&typeof t=="object"||typeof t=="function")for(let o of Dj(t))!Mj.call(e,o)&&o!==r&&Ia(e,o,{get:()=>t[o],enumerable:!(n=kj(t,o))||n.enumerable});return e},mp=(e,t,r)=>(pp(e,t,"default"),r&&pp(r,t,"default")),Bj=e=>pp(Ia({},"__esModule",{value:!0}),e),Ao={};Fj(Ao,{CONFIG_PREFIX_SEPARATOR:()=>Mr,DEFAULT_PROFILE:()=>tb,ENV_PROFILE:()=>eb,getProfileName:()=>Lj,loadSharedConfigFiles:()=>nb,loadSsoSessionData:()=>Xj,parseKnownFiles:()=>Zj});To.exports=Bj(Ao);mp(Ao,pn(),To.exports);var eb="AWS_PROFILE",tb="default",Lj=Me(e=>e.profile||process.env[eb]||tb,"getProfileName");mp(Ao,lp(),To.exports);mp(Ao,Xw(),To.exports);var Oa=Je(),Uj=Me(e=>Object.entries(e).filter(([t])=>{let r=t.indexOf(Mr);return r===-1?!1:Object.values(Oa.IniSectionType).includes(t.substring(0,r))}).reduce((t,[r,n])=>{let o=r.indexOf(Mr),s=r.substring(0,o)===Oa.IniSectionType.PROFILE?r.substring(o+1):r;return t[s]=n,t},{...e.default&&{default:e.default}}),"getConfigData"),Ra=F("path"),Hj=pn(),jj="AWS_CONFIG_FILE",rb=Me(()=>process.env[jj]||(0,Ra.join)((0,Hj.getHomeDir)(),".aws","config"),"getConfigFilepath"),$j=pn(),qj="AWS_SHARED_CREDENTIALS_FILE",Gj=Me(()=>process.env[qj]||(0,Ra.join)((0,$j.getHomeDir)(),".aws","credentials"),"getCredentialsFilepath"),Vj=pn(),zj=/^([\w-]+)\s(["'])?([\w-@\+\.%:/]+)\2$/,Wj=["__proto__","profile __proto__"],fp=Me(e=>{let t={},r,n;for(let o of e.split(/\r?\n/)){let s=o.split(/(^|\s)[;#]/)[0].trim();if(s[0]==="["&&s[s.length-1]==="]"){r=void 0,n=void 0;let a=s.substring(1,s.length-1),l=zj.exec(a);if(l){let[,d,,u]=l;Object.values(Oa.IniSectionType).includes(d)&&(r=[d,u].join(Mr))}else r=a;if(Wj.includes(a))throw new Error(`Found invalid profile name "${a}"`)}else if(r){let a=s.indexOf("=");if(![0,-1].includes(a)){let[l,d]=[s.substring(0,a).trim(),s.substring(a+1).trim()];if(d==="")n=l;else{n&&o.trimStart()===o&&(n=void 0),t[r]=t[r]||{};let u=n?[n,l].join(Mr):l;t[r][u]=d}}}}return t},"parseIni"),Qw=up(),Zw=Me(()=>({}),"swallowError"),Mr=".",nb=Me(async(e={})=>{let{filepath:t=Gj(),configFilepath:r=rb()}=e,n=(0,Vj.getHomeDir)(),o="~/",s=t;t.startsWith(o)&&(s=(0,Ra.join)(n,t.slice(2)));let i=r;r.startsWith(o)&&(i=(0,Ra.join)(n,r.slice(2)));let a=await Promise.all([(0,Qw.slurpFile)(i,{ignoreCache:e.ignoreCache}).then(fp).then(Uj).catch(Zw),(0,Qw.slurpFile)(s,{ignoreCache:e.ignoreCache}).then(fp).catch(Zw)]);return{configFile:a[0],credentialsFile:a[1]}},"loadSharedConfigFiles"),Kj=Me(e=>Object.entries(e).filter(([t])=>t.startsWith(Oa.IniSectionType.SSO_SESSION+Mr)).reduce((t,[r,n])=>({...t,[r.substring(r.indexOf(Mr)+1)]:n}),{}),"getSsoSessionData"),Yj=up(),Jj=Me(()=>({}),"swallowError"),Xj=Me(async(e={})=>(0,Yj.slurpFile)(e.configFilepath??rb()).then(fp).then(Kj).catch(Jj),"loadSsoSessionData"),Qj=Me((...e)=>{let t={};for(let r of e)for(let[n,o]of Object.entries(r))t[n]!==void 0?Object.assign(t[n],o):t[n]=o;return t},"mergeConfigFiles"),Zj=Me(async e=>{let t=await nb(e);return Qj(t.configFile,t.credentialsFile)},"parseKnownFiles")});var er=w((Wre,ib)=>{c();var Na=Object.defineProperty,e$=Object.getOwnPropertyDescriptor,t$=Object.getOwnPropertyNames,r$=Object.prototype.hasOwnProperty,fn=(e,t)=>Na(e,"name",{value:t,configurable:!0}),n$=(e,t)=>{for(var r in t)Na(e,r,{get:t[r],enumerable:!0})},o$=(e,t,r,n)=>{if(t&&typeof t=="object"||typeof t=="function")for(let o of t$(t))!r$.call(e,o)&&o!==r&&Na(e,o,{get:()=>t[o],enumerable:!(n=e$(t,o))||n.enumerable});return e},s$=e=>o$(Na({},"__esModule",{value:!0}),e),sb={};n$(sb,{loadConfig:()=>d$});ib.exports=s$(sb);var Oo=_e();function gp(e){try{let t=new Set(Array.from(e.match(/([A-Z_]){3,}/g)??[]));return t.delete("CONFIG"),t.delete("CONFIG_PREFIX_SEPARATOR"),t.delete("ENV"),[...t].join(", ")}catch{return e}}fn(gp,"getSelectorName");var i$=fn((e,t)=>async()=>{try{let r=e(process.env,t);if(r===void 0)throw new Error;return r}catch(r){throw new Oo.CredentialsProviderError(r.message||`Not found in ENV: ${gp(e.toString())}`,{logger:t?.logger})}},"fromEnv"),ob=Zt(),a$=fn((e,{preferredFile:t="config",...r}={})=>async()=>{let n=(0,ob.getProfileName)(r),{configFile:o,credentialsFile:s}=await(0,ob.loadSharedConfigFiles)(r),i=s[n]||{},a=o[n]||{},l=t==="config"?{...i,...a}:{...a,...i};try{let u=e(l,t==="config"?o:s);if(u===void 0)throw new Error;return u}catch(d){throw new Oo.CredentialsProviderError(d.message||`Not found in config files w/ profile [${n}]: ${gp(e.toString())}`,{logger:r.logger})}},"fromSharedConfigFiles"),c$=fn(e=>typeof e=="function","isFunction"),l$=fn(e=>c$(e)?async()=>await e():(0,Oo.fromStatic)(e),"fromStatic"),d$=fn(({environmentVariableSelector:e,configFileSelector:t,default:r},n={})=>{let{signingName:o,logger:s}=n,i={signingName:o,logger:s};return(0,Oo.memoize)((0,Oo.chain)(i$(e,i),a$(t,n),l$(r)))},"loadConfig")});var db=w(ka=>{"use strict";c();Object.defineProperty(ka,"__esModule",{value:!0});ka.getEndpointUrlConfig=void 0;var ab=Zt(),cb="AWS_ENDPOINT_URL",lb="endpoint_url",u$=e=>({environmentVariableSelector:t=>{let r=e.split(" ").map(s=>s.toUpperCase()),n=t[[cb,...r].join("_")];if(n)return n;let o=t[cb];if(o)return o},configFileSelector:(t,r)=>{if(r&&t.services){let o=r[["services",t.services].join(ab.CONFIG_PREFIX_SEPARATOR)];if(o){let s=e.split(" ").map(a=>a.toLowerCase()),i=o[[s.join("_"),lb].join(ab.CONFIG_PREFIX_SEPARATOR)];if(i)return i}}let n=t[lb];if(n)return n},default:void 0});ka.getEndpointUrlConfig=u$});var hp=w(Da=>{"use strict";c();Object.defineProperty(Da,"__esModule",{value:!0});Da.getEndpointFromConfig=void 0;var p$=er(),f$=db(),m$=async e=>(0,p$.loadConfig)((0,f$.getEndpointUrlConfig)(e??""))();Da.getEndpointFromConfig=m$});var tr=w((Zre,yb)=>{c();var Fa=Object.defineProperty,g$=Object.getOwnPropertyDescriptor,h$=Object.getOwnPropertyNames,y$=Object.prototype.hasOwnProperty,Fe=(e,t)=>Fa(e,"name",{value:t,configurable:!0}),_$=(e,t)=>{for(var r in t)Fa(e,r,{get:t[r],enumerable:!0})},v$=(e,t,r,n)=>{if(t&&typeof t=="object"||typeof t=="function")for(let o of h$(t))!y$.call(e,o)&&o!==r&&Fa(e,o,{get:()=>t[o],enumerable:!(n=g$(t,o))||n.enumerable});return e},S$=e=>v$(Fa({},"__esModule",{value:!0}),e),pb={};_$(pb,{endpointMiddleware:()=>gb,endpointMiddlewareOptions:()=>hb,getEndpointFromInstructions:()=>fb,getEndpointPlugin:()=>I$,resolveEndpointConfig:()=>k$,resolveEndpointRequiredConfig:()=>D$,resolveParams:()=>mb,toEndpointV1:()=>yp});yb.exports=S$(pb);var E$=Fe(async e=>{let t=e?.Bucket||"";if(typeof e.Bucket=="string"&&(e.Bucket=t.replace(/#/g,encodeURIComponent("#")).replace(/\?/g,encodeURIComponent("?"))),P$(t)){if(e.ForcePathStyle===!0)throw new Error("Path-style addressing cannot be used with ARN buckets")}else(!x$(t)||t.indexOf(".")!==-1&&!String(e.Endpoint).startsWith("http:")||t.toLowerCase()!==t||t.length<3)&&(e.ForcePathStyle=!0);return e.DisableMultiRegionAccessPoints&&(e.disableMultiRegionAccessPoints=!0,e.DisableMRAP=!0),e},"resolveParamsForS3"),w$=/^[a-z0-9][a-z0-9\.\-]{1,61}[a-z0-9]$/,b$=/(\d+\.){3}\d+/,C$=/\.\./,x$=Fe(e=>w$.test(e)&&!b$.test(e)&&!C$.test(e),"isDnsCompatibleBucketName"),P$=Fe(e=>{let[t,r,n,,,o]=e.split(":"),s=t==="arn"&&e.split(":").length>=6,i=!!(s&&r&&n&&o);if(s&&!i)throw new Error(`Invalid ARN: ${e} was an invalid ARN.`);return i},"isArnBucketName"),A$=Fe((e,t,r)=>{let n=Fe(async()=>{let o=r[e]??r[t];return typeof o=="function"?o():o},"configProvider");return e==="credentialScope"||t==="CredentialScope"?async()=>{let o=typeof r.credentials=="function"?await r.credentials():r.credentials;return o?.credentialScope??o?.CredentialScope}:e==="accountId"||t==="AccountId"?async()=>{let o=typeof r.credentials=="function"?await r.credentials():r.credentials;return o?.accountId??o?.AccountId}:e==="endpoint"||t==="endpoint"?async()=>{if(r.isCustomEndpoint===!1)return;let o=await n();if(o&&typeof o=="object"){if("url"in o)return o.url.href;if("hostname"in o){let{protocol:s,hostname:i,port:a,path:l}=o;return`${s}//${i}${a?":"+a:""}${l}`}}return o}:n},"createConfigValueProvider"),T$=hp(),ub=jt(),yp=Fe(e=>typeof e=="object"?"url"in e?(0,ub.parseUrl)(e.url):e:(0,ub.parseUrl)(e),"toEndpointV1"),fb=Fe(async(e,t,r,n)=>{if(!r.isCustomEndpoint){let i;r.serviceConfiguredEndpoint?i=await r.serviceConfiguredEndpoint():i=await(0,T$.getEndpointFromConfig)(r.serviceId),i&&(r.endpoint=()=>Promise.resolve(yp(i)),r.isCustomEndpoint=!0)}let o=await mb(e,t,r);if(typeof r.endpointProvider!="function")throw new Error("config.endpointProvider is not set.");return r.endpointProvider(o,n)},"getEndpointFromInstructions"),mb=Fe(async(e,t,r)=>{let n={},o=t?.getEndpointParameterInstructions?.()||{};for(let[s,i]of Object.entries(o))switch(i.type){case"staticContextParams":n[s]=i.value;break;case"contextParams":n[s]=e[i.name];break;case"clientContextParams":case"builtInParams":n[s]=await A$(i.name,s,r)();break;case"operationContextParams":n[s]=i.get(e);break;default:throw new Error("Unrecognized endpoint parameter instruction: "+JSON.stringify(i))}return Object.keys(o).length===0&&Object.assign(n,r),String(r.serviceId).toLowerCase()==="s3"&&await E$(n),n},"resolveParams"),O$=(ce(),D(wt)),Ma=Ge(),gb=Fe(({config:e,instructions:t})=>(r,n)=>async o=>{e.isCustomEndpoint&&(0,O$.setFeature)(n,"ENDPOINT_OVERRIDE","N");let s=await fb(o.input,{getEndpointParameterInstructions(){return t}},{...e},n);n.endpointV2=s,n.authSchemes=s.properties?.authSchemes;let i=n.authSchemes?.[0];if(i){n.signing_region=i.signingRegion,n.signing_service=i.signingName;let l=(0,Ma.getSmithyContext)(n)?.selectedHttpAuthScheme?.httpAuthOption;l&&(l.signingProperties=Object.assign(l.signingProperties||{},{signing_region:i.signingRegion,signingRegion:i.signingRegion,signing_service:i.signingName,signingName:i.signingName,signingRegionSet:i.signingRegionSet},i.properties))}return r({...o})},"endpointMiddleware"),R$=Bt(),hb={step:"serialize",tags:["ENDPOINT_PARAMETERS","ENDPOINT_V2","ENDPOINT"],name:"endpointV2Middleware",override:!0,relation:"before",toMiddleware:R$.serializerMiddlewareOption.name},I$=Fe((e,t)=>({applyToStack:r=>{r.addRelativeTo(gb({config:e,instructions:t}),hb)}}),"getEndpointPlugin"),N$=hp(),k$=Fe(e=>{let t=e.tls??!0,{endpoint:r,useDualstackEndpoint:n,useFipsEndpoint:o}=e,s=r!=null?async()=>yp(await(0,Ma.normalizeProvider)(r)()):void 0,a=Object.assign(e,{endpoint:s,tls:t,isCustomEndpoint:!!r,useDualstackEndpoint:(0,Ma.normalizeProvider)(n??!1),useFipsEndpoint:(0,Ma.normalizeProvider)(o??!1)}),l;return a.serviceConfiguredEndpoint=async()=>(e.serviceId&&!l&&(l=(0,N$.getEndpointFromConfig)(e.serviceId)),l),a},"resolveEndpointConfig"),D$=Fe(e=>{let{endpoint:t}=e;return t===void 0&&(e.endpoint=async()=>{throw new Error("@smithy/middleware-endpoint: (default endpointRuleSet) endpoint is not set - you must configure an endpoint.")}),e},"resolveEndpointRequiredConfig")});import M$ from"crypto";function Ro(){return Ba>La.length-16&&(M$.randomFillSync(La),Ba=0),La.slice(Ba,Ba+=16)}var La,Ba,_p=y(()=>{c();La=new Uint8Array(256),Ba=La.length});var _b,vb=y(()=>{c();_b=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i});function F$(e){return typeof e=="string"&&_b.test(e)}var rr,Io=y(()=>{c();vb();rr=F$});function Fr(e,t=0){return de[e[t+0]]+de[e[t+1]]+de[e[t+2]]+de[e[t+3]]+"-"+de[e[t+4]]+de[e[t+5]]+"-"+de[e[t+6]]+de[e[t+7]]+"-"+de[e[t+8]]+de[e[t+9]]+"-"+de[e[t+10]]+de[e[t+11]]+de[e[t+12]]+de[e[t+13]]+de[e[t+14]]+de[e[t+15]]}function B$(e,t=0){let r=Fr(e,t);if(!rr(r))throw TypeError("Stringified UUID is invalid");return r}var de,Sb,No=y(()=>{c();Io();de=[];for(let e=0;e<256;++e)de.push((e+256).toString(16).slice(1));Sb=B$});function L$(e,t,r){let n=t&&r||0,o=t||new Array(16);e=e||{};let s=e.node||Eb,i=e.clockseq!==void 0?e.clockseq:vp;if(s==null||i==null){let g=e.random||(e.rng||Ro)();s==null&&(s=Eb=[g[0]|1,g[1],g[2],g[3],g[4],g[5]]),i==null&&(i=vp=(g[6]<<8|g[7])&16383)}let a=e.msecs!==void 0?e.msecs:Date.now(),l=e.nsecs!==void 0?e.nsecs:Ep+1,d=a-Sp+(l-Ep)/1e4;if(d<0&&e.clockseq===void 0&&(i=i+1&16383),(d<0||a>Sp)&&e.nsecs===void 0&&(l=0),l>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");Sp=a,Ep=l,vp=i,a+=122192928e5;let u=((a&268435455)*1e4+l)%4294967296;o[n++]=u>>>24&255,o[n++]=u>>>16&255,o[n++]=u>>>8&255,o[n++]=u&255;let f=a/4294967296*1e4&268435455;o[n++]=f>>>8&255,o[n++]=f&255,o[n++]=f>>>24&15|16,o[n++]=f>>>16&255,o[n++]=i>>>8|128,o[n++]=i&255;for(let g=0;g<6;++g)o[n+g]=s[g];return t||Fr(o)}var Eb,vp,Sp,Ep,wb,bb=y(()=>{c();_p();No();Sp=0,Ep=0;wb=L$});function U$(e){if(!rr(e))throw TypeError("Invalid UUID");let t,r=new Uint8Array(16);return r[0]=(t=parseInt(e.slice(0,8),16))>>>24,r[1]=t>>>16&255,r[2]=t>>>8&255,r[3]=t&255,r[4]=(t=parseInt(e.slice(9,13),16))>>>8,r[5]=t&255,r[6]=(t=parseInt(e.slice(14,18),16))>>>8,r[7]=t&255,r[8]=(t=parseInt(e.slice(19,23),16))>>>8,r[9]=t&255,r[10]=(t=parseInt(e.slice(24,36),16))/1099511627776&255,r[11]=t/4294967296&255,r[12]=t>>>24&255,r[13]=t>>>16&255,r[14]=t>>>8&255,r[15]=t&255,r}var Ua,wp=y(()=>{c();Io();Ua=U$});function H$(e){e=unescape(encodeURIComponent(e));let t=[];for(let r=0;r<e.length;++r)t.push(e.charCodeAt(r));return t}function ko(e,t,r){function n(o,s,i,a){var l;if(typeof o=="string"&&(o=H$(o)),typeof s=="string"&&(s=Ua(s)),((l=s)===null||l===void 0?void 0:l.length)!==16)throw TypeError("Namespace must be array-like (16 iterable integer values, 0-255)");let d=new Uint8Array(16+o.length);if(d.set(s),d.set(o,s.length),d=r(d),d[6]=d[6]&15|t,d[8]=d[8]&63|128,i){a=a||0;for(let u=0;u<16;++u)i[a+u]=d[u];return i}return Fr(d)}try{n.name=e}catch{}return n.DNS=j$,n.URL=$$,n}var j$,$$,bp=y(()=>{c();No();wp();j$="6ba7b810-9dad-11d1-80b4-00c04fd430c8",$$="6ba7b811-9dad-11d1-80b4-00c04fd430c8"});import q$ from"crypto";function G$(e){return Array.isArray(e)?e=Buffer.from(e):typeof e=="string"&&(e=Buffer.from(e,"utf8")),q$.createHash("md5").update(e).digest()}var Cb,xb=y(()=>{c();Cb=G$});var V$,Pb,Ab=y(()=>{c();bp();xb();V$=ko("v3",48,Cb),Pb=V$});import z$ from"crypto";var Cp,Tb=y(()=>{c();Cp={randomUUID:z$.randomUUID}});function W$(e,t,r){if(Cp.randomUUID&&!t&&!e)return Cp.randomUUID();e=e||{};let n=e.random||(e.rng||Ro)();if(n[6]=n[6]&15|64,n[8]=n[8]&63|128,t){r=r||0;for(let o=0;o<16;++o)t[r+o]=n[o];return t}return Fr(n)}var Ob,Rb=y(()=>{c();Tb();_p();No();Ob=W$});import K$ from"crypto";function Y$(e){return Array.isArray(e)?e=Buffer.from(e):typeof e=="string"&&(e=Buffer.from(e,"utf8")),K$.createHash("sha1").update(e).digest()}var Ib,Nb=y(()=>{c();Ib=Y$});var J$,kb,Db=y(()=>{c();bp();Nb();J$=ko("v5",80,Ib),kb=J$});var Mb,Fb=y(()=>{c();Mb="00000000-0000-0000-0000-000000000000"});function X$(e){if(!rr(e))throw TypeError("Invalid UUID");return parseInt(e.slice(14,15),16)}var Bb,Lb=y(()=>{c();Io();Bb=X$});var xp={};Ye(xp,{NIL:()=>Mb,parse:()=>Ua,stringify:()=>Sb,v1:()=>wb,v3:()=>Pb,v4:()=>Ob,v5:()=>kb,validate:()=>rr,version:()=>Bb});var Pp=y(()=>{c();bb();Ab();Rb();Db();Fb();Lb();Io();No();wp()});var Tp=w((ioe,$b)=>{c();var Ha=Object.defineProperty,Q$=Object.getOwnPropertyDescriptor,Z$=Object.getOwnPropertyNames,eq=Object.prototype.hasOwnProperty,Br=(e,t)=>Ha(e,"name",{value:t,configurable:!0}),tq=(e,t)=>{for(var r in t)Ha(e,r,{get:t[r],enumerable:!0})},rq=(e,t,r,n)=>{if(t&&typeof t=="object"||typeof t=="function")for(let o of Z$(t))!eq.call(e,o)&&o!==r&&Ha(e,o,{get:()=>t[o],enumerable:!(n=Q$(t,o))||n.enumerable});return e},nq=e=>rq(Ha({},"__esModule",{value:!0}),e),Ub={};tq(Ub,{isBrowserNetworkError:()=>jb,isClockSkewCorrectedError:()=>Hb,isClockSkewError:()=>uq,isRetryableByTrait:()=>dq,isServerError:()=>fq,isThrottlingError:()=>pq,isTransientError:()=>Ap});$b.exports=nq(Ub);var oq=["AuthFailure","InvalidSignatureException","RequestExpired","RequestInTheFuture","RequestTimeTooSkewed","SignatureDoesNotMatch"],sq=["BandwidthLimitExceeded","EC2ThrottledException","LimitExceededException","PriorRequestNotComplete","ProvisionedThroughputExceededException","RequestLimitExceeded","RequestThrottled","RequestThrottledException","SlowDown","ThrottledException","Throttling","ThrottlingException","TooManyRequestsException","TransactionInProgressException"],iq=["TimeoutError","RequestTimeout","RequestTimeoutException"],aq=[500,502,503,504],cq=["ECONNRESET","ECONNREFUSED","EPIPE","ETIMEDOUT"],lq=["EHOSTUNREACH","ENETUNREACH","ENOTFOUND"],dq=Br(e=>e.$retryable!==void 0,"isRetryableByTrait"),uq=Br(e=>oq.includes(e.name),"isClockSkewError"),Hb=Br(e=>e.$metadata?.clockSkewCorrected,"isClockSkewCorrectedError"),jb=Br(e=>{let t=new Set(["Failed to fetch","NetworkError when attempting to fetch resource","The Internet connection appears to be offline","Load failed","Network request failed"]);return e&&e instanceof TypeError?t.has(e.message):!1},"isBrowserNetworkError"),pq=Br(e=>e.$metadata?.httpStatusCode===429||sq.includes(e.name)||e.$retryable?.throttling==!0,"isThrottlingError"),Ap=Br((e,t=0)=>Hb(e)||iq.includes(e.name)||cq.includes(e?.code||"")||lq.includes(e?.code||"")||aq.includes(e.$metadata?.httpStatusCode||0)||jb(e)||e.cause!==void 0&&t<=10&&Ap(e.cause,t+1),"isTransientError"),fq=Br(e=>{if(e.$metadata?.httpStatusCode!==void 0){let t=e.$metadata.httpStatusCode;return 500<=t&&t<=599&&!Ap(e)}return!1},"isServerError")});var mn=w((coe,Qb)=>{c();var ja=Object.defineProperty,mq=Object.getOwnPropertyDescriptor,gq=Object.getOwnPropertyNames,hq=Object.prototype.hasOwnProperty,We=(e,t)=>ja(e,"name",{value:t,configurable:!0}),yq=(e,t)=>{for(var r in t)ja(e,r,{get:t[r],enumerable:!0})},_q=(e,t,r,n)=>{if(t&&typeof t=="object"||typeof t=="function")for(let o of gq(t))!hq.call(e,o)&&o!==r&&ja(e,o,{get:()=>t[o],enumerable:!(n=mq(t,o))||n.enumerable});return e},vq=e=>_q(ja({},"__esModule",{value:!0}),e),Gb={};yq(Gb,{AdaptiveRetryStrategy:()=>xq,ConfiguredRetryStrategy:()=>Pq,DEFAULT_MAX_ATTEMPTS:()=>Op,DEFAULT_RETRY_DELAY_BASE:()=>Do,DEFAULT_RETRY_MODE:()=>Sq,DefaultRateLimiter:()=>zb,INITIAL_RETRY_TOKENS:()=>Rp,INVOCATION_ID_HEADER:()=>wq,MAXIMUM_RETRY_DELAY:()=>Ip,NO_RETRY_INCREMENT:()=>Xb,REQUEST_HEADER:()=>bq,RETRY_COST:()=>Yb,RETRY_MODES:()=>Vb,StandardRetryStrategy:()=>Np,THROTTLING_RETRY_DELAY_BASE:()=>Kb,TIMEOUT_RETRY_COST:()=>Jb});Qb.exports=vq(Gb);var Vb=(e=>(e.STANDARD="standard",e.ADAPTIVE="adaptive",e))(Vb||{}),Op=3,Sq="standard",Eq=Tp(),zb=class Wb{constructor(t){this.currentCapacity=0,this.enabled=!1,this.lastMaxRate=0,this.measuredTxRate=0,this.requestCount=0,this.lastTimestamp=0,this.timeWindow=0,this.beta=t?.beta??.7,this.minCapacity=t?.minCapacity??1,this.minFillRate=t?.minFillRate??.5,this.scaleConstant=t?.scaleConstant??.4,this.smooth=t?.smooth??.8;let r=this.getCurrentTimeInSeconds();this.lastThrottleTime=r,this.lastTxRateBucket=Math.floor(this.getCurrentTimeInSeconds()),this.fillRate=this.minFillRate,this.maxCapacity=this.minCapacity}static{We(this,"DefaultRateLimiter")}static{this.setTimeoutFn=setTimeout}getCurrentTimeInSeconds(){return Date.now()/1e3}async getSendToken(){return this.acquireTokenBucket(1)}async acquireTokenBucket(t){if(this.enabled){if(this.refillTokenBucket(),t>this.currentCapacity){let r=(t-this.currentCapacity)/this.fillRate*1e3;await new Promise(n=>Wb.setTimeoutFn(n,r))}this.currentCapacity=this.currentCapacity-t}}refillTokenBucket(){let t=this.getCurrentTimeInSeconds();if(!this.lastTimestamp){this.lastTimestamp=t;return}let r=(t-this.lastTimestamp)*this.fillRate;this.currentCapacity=Math.min(this.maxCapacity,this.currentCapacity+r),this.lastTimestamp=t}updateClientSendingRate(t){let r;if(this.updateMeasuredRate(),(0,Eq.isThrottlingError)(t)){let o=this.enabled?Math.min(this.measuredTxRate,this.fillRate):this.measuredTxRate;this.lastMaxRate=o,this.calculateTimeWindow(),this.lastThrottleTime=this.getCurrentTimeInSeconds(),r=this.cubicThrottle(o),this.enableTokenBucket()}else this.calculateTimeWindow(),r=this.cubicSuccess(this.getCurrentTimeInSeconds());let n=Math.min(r,2*this.measuredTxRate);this.updateTokenBucketRate(n)}calculateTimeWindow(){this.timeWindow=this.getPrecise(Math.pow(this.lastMaxRate*(1-this.beta)/this.scaleConstant,1/3))}cubicThrottle(t){return this.getPrecise(t*this.beta)}cubicSuccess(t){return this.getPrecise(this.scaleConstant*Math.pow(t-this.lastThrottleTime-this.timeWindow,3)+this.lastMaxRate)}enableTokenBucket(){this.enabled=!0}updateTokenBucketRate(t){this.refillTokenBucket(),this.fillRate=Math.max(t,this.minFillRate),this.maxCapacity=Math.max(t,this.minCapacity),this.currentCapacity=Math.min(this.currentCapacity,this.maxCapacity)}updateMeasuredRate(){let t=this.getCurrentTimeInSeconds(),r=Math.floor(t*2)/2;if(this.requestCount++,r>this.lastTxRateBucket){let n=this.requestCount/(r-this.lastTxRateBucket);this.measuredTxRate=this.getPrecise(n*this.smooth+this.measuredTxRate*(1-this.smooth)),this.requestCount=0,this.lastTxRateBucket=r}}getPrecise(t){return parseFloat(t.toFixed(8))}},Do=100,Ip=20*1e3,Kb=500,Rp=500,Yb=5,Jb=10,Xb=1,wq="amz-sdk-invocation-id",bq="amz-sdk-request",Cq=We(()=>{let e=Do;return{computeNextBackoffDelay:We(n=>Math.floor(Math.min(Ip,Math.random()*2**n*e)),"computeNextBackoffDelay"),setDelayBase:We(n=>{e=n},"setDelayBase")}},"getDefaultRetryBackoffStrategy"),qb=We(({retryDelay:e,retryCount:t,retryCost:r})=>({getRetryCount:We(()=>t,"getRetryCount"),getRetryDelay:We(()=>Math.min(Ip,e),"getRetryDelay"),getRetryCost:We(()=>r,"getRetryCost")}),"createDefaultRetryToken"),Np=class{constructor(e){this.maxAttempts=e,this.mode="standard",this.capacity=Rp,this.retryBackoffStrategy=Cq(),this.maxAttemptsProvider=typeof e=="function"?e:async()=>e}static{We(this,"StandardRetryStrategy")}async acquireInitialRetryToken(e){return qb({retryDelay:Do,retryCount:0})}async refreshRetryTokenForRetry(e,t){let r=await this.getMaxAttempts();if(this.shouldRetry(e,t,r)){let n=t.errorType;this.retryBackoffStrategy.setDelayBase(n==="THROTTLING"?Kb:Do);let o=this.retryBackoffStrategy.computeNextBackoffDelay(e.getRetryCount()),s=t.retryAfterHint?Math.max(t.retryAfterHint.getTime()-Date.now()||0,o):o,i=this.getCapacityCost(n);return this.capacity-=i,qb({retryDelay:s,retryCount:e.getRetryCount()+1,retryCost:i})}throw new Error("No retry token available")}recordSuccess(e){this.capacity=Math.max(Rp,this.capacity+(e.getRetryCost()??Xb))}getCapacity(){return this.capacity}async getMaxAttempts(){try{return await this.maxAttemptsProvider()}catch{return console.warn(`Max attempts provider could not resolve. Using default of ${Op}`),Op}}shouldRetry(e,t,r){return e.getRetryCount()+1<r&&this.capacity>=this.getCapacityCost(t.errorType)&&this.isRetryableError(t.errorType)}getCapacityCost(e){return e==="TRANSIENT"?Jb:Yb}isRetryableError(e){return e==="THROTTLING"||e==="TRANSIENT"}},xq=class{constructor(e,t){this.maxAttemptsProvider=e,this.mode="adaptive";let{rateLimiter:r}=t??{};this.rateLimiter=r??new zb,this.standardRetryStrategy=new Np(e)}static{We(this,"AdaptiveRetryStrategy")}async acquireInitialRetryToken(e){return await this.rateLimiter.getSendToken(),this.standardRetryStrategy.acquireInitialRetryToken(e)}async refreshRetryTokenForRetry(e,t){return this.rateLimiter.updateClientSendingRate(t),this.standardRetryStrategy.refreshRetryTokenForRetry(e,t)}recordSuccess(e){this.rateLimiter.updateClientSendingRate({}),this.standardRetryStrategy.recordSuccess(e)}},Pq=class extends Np{static{We(this,"ConfiguredRetryStrategy")}constructor(e,t=Do){super(typeof e=="function"?e:async()=>e),typeof t=="number"?this.computeNextBackoffDelay=()=>t:this.computeNextBackoffDelay=t}async refreshRetryTokenForRetry(e,t){let r=await super.refreshRetryTokenForRetry(e,t);return r.getRetryDelay=()=>this.computeNextBackoffDelay(r.getRetryCount()),r}}});var Zb=w($a=>{"use strict";c();Object.defineProperty($a,"__esModule",{value:!0});$a.isStreamingPayload=void 0;var Aq=F("stream"),Tq=e=>e?.body instanceof Aq.Readable||typeof ReadableStream<"u"&&e?.body instanceof ReadableStream;$a.isStreamingPayload=Tq});var Pt=w((goe,mC)=>{c();var qa=Object.defineProperty,Oq=Object.getOwnPropertyDescriptor,Rq=Object.getOwnPropertyNames,Iq=Object.prototype.hasOwnProperty,Z=(e,t)=>qa(e,"name",{value:t,configurable:!0}),Nq=(e,t)=>{for(var r in t)qa(e,r,{get:t[r],enumerable:!0})},kq=(e,t,r,n)=>{if(t&&typeof t=="object"||typeof t=="function")for(let o of Rq(t))!Iq.call(e,o)&&o!==r&&qa(e,o,{get:()=>t[o],enumerable:!(n=Oq(t,o))||n.enumerable});return e},Dq=e=>kq(qa({},"__esModule",{value:!0}),e),tC={};Nq(tC,{AdaptiveRetryStrategy:()=>Bq,CONFIG_MAX_ATTEMPTS:()=>Dp,CONFIG_RETRY_MODE:()=>cC,ENV_MAX_ATTEMPTS:()=>kp,ENV_RETRY_MODE:()=>aC,NODE_MAX_ATTEMPT_CONFIG_OPTIONS:()=>Lq,NODE_RETRY_MODE_CONFIG_OPTIONS:()=>Hq,StandardRetryStrategy:()=>iC,defaultDelayDecider:()=>nC,defaultRetryDecider:()=>oC,getOmitRetryHeadersPlugin:()=>jq,getRetryAfterHint:()=>fC,getRetryPlugin:()=>Wq,omitRetryHeadersMiddleware:()=>lC,omitRetryHeadersMiddlewareOptions:()=>dC,resolveRetryConfig:()=>Uq,retryMiddleware:()=>uC,retryMiddlewareOptions:()=>pC});mC.exports=Dq(tC);var gn=q(),rC=(Pp(),D(xp)),W=mn(),Mq=Z((e,t)=>{let r=e,n=t?.noRetryIncrement??W.NO_RETRY_INCREMENT,o=t?.retryCost??W.RETRY_COST,s=t?.timeoutRetryCost??W.TIMEOUT_RETRY_COST,i=e,a=Z(f=>f.name==="TimeoutError"?s:o,"getCapacityAmount"),l=Z(f=>a(f)<=i,"hasRetryTokens");return Object.freeze({hasRetryTokens:l,retrieveRetryTokens:Z(f=>{if(!l(f))throw new Error("No retry token available");let g=a(f);return i-=g,g},"retrieveRetryTokens"),releaseRetryTokens:Z(f=>{i+=f??n,i=Math.min(i,r)},"releaseRetryTokens")})},"getDefaultRetryQuota"),nC=Z((e,t)=>Math.floor(Math.min(W.MAXIMUM_RETRY_DELAY,Math.random()*2**t*e)),"defaultDelayDecider"),nr=Tp(),oC=Z(e=>e?(0,nr.isRetryableByTrait)(e)||(0,nr.isClockSkewError)(e)||(0,nr.isThrottlingError)(e)||(0,nr.isTransientError)(e):!1,"defaultRetryDecider"),sC=Z(e=>e instanceof Error?e:e instanceof Object?Object.assign(new Error,e):typeof e=="string"?new Error(e):new Error(`AWS SDK error wrapper for ${e}`),"asSdkError"),iC=class{constructor(e,t){this.maxAttemptsProvider=e,this.mode=W.RETRY_MODES.STANDARD,this.retryDecider=t?.retryDecider??oC,this.delayDecider=t?.delayDecider??nC,this.retryQuota=t?.retryQuota??Mq(W.INITIAL_RETRY_TOKENS)}static{Z(this,"StandardRetryStrategy")}shouldRetry(e,t,r){return t<r&&this.retryDecider(e)&&this.retryQuota.hasRetryTokens(e)}async getMaxAttempts(){let e;try{e=await this.maxAttemptsProvider()}catch{e=W.DEFAULT_MAX_ATTEMPTS}return e}async retry(e,t,r){let n,o=0,s=0,i=await this.getMaxAttempts(),{request:a}=t;for(gn.HttpRequest.isInstance(a)&&(a.headers[W.INVOCATION_ID_HEADER]=(0,rC.v4)());;)try{gn.HttpRequest.isInstance(a)&&(a.headers[W.REQUEST_HEADER]=`attempt=${o+1}; max=${i}`),r?.beforeRequest&&await r.beforeRequest();let{response:l,output:d}=await e(t);return r?.afterRequest&&r.afterRequest(l),this.retryQuota.releaseRetryTokens(n),d.$metadata.attempts=o+1,d.$metadata.totalRetryDelay=s,{response:l,output:d}}catch(l){let d=sC(l);if(o++,this.shouldRetry(d,o,i)){n=this.retryQuota.retrieveRetryTokens(d);let u=this.delayDecider((0,nr.isThrottlingError)(d)?W.THROTTLING_RETRY_DELAY_BASE:W.DEFAULT_RETRY_DELAY_BASE,o),f=Fq(d.$response),g=Math.max(f||0,u);s+=g,await new Promise(h=>setTimeout(h,g));continue}throw d.$metadata||(d.$metadata={}),d.$metadata.attempts=o,d.$metadata.totalRetryDelay=s,d}}},Fq=Z(e=>{if(!gn.HttpResponse.isInstance(e))return;let t=Object.keys(e.headers).find(s=>s.toLowerCase()==="retry-after");if(!t)return;let r=e.headers[t],n=Number(r);return Number.isNaN(n)?new Date(r).getTime()-Date.now():n*1e3},"getDelayFromRetryAfterHeader"),Bq=class extends iC{static{Z(this,"AdaptiveRetryStrategy")}constructor(e,t){let{rateLimiter:r,...n}=t??{};super(e,n),this.rateLimiter=r??new W.DefaultRateLimiter,this.mode=W.RETRY_MODES.ADAPTIVE}async retry(e,t){return super.retry(e,t,{beforeRequest:async()=>this.rateLimiter.getSendToken(),afterRequest:r=>{this.rateLimiter.updateClientSendingRate(r)}})}},eC=Ge(),kp="AWS_MAX_ATTEMPTS",Dp="max_attempts",Lq={environmentVariableSelector:e=>{let t=e[kp];if(!t)return;let r=parseInt(t);if(Number.isNaN(r))throw new Error(`Environment variable ${kp} mast be a number, got "${t}"`);return r},configFileSelector:e=>{let t=e[Dp];if(!t)return;let r=parseInt(t);if(Number.isNaN(r))throw new Error(`Shared config file entry ${Dp} mast be a number, got "${t}"`);return r},default:W.DEFAULT_MAX_ATTEMPTS},Uq=Z(e=>{let{retryStrategy:t,retryMode:r,maxAttempts:n}=e,o=(0,eC.normalizeProvider)(n??W.DEFAULT_MAX_ATTEMPTS);return Object.assign(e,{maxAttempts:o,retryStrategy:async()=>t||(await(0,eC.normalizeProvider)(r)()===W.RETRY_MODES.ADAPTIVE?new W.AdaptiveRetryStrategy(o):new W.StandardRetryStrategy(o))})},"resolveRetryConfig"),aC="AWS_RETRY_MODE",cC="retry_mode",Hq={environmentVariableSelector:e=>e[aC],configFileSelector:e=>e[cC],default:W.DEFAULT_RETRY_MODE},lC=Z(()=>e=>async t=>{let{request:r}=t;return gn.HttpRequest.isInstance(r)&&(delete r.headers[W.INVOCATION_ID_HEADER],delete r.headers[W.REQUEST_HEADER]),e(t)},"omitRetryHeadersMiddleware"),dC={name:"omitRetryHeadersMiddleware",tags:["RETRY","HEADERS","OMIT_RETRY_HEADERS"],relation:"before",toMiddleware:"awsAuthMiddleware",override:!0},jq=Z(e=>({applyToStack:t=>{t.addRelativeTo(lC(),dC)}}),"getOmitRetryHeadersPlugin"),$q=M(),qq=Zb(),uC=Z(e=>(t,r)=>async n=>{let o=await e.retryStrategy(),s=await e.maxAttempts();if(Gq(o)){o=o;let i=await o.acquireInitialRetryToken(r.partition_id),a=new Error,l=0,d=0,{request:u}=n,f=gn.HttpRequest.isInstance(u);for(f&&(u.headers[W.INVOCATION_ID_HEADER]=(0,rC.v4)());;)try{f&&(u.headers[W.REQUEST_HEADER]=`attempt=${l+1}; max=${s}`);let{response:g,output:h}=await t(n);return o.recordSuccess(i),h.$metadata.attempts=l+1,h.$metadata.totalRetryDelay=d,{response:g,output:h}}catch(g){let h=Vq(g);if(a=sC(g),f&&(0,qq.isStreamingPayload)(u))throw(r.logger instanceof $q.NoOpLogger?console:r.logger)?.warn("An error was encountered in a non-retryable streaming request."),a;try{i=await o.refreshRetryTokenForRetry(i,h)}catch{throw a.$metadata||(a.$metadata={}),a.$metadata.attempts=l+1,a.$metadata.totalRetryDelay=d,a}l=i.getRetryCount();let _=i.getRetryDelay();d+=_,await new Promise(v=>setTimeout(v,_))}}else return o=o,o?.mode&&(r.userAgent=[...r.userAgent||[],["cfg/retry-mode",o.mode]]),o.retry(t,n)},"retryMiddleware"),Gq=Z(e=>typeof e.acquireInitialRetryToken<"u"&&typeof e.refreshRetryTokenForRetry<"u"&&typeof e.recordSuccess<"u","isRetryStrategyV2"),Vq=Z(e=>{let t={error:e,errorType:zq(e)},r=fC(e.$response);return r&&(t.retryAfterHint=r),t},"getRetryErrorInfo"),zq=Z(e=>(0,nr.isThrottlingError)(e)?"THROTTLING":(0,nr.isTransientError)(e)?"TRANSIENT":(0,nr.isServerError)(e)?"SERVER_ERROR":"CLIENT_ERROR","getRetryErrorType"),pC={name:"retryMiddleware",tags:["RETRY"],step:"finalizeRequest",priority:"high",override:!0},Wq=Z(e=>({applyToStack:t=>{t.add(uC(e),pC)}}),"getRetryPlugin"),fC=Z(e=>{if(!gn.HttpResponse.isInstance(e))return;let t=Object.keys(e.headers).find(s=>s.toLowerCase()==="retry-after");if(!t)return;let r=e.headers[t],n=Number(r);return Number.isNaN(n)?new Date(r):new Date(n*1e3)},"getRetryAfterHint")});var Bp=w(or=>{"use strict";c();Object.defineProperty(or,"__esModule",{value:!0});or.resolveHttpAuthSchemeConfig=or.defaultBedrockRuntimeHttpAuthSchemeProvider=or.defaultBedrockRuntimeHttpAuthSchemeParametersProvider=void 0;var Kq=(ne(),D(nt)),Mp=(ce(),D(wt)),Fp=Ge(),Yq=async(e,t,r)=>({operation:(0,Fp.getSmithyContext)(t).operation,region:await(0,Fp.normalizeProvider)(e.region)()||(()=>{throw new Error("expected `region` to be configured for `aws.auth#sigv4`")})()});or.defaultBedrockRuntimeHttpAuthSchemeParametersProvider=Yq;function Jq(e){return{schemeId:"aws.auth#sigv4",signingProperties:{name:"bedrock",region:e.region},propertiesExtractor:(t,r)=>({signingProperties:{config:t,context:r}})}}function Xq(e){return{schemeId:"smithy.api#httpBearerAuth",propertiesExtractor:({profile:t,filepath:r,configFilepath:n,ignoreCache:o},s)=>({identityProperties:{profile:t,filepath:r,configFilepath:n,ignoreCache:o}})}}var Qq=e=>{let t=[];switch(e.operation){default:t.push(Jq(e)),t.push(Xq(e))}return t};or.defaultBedrockRuntimeHttpAuthSchemeProvider=Qq;var Zq=e=>{let t=(0,Mp.memoizeIdentityProvider)(e.token,Mp.isIdentityExpired,Mp.doesIdentityRequireRefresh),r=(0,Kq.resolveAwsSdkSigV4Config)(e);return Object.assign(r,{authSchemePreference:(0,Fp.normalizeProvider)(e.authSchemePreference??[]),token:t})};or.resolveHttpAuthSchemeConfig=Zq});var gC=w((Eoe,e2)=>{e2.exports={name:"@aws-sdk/client-bedrock-runtime",description:"AWS SDK for JavaScript Bedrock Runtime Client for Node.js, Browser and React Native",version:"3.859.0",scripts:{build:"concurrently 'yarn:build:cjs' 'yarn:build:es' 'yarn:build:types'","build:cjs":"node ../../scripts/compilation/inline client-bedrock-runtime","build:es":"tsc -p tsconfig.es.json","build:include:deps":"lerna run --scope $npm_package_name --include-dependencies build","build:types":"tsc -p tsconfig.types.json","build:types:downlevel":"downlevel-dts dist-types dist-types/ts3.4",clean:"rimraf ./dist-* && rimraf *.tsbuildinfo","extract:docs":"api-extractor run --local","generate:client":"node ../../scripts/generate-clients/single-service --solo bedrock-runtime"},main:"./dist-cjs/index.js",types:"./dist-types/index.d.ts",module:"./dist-es/index.js",sideEffects:!1,dependencies:{"@aws-crypto/sha256-browser":"5.2.0","@aws-crypto/sha256-js":"5.2.0","@aws-sdk/core":"3.858.0","@aws-sdk/credential-provider-node":"3.859.0","@aws-sdk/eventstream-handler-node":"3.840.0","@aws-sdk/middleware-eventstream":"3.840.0","@aws-sdk/middleware-host-header":"3.840.0","@aws-sdk/middleware-logger":"3.840.0","@aws-sdk/middleware-recursion-detection":"3.840.0","@aws-sdk/middleware-user-agent":"3.858.0","@aws-sdk/middleware-websocket":"3.844.0","@aws-sdk/region-config-resolver":"3.840.0","@aws-sdk/token-providers":"3.859.0","@aws-sdk/types":"3.840.0","@aws-sdk/util-endpoints":"3.848.0","@aws-sdk/util-user-agent-browser":"3.840.0","@aws-sdk/util-user-agent-node":"3.858.0","@smithy/config-resolver":"^4.1.4","@smithy/core":"^3.7.2","@smithy/eventstream-serde-browser":"^4.0.4","@smithy/eventstream-serde-config-resolver":"^4.1.2","@smithy/eventstream-serde-node":"^4.0.4","@smithy/fetch-http-handler":"^5.1.0","@smithy/hash-node":"^4.0.4","@smithy/invalid-dependency":"^4.0.4","@smithy/middleware-content-length":"^4.0.4","@smithy/middleware-endpoint":"^4.1.17","@smithy/middleware-retry":"^4.1.18","@smithy/middleware-serde":"^4.0.8","@smithy/middleware-stack":"^4.0.4","@smithy/node-config-provider":"^4.1.3","@smithy/node-http-handler":"^4.1.0","@smithy/protocol-http":"^5.1.2","@smithy/smithy-client":"^4.4.9","@smithy/types":"^4.3.1","@smithy/url-parser":"^4.0.4","@smithy/util-base64":"^4.0.0","@smithy/util-body-length-browser":"^4.0.0","@smithy/util-body-length-node":"^4.0.0","@smithy/util-defaults-mode-browser":"^4.0.25","@smithy/util-defaults-mode-node":"^4.0.25","@smithy/util-endpoints":"^3.0.6","@smithy/util-middleware":"^4.0.4","@smithy/util-retry":"^4.0.6","@smithy/util-stream":"^4.2.3","@smithy/util-utf8":"^4.0.0","@types/uuid":"^9.0.1",tslib:"^2.6.2",uuid:"^9.0.1"},devDependencies:{"@tsconfig/node18":"18.2.4","@types/node":"^18.19.69",concurrently:"7.0.0","downlevel-dts":"0.10.1",rimraf:"3.0.2",typescript:"~5.8.3"},engines:{node:">=18.0.0"},typesVersions:{"<4.0":{"dist-types/*":["dist-types/ts3.4/*"]}},files:["dist-*/**"],author:{name:"AWS SDK for JavaScript Team",url:"https://aws.amazon.com/javascript/"},license:"Apache-2.0",browser:{"./dist-es/runtimeConfig":"./dist-es/runtimeConfig.browser"},"react-native":{"./dist-es/runtimeConfig":"./dist-es/runtimeConfig.native"},homepage:"https://github.com/aws/aws-sdk-js-v3/tree/main/clients/client-bedrock-runtime",repository:{type:"git",url:"https://github.com/aws/aws-sdk-js-v3.git",directory:"clients/client-bedrock-runtime"}}});var Lp=w((woe,bC)=>{"use strict";c();var Ga=Object.defineProperty,t2=Object.getOwnPropertyDescriptor,r2=Object.getOwnPropertyNames,n2=Object.prototype.hasOwnProperty,o2=(e,t)=>Ga(e,"name",{value:t,configurable:!0}),s2=(e,t)=>{for(var r in t)Ga(e,r,{get:t[r],enumerable:!0})},i2=(e,t,r,n)=>{if(t&&typeof t=="object"||typeof t=="function")for(let o of r2(t))!n2.call(e,o)&&o!==r&&Ga(e,o,{get:()=>t[o],enumerable:!(n=t2(t,o))||n.enumerable});return e},a2=e=>i2(Ga({},"__esModule",{value:!0}),e),hC={};s2(hC,{ENV_ACCOUNT_ID:()=>wC,ENV_CREDENTIAL_SCOPE:()=>EC,ENV_EXPIRATION:()=>SC,ENV_KEY:()=>yC,ENV_SECRET:()=>_C,ENV_SESSION:()=>vC,fromEnv:()=>d2});bC.exports=a2(hC);var c2=(Ve(),D(Gt)),l2=_e(),yC="AWS_ACCESS_KEY_ID",_C="AWS_SECRET_ACCESS_KEY",vC="AWS_SESSION_TOKEN",SC="AWS_CREDENTIAL_EXPIRATION",EC="AWS_CREDENTIAL_SCOPE",wC="AWS_ACCOUNT_ID",d2=o2(e=>async()=>{e?.logger?.debug("@aws-sdk/credential-provider-env - fromEnv");let t=process.env[yC],r=process.env[_C],n=process.env[vC],o=process.env[SC],s=process.env[EC],i=process.env[wC];if(t&&r){let a={accessKeyId:t,secretAccessKey:r,...n&&{sessionToken:n},...o&&{expiration:new Date(o)},...s&&{credentialScope:s},...i&&{accountId:i}};return(0,c2.setCredentialFeature)(a,"CREDENTIALS_ENV_VARS","g"),a}throw new l2.CredentialsProviderError("Unable to find environment variable credentials.",{logger:e?.logger})},"fromEnv")});var Mo=w((Coe,BC)=>{c();var Wa=Object.defineProperty,u2=Object.getOwnPropertyDescriptor,p2=Object.getOwnPropertyNames,f2=Object.prototype.hasOwnProperty,ee=(e,t)=>Wa(e,"name",{value:t,configurable:!0}),m2=(e,t)=>{for(var r in t)Wa(e,r,{get:t[r],enumerable:!0})},g2=(e,t,r,n)=>{if(t&&typeof t=="object"||typeof t=="function")for(let o of p2(t))!f2.call(e,o)&&o!==r&&Wa(e,o,{get:()=>t[o],enumerable:!(n=u2(t,o))||n.enumerable});return e},h2=e=>g2(Wa({},"__esModule",{value:!0}),e),AC={};m2(AC,{DEFAULT_MAX_RETRIES:()=>IC,DEFAULT_TIMEOUT:()=>RC,ENV_CMDS_AUTH_TOKEN:()=>jp,ENV_CMDS_FULL_URI:()=>Va,ENV_CMDS_RELATIVE_URI:()=>za,Endpoint:()=>kC,fromContainerMetadata:()=>S2,fromInstanceMetadata:()=>j2,getInstanceMetadataEndpoint:()=>MC,httpRequest:()=>hn,providerConfigFromInit:()=>$p});BC.exports=h2(AC);var y2=F("url"),at=_e(),_2=F("buffer"),v2=F("http");function hn(e){return new Promise((t,r)=>{let n=(0,v2.request)({method:"GET",...e,hostname:e.hostname?.replace(/^\[(.+)\]$/,"$1")});n.on("error",o=>{r(Object.assign(new at.ProviderError("Unable to connect to instance metadata service"),o)),n.destroy()}),n.on("timeout",()=>{r(new at.ProviderError("TimeoutError from instance metadata service")),n.destroy()}),n.on("response",o=>{let{statusCode:s=400}=o;(s<200||300<=s)&&(r(Object.assign(new at.ProviderError("Error response received from instance metadata service"),{statusCode:s})),n.destroy());let i=[];o.on("data",a=>{i.push(a)}),o.on("end",()=>{t(_2.Buffer.concat(i)),n.destroy()})}),n.end()})}ee(hn,"httpRequest");var TC=ee(e=>!!e&&typeof e=="object"&&typeof e.AccessKeyId=="string"&&typeof e.SecretAccessKey=="string"&&typeof e.Token=="string"&&typeof e.Expiration=="string","isImdsCredentials"),OC=ee(e=>({accessKeyId:e.AccessKeyId,secretAccessKey:e.SecretAccessKey,sessionToken:e.Token,expiration:new Date(e.Expiration),...e.AccountId&&{accountId:e.AccountId}}),"fromImdsCredentials"),RC=1e3,IC=0,$p=ee(({maxRetries:e=IC,timeout:t=RC})=>({maxRetries:e,timeout:t}),"providerConfigFromInit"),Hp=ee((e,t)=>{let r=e();for(let n=0;n<t;n++)r=r.catch(e);return r},"retry"),Va="AWS_CONTAINER_CREDENTIALS_FULL_URI",za="AWS_CONTAINER_CREDENTIALS_RELATIVE_URI",jp="AWS_CONTAINER_AUTHORIZATION_TOKEN",S2=ee((e={})=>{let{timeout:t,maxRetries:r}=$p(e);return()=>Hp(async()=>{let n=await x2({logger:e.logger}),o=JSON.parse(await E2(t,n));if(!TC(o))throw new at.CredentialsProviderError("Invalid response received from instance metadata service.",{logger:e.logger});return OC(o)},r)},"fromContainerMetadata"),E2=ee(async(e,t)=>(process.env[jp]&&(t.headers={...t.headers,Authorization:process.env[jp]}),(await hn({...t,timeout:e})).toString()),"requestFromEcsImds"),w2="169.254.170.2",b2={localhost:!0,"127.0.0.1":!0},C2={"http:":!0,"https:":!0},x2=ee(async({logger:e})=>{if(process.env[za])return{hostname:w2,path:process.env[za]};if(process.env[Va]){let t=(0,y2.parse)(process.env[Va]);if(!t.hostname||!(t.hostname in b2))throw new at.CredentialsProviderError(`${t.hostname} is not a valid container metadata service hostname`,{tryNextLink:!1,logger:e});if(!t.protocol||!(t.protocol in C2))throw new at.CredentialsProviderError(`${t.protocol} is not a valid container metadata service protocol`,{tryNextLink:!1,logger:e});return{...t,port:t.port?parseInt(t.port,10):void 0}}throw new at.CredentialsProviderError(`The container metadata credential provider cannot be used unless the ${za} or ${Va} environment variable is set`,{tryNextLink:!1,logger:e})},"getCmdsUri"),P2=class NC extends at.CredentialsProviderError{constructor(t,r=!0){super(t,r),this.tryNextLink=r,this.name="InstanceMetadataV1FallbackError",Object.setPrototypeOf(this,NC.prototype)}static{ee(this,"InstanceMetadataV1FallbackError")}},qp=er(),A2=jt(),kC=(e=>(e.IPv4="http://169.254.169.254",e.IPv6="http://[fd00:ec2::254]",e))(kC||{}),T2="AWS_EC2_METADATA_SERVICE_ENDPOINT",O2="ec2_metadata_service_endpoint",R2={environmentVariableSelector:e=>e[T2],configFileSelector:e=>e[O2],default:void 0},DC=(e=>(e.IPv4="IPv4",e.IPv6="IPv6",e))(DC||{}),I2="AWS_EC2_METADATA_SERVICE_ENDPOINT_MODE",N2="ec2_metadata_service_endpoint_mode",k2={environmentVariableSelector:e=>e[I2],configFileSelector:e=>e[N2],default:"IPv4"},MC=ee(async()=>(0,A2.parseUrl)(await D2()||await M2()),"getInstanceMetadataEndpoint"),D2=ee(async()=>(0,qp.loadConfig)(R2)(),"getFromEndpointConfig"),M2=ee(async()=>{let e=await(0,qp.loadConfig)(k2)();switch(e){case"IPv4":return"http://169.254.169.254";case"IPv6":return"http://[fd00:ec2::254]";default:throw new Error(`Unsupported endpoint mode: ${e}. Select from ${Object.values(DC)}`)}},"getFromEndpointModeConfig"),F2=300,B2=300,L2="https://docs.aws.amazon.com/sdkref/latest/guide/feature-static-credentials.html",CC=ee((e,t)=>{let r=F2+Math.floor(Math.random()*B2),n=new Date(Date.now()+r*1e3);t.warn(`Attempting credential expiration extension due to a credential service availability issue. A refresh of these credentials will be attempted after ${new Date(n)}.
For more information, please visit: `+L2);let o=e.originalExpiration??e.expiration;return{...e,...o?{originalExpiration:o}:{},expiration:n}},"getExtendedInstanceMetadataCredentials"),U2=ee((e,t={})=>{let r=t?.logger||console,n;return async()=>{let o;try{o=await e(),o.expiration&&o.expiration.getTime()<Date.now()&&(o=CC(o,r))}catch(s){if(n)r.warn("Credential renew failed: ",s),o=CC(n,r);else throw s}return n=o,o}},"staticStabilityProvider"),FC="/latest/meta-data/iam/security-credentials/",H2="/latest/api/token",Up="AWS_EC2_METADATA_V1_DISABLED",xC="ec2_metadata_v1_disabled",PC="x-aws-ec2-metadata-token",j2=ee((e={})=>U2($2(e),{logger:e.logger}),"fromInstanceMetadata"),$2=ee((e={})=>{let t=!1,{logger:r,profile:n}=e,{timeout:o,maxRetries:s}=$p(e),i=ee(async(a,l)=>{if(t||l.headers?.[PC]==null){let f=!1,g=!1,h=await(0,qp.loadConfig)({environmentVariableSelector:_=>{let v=_[Up];if(g=!!v&&v!=="false",v===void 0)throw new at.CredentialsProviderError(`${Up} not set in env, checking config file next.`,{logger:e.logger});return g},configFileSelector:_=>{let v=_[xC];return f=!!v&&v!=="false",f},default:!1},{profile:n})();if(e.ec2MetadataV1Disabled||h){let _=[];throw e.ec2MetadataV1Disabled&&_.push("credential provider initialization (runtime option ec2MetadataV1Disabled)"),f&&_.push(`config file profile (${xC})`),g&&_.push(`process environment variable (${Up})`),new P2(`AWS EC2 Metadata v1 fallback has been blocked by AWS SDK configuration in the following: [${_.join(", ")}].`)}}let u=(await Hp(async()=>{let f;try{f=await G2(l)}catch(g){throw g.statusCode===401&&(t=!1),g}return f},a)).trim();return Hp(async()=>{let f;try{f=await V2(u,l,e)}catch(g){throw g.statusCode===401&&(t=!1),g}return f},a)},"getCredentials");return async()=>{let a=await MC();if(t)return r?.debug("AWS SDK Instance Metadata","using v1 fallback (no token fetch)"),i(s,{...a,timeout:o});{let l;try{l=(await q2({...a,timeout:o})).toString()}catch(d){if(d?.statusCode===400)throw Object.assign(d,{message:"EC2 Metadata token request returned error"});return(d.message==="TimeoutError"||[403,404,405].includes(d.statusCode))&&(t=!0),r?.debug("AWS SDK Instance Metadata","using v1 fallback (initial)"),i(s,{...a,timeout:o})}return i(s,{...a,headers:{[PC]:l},timeout:o})}}},"getInstanceMetadataProvider"),q2=ee(async e=>hn({...e,path:H2,method:"PUT",headers:{"x-aws-ec2-metadata-token-ttl-seconds":"21600"}}),"getMetadataToken"),G2=ee(async e=>(await hn({...e,path:FC})).toString(),"getProfile"),V2=ee(async(e,t,r)=>{let n=JSON.parse((await hn({...t,path:FC+e})).toString());if(!TC(n))throw new at.CredentialsProviderError("Invalid response received from instance metadata service.",{logger:r.logger});return OC(n)},"getCredentialsFromProfile")});var LC=w(Ka=>{"use strict";c();Object.defineProperty(Ka,"__esModule",{value:!0});Ka.checkUrl=void 0;var z2=_e(),W2="169.254.170.2",K2="169.254.170.23",Y2="[fd00:ec2::23]",J2=(e,t)=>{if(e.protocol!=="https:"&&!(e.hostname===W2||e.hostname===K2||e.hostname===Y2)){if(e.hostname.includes("[")){if(e.hostname==="[::1]"||e.hostname==="[0000:0000:0000:0000:0000:0000:0000:0001]")return}else{if(e.hostname==="localhost")return;let r=e.hostname.split("."),n=o=>{let s=parseInt(o,10);return 0<=s&&s<=255};if(r[0]==="127"&&n(r[1])&&n(r[2])&&n(r[3])&&r.length===4)return}throw new z2.CredentialsProviderError(`URL not accepted. It must either be HTTPS or match one of the following:
  - loopback CIDR 127.0.0.0/8 or [::1/128]
  - ECS container host 169.254.170.2
  - EKS container host 169.254.170.23 or [fd00:ec2::23]`,{logger:t})}};Ka.checkUrl=J2});var UC=w(Ya=>{"use strict";c();Object.defineProperty(Ya,"__esModule",{value:!0});Ya.createGetRequest=e4;Ya.getCredentials=t4;var Gp=_e(),X2=q(),Q2=M(),Z2=ai();function e4(e){return new X2.HttpRequest({protocol:e.protocol,hostname:e.hostname,port:Number(e.port),path:e.pathname,query:Array.from(e.searchParams.entries()).reduce((t,[r,n])=>(t[r]=n,t),{}),fragment:e.hash})}async function t4(e,t){let n=await(0,Z2.sdkStreamMixin)(e.body).transformToString();if(e.statusCode===200){let o=JSON.parse(n);if(typeof o.AccessKeyId!="string"||typeof o.SecretAccessKey!="string"||typeof o.Token!="string"||typeof o.Expiration!="string")throw new Gp.CredentialsProviderError("HTTP credential provider response not of the required format, an object matching: { AccessKeyId: string, SecretAccessKey: string, Token: string, Expiration: string(rfc3339) }",{logger:t});return{accessKeyId:o.AccessKeyId,secretAccessKey:o.SecretAccessKey,sessionToken:o.Token,expiration:(0,Q2.parseRfc3339DateTime)(o.Expiration)}}if(e.statusCode>=400&&e.statusCode<500){let o={};try{o=JSON.parse(n)}catch{}throw Object.assign(new Gp.CredentialsProviderError(`Server responded with status: ${e.statusCode}`,{logger:t}),{Code:o.Code,Message:o.Message})}throw new Gp.CredentialsProviderError(`Server responded with status: ${e.statusCode}`,{logger:t})}});var HC=w(Ja=>{"use strict";c();Object.defineProperty(Ja,"__esModule",{value:!0});Ja.retryWrapper=void 0;var r4=(e,t,r)=>async()=>{for(let n=0;n<t;++n)try{return await e()}catch{await new Promise(s=>setTimeout(s,r))}return await e()};Ja.retryWrapper=r4});var qC=w(Xa=>{"use strict";c();Object.defineProperty(Xa,"__esModule",{value:!0});Xa.fromHttp=void 0;var n4=(dn(),D(ln)),o4=(Ve(),D(Gt)),s4=mr(),jC=_e(),i4=n4.__importDefault(F("fs/promises")),a4=LC(),$C=UC(),c4=HC(),l4="AWS_CONTAINER_CREDENTIALS_RELATIVE_URI",d4="http://169.254.170.2",u4="AWS_CONTAINER_CREDENTIALS_FULL_URI",p4="AWS_CONTAINER_AUTHORIZATION_TOKEN_FILE",f4="AWS_CONTAINER_AUTHORIZATION_TOKEN",m4=(e={})=>{e.logger?.debug("@aws-sdk/credential-provider-http - fromHttp");let t,r=e.awsContainerCredentialsRelativeUri??process.env[l4],n=e.awsContainerCredentialsFullUri??process.env[u4],o=e.awsContainerAuthorizationToken??process.env[f4],s=e.awsContainerAuthorizationTokenFile??process.env[p4],i=e.logger?.constructor?.name==="NoOpLogger"||!e.logger?console.warn:e.logger.warn;if(r&&n&&(i("@aws-sdk/credential-provider-http: you have set both awsContainerCredentialsRelativeUri and awsContainerCredentialsFullUri."),i("awsContainerCredentialsFullUri will take precedence.")),o&&s&&(i("@aws-sdk/credential-provider-http: you have set both awsContainerAuthorizationToken and awsContainerAuthorizationTokenFile."),i("awsContainerAuthorizationToken will take precedence.")),n)t=n;else if(r)t=`${d4}${r}`;else throw new jC.CredentialsProviderError(`No HTTP credential provider host provided.
Set AWS_CONTAINER_CREDENTIALS_FULL_URI or AWS_CONTAINER_CREDENTIALS_RELATIVE_URI.`,{logger:e.logger});let a=new URL(t);(0,a4.checkUrl)(a,e.logger);let l=new s4.NodeHttpHandler({requestTimeout:e.timeout??1e3,connectionTimeout:e.timeout??1e3});return(0,c4.retryWrapper)(async()=>{let d=(0,$C.createGetRequest)(a);o?d.headers.Authorization=o:s&&(d.headers.Authorization=(await i4.default.readFile(s)).toString());try{let u=await l.handle(d);return(0,$C.getCredentials)(u.response).then(f=>(0,o4.setCredentialFeature)(f,"CREDENTIALS_HTTP","z"))}catch(u){throw new jC.CredentialsProviderError(String(u),{logger:e.logger})}},e.maxRetries??3,e.timeout??1e3)};Xa.fromHttp=m4});var Vp=w(Qa=>{"use strict";c();Object.defineProperty(Qa,"__esModule",{value:!0});Qa.fromHttp=void 0;var g4=qC();Object.defineProperty(Qa,"fromHttp",{enumerable:!0,get:function(){return g4.fromHttp}})});var Wp=w(sr=>{"use strict";c();Object.defineProperty(sr,"__esModule",{value:!0});sr.resolveHttpAuthSchemeConfig=sr.defaultSSOHttpAuthSchemeProvider=sr.defaultSSOHttpAuthSchemeParametersProvider=void 0;var h4=(ne(),D(nt)),zp=Ge(),y4=async(e,t,r)=>({operation:(0,zp.getSmithyContext)(t).operation,region:await(0,zp.normalizeProvider)(e.region)()||(()=>{throw new Error("expected `region` to be configured for `aws.auth#sigv4`")})()});sr.defaultSSOHttpAuthSchemeParametersProvider=y4;function _4(e){return{schemeId:"aws.auth#sigv4",signingProperties:{name:"awsssoportal",region:e.region},propertiesExtractor:(t,r)=>({signingProperties:{config:t,context:r}})}}function Za(e){return{schemeId:"smithy.api#noAuth"}}var v4=e=>{let t=[];switch(e.operation){case"GetRoleCredentials":{t.push(Za(e));break}case"ListAccountRoles":{t.push(Za(e));break}case"ListAccounts":{t.push(Za(e));break}case"Logout":{t.push(Za(e));break}default:t.push(_4(e))}return t};sr.defaultSSOHttpAuthSchemeProvider=v4;var S4=e=>{let t=(0,h4.resolveAwsSdkSigV4Config)(e);return Object.assign(t,{authSchemePreference:(0,zp.normalizeProvider)(e.authSchemePreference??[])})};sr.resolveHttpAuthSchemeConfig=S4});var GC=w((Loe,E4)=>{E4.exports={name:"@aws-sdk/client-sso",description:"AWS SDK for JavaScript Sso Client for Node.js, Browser and React Native",version:"3.858.0",scripts:{build:"concurrently 'yarn:build:cjs' 'yarn:build:es' 'yarn:build:types'","build:cjs":"node ../../scripts/compilation/inline client-sso","build:es":"tsc -p tsconfig.es.json","build:include:deps":"lerna run --scope $npm_package_name --include-dependencies build","build:types":"tsc -p tsconfig.types.json","build:types:downlevel":"downlevel-dts dist-types dist-types/ts3.4",clean:"rimraf ./dist-* && rimraf *.tsbuildinfo","extract:docs":"api-extractor run --local","generate:client":"node ../../scripts/generate-clients/single-service --solo sso"},main:"./dist-cjs/index.js",types:"./dist-types/index.d.ts",module:"./dist-es/index.js",sideEffects:!1,dependencies:{"@aws-crypto/sha256-browser":"5.2.0","@aws-crypto/sha256-js":"5.2.0","@aws-sdk/core":"3.858.0","@aws-sdk/middleware-host-header":"3.840.0","@aws-sdk/middleware-logger":"3.840.0","@aws-sdk/middleware-recursion-detection":"3.840.0","@aws-sdk/middleware-user-agent":"3.858.0","@aws-sdk/region-config-resolver":"3.840.0","@aws-sdk/types":"3.840.0","@aws-sdk/util-endpoints":"3.848.0","@aws-sdk/util-user-agent-browser":"3.840.0","@aws-sdk/util-user-agent-node":"3.858.0","@smithy/config-resolver":"^4.1.4","@smithy/core":"^3.7.2","@smithy/fetch-http-handler":"^5.1.0","@smithy/hash-node":"^4.0.4","@smithy/invalid-dependency":"^4.0.4","@smithy/middleware-content-length":"^4.0.4","@smithy/middleware-endpoint":"^4.1.17","@smithy/middleware-retry":"^4.1.18","@smithy/middleware-serde":"^4.0.8","@smithy/middleware-stack":"^4.0.4","@smithy/node-config-provider":"^4.1.3","@smithy/node-http-handler":"^4.1.0","@smithy/protocol-http":"^5.1.2","@smithy/smithy-client":"^4.4.9","@smithy/types":"^4.3.1","@smithy/url-parser":"^4.0.4","@smithy/util-base64":"^4.0.0","@smithy/util-body-length-browser":"^4.0.0","@smithy/util-body-length-node":"^4.0.0","@smithy/util-defaults-mode-browser":"^4.0.25","@smithy/util-defaults-mode-node":"^4.0.25","@smithy/util-endpoints":"^3.0.6","@smithy/util-middleware":"^4.0.4","@smithy/util-retry":"^4.0.6","@smithy/util-utf8":"^4.0.0",tslib:"^2.6.2"},devDependencies:{"@tsconfig/node18":"18.2.4","@types/node":"^18.19.69",concurrently:"7.0.0","downlevel-dts":"0.10.1",rimraf:"3.0.2",typescript:"~5.8.3"},engines:{node:">=18.0.0"},typesVersions:{"<4.0":{"dist-types/*":["dist-types/ts3.4/*"]}},files:["dist-*/**"],author:{name:"AWS SDK for JavaScript Team",url:"https://aws.amazon.com/javascript/"},license:"Apache-2.0",browser:{"./dist-es/runtimeConfig":"./dist-es/runtimeConfig.browser"},"react-native":{"./dist-es/runtimeConfig":"./dist-es/runtimeConfig.native"},homepage:"https://github.com/aws/aws-sdk-js-v3/tree/main/clients/client-sso",repository:{type:"git",url:"https://github.com/aws/aws-sdk-js-v3.git",directory:"clients/client-sso"}}});var Fo=w((Uoe,XC)=>{"use strict";c();var tc=Object.defineProperty,w4=Object.getOwnPropertyDescriptor,b4=Object.getOwnPropertyNames,C4=Object.prototype.hasOwnProperty,ec=(e,t)=>tc(e,"name",{value:t,configurable:!0}),x4=(e,t)=>{for(var r in t)tc(e,r,{get:t[r],enumerable:!0})},P4=(e,t,r,n)=>{if(t&&typeof t=="object"||typeof t=="function")for(let o of b4(t))!C4.call(e,o)&&o!==r&&tc(e,o,{get:()=>t[o],enumerable:!(n=w4(t,o))||n.enumerable});return e},A4=e=>P4(tc({},"__esModule",{value:!0}),e),zC={};x4(zC,{NODE_APP_ID_CONFIG_OPTIONS:()=>N4,UA_APP_ID_ENV_NAME:()=>YC,UA_APP_ID_INI_NAME:()=>JC,createDefaultUserAgentProvider:()=>KC,crtAvailability:()=>WC,defaultUserAgent:()=>O4});XC.exports=A4(zC);var VC=F("os"),Kp=F("process"),WC={isCrtAvailable:!1},T4=ec(()=>WC.isCrtAvailable?["md/crt-avail"]:null,"isCrtAvailable"),KC=ec(({serviceId:e,clientVersion:t})=>async r=>{let n=[["aws-sdk-js",t],["ua","2.1"],[`os/${(0,VC.platform)()}`,(0,VC.release)()],["lang/js"],["md/nodejs",`${Kp.versions.node}`]],o=T4();o&&n.push(o),e&&n.push([`api/${e}`,t]),Kp.env.AWS_EXECUTION_ENV&&n.push([`exec-env/${Kp.env.AWS_EXECUTION_ENV}`]);let s=await r?.userAgentAppId?.();return s?[...n,[`app/${s}`]]:[...n]},"createDefaultUserAgentProvider"),O4=KC,R4=an(),YC="AWS_SDK_UA_APP_ID",JC="sdk_ua_app_id",I4="sdk-ua-app-id",N4={environmentVariableSelector:ec(e=>e[YC],"environmentVariableSelector"),configFileSelector:ec(e=>e[JC]??e[I4],"configFileSelector"),default:R4.DEFAULT_UA_APP_ID}});var Bo=w((joe,t0)=>{c();var rc=Object.defineProperty,k4=Object.getOwnPropertyDescriptor,D4=Object.getOwnPropertyNames,M4=Object.prototype.hasOwnProperty,ZC=(e,t)=>rc(e,"name",{value:t,configurable:!0}),F4=(e,t)=>{for(var r in t)rc(e,r,{get:t[r],enumerable:!0})},B4=(e,t,r,n)=>{if(t&&typeof t=="object"||typeof t=="function")for(let o of D4(t))!M4.call(e,o)&&o!==r&&rc(e,o,{get:()=>t[o],enumerable:!(n=k4(t,o))||n.enumerable});return e},L4=e=>B4(rc({},"__esModule",{value:!0}),e),e0={};F4(e0,{Hash:()=>j4});t0.exports=L4(e0);var Yp=Vr(),U4=ie(),H4=F("buffer"),QC=F("crypto"),j4=class{static{ZC(this,"Hash")}constructor(e,t){this.algorithmIdentifier=e,this.secret=t,this.reset()}update(e,t){this.hash.update((0,U4.toUint8Array)(Jp(e,t)))}digest(){return Promise.resolve(this.hash.digest())}reset(){this.hash=this.secret?(0,QC.createHmac)(this.algorithmIdentifier,Jp(this.secret)):(0,QC.createHash)(this.algorithmIdentifier)}};function Jp(e,t){return H4.Buffer.isBuffer(e)?e:typeof e=="string"?(0,Yp.fromString)(e,t):ArrayBuffer.isView(e)?(0,Yp.fromArrayBuffer)(e.buffer,e.byteOffset,e.byteLength):(0,Yp.fromArrayBuffer)(e)}ZC(Jp,"castSourceData")});var Lo=w((Goe,o0)=>{c();var nc=Object.defineProperty,$4=Object.getOwnPropertyDescriptor,q4=Object.getOwnPropertyNames,G4=Object.prototype.hasOwnProperty,V4=(e,t)=>nc(e,"name",{value:t,configurable:!0}),z4=(e,t)=>{for(var r in t)nc(e,r,{get:t[r],enumerable:!0})},W4=(e,t,r,n)=>{if(t&&typeof t=="object"||typeof t=="function")for(let o of q4(t))!G4.call(e,o)&&o!==r&&nc(e,o,{get:()=>t[o],enumerable:!(n=$4(t,o))||n.enumerable});return e},K4=e=>W4(nc({},"__esModule",{value:!0}),e),n0={};z4(n0,{calculateBodyLength:()=>Y4});o0.exports=K4(n0);var r0=F("fs"),Y4=V4(e=>{if(!e)return 0;if(typeof e=="string")return Buffer.byteLength(e);if(typeof e.byteLength=="number")return e.byteLength;if(typeof e.size=="number")return e.size;if(typeof e.start=="number"&&typeof e.end=="number")return e.end+1-e.start;if(typeof e.path=="string"||Buffer.isBuffer(e.path))return(0,r0.lstatSync)(e.path).size;if(typeof e.fd=="number")return(0,r0.fstatSync)(e.fd).size;throw new Error(`Body Length computation failed for ${e}`)},"calculateBodyLength")});var v0=w(oc=>{"use strict";c();Object.defineProperty(oc,"__esModule",{value:!0});oc.ruleSet=void 0;var g0="required",Le="fn",Ue="argv",vn="ref",s0=!0,i0="isSet",Uo="booleanEquals",yn="error",_n="endpoint",At="tree",Xp="PartitionResult",Qp="getAttr",a0={[g0]:!1,type:"String"},c0={[g0]:!0,default:!1,type:"Boolean"},l0={[vn]:"Endpoint"},h0={[Le]:Uo,[Ue]:[{[vn]:"UseFIPS"},!0]},y0={[Le]:Uo,[Ue]:[{[vn]:"UseDualStack"},!0]},Be={},d0={[Le]:Qp,[Ue]:[{[vn]:Xp},"supportsFIPS"]},_0={[vn]:Xp},u0={[Le]:Uo,[Ue]:[!0,{[Le]:Qp,[Ue]:[_0,"supportsDualStack"]}]},p0=[h0],f0=[y0],m0=[{[vn]:"Region"}],J4={version:"1.0",parameters:{Region:a0,UseDualStack:c0,UseFIPS:c0,Endpoint:a0},rules:[{conditions:[{[Le]:i0,[Ue]:[l0]}],rules:[{conditions:p0,error:"Invalid Configuration: FIPS and custom endpoint are not supported",type:yn},{conditions:f0,error:"Invalid Configuration: Dualstack and custom endpoint are not supported",type:yn},{endpoint:{url:l0,properties:Be,headers:Be},type:_n}],type:At},{conditions:[{[Le]:i0,[Ue]:m0}],rules:[{conditions:[{[Le]:"aws.partition",[Ue]:m0,assign:Xp}],rules:[{conditions:[h0,y0],rules:[{conditions:[{[Le]:Uo,[Ue]:[s0,d0]},u0],rules:[{endpoint:{url:"https://portal.sso-fips.{Region}.{PartitionResult#dualStackDnsSuffix}",properties:Be,headers:Be},type:_n}],type:At},{error:"FIPS and DualStack are enabled, but this partition does not support one or both",type:yn}],type:At},{conditions:p0,rules:[{conditions:[{[Le]:Uo,[Ue]:[d0,s0]}],rules:[{conditions:[{[Le]:"stringEquals",[Ue]:[{[Le]:Qp,[Ue]:[_0,"name"]},"aws-us-gov"]}],endpoint:{url:"https://portal.sso.{Region}.amazonaws.com",properties:Be,headers:Be},type:_n},{endpoint:{url:"https://portal.sso-fips.{Region}.{PartitionResult#dnsSuffix}",properties:Be,headers:Be},type:_n}],type:At},{error:"FIPS is enabled but this partition does not support FIPS",type:yn}],type:At},{conditions:f0,rules:[{conditions:[u0],rules:[{endpoint:{url:"https://portal.sso.{Region}.{PartitionResult#dualStackDnsSuffix}",properties:Be,headers:Be},type:_n}],type:At},{error:"DualStack is enabled but this partition does not support DualStack",type:yn}],type:At},{endpoint:{url:"https://portal.sso.{Region}.{PartitionResult#dnsSuffix}",properties:Be,headers:Be},type:_n}],type:At}],type:At},{error:"Invalid Configuration: Missing Region",type:yn}]};oc.ruleSet=J4});var S0=w(sc=>{"use strict";c();Object.defineProperty(sc,"__esModule",{value:!0});sc.defaultEndpointResolver=void 0;var X4=Zr(),Zp=Qr(),Q4=v0(),Z4=new Zp.EndpointCache({size:50,params:["Endpoint","Region","UseDualStack","UseFIPS"]}),eG=(e,t={})=>Z4.get(e,()=>(0,Zp.resolveEndpoint)(Q4.ruleSet,{endpointParams:e,logger:t.logger}));sc.defaultEndpointResolver=eG;Zp.customEndpointFunctions.aws=X4.awsEndpointFunctions});var b0=w(ic=>{"use strict";c();Object.defineProperty(ic,"__esModule",{value:!0});ic.getRuntimeConfig=void 0;var tG=(ne(),D(nt)),rG=(ce(),D(wt)),nG=M(),oG=jt(),E0=ge(),w0=ie(),sG=Wp(),iG=S0(),aG=e=>({apiVersion:"2019-06-10",base64Decoder:e?.base64Decoder??E0.fromBase64,base64Encoder:e?.base64Encoder??E0.toBase64,disableHostPrefix:e?.disableHostPrefix??!1,endpointProvider:e?.endpointProvider??iG.defaultEndpointResolver,extensions:e?.extensions??[],httpAuthSchemeProvider:e?.httpAuthSchemeProvider??sG.defaultSSOHttpAuthSchemeProvider,httpAuthSchemes:e?.httpAuthSchemes??[{schemeId:"aws.auth#sigv4",identityProvider:t=>t.getIdentityProvider("aws.auth#sigv4"),signer:new tG.AwsSdkSigV4Signer},{schemeId:"smithy.api#noAuth",identityProvider:t=>t.getIdentityProvider("smithy.api#noAuth")||(async()=>({})),signer:new rG.NoAuthSigner}],logger:e?.logger??new nG.NoOpLogger,serviceId:e?.serviceId??"SSO",urlParser:e?.urlParser??oG.parseUrl,utf8Decoder:e?.utf8Decoder??w0.fromUtf8,utf8Encoder:e?.utf8Encoder??w0.toUtf8});ic.getRuntimeConfig=aG});var jo=w((Qoe,O0)=>{c();var cG=Object.create,Ho=Object.defineProperty,lG=Object.getOwnPropertyDescriptor,dG=Object.getOwnPropertyNames,uG=Object.getPrototypeOf,pG=Object.prototype.hasOwnProperty,ef=(e,t)=>Ho(e,"name",{value:t,configurable:!0}),fG=(e,t)=>{for(var r in t)Ho(e,r,{get:t[r],enumerable:!0})},A0=(e,t,r,n)=>{if(t&&typeof t=="object"||typeof t=="function")for(let o of dG(t))!pG.call(e,o)&&o!==r&&Ho(e,o,{get:()=>t[o],enumerable:!(n=lG(t,o))||n.enumerable});return e},mG=(e,t,r)=>(r=e!=null?cG(uG(e)):{},A0(t||!e||!e.__esModule?Ho(r,"default",{value:e,enumerable:!0}):r,e)),gG=e=>A0(Ho({},"__esModule",{value:!0}),e),T0={};fG(T0,{resolveDefaultsModeConfig:()=>xG});O0.exports=gG(T0);var hG=it(),C0=er(),yG=_e(),_G="AWS_EXECUTION_ENV",x0="AWS_REGION",P0="AWS_DEFAULT_REGION",vG="AWS_EC2_METADATA_DISABLED",SG=["in-region","cross-region","mobile","standard","legacy"],EG="/latest/meta-data/placement/region",wG="AWS_DEFAULTS_MODE",bG="defaults_mode",CG={environmentVariableSelector:e=>e[wG],configFileSelector:e=>e[bG],default:"legacy"},xG=ef(({region:e=(0,C0.loadConfig)(hG.NODE_REGION_CONFIG_OPTIONS),defaultsMode:t=(0,C0.loadConfig)(CG)}={})=>(0,yG.memoize)(async()=>{let r=typeof t=="function"?await t():t;switch(r?.toLowerCase()){case"auto":return PG(e);case"in-region":case"cross-region":case"mobile":case"standard":case"legacy":return Promise.resolve(r?.toLocaleLowerCase());case void 0:return Promise.resolve("legacy");default:throw new Error(`Invalid parameter for "defaultsMode", expect ${SG.join(", ")}, got ${r}`)}}),"resolveDefaultsModeConfig"),PG=ef(async e=>{if(e){let t=typeof e=="function"?await e():e,r=await AG();return r?t===r?"in-region":"cross-region":"standard"}return"standard"},"resolveNodeDefaultsModeAuto"),AG=ef(async()=>{if(process.env[_G]&&(process.env[x0]||process.env[P0]))return process.env[x0]??process.env[P0];if(!process.env[vG])try{let{getInstanceMetadataEndpoint:e,httpRequest:t}=await Promise.resolve().then(()=>mG(Mo())),r=await e();return(await t({...r,path:EG})).toString()}catch{}},"inferPhysicalRegion")});var D0=w(cc=>{"use strict";c();Object.defineProperty(cc,"__esModule",{value:!0});cc.getRuntimeConfig=void 0;var TG=(dn(),D(ln)),OG=TG.__importDefault(GC()),R0=(ne(),D(nt)),I0=Fo(),ac=it(),RG=Bo(),N0=Pt(),Lr=er(),k0=mr(),IG=Lo(),NG=mn(),kG=b0(),DG=M(),MG=jo(),FG=M(),BG=e=>{(0,FG.emitWarningIfUnsupportedVersion)(process.version);let t=(0,MG.resolveDefaultsModeConfig)(e),r=()=>t().then(DG.loadConfigsForDefaultMode),n=(0,kG.getRuntimeConfig)(e);(0,R0.emitWarningIfUnsupportedVersion)(process.version);let o={profile:e?.profile,logger:n.logger};return{...n,...e,runtime:"node",defaultsMode:t,authSchemePreference:e?.authSchemePreference??(0,Lr.loadConfig)(R0.NODE_AUTH_SCHEME_PREFERENCE_OPTIONS,o),bodyLengthChecker:e?.bodyLengthChecker??IG.calculateBodyLength,defaultUserAgentProvider:e?.defaultUserAgentProvider??(0,I0.createDefaultUserAgentProvider)({serviceId:n.serviceId,clientVersion:OG.default.version}),maxAttempts:e?.maxAttempts??(0,Lr.loadConfig)(N0.NODE_MAX_ATTEMPT_CONFIG_OPTIONS,e),region:e?.region??(0,Lr.loadConfig)(ac.NODE_REGION_CONFIG_OPTIONS,{...ac.NODE_REGION_CONFIG_FILE_OPTIONS,...o}),requestHandler:k0.NodeHttpHandler.create(e?.requestHandler??r),retryMode:e?.retryMode??(0,Lr.loadConfig)({...N0.NODE_RETRY_MODE_CONFIG_OPTIONS,default:async()=>(await r()).retryMode||NG.DEFAULT_RETRY_MODE},e),sha256:e?.sha256??RG.Hash.bind(null,"sha256"),streamCollector:e?.streamCollector??k0.streamCollector,useDualstackEndpoint:e?.useDualstackEndpoint??(0,Lr.loadConfig)(ac.NODE_USE_DUALSTACK_ENDPOINT_CONFIG_OPTIONS,o),useFipsEndpoint:e?.useFipsEndpoint??(0,Lr.loadConfig)(ac.NODE_USE_FIPS_ENDPOINT_CONFIG_OPTIONS,o),userAgentAppId:e?.userAgentAppId??(0,Lr.loadConfig)(I0.NODE_APP_ID_CONFIG_OPTIONS,o)}};cc.getRuntimeConfig=BG});var $o=w((rse,H0)=>{"use strict";c();var lc=Object.defineProperty,LG=Object.getOwnPropertyDescriptor,UG=Object.getOwnPropertyNames,HG=Object.prototype.hasOwnProperty,ct=(e,t)=>lc(e,"name",{value:t,configurable:!0}),jG=(e,t)=>{for(var r in t)lc(e,r,{get:t[r],enumerable:!0})},$G=(e,t,r,n)=>{if(t&&typeof t=="object"||typeof t=="function")for(let o of UG(t))!HG.call(e,o)&&o!==r&&lc(e,o,{get:()=>t[o],enumerable:!(n=LG(t,o))||n.enumerable});return e},qG=e=>$G(lc({},"__esModule",{value:!0}),e),F0={};jG(F0,{NODE_REGION_CONFIG_FILE_OPTIONS:()=>WG,NODE_REGION_CONFIG_OPTIONS:()=>zG,REGION_ENV_NAME:()=>B0,REGION_INI_NAME:()=>L0,getAwsRegionExtensionConfiguration:()=>GG,resolveAwsRegionExtensionConfiguration:()=>VG,resolveRegionConfig:()=>KG});H0.exports=qG(F0);var GG=ct(e=>({setRegion(t){e.region=t},region(){return e.region}}),"getAwsRegionExtensionConfiguration"),VG=ct(e=>({region:e.region()}),"resolveAwsRegionExtensionConfiguration"),B0="AWS_REGION",L0="region",zG={environmentVariableSelector:ct(e=>e[B0],"environmentVariableSelector"),configFileSelector:ct(e=>e[L0],"configFileSelector"),default:ct(()=>{throw new Error("Region is missing")},"default")},WG={preferredFile:"credentials"},U0=ct(e=>typeof e=="string"&&(e.startsWith("fips-")||e.endsWith("-fips")),"isFipsRegion"),M0=ct(e=>U0(e)?["fips-aws-global","aws-fips"].includes(e)?"us-east-1":e.replace(/fips-(dkr-|prod-)?|-fips/,""):e,"getRealRegion"),KG=ct(e=>{let{region:t,useFipsEndpoint:r}=e;if(!t)throw new Error("Region is missing");return Object.assign(e,{region:ct(async()=>{if(typeof t=="string")return M0(t);let n=await t();return M0(n)},"region"),useFipsEndpoint:ct(async()=>{let n=typeof t=="string"?t:await t();return U0(n)?!0:typeof r!="function"?Promise.resolve(!!r):r()},"useFipsEndpoint")})},"resolveRegionConfig")});var vx=w((ose,_x)=>{"use strict";c();var dc=Object.defineProperty,YG=Object.getOwnPropertyDescriptor,JG=Object.getOwnPropertyNames,XG=Object.prototype.hasOwnProperty,B=(e,t)=>dc(e,"name",{value:t,configurable:!0}),QG=(e,t)=>{for(var r in t)dc(e,r,{get:t[r],enumerable:!0})},ZG=(e,t,r,n)=>{if(t&&typeof t=="object"||typeof t=="function")for(let o of JG(t))!XG.call(e,o)&&o!==r&&dc(e,o,{get:()=>t[o],enumerable:!(n=YG(t,o))||n.enumerable});return e},e3=e=>ZG(dc({},"__esModule",{value:!0}),e),W0={};QG(W0,{GetRoleCredentialsCommand:()=>gx,GetRoleCredentialsRequestFilterSensitiveLog:()=>nx,GetRoleCredentialsResponseFilterSensitiveLog:()=>sx,InvalidRequestException:()=>Y0,ListAccountRolesCommand:()=>tf,ListAccountRolesRequestFilterSensitiveLog:()=>ix,ListAccountsCommand:()=>rf,ListAccountsRequestFilterSensitiveLog:()=>ax,LogoutCommand:()=>hx,LogoutRequestFilterSensitiveLog:()=>cx,ResourceNotFoundException:()=>X0,RoleCredentialsFilterSensitiveLog:()=>ox,SSO:()=>yx,SSOClient:()=>pc,SSOServiceException:()=>Sn,TooManyRequestsException:()=>Z0,UnauthorizedException:()=>tx,__Client:()=>A.Client,paginateListAccountRoles:()=>P3,paginateListAccounts:()=>A3});_x.exports=e3(W0);var j0=Ln(),t3=Un(),r3=Hn(),$0=an(),n3=it(),Tt=(ce(),D(wt)),o3=Po(),Go=tr(),q0=Pt(),G0=Wp(),s3=B(e=>Object.assign(e,{useDualstackEndpoint:e.useDualstackEndpoint??!1,useFipsEndpoint:e.useFipsEndpoint??!1,defaultSigningName:"awsssoportal"}),"resolveClientEndpointParameters"),uc={UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}},i3=D0(),V0=$o(),z0=q(),A=M(),a3=B(e=>{let t=e.httpAuthSchemes,r=e.httpAuthSchemeProvider,n=e.credentials;return{setHttpAuthScheme(o){let s=t.findIndex(i=>i.schemeId===o.schemeId);s===-1?t.push(o):t.splice(s,1,o)},httpAuthSchemes(){return t},setHttpAuthSchemeProvider(o){r=o},httpAuthSchemeProvider(){return r},setCredentials(o){n=o},credentials(){return n}}},"getHttpAuthExtensionConfiguration"),c3=B(e=>({httpAuthSchemes:e.httpAuthSchemes(),httpAuthSchemeProvider:e.httpAuthSchemeProvider(),credentials:e.credentials()}),"resolveHttpAuthRuntimeConfig"),l3=B((e,t)=>{let r=Object.assign((0,V0.getAwsRegionExtensionConfiguration)(e),(0,A.getDefaultExtensionConfiguration)(e),(0,z0.getHttpHandlerExtensionConfiguration)(e),a3(e));return t.forEach(n=>n.configure(r)),Object.assign(e,(0,V0.resolveAwsRegionExtensionConfiguration)(r),(0,A.resolveDefaultRuntimeConfig)(r),(0,z0.resolveHttpHandlerRuntimeConfig)(r),c3(r))},"resolveRuntimeExtensions"),pc=class extends A.Client{static{B(this,"SSOClient")}config;constructor(...[e]){let t=(0,i3.getRuntimeConfig)(e||{});super(t),this.initConfig=t;let r=s3(t),n=(0,$0.resolveUserAgentConfig)(r),o=(0,q0.resolveRetryConfig)(n),s=(0,n3.resolveRegionConfig)(o),i=(0,j0.resolveHostHeaderConfig)(s),a=(0,Go.resolveEndpointConfig)(i),l=(0,G0.resolveHttpAuthSchemeConfig)(a),d=l3(l,e?.extensions||[]);this.config=d,this.middlewareStack.use((0,$0.getUserAgentPlugin)(this.config)),this.middlewareStack.use((0,q0.getRetryPlugin)(this.config)),this.middlewareStack.use((0,o3.getContentLengthPlugin)(this.config)),this.middlewareStack.use((0,j0.getHostHeaderPlugin)(this.config)),this.middlewareStack.use((0,t3.getLoggerPlugin)(this.config)),this.middlewareStack.use((0,r3.getRecursionDetectionPlugin)(this.config)),this.middlewareStack.use((0,Tt.getHttpAuthSchemeEndpointRuleSetPlugin)(this.config,{httpAuthSchemeParametersProvider:G0.defaultSSOHttpAuthSchemeParametersProvider,identityProviderConfigProvider:B(async u=>new Tt.DefaultIdentityProviderConfig({"aws.auth#sigv4":u.credentials}),"identityProviderConfigProvider")})),this.middlewareStack.use((0,Tt.getHttpSigningPlugin)(this.config))}destroy(){super.destroy()}},fc=Bt(),Sn=class K0 extends A.ServiceException{static{B(this,"SSOServiceException")}constructor(t){super(t),Object.setPrototypeOf(this,K0.prototype)}},Y0=class J0 extends Sn{static{B(this,"InvalidRequestException")}name="InvalidRequestException";$fault="client";constructor(t){super({name:"InvalidRequestException",$fault:"client",...t}),Object.setPrototypeOf(this,J0.prototype)}},X0=class Q0 extends Sn{static{B(this,"ResourceNotFoundException")}name="ResourceNotFoundException";$fault="client";constructor(t){super({name:"ResourceNotFoundException",$fault:"client",...t}),Object.setPrototypeOf(this,Q0.prototype)}},Z0=class ex extends Sn{static{B(this,"TooManyRequestsException")}name="TooManyRequestsException";$fault="client";constructor(t){super({name:"TooManyRequestsException",$fault:"client",...t}),Object.setPrototypeOf(this,ex.prototype)}},tx=class rx extends Sn{static{B(this,"UnauthorizedException")}name="UnauthorizedException";$fault="client";constructor(t){super({name:"UnauthorizedException",$fault:"client",...t}),Object.setPrototypeOf(this,rx.prototype)}},nx=B(e=>({...e,...e.accessToken&&{accessToken:A.SENSITIVE_STRING}}),"GetRoleCredentialsRequestFilterSensitiveLog"),ox=B(e=>({...e,...e.secretAccessKey&&{secretAccessKey:A.SENSITIVE_STRING},...e.sessionToken&&{sessionToken:A.SENSITIVE_STRING}}),"RoleCredentialsFilterSensitiveLog"),sx=B(e=>({...e,...e.roleCredentials&&{roleCredentials:ox(e.roleCredentials)}}),"GetRoleCredentialsResponseFilterSensitiveLog"),ix=B(e=>({...e,...e.accessToken&&{accessToken:A.SENSITIVE_STRING}}),"ListAccountRolesRequestFilterSensitiveLog"),ax=B(e=>({...e,...e.accessToken&&{accessToken:A.SENSITIVE_STRING}}),"ListAccountsRequestFilterSensitiveLog"),cx=B(e=>({...e,...e.accessToken&&{accessToken:A.SENSITIVE_STRING}}),"LogoutRequestFilterSensitiveLog"),qo=(ne(),D(nt)),d3=B(async(e,t)=>{let r=(0,Tt.requestBuilder)(e,t),n=(0,A.map)({},A.isSerializableHeaderValue,{[hc]:e[gc]});r.bp("/federation/credentials");let o=(0,A.map)({[C3]:[,(0,A.expectNonNull)(e[b3],"roleName")],[dx]:[,(0,A.expectNonNull)(e[lx],"accountId")]});return r.m("GET").h(n).q(o).b(void 0),r.build()},"se_GetRoleCredentialsCommand"),u3=B(async(e,t)=>{let r=(0,Tt.requestBuilder)(e,t),n=(0,A.map)({},A.isSerializableHeaderValue,{[hc]:e[gc]});r.bp("/assignment/roles");let o=(0,A.map)({[mx]:[,e[fx]],[px]:[()=>e.maxResults!==void 0,()=>e[ux].toString()],[dx]:[,(0,A.expectNonNull)(e[lx],"accountId")]});return r.m("GET").h(n).q(o).b(void 0),r.build()},"se_ListAccountRolesCommand"),p3=B(async(e,t)=>{let r=(0,Tt.requestBuilder)(e,t),n=(0,A.map)({},A.isSerializableHeaderValue,{[hc]:e[gc]});r.bp("/assignment/accounts");let o=(0,A.map)({[mx]:[,e[fx]],[px]:[()=>e.maxResults!==void 0,()=>e[ux].toString()]});return r.m("GET").h(n).q(o).b(void 0),r.build()},"se_ListAccountsCommand"),f3=B(async(e,t)=>{let r=(0,Tt.requestBuilder)(e,t),n=(0,A.map)({},A.isSerializableHeaderValue,{[hc]:e[gc]});return r.bp("/logout"),r.m("POST").h(n).b(void 0),r.build()},"se_LogoutCommand"),m3=B(async(e,t)=>{if(e.statusCode!==200&&e.statusCode>=300)return mc(e,t);let r=(0,A.map)({$metadata:ir(e)}),n=(0,A.expectNonNull)((0,A.expectObject)(await(0,qo.parseJsonBody)(e.body,t)),"body"),o=(0,A.take)(n,{roleCredentials:A._json});return Object.assign(r,o),r},"de_GetRoleCredentialsCommand"),g3=B(async(e,t)=>{if(e.statusCode!==200&&e.statusCode>=300)return mc(e,t);let r=(0,A.map)({$metadata:ir(e)}),n=(0,A.expectNonNull)((0,A.expectObject)(await(0,qo.parseJsonBody)(e.body,t)),"body"),o=(0,A.take)(n,{nextToken:A.expectString,roleList:A._json});return Object.assign(r,o),r},"de_ListAccountRolesCommand"),h3=B(async(e,t)=>{if(e.statusCode!==200&&e.statusCode>=300)return mc(e,t);let r=(0,A.map)({$metadata:ir(e)}),n=(0,A.expectNonNull)((0,A.expectObject)(await(0,qo.parseJsonBody)(e.body,t)),"body"),o=(0,A.take)(n,{accountList:A._json,nextToken:A.expectString});return Object.assign(r,o),r},"de_ListAccountsCommand"),y3=B(async(e,t)=>{if(e.statusCode!==200&&e.statusCode>=300)return mc(e,t);let r=(0,A.map)({$metadata:ir(e)});return await(0,A.collectBody)(e.body,t),r},"de_LogoutCommand"),mc=B(async(e,t)=>{let r={...e,body:await(0,qo.parseJsonErrorBody)(e.body,t)},n=(0,qo.loadRestJsonErrorCode)(e,r.body);switch(n){case"InvalidRequestException":case"com.amazonaws.sso#InvalidRequestException":throw await v3(r,t);case"ResourceNotFoundException":case"com.amazonaws.sso#ResourceNotFoundException":throw await S3(r,t);case"TooManyRequestsException":case"com.amazonaws.sso#TooManyRequestsException":throw await E3(r,t);case"UnauthorizedException":case"com.amazonaws.sso#UnauthorizedException":throw await w3(r,t);default:let o=r.body;return _3({output:e,parsedBody:o,errorCode:n})}},"de_CommandError"),_3=(0,A.withBaseException)(Sn),v3=B(async(e,t)=>{let r=(0,A.map)({}),n=e.body,o=(0,A.take)(n,{message:A.expectString});Object.assign(r,o);let s=new Y0({$metadata:ir(e),...r});return(0,A.decorateServiceException)(s,e.body)},"de_InvalidRequestExceptionRes"),S3=B(async(e,t)=>{let r=(0,A.map)({}),n=e.body,o=(0,A.take)(n,{message:A.expectString});Object.assign(r,o);let s=new X0({$metadata:ir(e),...r});return(0,A.decorateServiceException)(s,e.body)},"de_ResourceNotFoundExceptionRes"),E3=B(async(e,t)=>{let r=(0,A.map)({}),n=e.body,o=(0,A.take)(n,{message:A.expectString});Object.assign(r,o);let s=new Z0({$metadata:ir(e),...r});return(0,A.decorateServiceException)(s,e.body)},"de_TooManyRequestsExceptionRes"),w3=B(async(e,t)=>{let r=(0,A.map)({}),n=e.body,o=(0,A.take)(n,{message:A.expectString});Object.assign(r,o);let s=new tx({$metadata:ir(e),...r});return(0,A.decorateServiceException)(s,e.body)},"de_UnauthorizedExceptionRes"),ir=B(e=>({httpStatusCode:e.statusCode,requestId:e.headers["x-amzn-requestid"]??e.headers["x-amzn-request-id"]??e.headers["x-amz-request-id"],extendedRequestId:e.headers["x-amz-id-2"],cfId:e.headers["x-amz-cf-id"]}),"deserializeMetadata"),lx="accountId",gc="accessToken",dx="account_id",ux="maxResults",px="max_result",fx="nextToken",mx="next_token",b3="roleName",C3="role_name",hc="x-amz-sso_bearer_token",gx=class extends A.Command.classBuilder().ep(uc).m(function(e,t,r,n){return[(0,fc.getSerdePlugin)(r,this.serialize,this.deserialize),(0,Go.getEndpointPlugin)(r,e.getEndpointParameterInstructions())]}).s("SWBPortalService","GetRoleCredentials",{}).n("SSOClient","GetRoleCredentialsCommand").f(nx,sx).ser(d3).de(m3).build(){static{B(this,"GetRoleCredentialsCommand")}},tf=class extends A.Command.classBuilder().ep(uc).m(function(e,t,r,n){return[(0,fc.getSerdePlugin)(r,this.serialize,this.deserialize),(0,Go.getEndpointPlugin)(r,e.getEndpointParameterInstructions())]}).s("SWBPortalService","ListAccountRoles",{}).n("SSOClient","ListAccountRolesCommand").f(ix,void 0).ser(u3).de(g3).build(){static{B(this,"ListAccountRolesCommand")}},rf=class extends A.Command.classBuilder().ep(uc).m(function(e,t,r,n){return[(0,fc.getSerdePlugin)(r,this.serialize,this.deserialize),(0,Go.getEndpointPlugin)(r,e.getEndpointParameterInstructions())]}).s("SWBPortalService","ListAccounts",{}).n("SSOClient","ListAccountsCommand").f(ax,void 0).ser(p3).de(h3).build(){static{B(this,"ListAccountsCommand")}},hx=class extends A.Command.classBuilder().ep(uc).m(function(e,t,r,n){return[(0,fc.getSerdePlugin)(r,this.serialize,this.deserialize),(0,Go.getEndpointPlugin)(r,e.getEndpointParameterInstructions())]}).s("SWBPortalService","Logout",{}).n("SSOClient","LogoutCommand").f(cx,void 0).ser(f3).de(y3).build(){static{B(this,"LogoutCommand")}},x3={GetRoleCredentialsCommand:gx,ListAccountRolesCommand:tf,ListAccountsCommand:rf,LogoutCommand:hx},yx=class extends pc{static{B(this,"SSO")}};(0,A.createAggregatedClient)(x3,yx);var P3=(0,Tt.createPaginator)(pc,tf,"nextToken","nextToken","maxResults"),A3=(0,Tt.createPaginator)(pc,rf,"nextToken","nextToken","maxResults")});function T3(e){return{schemeId:"aws.auth#sigv4",signingProperties:{name:"sso-oauth",region:e.region},propertiesExtractor:(t,r)=>({signingProperties:{config:t,context:r}})}}function O3(e){return{schemeId:"smithy.api#noAuth"}}var Vo,Sx,Ex,wx,nf=y(()=>{c();ne();Vo=E(Ge()),Sx=async(e,t,r)=>({operation:(0,Vo.getSmithyContext)(t).operation,region:await(0,Vo.normalizeProvider)(e.region)()||(()=>{throw new Error("expected `region` to be configured for `aws.auth#sigv4`")})()});Ex=e=>{let t=[];switch(e.operation){case"CreateToken":{t.push(O3(e));break}default:t.push(T3(e))}return t},wx=e=>{let t=xr(e);return Object.assign(t,{authSchemePreference:(0,Vo.normalizeProvider)(e.authSchemePreference??[])})}});var bx,Cx,of=y(()=>{c();bx=e=>Object.assign(e,{useDualstackEndpoint:e.useDualstackEndpoint??!1,useFipsEndpoint:e.useFipsEndpoint??!1,defaultSigningName:"sso-oauth"}),Cx={UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}});var yc,sf=y(()=>{yc={name:"@aws-sdk/nested-clients",version:"3.858.0",description:"Nested clients for AWS SDK packages.",main:"./dist-cjs/index.js",module:"./dist-es/index.js",types:"./dist-types/index.d.ts",scripts:{build:"yarn lint && concurrently 'yarn:build:cjs' 'yarn:build:es' 'yarn:build:types'","build:cjs":"node ../../scripts/compilation/inline nested-clients","build:es":"tsc -p tsconfig.es.json","build:include:deps":"lerna run --scope $npm_package_name --include-dependencies build","build:types":"tsc -p tsconfig.types.json","build:types:downlevel":"downlevel-dts dist-types dist-types/ts3.4",clean:"rimraf ./dist-* && rimraf *.tsbuildinfo",lint:"node ../../scripts/validation/submodules-linter.js --pkg nested-clients",test:"yarn g:vitest run","test:watch":"yarn g:vitest watch"},engines:{node:">=18.0.0"},author:{name:"AWS SDK for JavaScript Team",url:"https://aws.amazon.com/javascript/"},license:"Apache-2.0",dependencies:{"@aws-crypto/sha256-browser":"5.2.0","@aws-crypto/sha256-js":"5.2.0","@aws-sdk/core":"3.858.0","@aws-sdk/middleware-host-header":"3.840.0","@aws-sdk/middleware-logger":"3.840.0","@aws-sdk/middleware-recursion-detection":"3.840.0","@aws-sdk/middleware-user-agent":"3.858.0","@aws-sdk/region-config-resolver":"3.840.0","@aws-sdk/types":"3.840.0","@aws-sdk/util-endpoints":"3.848.0","@aws-sdk/util-user-agent-browser":"3.840.0","@aws-sdk/util-user-agent-node":"3.858.0","@smithy/config-resolver":"^4.1.4","@smithy/core":"^3.7.2","@smithy/fetch-http-handler":"^5.1.0","@smithy/hash-node":"^4.0.4","@smithy/invalid-dependency":"^4.0.4","@smithy/middleware-content-length":"^4.0.4","@smithy/middleware-endpoint":"^4.1.17","@smithy/middleware-retry":"^4.1.18","@smithy/middleware-serde":"^4.0.8","@smithy/middleware-stack":"^4.0.4","@smithy/node-config-provider":"^4.1.3","@smithy/node-http-handler":"^4.1.0","@smithy/protocol-http":"^5.1.2","@smithy/smithy-client":"^4.4.9","@smithy/types":"^4.3.1","@smithy/url-parser":"^4.0.4","@smithy/util-base64":"^4.0.0","@smithy/util-body-length-browser":"^4.0.0","@smithy/util-body-length-node":"^4.0.0","@smithy/util-defaults-mode-browser":"^4.0.25","@smithy/util-defaults-mode-node":"^4.0.25","@smithy/util-endpoints":"^3.0.6","@smithy/util-middleware":"^4.0.4","@smithy/util-retry":"^4.0.6","@smithy/util-utf8":"^4.0.0",tslib:"^2.6.2"},devDependencies:{concurrently:"7.0.0","downlevel-dts":"0.10.1",rimraf:"3.0.2",typescript:"~5.8.3"},typesVersions:{"<4.0":{"dist-types/*":["dist-types/ts3.4/*"]}},files:["./sso-oidc.d.ts","./sso-oidc.js","./sts.d.ts","./sts.js","dist-*/**"],browser:{"./dist-es/submodules/sso-oidc/runtimeConfig":"./dist-es/submodules/sso-oidc/runtimeConfig.browser","./dist-es/submodules/sts/runtimeConfig":"./dist-es/submodules/sts/runtimeConfig.browser"},"react-native":{},homepage:"https://github.com/aws/aws-sdk-js-v3/tree/main/packages/nested-clients",repository:{type:"git",url:"https://github.com/aws/aws-sdk-js-v3.git",directory:"packages/nested-clients"},exports:{"./sso-oidc":{types:"./dist-types/submodules/sso-oidc/index.d.ts",module:"./dist-es/submodules/sso-oidc/index.js",node:"./dist-cjs/submodules/sso-oidc/index.js",import:"./dist-es/submodules/sso-oidc/index.js",require:"./dist-cjs/submodules/sso-oidc/index.js"},"./sts":{types:"./dist-types/submodules/sts/index.d.ts",module:"./dist-es/submodules/sts/index.js",node:"./dist-cjs/submodules/sts/index.js",import:"./dist-es/submodules/sts/index.js",require:"./dist-cjs/submodules/sts/index.js"}}}});var Dx,je,xx,zo,En,wn,Ot,af,cf,Px,Ax,Tx,Mx,Fx,He,Ox,Bx,Rx,Ix,Nx,kx,I3,Lx,Ux=y(()=>{c();Dx="required",je="argv",xx="isSet",zo="booleanEquals",En="error",wn="endpoint",Ot="tree",af="PartitionResult",cf="getAttr",Px={[Dx]:!1,type:"String"},Ax={[Dx]:!0,default:!1,type:"Boolean"},Tx={ref:"Endpoint"},Mx={fn:zo,[je]:[{ref:"UseFIPS"},!0]},Fx={fn:zo,[je]:[{ref:"UseDualStack"},!0]},He={},Ox={fn:cf,[je]:[{ref:af},"supportsFIPS"]},Bx={ref:af},Rx={fn:zo,[je]:[!0,{fn:cf,[je]:[Bx,"supportsDualStack"]}]},Ix=[Mx],Nx=[Fx],kx=[{ref:"Region"}],I3={version:"1.0",parameters:{Region:Px,UseDualStack:Ax,UseFIPS:Ax,Endpoint:Px},rules:[{conditions:[{fn:xx,[je]:[Tx]}],rules:[{conditions:Ix,error:"Invalid Configuration: FIPS and custom endpoint are not supported",type:En},{conditions:Nx,error:"Invalid Configuration: Dualstack and custom endpoint are not supported",type:En},{endpoint:{url:Tx,properties:He,headers:He},type:wn}],type:Ot},{conditions:[{fn:xx,[je]:kx}],rules:[{conditions:[{fn:"aws.partition",[je]:kx,assign:af}],rules:[{conditions:[Mx,Fx],rules:[{conditions:[{fn:zo,[je]:[!0,Ox]},Rx],rules:[{endpoint:{url:"https://oidc-fips.{Region}.{PartitionResult#dualStackDnsSuffix}",properties:He,headers:He},type:wn}],type:Ot},{error:"FIPS and DualStack are enabled, but this partition does not support one or both",type:En}],type:Ot},{conditions:Ix,rules:[{conditions:[{fn:zo,[je]:[Ox,!0]}],rules:[{conditions:[{fn:"stringEquals",[je]:[{fn:cf,[je]:[Bx,"name"]},"aws-us-gov"]}],endpoint:{url:"https://oidc.{Region}.amazonaws.com",properties:He,headers:He},type:wn},{endpoint:{url:"https://oidc-fips.{Region}.{PartitionResult#dnsSuffix}",properties:He,headers:He},type:wn}],type:Ot},{error:"FIPS is enabled but this partition does not support FIPS",type:En}],type:Ot},{conditions:Nx,rules:[{conditions:[Rx],rules:[{endpoint:{url:"https://oidc.{Region}.{PartitionResult#dualStackDnsSuffix}",properties:He,headers:He},type:wn}],type:Ot},{error:"DualStack is enabled but this partition does not support DualStack",type:En}],type:Ot},{endpoint:{url:"https://oidc.{Region}.{PartitionResult#dnsSuffix}",properties:He,headers:He},type:wn}],type:Ot}],type:Ot},{error:"Invalid Configuration: Missing Region",type:En}]},Lx=I3});var Hx,bn,N3,jx,$x=y(()=>{c();Hx=E(Zr()),bn=E(Qr());Ux();N3=new bn.EndpointCache({size:50,params:["Endpoint","Region","UseDualStack","UseFIPS"]}),jx=(e,t={})=>N3.get(e,()=>(0,bn.resolveEndpoint)(Lx,{endpointParams:e,logger:t.logger}));bn.customEndpointFunctions.aws=Hx.awsEndpointFunctions});var qx,Gx,_c,vc,Vx,zx=y(()=>{c();ne();ce();qx=E(M()),Gx=E(jt()),_c=E(ge()),vc=E(ie());nf();$x();Vx=e=>({apiVersion:"2019-06-10",base64Decoder:e?.base64Decoder??_c.fromBase64,base64Encoder:e?.base64Encoder??_c.toBase64,disableHostPrefix:e?.disableHostPrefix??!1,endpointProvider:e?.endpointProvider??jx,extensions:e?.extensions??[],httpAuthSchemeProvider:e?.httpAuthSchemeProvider??Ex,httpAuthSchemes:e?.httpAuthSchemes??[{schemeId:"aws.auth#sigv4",identityProvider:t=>t.getIdentityProvider("aws.auth#sigv4"),signer:new be},{schemeId:"smithy.api#noAuth",identityProvider:t=>t.getIdentityProvider("smithy.api#noAuth")||(async()=>({})),signer:new Et}],logger:e?.logger??new qx.NoOpLogger,serviceId:e?.serviceId??"SSO OIDC",urlParser:e?.urlParser??Gx.parseUrl,utf8Decoder:e?.utf8Decoder??vc.fromUtf8,utf8Encoder:e?.utf8Encoder??vc.toUtf8})});var Sc,cr,Wx,Ec,ar,wc,Kx,Yx,Jx,Xx,Qx,Zx,eP=y(()=>{c();sf();ne();Sc=E(Fo()),cr=E(it()),Wx=E(Bo()),Ec=E(Pt()),ar=E(er()),wc=E(mr()),Kx=E(Lo()),Yx=E(mn());zx();Jx=E(M()),Xx=E(jo()),Qx=E(M()),Zx=e=>{(0,Qx.emitWarningIfUnsupportedVersion)(process.version);let t=(0,Xx.resolveDefaultsModeConfig)(e),r=()=>t().then(Jx.loadConfigsForDefaultMode),n=Vx(e);en(process.version);let o={profile:e?.profile,logger:n.logger};return{...n,...e,runtime:"node",defaultsMode:t,authSchemePreference:e?.authSchemePreference??(0,ar.loadConfig)(nn,o),bodyLengthChecker:e?.bodyLengthChecker??Kx.calculateBodyLength,defaultUserAgentProvider:e?.defaultUserAgentProvider??(0,Sc.createDefaultUserAgentProvider)({serviceId:n.serviceId,clientVersion:yc.version}),maxAttempts:e?.maxAttempts??(0,ar.loadConfig)(Ec.NODE_MAX_ATTEMPT_CONFIG_OPTIONS,e),region:e?.region??(0,ar.loadConfig)(cr.NODE_REGION_CONFIG_OPTIONS,{...cr.NODE_REGION_CONFIG_FILE_OPTIONS,...o}),requestHandler:wc.NodeHttpHandler.create(e?.requestHandler??r),retryMode:e?.retryMode??(0,ar.loadConfig)({...Ec.NODE_RETRY_MODE_CONFIG_OPTIONS,default:async()=>(await r()).retryMode||Yx.DEFAULT_RETRY_MODE},e),sha256:e?.sha256??Wx.Hash.bind(null,"sha256"),streamCollector:e?.streamCollector??wc.streamCollector,useDualstackEndpoint:e?.useDualstackEndpoint??(0,ar.loadConfig)(cr.NODE_USE_DUALSTACK_ENDPOINT_CONFIG_OPTIONS,o),useFipsEndpoint:e?.useFipsEndpoint??(0,ar.loadConfig)(cr.NODE_USE_FIPS_ENDPOINT_CONFIG_OPTIONS,o),userAgentAppId:e?.userAgentAppId??(0,ar.loadConfig)(Sc.NODE_APP_ID_CONFIG_OPTIONS,o)}}});var tP,rP,nP=y(()=>{c();tP=e=>{let t=e.httpAuthSchemes,r=e.httpAuthSchemeProvider,n=e.credentials;return{setHttpAuthScheme(o){let s=t.findIndex(i=>i.schemeId===o.schemeId);s===-1?t.push(o):t.splice(s,1,o)},httpAuthSchemes(){return t},setHttpAuthSchemeProvider(o){r=o},httpAuthSchemeProvider(){return r},setCredentials(o){n=o},credentials(){return n}}},rP=e=>({httpAuthSchemes:e.httpAuthSchemes(),httpAuthSchemeProvider:e.httpAuthSchemeProvider(),credentials:e.credentials()})});var bc,Cc,xc,oP,sP=y(()=>{c();bc=E($o()),Cc=E(q()),xc=E(M());nP();oP=(e,t)=>{let r=Object.assign((0,bc.getAwsRegionExtensionConfiguration)(e),(0,xc.getDefaultExtensionConfiguration)(e),(0,Cc.getHttpHandlerExtensionConfiguration)(e),tP(e));return t.forEach(n=>n.configure(r)),Object.assign(e,(0,bc.resolveAwsRegionExtensionConfiguration)(r),(0,xc.resolveDefaultRuntimeConfig)(r),(0,Cc.resolveHttpHandlerRuntimeConfig)(r),rP(r))}});var Pc,iP,aP,Ac,cP,lP,dP,Tc,lf,Wo,df=y(()=>{c();Pc=E(Ln()),iP=E(Un()),aP=E(Hn()),Ac=E(an()),cP=E(it());ce();lP=E(Po()),dP=E(tr()),Tc=E(Pt()),lf=E(M());nf();of();eP();sP();Wo=class extends lf.Client{config;constructor(...[t]){let r=Zx(t||{});super(r),this.initConfig=r;let n=bx(r),o=(0,Ac.resolveUserAgentConfig)(n),s=(0,Tc.resolveRetryConfig)(o),i=(0,cP.resolveRegionConfig)(s),a=(0,Pc.resolveHostHeaderConfig)(i),l=(0,dP.resolveEndpointConfig)(a),d=wx(l),u=oP(d,t?.extensions||[]);this.config=u,this.middlewareStack.use((0,Ac.getUserAgentPlugin)(this.config)),this.middlewareStack.use((0,Tc.getRetryPlugin)(this.config)),this.middlewareStack.use((0,lP.getContentLengthPlugin)(this.config)),this.middlewareStack.use((0,Pc.getHostHeaderPlugin)(this.config)),this.middlewareStack.use((0,iP.getLoggerPlugin)(this.config)),this.middlewareStack.use((0,aP.getRecursionDetectionPlugin)(this.config)),this.middlewareStack.use($n(this.config,{httpAuthSchemeParametersProvider:Sx,identityProviderConfigProvider:async f=>new br({"aws.auth#sigv4":f.credentials})})),this.middlewareStack.use(qn(this.config))}destroy(){super.destroy()}}});var uP,oe,Oc=y(()=>{c();uP=E(M()),oe=class e extends uP.ServiceException{constructor(t){super(t),Object.setPrototypeOf(this,e.prototype)}}});var Ur,Ko,Yo,uf,pf,Jo,Xo,Qo,Zo,es,ts,rs,ns,os,Rc=y(()=>{c();Ur=E(M());Oc();Ko=class e extends oe{name="AccessDeniedException";$fault="client";error;error_description;constructor(t){super({name:"AccessDeniedException",$fault:"client",...t}),Object.setPrototypeOf(this,e.prototype),this.error=t.error,this.error_description=t.error_description}},Yo=class e extends oe{name="AuthorizationPendingException";$fault="client";error;error_description;constructor(t){super({name:"AuthorizationPendingException",$fault:"client",...t}),Object.setPrototypeOf(this,e.prototype),this.error=t.error,this.error_description=t.error_description}},uf=e=>({...e,...e.clientSecret&&{clientSecret:Ur.SENSITIVE_STRING},...e.refreshToken&&{refreshToken:Ur.SENSITIVE_STRING},...e.codeVerifier&&{codeVerifier:Ur.SENSITIVE_STRING}}),pf=e=>({...e,...e.accessToken&&{accessToken:Ur.SENSITIVE_STRING},...e.refreshToken&&{refreshToken:Ur.SENSITIVE_STRING},...e.idToken&&{idToken:Ur.SENSITIVE_STRING}}),Jo=class e extends oe{name="ExpiredTokenException";$fault="client";error;error_description;constructor(t){super({name:"ExpiredTokenException",$fault:"client",...t}),Object.setPrototypeOf(this,e.prototype),this.error=t.error,this.error_description=t.error_description}},Xo=class e extends oe{name="InternalServerException";$fault="server";error;error_description;constructor(t){super({name:"InternalServerException",$fault:"server",...t}),Object.setPrototypeOf(this,e.prototype),this.error=t.error,this.error_description=t.error_description}},Qo=class e extends oe{name="InvalidClientException";$fault="client";error;error_description;constructor(t){super({name:"InvalidClientException",$fault:"client",...t}),Object.setPrototypeOf(this,e.prototype),this.error=t.error,this.error_description=t.error_description}},Zo=class e extends oe{name="InvalidGrantException";$fault="client";error;error_description;constructor(t){super({name:"InvalidGrantException",$fault:"client",...t}),Object.setPrototypeOf(this,e.prototype),this.error=t.error,this.error_description=t.error_description}},es=class e extends oe{name="InvalidRequestException";$fault="client";error;error_description;constructor(t){super({name:"InvalidRequestException",$fault:"client",...t}),Object.setPrototypeOf(this,e.prototype),this.error=t.error,this.error_description=t.error_description}},ts=class e extends oe{name="InvalidScopeException";$fault="client";error;error_description;constructor(t){super({name:"InvalidScopeException",$fault:"client",...t}),Object.setPrototypeOf(this,e.prototype),this.error=t.error,this.error_description=t.error_description}},rs=class e extends oe{name="SlowDownException";$fault="client";error;error_description;constructor(t){super({name:"SlowDownException",$fault:"client",...t}),Object.setPrototypeOf(this,e.prototype),this.error=t.error,this.error_description=t.error_description}},ns=class e extends oe{name="UnauthorizedClientException";$fault="client";error;error_description;constructor(t){super({name:"UnauthorizedClientException",$fault:"client",...t}),Object.setPrototypeOf(this,e.prototype),this.error=t.error,this.error_description=t.error_description}},os=class e extends oe{name="UnsupportedGrantTypeException";$fault="client";error;error_description;constructor(t){super({name:"UnsupportedGrantTypeException",$fault:"client",...t}),Object.setPrototypeOf(this,e.prototype),this.error=t.error,this.error_description=t.error_description}}});var x,pP,fP,k3,D3,M3,F3,B3,L3,U3,H3,j3,$3,q3,G3,V3,$e,mP=y(()=>{c();ne();ce();x=E(M());Rc();Oc();pP=async(e,t)=>{let r=io(e,t),n={"content-type":"application/json"};r.bp("/token");let o;return o=JSON.stringify((0,x.take)(e,{clientId:[],clientSecret:[],code:[],codeVerifier:[],deviceCode:[],grantType:[],redirectUri:[],refreshToken:[],scope:s=>(0,x._json)(s)})),r.m("POST").h(n).b(o),r.build()},fP=async(e,t)=>{if(e.statusCode!==200&&e.statusCode>=300)return k3(e,t);let r=(0,x.map)({$metadata:$e(e)}),n=(0,x.expectNonNull)((0,x.expectObject)(await sn(e.body,t)),"body"),o=(0,x.take)(n,{accessToken:x.expectString,expiresIn:x.expectInt32,idToken:x.expectString,refreshToken:x.expectString,tokenType:x.expectString});return Object.assign(r,o),r},k3=async(e,t)=>{let r={...e,body:await xu(e.body,t)},n=Ar(e,r.body);switch(n){case"AccessDeniedException":case"com.amazonaws.ssooidc#AccessDeniedException":throw await M3(r,t);case"AuthorizationPendingException":case"com.amazonaws.ssooidc#AuthorizationPendingException":throw await F3(r,t);case"ExpiredTokenException":case"com.amazonaws.ssooidc#ExpiredTokenException":throw await B3(r,t);case"InternalServerException":case"com.amazonaws.ssooidc#InternalServerException":throw await L3(r,t);case"InvalidClientException":case"com.amazonaws.ssooidc#InvalidClientException":throw await U3(r,t);case"InvalidGrantException":case"com.amazonaws.ssooidc#InvalidGrantException":throw await H3(r,t);case"InvalidRequestException":case"com.amazonaws.ssooidc#InvalidRequestException":throw await j3(r,t);case"InvalidScopeException":case"com.amazonaws.ssooidc#InvalidScopeException":throw await $3(r,t);case"SlowDownException":case"com.amazonaws.ssooidc#SlowDownException":throw await q3(r,t);case"UnauthorizedClientException":case"com.amazonaws.ssooidc#UnauthorizedClientException":throw await G3(r,t);case"UnsupportedGrantTypeException":case"com.amazonaws.ssooidc#UnsupportedGrantTypeException":throw await V3(r,t);default:let o=r.body;return D3({output:e,parsedBody:o,errorCode:n})}},D3=(0,x.withBaseException)(oe),M3=async(e,t)=>{let r=(0,x.map)({}),n=e.body,o=(0,x.take)(n,{error:x.expectString,error_description:x.expectString});Object.assign(r,o);let s=new Ko({$metadata:$e(e),...r});return(0,x.decorateServiceException)(s,e.body)},F3=async(e,t)=>{let r=(0,x.map)({}),n=e.body,o=(0,x.take)(n,{error:x.expectString,error_description:x.expectString});Object.assign(r,o);let s=new Yo({$metadata:$e(e),...r});return(0,x.decorateServiceException)(s,e.body)},B3=async(e,t)=>{let r=(0,x.map)({}),n=e.body,o=(0,x.take)(n,{error:x.expectString,error_description:x.expectString});Object.assign(r,o);let s=new Jo({$metadata:$e(e),...r});return(0,x.decorateServiceException)(s,e.body)},L3=async(e,t)=>{let r=(0,x.map)({}),n=e.body,o=(0,x.take)(n,{error:x.expectString,error_description:x.expectString});Object.assign(r,o);let s=new Xo({$metadata:$e(e),...r});return(0,x.decorateServiceException)(s,e.body)},U3=async(e,t)=>{let r=(0,x.map)({}),n=e.body,o=(0,x.take)(n,{error:x.expectString,error_description:x.expectString});Object.assign(r,o);let s=new Qo({$metadata:$e(e),...r});return(0,x.decorateServiceException)(s,e.body)},H3=async(e,t)=>{let r=(0,x.map)({}),n=e.body,o=(0,x.take)(n,{error:x.expectString,error_description:x.expectString});Object.assign(r,o);let s=new Zo({$metadata:$e(e),...r});return(0,x.decorateServiceException)(s,e.body)},j3=async(e,t)=>{let r=(0,x.map)({}),n=e.body,o=(0,x.take)(n,{error:x.expectString,error_description:x.expectString});Object.assign(r,o);let s=new es({$metadata:$e(e),...r});return(0,x.decorateServiceException)(s,e.body)},$3=async(e,t)=>{let r=(0,x.map)({}),n=e.body,o=(0,x.take)(n,{error:x.expectString,error_description:x.expectString});Object.assign(r,o);let s=new ts({$metadata:$e(e),...r});return(0,x.decorateServiceException)(s,e.body)},q3=async(e,t)=>{let r=(0,x.map)({}),n=e.body,o=(0,x.take)(n,{error:x.expectString,error_description:x.expectString});Object.assign(r,o);let s=new rs({$metadata:$e(e),...r});return(0,x.decorateServiceException)(s,e.body)},G3=async(e,t)=>{let r=(0,x.map)({}),n=e.body,o=(0,x.take)(n,{error:x.expectString,error_description:x.expectString});Object.assign(r,o);let s=new ns({$metadata:$e(e),...r});return(0,x.decorateServiceException)(s,e.body)},V3=async(e,t)=>{let r=(0,x.map)({}),n=e.body,o=(0,x.take)(n,{error:x.expectString,error_description:x.expectString});Object.assign(r,o);let s=new os({$metadata:$e(e),...r});return(0,x.decorateServiceException)(s,e.body)},$e=e=>({httpStatusCode:e.statusCode,requestId:e.headers["x-amzn-requestid"]??e.headers["x-amzn-request-id"]??e.headers["x-amz-request-id"],extendedRequestId:e.headers["x-amz-id-2"],cfId:e.headers["x-amz-cf-id"]})});var gP,hP,ff,ss,mf=y(()=>{c();gP=E(tr()),hP=E(Bt()),ff=E(M());of();Rc();mP();ss=class extends ff.Command.classBuilder().ep(Cx).m(function(t,r,n,o){return[(0,hP.getSerdePlugin)(n,this.serialize,this.deserialize),(0,gP.getEndpointPlugin)(n,t.getEndpointParameterInstructions())]}).s("AWSSSOOIDCService","CreateToken",{}).n("SSOOIDCClient","CreateTokenCommand").f(uf,pf).ser(pP).de(fP).build(){}});var yP,z3,Ic,_P=y(()=>{c();yP=E(M());mf();df();z3={CreateTokenCommand:ss},Ic=class extends Wo{};(0,yP.createAggregatedClient)(z3,Ic)});var vP=y(()=>{c();mf()});var SP=y(()=>{c();Rc()});var gf={};Ye(gf,{$Command:()=>ff.Command,AccessDeniedException:()=>Ko,AuthorizationPendingException:()=>Yo,CreateTokenCommand:()=>ss,CreateTokenRequestFilterSensitiveLog:()=>uf,CreateTokenResponseFilterSensitiveLog:()=>pf,ExpiredTokenException:()=>Jo,InternalServerException:()=>Xo,InvalidClientException:()=>Qo,InvalidGrantException:()=>Zo,InvalidRequestException:()=>es,InvalidScopeException:()=>ts,SSOOIDC:()=>Ic,SSOOIDCClient:()=>Wo,SSOOIDCServiceException:()=>oe,SlowDownException:()=>rs,UnauthorizedClientException:()=>ns,UnsupportedGrantTypeException:()=>os,__Client:()=>lf.Client});var hf=y(()=>{c();df();_P();vP();SP();Oc()});var _f=w((Cie,AP)=>{"use strict";c();var W3=Object.create,as=Object.defineProperty,K3=Object.getOwnPropertyDescriptor,Y3=Object.getOwnPropertyNames,J3=Object.getPrototypeOf,X3=Object.prototype.hasOwnProperty,Rt=(e,t)=>as(e,"name",{value:t,configurable:!0}),Q3=(e,t)=>{for(var r in t)as(e,r,{get:t[r],enumerable:!0})},bP=(e,t,r,n)=>{if(t&&typeof t=="object"||typeof t=="function")for(let o of Y3(t))!X3.call(e,o)&&o!==r&&as(e,o,{get:()=>t[o],enumerable:!(n=K3(t,o))||n.enumerable});return e},CP=(e,t,r)=>(r=e!=null?W3(J3(e)):{},bP(t||!e||!e.__esModule?as(r,"default",{value:e,enumerable:!0}):r,e)),Z3=e=>bP(as({},"__esModule",{value:!0}),e),xP={};Q3(xP,{fromEnvSigningName:()=>rV,fromSso:()=>PP,fromStatic:()=>lV,nodeProvider:()=>dV});AP.exports=Z3(xP);var eV=(Ve(),D(Gt)),tV=(gu(),D(Fv)),Ae=_e(),rV=Rt(({logger:e,signingName:t}={})=>async()=>{if(e?.debug?.("@aws-sdk/token-providers - fromEnvSigningName"),!t)throw new Ae.TokenProviderError("Please pass 'signingName' to compute environment variable key",{logger:e});let r=(0,tV.getBearerTokenEnvKey)(t);if(!(r in process.env))throw new Ae.TokenProviderError(`Token not present in '${r}' environment variable`,{logger:e});let n={token:process.env[r]};return(0,eV.setTokenFeature)(n,"BEARER_SERVICE_ENV_VARS","3"),n},"fromEnvSigningName"),nV=300*1e3,yf="To refresh this SSO session run 'aws sso login' with the corresponding profile.",oV=Rt(async(e,t={})=>{let{SSOOIDCClient:r}=await Promise.resolve().then(()=>CP((hf(),D(gf))));return new r(Object.assign({},t.clientConfig??{},{region:e??t.clientConfig?.region,logger:t.clientConfig?.logger??t.parentClientConfig?.logger}))},"getSsoOidcClient"),sV=Rt(async(e,t,r={})=>{let{CreateTokenCommand:n}=await Promise.resolve().then(()=>CP((hf(),D(gf))));return(await oV(t,r)).send(new n({clientId:e.clientId,clientSecret:e.clientSecret,refreshToken:e.refreshToken,grantType:"refresh_token"}))},"getNewSsoOidcToken"),EP=Rt(e=>{if(e.expiration&&e.expiration.getTime()<Date.now())throw new Ae.TokenProviderError(`Token is expired. ${yf}`,!1)},"validateTokenExpiry"),Hr=Rt((e,t,r=!1)=>{if(typeof t>"u")throw new Ae.TokenProviderError(`Value not present for '${e}' in SSO Token${r?". Cannot refresh":""}. ${yf}`,!1)},"validateTokenKey"),is=Zt(),iV=F("fs"),{writeFile:aV}=iV.promises,cV=Rt((e,t)=>{let r=(0,is.getSSOTokenFilepath)(e),n=JSON.stringify(t,null,2);return aV(r,n)},"writeSSOTokenToFile"),wP=new Date(0),PP=Rt((e={})=>async({callerClientConfig:t}={})=>{let r={...e,parentClientConfig:{...t,...e.parentClientConfig}};r.logger?.debug("@aws-sdk/token-providers - fromSso");let n=await(0,is.parseKnownFiles)(r),o=(0,is.getProfileName)({profile:r.profile??t?.profile}),s=n[o];if(s){if(!s.sso_session)throw new Ae.TokenProviderError(`Profile '${o}' is missing required property 'sso_session'.`)}else throw new Ae.TokenProviderError(`Profile '${o}' could not be found in shared credentials file.`,!1);let i=s.sso_session,l=(await(0,is.loadSsoSessionData)(r))[i];if(!l)throw new Ae.TokenProviderError(`Sso session '${i}' could not be found in shared credentials file.`,!1);for(let v of["sso_start_url","sso_region"])if(!l[v])throw new Ae.TokenProviderError(`Sso session '${i}' is missing required property '${v}'.`,!1);let d=l.sso_start_url,u=l.sso_region,f;try{f=await(0,is.getSSOTokenFromFile)(i)}catch{throw new Ae.TokenProviderError(`The SSO session token associated with profile=${o} was not found or is invalid. ${yf}`,!1)}Hr("accessToken",f.accessToken),Hr("expiresAt",f.expiresAt);let{accessToken:g,expiresAt:h}=f,_={token:g,expiration:new Date(h)};if(_.expiration.getTime()-Date.now()>nV)return _;if(Date.now()-wP.getTime()<30*1e3)return EP(_),_;Hr("clientId",f.clientId,!0),Hr("clientSecret",f.clientSecret,!0),Hr("refreshToken",f.refreshToken,!0);try{wP.setTime(Date.now());let v=await sV(f,u,r);Hr("accessToken",v.accessToken),Hr("expiresIn",v.expiresIn);let S=new Date(Date.now()+v.expiresIn*1e3);try{await cV(i,{...f,accessToken:v.accessToken,expiresAt:S.toISOString(),refreshToken:v.refreshToken})}catch{}return{token:v.accessToken,expiration:S}}catch{return EP(_),_}},"fromSso"),lV=Rt(({token:e,logger:t})=>async()=>{if(t?.debug("@aws-sdk/token-providers - fromStatic"),!e||!e.token)throw new Ae.TokenProviderError("Please pass a valid token to fromStatic",!1);return e},"fromStatic"),dV=Rt((e={})=>(0,Ae.memoize)((0,Ae.chain)(PP(e),async()=>{throw new Ae.TokenProviderError("Could not load token from any providers",!1)}),t=>t.expiration!==void 0&&t.expiration.getTime()-Date.now()<3e5,t=>t.expiration!==void 0),"nodeProvider")});var Sf=w((Pie,FP)=>{"use strict";c();var kc=Object.defineProperty,uV=Object.getOwnPropertyDescriptor,RP=Object.getOwnPropertyNames,pV=Object.prototype.hasOwnProperty,Dc=(e,t)=>kc(e,"name",{value:t,configurable:!0}),fV=(e,t)=>function(){return e&&(t=(0,e[RP(e)[0]])(e=0)),t},IP=(e,t)=>{for(var r in t)kc(e,r,{get:t[r],enumerable:!0})},mV=(e,t,r,n)=>{if(t&&typeof t=="object"||typeof t=="function")for(let o of RP(t))!pV.call(e,o)&&o!==r&&kc(e,o,{get:()=>t[o],enumerable:!(n=uV(t,o))||n.enumerable});return e},gV=e=>mV(kc({},"__esModule",{value:!0}),e),NP={};IP(NP,{GetRoleCredentialsCommand:()=>vf.GetRoleCredentialsCommand,SSOClient:()=>vf.SSOClient});var vf,hV=fV({"src/loadSso.ts"(){"use strict";vf=vx()}}),kP={};IP(kP,{fromSSO:()=>_V,isSsoProfile:()=>DP,validateSsoProfile:()=>MP});FP.exports=gV(kP);var DP=Dc(e=>e&&(typeof e.sso_start_url=="string"||typeof e.sso_account_id=="string"||typeof e.sso_session=="string"||typeof e.sso_region=="string"||typeof e.sso_role_name=="string"),"isSsoProfile"),TP=(Ve(),D(Gt)),yV=_f(),Ke=_e(),Nc=Zt(),cs=!1,OP=Dc(async({ssoStartUrl:e,ssoSession:t,ssoAccountId:r,ssoRegion:n,ssoRoleName:o,ssoClient:s,clientConfig:i,parentClientConfig:a,profile:l,logger:d})=>{let u,f="To refresh this SSO session run aws sso login with the corresponding profile.";if(t)try{let se=await(0,yV.fromSso)({profile:l})();u={accessToken:se.token,expiresAt:new Date(se.expiration).toISOString()}}catch(se){throw new Ke.CredentialsProviderError(se.message,{tryNextLink:cs,logger:d})}else try{u=await(0,Nc.getSSOTokenFromFile)(e)}catch{throw new Ke.CredentialsProviderError(`The SSO session associated with this profile is invalid. ${f}`,{tryNextLink:cs,logger:d})}if(new Date(u.expiresAt).getTime()-Date.now()<=0)throw new Ke.CredentialsProviderError(`The SSO session associated with this profile has expired. ${f}`,{tryNextLink:cs,logger:d});let{accessToken:g}=u,{SSOClient:h,GetRoleCredentialsCommand:_}=await Promise.resolve().then(()=>(hV(),NP)),v=s||new h(Object.assign({},i??{},{logger:i?.logger??a?.logger,region:i?.region??n})),S;try{S=await v.send(new _({accountId:r,roleName:o,accessToken:g}))}catch(se){throw new Ke.CredentialsProviderError(se,{tryNextLink:cs,logger:d})}let{roleCredentials:{accessKeyId:b,secretAccessKey:C,sessionToken:I,expiration:R,credentialScope:T,accountId:j}={}}=S;if(!b||!C||!I||!R)throw new Ke.CredentialsProviderError("SSO returns an invalid temporary credential.",{tryNextLink:cs,logger:d});let ht={accessKeyId:b,secretAccessKey:C,sessionToken:I,expiration:new Date(R),...T&&{credentialScope:T},...j&&{accountId:j}};return t?(0,TP.setCredentialFeature)(ht,"CREDENTIALS_SSO","s"):(0,TP.setCredentialFeature)(ht,"CREDENTIALS_SSO_LEGACY","u"),ht},"resolveSSOCredentials"),MP=Dc((e,t)=>{let{sso_start_url:r,sso_account_id:n,sso_region:o,sso_role_name:s}=e;if(!r||!n||!o||!s)throw new Ke.CredentialsProviderError(`Profile is configured with invalid SSO credentials. Required parameters "sso_account_id", "sso_region", "sso_role_name", "sso_start_url". Got ${Object.keys(e).join(", ")}
Reference: https://docs.aws.amazon.com/cli/latest/userguide/cli-configure-sso.html`,{tryNextLink:!1,logger:t});return e},"validateSsoProfile"),_V=Dc((e={})=>async({callerClientConfig:t}={})=>{e.logger?.debug("@aws-sdk/credential-provider-sso - fromSSO");let{ssoStartUrl:r,ssoAccountId:n,ssoRegion:o,ssoRoleName:s,ssoSession:i}=e,{ssoClient:a}=e,l=(0,Nc.getProfileName)({profile:e.profile??t?.profile});if(!r&&!n&&!o&&!s&&!i){let u=(await(0,Nc.parseKnownFiles)(e))[l];if(!u)throw new Ke.CredentialsProviderError(`Profile ${l} was not found.`,{logger:e.logger});if(!DP(u))throw new Ke.CredentialsProviderError(`Profile ${l} is not configured with SSO credentials.`,{logger:e.logger});if(u?.sso_session){let b=(await(0,Nc.loadSsoSessionData)(e))[u.sso_session],C=` configurations in profile ${l} and sso-session ${u.sso_session}`;if(o&&o!==b.sso_region)throw new Ke.CredentialsProviderError("Conflicting SSO region"+C,{tryNextLink:!1,logger:e.logger});if(r&&r!==b.sso_start_url)throw new Ke.CredentialsProviderError("Conflicting SSO start_url"+C,{tryNextLink:!1,logger:e.logger});u.sso_region=b.sso_region,u.sso_start_url=b.sso_start_url}let{sso_start_url:f,sso_account_id:g,sso_region:h,sso_role_name:_,sso_session:v}=MP(u,e.logger);return OP({ssoStartUrl:f,ssoSession:v,ssoAccountId:g,ssoRegion:h,ssoRoleName:_,ssoClient:a,clientConfig:e.clientConfig,parentClientConfig:e.parentClientConfig,profile:l})}else{if(!r||!n||!o||!s)throw new Ke.CredentialsProviderError('Incomplete configuration. The fromSSO() argument hash must include "ssoStartUrl", "ssoAccountId", "ssoRegion", "ssoRoleName"',{tryNextLink:!1,logger:e.logger});return OP({ssoStartUrl:r,ssoSession:i,ssoAccountId:n,ssoRegion:o,ssoRoleName:s,ssoClient:a,clientConfig:e.clientConfig,parentClientConfig:e.parentClientConfig,profile:l})}},"fromSSO")});function vV(e){return{schemeId:"aws.auth#sigv4",signingProperties:{name:"sts",region:e.region},propertiesExtractor:(t,r)=>({signingProperties:{config:t,context:r}})}}function SV(e){return{schemeId:"smithy.api#noAuth"}}var ls,BP,LP,EV,UP,Ef=y(()=>{c();ne();ls=E(Ge());ds();BP=async(e,t,r)=>({operation:(0,ls.getSmithyContext)(t).operation,region:await(0,ls.normalizeProvider)(e.region)()||(()=>{throw new Error("expected `region` to be configured for `aws.auth#sigv4`")})()});LP=e=>{let t=[];switch(e.operation){case"AssumeRoleWithWebIdentity":{t.push(SV(e));break}default:t.push(vV(e))}return t},EV=e=>Object.assign(e,{stsClientCtor:lt}),UP=e=>{let t=EV(e),r=xr(t);return Object.assign(r,{authSchemePreference:(0,ls.normalizeProvider)(e.authSchemePreference??[])})}});var HP,Mc,Fc=y(()=>{c();HP=e=>Object.assign(e,{useDualstackEndpoint:e.useDualstackEndpoint??!1,useFipsEndpoint:e.useFipsEndpoint??!1,useGlobalEndpoint:e.useGlobalEndpoint??!1,defaultSigningName:"sts"}),Mc={UseGlobalEndpoint:{type:"builtInParams",name:"useGlobalEndpoint"},UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}});var XP,N,H,lr,ue,QP,ZP,z,jP,dt,Cn,bf,$P,wf,eA,qP,pe,GP,tA,rA,me,Te,VP,nA,oA,zP,sA,WP,KP,YP,JP,wV,iA,aA=y(()=>{c();XP="required",N="type",H="argv",lr="booleanEquals",ue="stringEquals",QP="sigv4",ZP="us-east-1",z="endpoint",jP="https://sts.{Region}.{PartitionResult#dnsSuffix}",dt="tree",Cn="error",bf="getAttr",$P={[XP]:!1,[N]:"String"},wf={[XP]:!0,default:!1,[N]:"Boolean"},eA={ref:"Endpoint"},qP={fn:"isSet",[H]:[{ref:"Region"}]},pe={ref:"Region"},GP={fn:"aws.partition",[H]:[pe],assign:"PartitionResult"},tA={ref:"UseFIPS"},rA={ref:"UseDualStack"},me={url:"https://sts.amazonaws.com",properties:{authSchemes:[{name:QP,signingName:"sts",signingRegion:ZP}]},headers:{}},Te={},VP={conditions:[{fn:ue,[H]:[pe,"aws-global"]}],[z]:me,[N]:z},nA={fn:lr,[H]:[tA,!0]},oA={fn:lr,[H]:[rA,!0]},zP={fn:bf,[H]:[{ref:"PartitionResult"},"supportsFIPS"]},sA={ref:"PartitionResult"},WP={fn:lr,[H]:[!0,{fn:bf,[H]:[sA,"supportsDualStack"]}]},KP=[{fn:"isSet",[H]:[eA]}],YP=[nA],JP=[oA],wV={version:"1.0",parameters:{Region:$P,UseDualStack:wf,UseFIPS:wf,Endpoint:$P,UseGlobalEndpoint:wf},rules:[{conditions:[{fn:lr,[H]:[{ref:"UseGlobalEndpoint"},!0]},{fn:"not",[H]:KP},qP,GP,{fn:lr,[H]:[tA,!1]},{fn:lr,[H]:[rA,!1]}],rules:[{conditions:[{fn:ue,[H]:[pe,"ap-northeast-1"]}],endpoint:me,[N]:z},{conditions:[{fn:ue,[H]:[pe,"ap-south-1"]}],endpoint:me,[N]:z},{conditions:[{fn:ue,[H]:[pe,"ap-southeast-1"]}],endpoint:me,[N]:z},{conditions:[{fn:ue,[H]:[pe,"ap-southeast-2"]}],endpoint:me,[N]:z},VP,{conditions:[{fn:ue,[H]:[pe,"ca-central-1"]}],endpoint:me,[N]:z},{conditions:[{fn:ue,[H]:[pe,"eu-central-1"]}],endpoint:me,[N]:z},{conditions:[{fn:ue,[H]:[pe,"eu-north-1"]}],endpoint:me,[N]:z},{conditions:[{fn:ue,[H]:[pe,"eu-west-1"]}],endpoint:me,[N]:z},{conditions:[{fn:ue,[H]:[pe,"eu-west-2"]}],endpoint:me,[N]:z},{conditions:[{fn:ue,[H]:[pe,"eu-west-3"]}],endpoint:me,[N]:z},{conditions:[{fn:ue,[H]:[pe,"sa-east-1"]}],endpoint:me,[N]:z},{conditions:[{fn:ue,[H]:[pe,ZP]}],endpoint:me,[N]:z},{conditions:[{fn:ue,[H]:[pe,"us-east-2"]}],endpoint:me,[N]:z},{conditions:[{fn:ue,[H]:[pe,"us-west-1"]}],endpoint:me,[N]:z},{conditions:[{fn:ue,[H]:[pe,"us-west-2"]}],endpoint:me,[N]:z},{endpoint:{url:jP,properties:{authSchemes:[{name:QP,signingName:"sts",signingRegion:"{Region}"}]},headers:Te},[N]:z}],[N]:dt},{conditions:KP,rules:[{conditions:YP,error:"Invalid Configuration: FIPS and custom endpoint are not supported",[N]:Cn},{conditions:JP,error:"Invalid Configuration: Dualstack and custom endpoint are not supported",[N]:Cn},{endpoint:{url:eA,properties:Te,headers:Te},[N]:z}],[N]:dt},{conditions:[qP],rules:[{conditions:[GP],rules:[{conditions:[nA,oA],rules:[{conditions:[{fn:lr,[H]:[!0,zP]},WP],rules:[{endpoint:{url:"https://sts-fips.{Region}.{PartitionResult#dualStackDnsSuffix}",properties:Te,headers:Te},[N]:z}],[N]:dt},{error:"FIPS and DualStack are enabled, but this partition does not support one or both",[N]:Cn}],[N]:dt},{conditions:YP,rules:[{conditions:[{fn:lr,[H]:[zP,!0]}],rules:[{conditions:[{fn:ue,[H]:[{fn:bf,[H]:[sA,"name"]},"aws-us-gov"]}],endpoint:{url:"https://sts.{Region}.amazonaws.com",properties:Te,headers:Te},[N]:z},{endpoint:{url:"https://sts-fips.{Region}.{PartitionResult#dnsSuffix}",properties:Te,headers:Te},[N]:z}],[N]:dt},{error:"FIPS is enabled but this partition does not support FIPS",[N]:Cn}],[N]:dt},{conditions:JP,rules:[{conditions:[WP],rules:[{endpoint:{url:"https://sts.{Region}.{PartitionResult#dualStackDnsSuffix}",properties:Te,headers:Te},[N]:z}],[N]:dt},{error:"DualStack is enabled but this partition does not support DualStack",[N]:Cn}],[N]:dt},VP,{endpoint:{url:jP,properties:Te,headers:Te},[N]:z}],[N]:dt}],[N]:dt},{error:"Invalid Configuration: Missing Region",[N]:Cn}]},iA=wV});var cA,xn,bV,lA,dA=y(()=>{c();cA=E(Zr()),xn=E(Qr());aA();bV=new xn.EndpointCache({size:50,params:["Endpoint","Region","UseDualStack","UseFIPS","UseGlobalEndpoint"]}),lA=(e,t={})=>bV.get(e,()=>(0,xn.resolveEndpoint)(iA,{endpointParams:e,logger:t.logger}));xn.customEndpointFunctions.aws=cA.awsEndpointFunctions});var uA,pA,Bc,Lc,fA,mA=y(()=>{c();ne();ce();uA=E(M()),pA=E(jt()),Bc=E(ge()),Lc=E(ie());Ef();dA();fA=e=>({apiVersion:"2011-06-15",base64Decoder:e?.base64Decoder??Bc.fromBase64,base64Encoder:e?.base64Encoder??Bc.toBase64,disableHostPrefix:e?.disableHostPrefix??!1,endpointProvider:e?.endpointProvider??lA,extensions:e?.extensions??[],httpAuthSchemeProvider:e?.httpAuthSchemeProvider??LP,httpAuthSchemes:e?.httpAuthSchemes??[{schemeId:"aws.auth#sigv4",identityProvider:t=>t.getIdentityProvider("aws.auth#sigv4"),signer:new be},{schemeId:"smithy.api#noAuth",identityProvider:t=>t.getIdentityProvider("smithy.api#noAuth")||(async()=>({})),signer:new Et}],logger:e?.logger??new uA.NoOpLogger,serviceId:e?.serviceId??"STS",urlParser:e?.urlParser??pA.parseUrl,utf8Decoder:e?.utf8Decoder??Lc.fromUtf8,utf8Encoder:e?.utf8Encoder??Lc.toUtf8})});var Uc,ur,gA,Hc,dr,jc,hA,yA,_A,vA,SA,EA,wA=y(()=>{c();sf();ne();Uc=E(Fo()),ur=E(it());ce();gA=E(Bo()),Hc=E(Pt()),dr=E(er()),jc=E(mr()),hA=E(Lo()),yA=E(mn());mA();_A=E(M()),vA=E(jo()),SA=E(M()),EA=e=>{(0,SA.emitWarningIfUnsupportedVersion)(process.version);let t=(0,vA.resolveDefaultsModeConfig)(e),r=()=>t().then(_A.loadConfigsForDefaultMode),n=fA(e);en(process.version);let o={profile:e?.profile,logger:n.logger};return{...n,...e,runtime:"node",defaultsMode:t,authSchemePreference:e?.authSchemePreference??(0,dr.loadConfig)(nn,o),bodyLengthChecker:e?.bodyLengthChecker??hA.calculateBodyLength,defaultUserAgentProvider:e?.defaultUserAgentProvider??(0,Uc.createDefaultUserAgentProvider)({serviceId:n.serviceId,clientVersion:yc.version}),httpAuthSchemes:e?.httpAuthSchemes??[{schemeId:"aws.auth#sigv4",identityProvider:s=>s.getIdentityProvider("aws.auth#sigv4")||(async i=>await e.credentialDefaultProvider(i?.__config||{})()),signer:new be},{schemeId:"smithy.api#noAuth",identityProvider:s=>s.getIdentityProvider("smithy.api#noAuth")||(async()=>({})),signer:new Et}],maxAttempts:e?.maxAttempts??(0,dr.loadConfig)(Hc.NODE_MAX_ATTEMPT_CONFIG_OPTIONS,e),region:e?.region??(0,dr.loadConfig)(ur.NODE_REGION_CONFIG_OPTIONS,{...ur.NODE_REGION_CONFIG_FILE_OPTIONS,...o}),requestHandler:jc.NodeHttpHandler.create(e?.requestHandler??r),retryMode:e?.retryMode??(0,dr.loadConfig)({...Hc.NODE_RETRY_MODE_CONFIG_OPTIONS,default:async()=>(await r()).retryMode||yA.DEFAULT_RETRY_MODE},e),sha256:e?.sha256??gA.Hash.bind(null,"sha256"),streamCollector:e?.streamCollector??jc.streamCollector,useDualstackEndpoint:e?.useDualstackEndpoint??(0,dr.loadConfig)(ur.NODE_USE_DUALSTACK_ENDPOINT_CONFIG_OPTIONS,o),useFipsEndpoint:e?.useFipsEndpoint??(0,dr.loadConfig)(ur.NODE_USE_FIPS_ENDPOINT_CONFIG_OPTIONS,o),userAgentAppId:e?.userAgentAppId??(0,dr.loadConfig)(Uc.NODE_APP_ID_CONFIG_OPTIONS,o)}}});var bA,CA,xA=y(()=>{c();bA=e=>{let t=e.httpAuthSchemes,r=e.httpAuthSchemeProvider,n=e.credentials;return{setHttpAuthScheme(o){let s=t.findIndex(i=>i.schemeId===o.schemeId);s===-1?t.push(o):t.splice(s,1,o)},httpAuthSchemes(){return t},setHttpAuthSchemeProvider(o){r=o},httpAuthSchemeProvider(){return r},setCredentials(o){n=o},credentials(){return n}}},CA=e=>({httpAuthSchemes:e.httpAuthSchemes(),httpAuthSchemeProvider:e.httpAuthSchemeProvider(),credentials:e.credentials()})});var $c,qc,Gc,PA,AA=y(()=>{c();$c=E($o()),qc=E(q()),Gc=E(M());xA();PA=(e,t)=>{let r=Object.assign((0,$c.getAwsRegionExtensionConfiguration)(e),(0,Gc.getDefaultExtensionConfiguration)(e),(0,qc.getHttpHandlerExtensionConfiguration)(e),bA(e));return t.forEach(n=>n.configure(r)),Object.assign(e,(0,$c.resolveAwsRegionExtensionConfiguration)(r),(0,Gc.resolveDefaultRuntimeConfig)(r),(0,qc.resolveHttpHandlerRuntimeConfig)(r),CA(r))}});var Vc,TA,OA,zc,RA,IA,NA,Wc,Cf,lt,ds=y(()=>{c();Vc=E(Ln()),TA=E(Un()),OA=E(Hn()),zc=E(an()),RA=E(it());ce();IA=E(Po()),NA=E(tr()),Wc=E(Pt()),Cf=E(M());Ef();Fc();wA();AA();lt=class extends Cf.Client{config;constructor(...[t]){let r=EA(t||{});super(r),this.initConfig=r;let n=HP(r),o=(0,zc.resolveUserAgentConfig)(n),s=(0,Wc.resolveRetryConfig)(o),i=(0,RA.resolveRegionConfig)(s),a=(0,Vc.resolveHostHeaderConfig)(i),l=(0,NA.resolveEndpointConfig)(a),d=UP(l),u=PA(d,t?.extensions||[]);this.config=u,this.middlewareStack.use((0,zc.getUserAgentPlugin)(this.config)),this.middlewareStack.use((0,Wc.getRetryPlugin)(this.config)),this.middlewareStack.use((0,IA.getContentLengthPlugin)(this.config)),this.middlewareStack.use((0,Vc.getHostHeaderPlugin)(this.config)),this.middlewareStack.use((0,TA.getLoggerPlugin)(this.config)),this.middlewareStack.use((0,OA.getRecursionDetectionPlugin)(this.config)),this.middlewareStack.use($n(this.config,{httpAuthSchemeParametersProvider:BP,identityProviderConfigProvider:async f=>new br({"aws.auth#sigv4":f.credentials})})),this.middlewareStack.use(qn(this.config))}destroy(){super.destroy()}}});var kA,Ce,Kc=y(()=>{c();kA=E(M()),Ce=class e extends kA.ServiceException{constructor(t){super(t),Object.setPrototypeOf(this,e.prototype)}}});var xf,Pf,Af,us,ps,fs,ms,gs,hs,Tf,Of,ys,_s=y(()=>{c();xf=E(M());Kc();Pf=e=>({...e,...e.SecretAccessKey&&{SecretAccessKey:xf.SENSITIVE_STRING}}),Af=e=>({...e,...e.Credentials&&{Credentials:Pf(e.Credentials)}}),us=class e extends Ce{name="ExpiredTokenException";$fault="client";constructor(t){super({name:"ExpiredTokenException",$fault:"client",...t}),Object.setPrototypeOf(this,e.prototype)}},ps=class e extends Ce{name="MalformedPolicyDocumentException";$fault="client";constructor(t){super({name:"MalformedPolicyDocumentException",$fault:"client",...t}),Object.setPrototypeOf(this,e.prototype)}},fs=class e extends Ce{name="PackedPolicyTooLargeException";$fault="client";constructor(t){super({name:"PackedPolicyTooLargeException",$fault:"client",...t}),Object.setPrototypeOf(this,e.prototype)}},ms=class e extends Ce{name="RegionDisabledException";$fault="client";constructor(t){super({name:"RegionDisabledException",$fault:"client",...t}),Object.setPrototypeOf(this,e.prototype)}},gs=class e extends Ce{name="IDPRejectedClaimException";$fault="client";constructor(t){super({name:"IDPRejectedClaimException",$fault:"client",...t}),Object.setPrototypeOf(this,e.prototype)}},hs=class e extends Ce{name="InvalidIdentityTokenException";$fault="client";constructor(t){super({name:"InvalidIdentityTokenException",$fault:"client",...t}),Object.setPrototypeOf(this,e.prototype)}},Tf=e=>({...e,...e.WebIdentityToken&&{WebIdentityToken:xf.SENSITIVE_STRING}}),Of=e=>({...e,...e.Credentials&&{Credentials:Pf(e.Credentials)}}),ys=class e extends Ce{name="IDPCommunicationErrorException";$fault="client";constructor(t){super({name:"IDPCommunicationErrorException",$fault:"client",...t}),Object.setPrototypeOf(this,e.prototype)}}});var DA,k,MA,FA,BA,LA,UA,CV,xV,PV,AV,TV,OV,RV,IV,NV,HA,kV,DV,MV,FV,BV,LV,jA,UV,HV,$A,jV,$V,qV,GV,VV,zV,WV,Nt,KV,qA,GA,VA,zA,Rf,YV,If,Pn,JV,Nf,kf,An,Df,Tn,Mf,Ff,Bf,On,Rn,Lf,Uf,Hf,In,jf,Nn,kn,$f,qf,It,Gf,Vf,zf,Wf,Kf,WA,Yf,Jf,Xf,J,KA,XV,Qf=y(()=>{c();ne();DA=E(q()),k=E(M());_s();Kc();MA=async(e,t)=>{let r=GA,n;return n=KA({...IV(e,t),[zA]:YV,[WA]:VA}),qA(t,r,"/",void 0,n)},FA=async(e,t)=>{let r=GA,n;return n=KA({...NV(e,t),[zA]:JV,[WA]:VA}),qA(t,r,"/",void 0,n)},BA=async(e,t)=>{if(e.statusCode>=300)return UA(e,t);let r=await Eo(e.body,t),n={};return n=UV(r.AssumeRoleResult,t),{$metadata:Nt(e),...n}},LA=async(e,t)=>{if(e.statusCode>=300)return UA(e,t);let r=await Eo(e.body,t),n={};return n=HV(r.AssumeRoleWithWebIdentityResult,t),{$metadata:Nt(e),...n}},UA=async(e,t)=>{let r={...e,body:await $u(e.body,t)},n=XV(e,r.body);switch(n){case"ExpiredTokenException":case"com.amazonaws.sts#ExpiredTokenException":throw await CV(r,t);case"MalformedPolicyDocument":case"com.amazonaws.sts#MalformedPolicyDocumentException":throw await TV(r,t);case"PackedPolicyTooLarge":case"com.amazonaws.sts#PackedPolicyTooLargeException":throw await OV(r,t);case"RegionDisabledException":case"com.amazonaws.sts#RegionDisabledException":throw await RV(r,t);case"IDPCommunicationError":case"com.amazonaws.sts#IDPCommunicationErrorException":throw await xV(r,t);case"IDPRejectedClaim":case"com.amazonaws.sts#IDPRejectedClaimException":throw await PV(r,t);case"InvalidIdentityToken":case"com.amazonaws.sts#InvalidIdentityTokenException":throw await AV(r,t);default:let o=r.body;return KV({output:e,parsedBody:o.Error,errorCode:n})}},CV=async(e,t)=>{let r=e.body,n=jV(r.Error,t),o=new us({$metadata:Nt(e),...n});return(0,k.decorateServiceException)(o,r)},xV=async(e,t)=>{let r=e.body,n=$V(r.Error,t),o=new ys({$metadata:Nt(e),...n});return(0,k.decorateServiceException)(o,r)},PV=async(e,t)=>{let r=e.body,n=qV(r.Error,t),o=new gs({$metadata:Nt(e),...n});return(0,k.decorateServiceException)(o,r)},AV=async(e,t)=>{let r=e.body,n=GV(r.Error,t),o=new hs({$metadata:Nt(e),...n});return(0,k.decorateServiceException)(o,r)},TV=async(e,t)=>{let r=e.body,n=VV(r.Error,t),o=new ps({$metadata:Nt(e),...n});return(0,k.decorateServiceException)(o,r)},OV=async(e,t)=>{let r=e.body,n=zV(r.Error,t),o=new fs({$metadata:Nt(e),...n});return(0,k.decorateServiceException)(o,r)},RV=async(e,t)=>{let r=e.body,n=WV(r.Error,t),o=new ms({$metadata:Nt(e),...n});return(0,k.decorateServiceException)(o,r)},IV=(e,t)=>{let r={};if(e[Nn]!=null&&(r[Nn]=e[Nn]),e[kn]!=null&&(r[kn]=e[kn]),e[Rn]!=null){let n=HA(e[Rn],t);e[Rn]?.length===0&&(r.PolicyArns=[]),Object.entries(n).forEach(([o,s])=>{let i=`PolicyArns.${o}`;r[i]=s})}if(e[On]!=null&&(r[On]=e[On]),e[Tn]!=null&&(r[Tn]=e[Tn]),e[zf]!=null){let n=LV(e[zf],t);e[zf]?.length===0&&(r.Tags=[]),Object.entries(n).forEach(([o,s])=>{let i=`Tags.${o}`;r[i]=s})}if(e[Kf]!=null){let n=BV(e[Kf],t);e[Kf]?.length===0&&(r.TransitiveTagKeys=[]),Object.entries(n).forEach(([o,s])=>{let i=`TransitiveTagKeys.${o}`;r[i]=s})}if(e[Ff]!=null&&(r[Ff]=e[Ff]),e[Gf]!=null&&(r[Gf]=e[Gf]),e[Wf]!=null&&(r[Wf]=e[Wf]),e[It]!=null&&(r[It]=e[It]),e[Uf]!=null){let n=MV(e[Uf],t);e[Uf]?.length===0&&(r.ProvidedContexts=[]),Object.entries(n).forEach(([o,s])=>{let i=`ProvidedContexts.${o}`;r[i]=s})}return r},NV=(e,t)=>{let r={};if(e[Nn]!=null&&(r[Nn]=e[Nn]),e[kn]!=null&&(r[kn]=e[kn]),e[Jf]!=null&&(r[Jf]=e[Jf]),e[Hf]!=null&&(r[Hf]=e[Hf]),e[Rn]!=null){let n=HA(e[Rn],t);e[Rn]?.length===0&&(r.PolicyArns=[]),Object.entries(n).forEach(([o,s])=>{let i=`PolicyArns.${o}`;r[i]=s})}return e[On]!=null&&(r[On]=e[On]),e[Tn]!=null&&(r[Tn]=e[Tn]),r},HA=(e,t)=>{let r={},n=1;for(let o of e){if(o===null)continue;let s=kV(o,t);Object.entries(s).forEach(([i,a])=>{r[`member.${n}.${i}`]=a}),n++}return r},kV=(e,t)=>{let r={};return e[Xf]!=null&&(r[Xf]=e[Xf]),r},DV=(e,t)=>{let r={};return e[Lf]!=null&&(r[Lf]=e[Lf]),e[Df]!=null&&(r[Df]=e[Df]),r},MV=(e,t)=>{let r={},n=1;for(let o of e){if(o===null)continue;let s=DV(o,t);Object.entries(s).forEach(([i,a])=>{r[`member.${n}.${i}`]=a}),n++}return r},FV=(e,t)=>{let r={};return e[Bf]!=null&&(r[Bf]=e[Bf]),e[Yf]!=null&&(r[Yf]=e[Yf]),r},BV=(e,t)=>{let r={},n=1;for(let o of e)o!==null&&(r[`member.${n}`]=o,n++);return r},LV=(e,t)=>{let r={},n=1;for(let o of e){if(o===null)continue;let s=FV(o,t);Object.entries(s).forEach(([i,a])=>{r[`member.${n}.${i}`]=a}),n++}return r},jA=(e,t)=>{let r={};return e[If]!=null&&(r[If]=(0,k.expectString)(e[If])),e[Nf]!=null&&(r[Nf]=(0,k.expectString)(e[Nf])),r},UV=(e,t)=>{let r={};return e[An]!=null&&(r[An]=$A(e[An],t)),e[Pn]!=null&&(r[Pn]=jA(e[Pn],t)),e[In]!=null&&(r[In]=(0,k.strictParseInt32)(e[In])),e[It]!=null&&(r[It]=(0,k.expectString)(e[It])),r},HV=(e,t)=>{let r={};return e[An]!=null&&(r[An]=$A(e[An],t)),e[qf]!=null&&(r[qf]=(0,k.expectString)(e[qf])),e[Pn]!=null&&(r[Pn]=jA(e[Pn],t)),e[In]!=null&&(r[In]=(0,k.strictParseInt32)(e[In])),e[jf]!=null&&(r[jf]=(0,k.expectString)(e[jf])),e[kf]!=null&&(r[kf]=(0,k.expectString)(e[kf])),e[It]!=null&&(r[It]=(0,k.expectString)(e[It])),r},$A=(e,t)=>{let r={};return e[Rf]!=null&&(r[Rf]=(0,k.expectString)(e[Rf])),e[$f]!=null&&(r[$f]=(0,k.expectString)(e[$f])),e[Vf]!=null&&(r[Vf]=(0,k.expectString)(e[Vf])),e[Mf]!=null&&(r[Mf]=(0,k.expectNonNull)((0,k.parseRfc3339DateTimeWithOffset)(e[Mf]))),r},jV=(e,t)=>{let r={};return e[J]!=null&&(r[J]=(0,k.expectString)(e[J])),r},$V=(e,t)=>{let r={};return e[J]!=null&&(r[J]=(0,k.expectString)(e[J])),r},qV=(e,t)=>{let r={};return e[J]!=null&&(r[J]=(0,k.expectString)(e[J])),r},GV=(e,t)=>{let r={};return e[J]!=null&&(r[J]=(0,k.expectString)(e[J])),r},VV=(e,t)=>{let r={};return e[J]!=null&&(r[J]=(0,k.expectString)(e[J])),r},zV=(e,t)=>{let r={};return e[J]!=null&&(r[J]=(0,k.expectString)(e[J])),r},WV=(e,t)=>{let r={};return e[J]!=null&&(r[J]=(0,k.expectString)(e[J])),r},Nt=e=>({httpStatusCode:e.statusCode,requestId:e.headers["x-amzn-requestid"]??e.headers["x-amzn-request-id"]??e.headers["x-amz-request-id"],extendedRequestId:e.headers["x-amz-id-2"],cfId:e.headers["x-amz-cf-id"]}),KV=(0,k.withBaseException)(Ce),qA=async(e,t,r,n,o)=>{let{hostname:s,protocol:i="https",port:a,path:l}=await e.endpoint(),d={protocol:i,hostname:s,port:a,method:"POST",path:l.endsWith("/")?l.slice(0,-1)+r:l+r,headers:t};return n!==void 0&&(d.hostname=n),o!==void 0&&(d.body=o),new DA.HttpRequest(d)},GA={"content-type":"application/x-www-form-urlencoded"},VA="2011-06-15",zA="Action",Rf="AccessKeyId",YV="AssumeRole",If="AssumedRoleId",Pn="AssumedRoleUser",JV="AssumeRoleWithWebIdentity",Nf="Arn",kf="Audience",An="Credentials",Df="ContextAssertion",Tn="DurationSeconds",Mf="Expiration",Ff="ExternalId",Bf="Key",On="Policy",Rn="PolicyArns",Lf="ProviderArn",Uf="ProvidedContexts",Hf="ProviderId",In="PackedPolicySize",jf="Provider",Nn="RoleArn",kn="RoleSessionName",$f="SecretAccessKey",qf="SubjectFromWebIdentityToken",It="SourceIdentity",Gf="SerialNumber",Vf="SessionToken",zf="Tags",Wf="TokenCode",Kf="TransitiveTagKeys",WA="Version",Yf="Value",Jf="WebIdentityToken",Xf="arn",J="message",KA=e=>Object.entries(e).map(([t,r])=>(0,k.extendedEncodeURIComponent)(t)+"="+(0,k.extendedEncodeURIComponent)(r)).join("&"),XV=(e,t)=>{if(t.Error?.Code!==void 0)return t.Error.Code;if(e.statusCode==404)return"NotFound"}});var YA,JA,XA,jr,Yc=y(()=>{c();YA=E(tr()),JA=E(Bt()),XA=E(M());Fc();_s();Qf();jr=class extends XA.Command.classBuilder().ep(Mc).m(function(t,r,n,o){return[(0,JA.getSerdePlugin)(n,this.serialize,this.deserialize),(0,YA.getEndpointPlugin)(n,t.getEndpointParameterInstructions())]}).s("AWSSecurityTokenServiceV20110615","AssumeRole",{}).n("STSClient","AssumeRoleCommand").f(void 0,Af).ser(MA).de(BA).build(){}});var QA,ZA,eT,$r,Jc=y(()=>{c();QA=E(tr()),ZA=E(Bt()),eT=E(M());Fc();_s();Qf();$r=class extends eT.Command.classBuilder().ep(Mc).m(function(t,r,n,o){return[(0,ZA.getSerdePlugin)(n,this.serialize,this.deserialize),(0,QA.getEndpointPlugin)(n,t.getEndpointParameterInstructions())]}).s("AWSSecurityTokenServiceV20110615","AssumeRoleWithWebIdentity",{}).n("STSClient","AssumeRoleWithWebIdentityCommand").f(Tf,Of).ser(FA).de(LA).build(){}});var tT,QV,Xc,rT=y(()=>{c();tT=E(M());Yc();Jc();ds();QV={AssumeRoleCommand:jr,AssumeRoleWithWebIdentityCommand:$r},Xc=class extends lt{};(0,tT.createAggregatedClient)(QV,Xc)});var nT=y(()=>{c();Yc();Jc()});var oT=y(()=>{c();_s()});var sT,iT,aT,cT,lT,dT,uT=y(()=>{c();Ve();Yc();Jc();sT="us-east-1",iT=e=>{if(typeof e?.Arn=="string"){let t=e.Arn.split(":");if(t.length>4&&t[4]!=="")return t[4]}},aT=async(e,t,r)=>{let n=typeof e=="function"?await e():e,o=typeof t=="function"?await t():t;return r?.debug?.("@aws-sdk/client-sts::resolveRegion","accepting first of:",`${n} (provider)`,`${o} (parent client)`,`${sT} (STS default)`),n??o??sT},cT=(e,t)=>{let r,n;return async(o,s)=>{if(n=o,!r){let{logger:u=e?.parentClientConfig?.logger,region:f,requestHandler:g=e?.parentClientConfig?.requestHandler,credentialProviderLogger:h}=e,_=await aT(f,e?.parentClientConfig?.region,h),v=!dT(g);r=new t({profile:e?.parentClientConfig?.profile,credentialDefaultProvider:()=>async()=>n,region:_,requestHandler:v?g:void 0,logger:u})}let{Credentials:i,AssumedRoleUser:a}=await r.send(new jr(s));if(!i||!i.AccessKeyId||!i.SecretAccessKey)throw new Error(`Invalid response from STS.assumeRole call with role ${s.RoleArn}`);let l=iT(a),d={accessKeyId:i.AccessKeyId,secretAccessKey:i.SecretAccessKey,sessionToken:i.SessionToken,expiration:i.Expiration,...i.CredentialScope&&{credentialScope:i.CredentialScope},...l&&{accountId:l}};return qt(d,"CREDENTIALS_STS_ASSUME_ROLE","i"),d}},lT=(e,t)=>{let r;return async n=>{if(!r){let{logger:l=e?.parentClientConfig?.logger,region:d,requestHandler:u=e?.parentClientConfig?.requestHandler,credentialProviderLogger:f}=e,g=await aT(d,e?.parentClientConfig?.region,f),h=!dT(u);r=new t({profile:e?.parentClientConfig?.profile,region:g,requestHandler:h?u:void 0,logger:l})}let{Credentials:o,AssumedRoleUser:s}=await r.send(new $r(n));if(!o||!o.AccessKeyId||!o.SecretAccessKey)throw new Error(`Invalid response from STS.assumeRoleWithWebIdentity call with role ${n.RoleArn}`);let i=iT(s),a={accessKeyId:o.AccessKeyId,secretAccessKey:o.SecretAccessKey,sessionToken:o.SessionToken,expiration:o.Expiration,...o.CredentialScope&&{credentialScope:o.CredentialScope},...i&&{accountId:i}};return i&&qt(a,"RESOLVED_ACCOUNT_ID","T"),qt(a,"CREDENTIALS_STS_ASSUME_ROLE_WEB_ID","k"),a}},dT=e=>e?.metadata?.handlerProtocol==="h2"});var pT,fT,mT,ZV,gT=y(()=>{c();uT();ds();pT=(e,t)=>t?class extends e{constructor(n){super(n);for(let o of t)this.middlewareStack.use(o)}}:e,fT=(e={},t)=>cT(e,pT(lt,t)),mT=(e={},t)=>lT(e,pT(lt,t)),ZV=e=>t=>e({roleAssumer:fT(t),roleAssumerWithWebIdentity:mT(t),...t})});var Zf={};Ye(Zf,{AssumeRoleCommand:()=>jr,AssumeRoleResponseFilterSensitiveLog:()=>Af,AssumeRoleWithWebIdentityCommand:()=>$r,AssumeRoleWithWebIdentityRequestFilterSensitiveLog:()=>Tf,AssumeRoleWithWebIdentityResponseFilterSensitiveLog:()=>Of,CredentialsFilterSensitiveLog:()=>Pf,ExpiredTokenException:()=>us,IDPCommunicationErrorException:()=>ys,IDPRejectedClaimException:()=>gs,InvalidIdentityTokenException:()=>hs,MalformedPolicyDocumentException:()=>ps,PackedPolicyTooLargeException:()=>fs,RegionDisabledException:()=>ms,STS:()=>Xc,STSClient:()=>lt,STSServiceException:()=>Ce,__Client:()=>Cf.Client,decorateDefaultCredentialProvider:()=>ZV,getDefaultRoleAssumer:()=>fT,getDefaultRoleAssumerWithWebIdentity:()=>mT});var em=y(()=>{c();ds();rT();nT();oT();gT();Kc()});var nm=w((oce,_T)=>{"use strict";c();var Qc=Object.defineProperty,ez=Object.getOwnPropertyDescriptor,tz=Object.getOwnPropertyNames,rz=Object.prototype.hasOwnProperty,rm=(e,t)=>Qc(e,"name",{value:t,configurable:!0}),nz=(e,t)=>{for(var r in t)Qc(e,r,{get:t[r],enumerable:!0})},oz=(e,t,r,n)=>{if(t&&typeof t=="object"||typeof t=="function")for(let o of tz(t))!rz.call(e,o)&&o!==r&&Qc(e,o,{get:()=>t[o],enumerable:!(n=ez(t,o))||n.enumerable});return e},sz=e=>oz(Qc({},"__esModule",{value:!0}),e),yT={};nz(yT,{fromProcess:()=>uz});_T.exports=sz(yT);var hT=Zt(),tm=_e(),iz=F("child_process"),az=F("util"),cz=(Ve(),D(Gt)),lz=rm((e,t,r)=>{if(t.Version!==1)throw Error(`Profile ${e} credential_process did not return Version 1.`);if(t.AccessKeyId===void 0||t.SecretAccessKey===void 0)throw Error(`Profile ${e} credential_process returned invalid credentials.`);if(t.Expiration){let s=new Date;if(new Date(t.Expiration)<s)throw Error(`Profile ${e} credential_process returned expired credentials.`)}let n=t.AccountId;!n&&r?.[e]?.aws_account_id&&(n=r[e].aws_account_id);let o={accessKeyId:t.AccessKeyId,secretAccessKey:t.SecretAccessKey,...t.SessionToken&&{sessionToken:t.SessionToken},...t.Expiration&&{expiration:new Date(t.Expiration)},...t.CredentialScope&&{credentialScope:t.CredentialScope},...n&&{accountId:n}};return(0,cz.setCredentialFeature)(o,"CREDENTIALS_PROCESS","w"),o},"getValidatedProcessCredentials"),dz=rm(async(e,t,r)=>{let n=t[e];if(t[e]){let o=n.credential_process;if(o!==void 0){let s=(0,az.promisify)(iz.exec);try{let{stdout:i}=await s(o),a;try{a=JSON.parse(i.trim())}catch{throw Error(`Profile ${e} credential_process returned invalid JSON.`)}return lz(e,a,t)}catch(i){throw new tm.CredentialsProviderError(i.message,{logger:r})}}else throw new tm.CredentialsProviderError(`Profile ${e} did not contain credential_process.`,{logger:r})}else throw new tm.CredentialsProviderError(`Profile ${e} could not be found in shared credentials file.`,{logger:r})},"resolveProcessCredentials"),uz=rm((e={})=>async({callerClientConfig:t}={})=>{e.logger?.debug("@aws-sdk/credential-provider-process - fromProcess");let r=await(0,hT.parseKnownFiles)(e);return dz((0,hT.getProfileName)({profile:e.profile??t?.profile}),r,e.logger)},"fromProcess")});var om=w(ut=>{"use strict";c();var pz=ut&&ut.__createBinding||(Object.create?function(e,t,r,n){n===void 0&&(n=r);var o=Object.getOwnPropertyDescriptor(t,r);(!o||("get"in o?!t.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,o)}:function(e,t,r,n){n===void 0&&(n=r),e[n]=t[r]}),fz=ut&&ut.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),mz=ut&&ut.__importStar||function(){var e=function(t){return e=Object.getOwnPropertyNames||function(r){var n=[];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(n[n.length]=o);return n},e(t)};return function(t){if(t&&t.__esModule)return t;var r={};if(t!=null)for(var n=e(t),o=0;o<n.length;o++)n[o]!=="default"&&pz(r,t,n[o]);return fz(r,t),r}}();Object.defineProperty(ut,"__esModule",{value:!0});ut.fromWebToken=void 0;var gz=e=>async t=>{e.logger?.debug("@aws-sdk/credential-provider-web-identity - fromWebToken");let{roleArn:r,roleSessionName:n,webIdentityToken:o,providerId:s,policyArns:i,policy:a,durationSeconds:l}=e,{roleAssumerWithWebIdentity:d}=e;if(!d){let{getDefaultRoleAssumerWithWebIdentity:u}=await Promise.resolve().then(()=>mz((em(),D(Zf))));d=u({...e.clientConfig,credentialProviderLogger:e.logger,parentClientConfig:{...t?.callerClientConfig,...e.parentClientConfig}},e.clientPlugins)}return d({RoleArn:r,RoleSessionName:n??`aws-sdk-js-session-${Date.now()}`,WebIdentityToken:o,ProviderId:s,PolicyArns:i,Policy:a,DurationSeconds:l})};ut.fromWebToken=gz});var ST=w(Zc=>{"use strict";c();Object.defineProperty(Zc,"__esModule",{value:!0});Zc.fromTokenFile=void 0;var hz=(Ve(),D(Gt)),yz=_e(),_z=F("fs"),vz=om(),vT="AWS_WEB_IDENTITY_TOKEN_FILE",Sz="AWS_ROLE_ARN",Ez="AWS_ROLE_SESSION_NAME",wz=(e={})=>async()=>{e.logger?.debug("@aws-sdk/credential-provider-web-identity - fromTokenFile");let t=e?.webIdentityTokenFile??process.env[vT],r=e?.roleArn??process.env[Sz],n=e?.roleSessionName??process.env[Ez];if(!t||!r)throw new yz.CredentialsProviderError("Web identity configuration not specified",{logger:e.logger});let o=await(0,vz.fromWebToken)({...e,webIdentityToken:(0,_z.readFileSync)(t,{encoding:"ascii"}),roleArn:r,roleSessionName:n})();return t===process.env[vT]&&(0,hz.setCredentialFeature)(o,"CREDENTIALS_ENV_VARS_STS_WEB_ID_TOKEN","h"),o};Zc.fromTokenFile=wz});var am=w((dce,el)=>{"use strict";c();var ET=Object.defineProperty,bz=Object.getOwnPropertyDescriptor,Cz=Object.getOwnPropertyNames,xz=Object.prototype.hasOwnProperty,sm=(e,t,r,n)=>{if(t&&typeof t=="object"||typeof t=="function")for(let o of Cz(t))!xz.call(e,o)&&o!==r&&ET(e,o,{get:()=>t[o],enumerable:!(n=bz(t,o))||n.enumerable});return e},wT=(e,t,r)=>(sm(e,t,"default"),r&&sm(r,t,"default")),Pz=e=>sm(ET({},"__esModule",{value:!0}),e),im={};el.exports=Pz(im);wT(im,ST(),el.exports);wT(im,om(),el.exports)});var RT=w((pce,OT)=>{"use strict";c();var Az=Object.create,Ss=Object.defineProperty,Tz=Object.getOwnPropertyDescriptor,Oz=Object.getOwnPropertyNames,Rz=Object.getPrototypeOf,Iz=Object.prototype.hasOwnProperty,te=(e,t)=>Ss(e,"name",{value:t,configurable:!0}),Nz=(e,t)=>{for(var r in t)Ss(e,r,{get:t[r],enumerable:!0})},PT=(e,t,r,n)=>{if(t&&typeof t=="object"||typeof t=="function")for(let o of Oz(t))!Iz.call(e,o)&&o!==r&&Ss(e,o,{get:()=>t[o],enumerable:!(n=Tz(t,o))||n.enumerable});return e},pr=(e,t,r)=>(r=e!=null?Az(Rz(e)):{},PT(t||!e||!e.__esModule?Ss(r,"default",{value:e,enumerable:!0}):r,e)),kz=e=>PT(Ss({},"__esModule",{value:!0}),e),AT={};Nz(AT,{fromIni:()=>Vz});OT.exports=kz(AT);var lm=Zt(),fr=(Ve(),D(Gt)),vs=_e(),Dz=te((e,t,r)=>{let n={EcsContainer:te(async o=>{let{fromHttp:s}=await Promise.resolve().then(()=>pr(Vp())),{fromContainerMetadata:i}=await Promise.resolve().then(()=>pr(Mo()));return r?.debug("@aws-sdk/credential-provider-ini - credential_source is EcsContainer"),async()=>(0,vs.chain)(s(o??{}),i(o))().then(cm)},"EcsContainer"),Ec2InstanceMetadata:te(async o=>{r?.debug("@aws-sdk/credential-provider-ini - credential_source is Ec2InstanceMetadata");let{fromInstanceMetadata:s}=await Promise.resolve().then(()=>pr(Mo()));return async()=>s(o)().then(cm)},"Ec2InstanceMetadata"),Environment:te(async o=>{r?.debug("@aws-sdk/credential-provider-ini - credential_source is Environment");let{fromEnv:s}=await Promise.resolve().then(()=>pr(Lp()));return async()=>s(o)().then(cm)},"Environment")};if(e in n)return n[e];throw new vs.CredentialsProviderError(`Unsupported credential source in profile ${t}. Got ${e}, expected EcsContainer or Ec2InstanceMetadata or Environment.`,{logger:r})},"resolveCredentialSource"),cm=te(e=>(0,fr.setCredentialFeature)(e,"CREDENTIALS_PROFILE_NAMED_PROVIDER","p"),"setNamedProvider"),Mz=te((e,{profile:t="default",logger:r}={})=>!!e&&typeof e=="object"&&typeof e.role_arn=="string"&&["undefined","string"].indexOf(typeof e.role_session_name)>-1&&["undefined","string"].indexOf(typeof e.external_id)>-1&&["undefined","string"].indexOf(typeof e.mfa_serial)>-1&&(Fz(e,{profile:t,logger:r})||Bz(e,{profile:t,logger:r})),"isAssumeRoleProfile"),Fz=te((e,{profile:t,logger:r})=>{let n=typeof e.source_profile=="string"&&typeof e.credential_source>"u";return n&&r?.debug?.(`    ${t} isAssumeRoleWithSourceProfile source_profile=${e.source_profile}`),n},"isAssumeRoleWithSourceProfile"),Bz=te((e,{profile:t,logger:r})=>{let n=typeof e.credential_source=="string"&&typeof e.source_profile>"u";return n&&r?.debug?.(`    ${t} isCredentialSourceProfile credential_source=${e.credential_source}`),n},"isCredentialSourceProfile"),Lz=te(async(e,t,r,n={})=>{r.logger?.debug("@aws-sdk/credential-provider-ini - resolveAssumeRoleCredentials (STS)");let o=t[e],{source_profile:s,region:i}=o;if(!r.roleAssumer){let{getDefaultRoleAssumer:l}=await Promise.resolve().then(()=>pr((em(),D(Zf))));r.roleAssumer=l({...r.clientConfig,credentialProviderLogger:r.logger,parentClientConfig:{...r?.parentClientConfig,region:i??r?.parentClientConfig?.region}},r.clientPlugins)}if(s&&s in n)throw new vs.CredentialsProviderError(`Detected a cycle attempting to resolve credentials for profile ${(0,lm.getProfileName)(r)}. Profiles visited: `+Object.keys(n).join(", "),{logger:r.logger});r.logger?.debug(`@aws-sdk/credential-provider-ini - finding credential resolver using ${s?`source_profile=[${s}]`:`profile=[${e}]`}`);let a=s?TT(s,t,r,{...n,[s]:!0},bT(t[s]??{})):(await Dz(o.credential_source,e,r.logger)(r))();if(bT(o))return a.then(l=>(0,fr.setCredentialFeature)(l,"CREDENTIALS_PROFILE_SOURCE_PROFILE","o"));{let l={RoleArn:o.role_arn,RoleSessionName:o.role_session_name||`aws-sdk-js-${Date.now()}`,ExternalId:o.external_id,DurationSeconds:parseInt(o.duration_seconds||"3600",10)},{mfa_serial:d}=o;if(d){if(!r.mfaCodeProvider)throw new vs.CredentialsProviderError(`Profile ${e} requires multi-factor authentication, but no MFA code callback was provided.`,{logger:r.logger,tryNextLink:!1});l.SerialNumber=d,l.TokenCode=await r.mfaCodeProvider(d)}let u=await a;return r.roleAssumer(u,l).then(f=>(0,fr.setCredentialFeature)(f,"CREDENTIALS_PROFILE_SOURCE_PROFILE","o"))}},"resolveAssumeRoleCredentials"),bT=te(e=>!e.role_arn&&!!e.credential_source,"isCredentialSourceWithoutRoleArn"),Uz=te(e=>!!e&&typeof e=="object"&&typeof e.credential_process=="string","isProcessProfile"),Hz=te(async(e,t)=>Promise.resolve().then(()=>pr(nm())).then(({fromProcess:r})=>r({...e,profile:t})().then(n=>(0,fr.setCredentialFeature)(n,"CREDENTIALS_PROFILE_PROCESS","v"))),"resolveProcessCredentials"),jz=te(async(e,t,r={})=>{let{fromSSO:n}=await Promise.resolve().then(()=>pr(Sf()));return n({profile:e,logger:r.logger,parentClientConfig:r.parentClientConfig,clientConfig:r.clientConfig})().then(o=>t.sso_session?(0,fr.setCredentialFeature)(o,"CREDENTIALS_PROFILE_SSO","r"):(0,fr.setCredentialFeature)(o,"CREDENTIALS_PROFILE_SSO_LEGACY","t"))},"resolveSsoCredentials"),$z=te(e=>e&&(typeof e.sso_start_url=="string"||typeof e.sso_account_id=="string"||typeof e.sso_session=="string"||typeof e.sso_region=="string"||typeof e.sso_role_name=="string"),"isSsoProfile"),CT=te(e=>!!e&&typeof e=="object"&&typeof e.aws_access_key_id=="string"&&typeof e.aws_secret_access_key=="string"&&["undefined","string"].indexOf(typeof e.aws_session_token)>-1&&["undefined","string"].indexOf(typeof e.aws_account_id)>-1,"isStaticCredsProfile"),xT=te(async(e,t)=>{t?.logger?.debug("@aws-sdk/credential-provider-ini - resolveStaticCredentials");let r={accessKeyId:e.aws_access_key_id,secretAccessKey:e.aws_secret_access_key,sessionToken:e.aws_session_token,...e.aws_credential_scope&&{credentialScope:e.aws_credential_scope},...e.aws_account_id&&{accountId:e.aws_account_id}};return(0,fr.setCredentialFeature)(r,"CREDENTIALS_PROFILE","n")},"resolveStaticCredentials"),qz=te(e=>!!e&&typeof e=="object"&&typeof e.web_identity_token_file=="string"&&typeof e.role_arn=="string"&&["undefined","string"].indexOf(typeof e.role_session_name)>-1,"isWebIdentityProfile"),Gz=te(async(e,t)=>Promise.resolve().then(()=>pr(am())).then(({fromTokenFile:r})=>r({webIdentityTokenFile:e.web_identity_token_file,roleArn:e.role_arn,roleSessionName:e.role_session_name,roleAssumerWithWebIdentity:t.roleAssumerWithWebIdentity,logger:t.logger,parentClientConfig:t.parentClientConfig})().then(n=>(0,fr.setCredentialFeature)(n,"CREDENTIALS_PROFILE_STS_WEB_ID_TOKEN","q"))),"resolveWebIdentityCredentials"),TT=te(async(e,t,r,n={},o=!1)=>{let s=t[e];if(Object.keys(n).length>0&&CT(s))return xT(s,r);if(o||Mz(s,{profile:e,logger:r.logger}))return Lz(e,t,r,n);if(CT(s))return xT(s,r);if(qz(s))return Gz(s,r);if(Uz(s))return Hz(r,e);if($z(s))return await jz(e,s,r);throw new vs.CredentialsProviderError(`Could not resolve credentials using profile: [${e}] in configuration/credentials file(s).`,{logger:r.logger})},"resolveProfileData"),Vz=te((e={})=>async({callerClientConfig:t}={})=>{let r={...e,parentClientConfig:{...t,...e.parentClientConfig}};r.logger?.debug("@aws-sdk/credential-provider-ini - fromIni");let n=await(0,lm.parseKnownFiles)(r);return TT((0,lm.getProfileName)({profile:e.profile??t?.profile}),n,r)},"fromIni")});var LT=w((mce,BT)=>{"use strict";c();var zz=Object.create,Es=Object.defineProperty,Wz=Object.getOwnPropertyDescriptor,Kz=Object.getOwnPropertyNames,Yz=Object.getPrototypeOf,Jz=Object.prototype.hasOwnProperty,tl=(e,t)=>Es(e,"name",{value:t,configurable:!0}),Xz=(e,t)=>{for(var r in t)Es(e,r,{get:t[r],enumerable:!0})},kT=(e,t,r,n)=>{if(t&&typeof t=="object"||typeof t=="function")for(let o of Kz(t))!Jz.call(e,o)&&o!==r&&Es(e,o,{get:()=>t[o],enumerable:!(n=Wz(t,o))||n.enumerable});return e},Dn=(e,t,r)=>(r=e!=null?zz(Yz(e)):{},kT(t||!e||!e.__esModule?Es(r,"default",{value:e,enumerable:!0}):r,e)),Qz=e=>kT(Es({},"__esModule",{value:!0}),e),DT={};Xz(DT,{credentialsTreatedAsExpired:()=>FT,credentialsWillNeedRefresh:()=>MT,defaultProvider:()=>t8});BT.exports=Qz(DT);var dm=Lp(),Zz=Zt(),qr=_e(),IT="AWS_EC2_METADATA_DISABLED",e8=tl(async e=>{let{ENV_CMDS_FULL_URI:t,ENV_CMDS_RELATIVE_URI:r,fromContainerMetadata:n,fromInstanceMetadata:o}=await Promise.resolve().then(()=>Dn(Mo()));if(process.env[r]||process.env[t]){e.logger?.debug("@aws-sdk/credential-provider-node - remoteProvider::fromHttp/fromContainerMetadata");let{fromHttp:s}=await Promise.resolve().then(()=>Dn(Vp()));return(0,qr.chain)(s(e),n(e))}return process.env[IT]&&process.env[IT]!=="false"?async()=>{throw new qr.CredentialsProviderError("EC2 Instance Metadata Service access disabled",{logger:e.logger})}:(e.logger?.debug("@aws-sdk/credential-provider-node - remoteProvider::fromInstanceMetadata"),o(e))},"remoteProvider"),NT=!1,t8=tl((e={})=>(0,qr.memoize)((0,qr.chain)(async()=>{if(e.profile??process.env[Zz.ENV_PROFILE])throw process.env[dm.ENV_KEY]&&process.env[dm.ENV_SECRET]&&(NT||((e.logger?.warn&&e.logger?.constructor?.name!=="NoOpLogger"?e.logger.warn:console.warn)(`@aws-sdk/credential-provider-node - defaultProvider::fromEnv WARNING:
    Multiple credential sources detected: 
    Both AWS_PROFILE and the pair AWS_ACCESS_KEY_ID/AWS_SECRET_ACCESS_KEY static credentials are set.
    This SDK will proceed with the AWS_PROFILE value.
    
    However, a future version may change this behavior to prefer the ENV static credentials.
    Please ensure that your environment only sets either the AWS_PROFILE or the
    AWS_ACCESS_KEY_ID/AWS_SECRET_ACCESS_KEY pair.
`),NT=!0)),new qr.CredentialsProviderError("AWS_PROFILE is set, skipping fromEnv provider.",{logger:e.logger,tryNextLink:!0});return e.logger?.debug("@aws-sdk/credential-provider-node - defaultProvider::fromEnv"),(0,dm.fromEnv)(e)()},async()=>{e.logger?.debug("@aws-sdk/credential-provider-node - defaultProvider::fromSSO");let{ssoStartUrl:t,ssoAccountId:r,ssoRegion:n,ssoRoleName:o,ssoSession:s}=e;if(!t&&!r&&!n&&!o&&!s)throw new qr.CredentialsProviderError("Skipping SSO provider in default chain (inputs do not include SSO fields).",{logger:e.logger});let{fromSSO:i}=await Promise.resolve().then(()=>Dn(Sf()));return i(e)()},async()=>{e.logger?.debug("@aws-sdk/credential-provider-node - defaultProvider::fromIni");let{fromIni:t}=await Promise.resolve().then(()=>Dn(RT()));return t(e)()},async()=>{e.logger?.debug("@aws-sdk/credential-provider-node - defaultProvider::fromProcess");let{fromProcess:t}=await Promise.resolve().then(()=>Dn(nm()));return t(e)()},async()=>{e.logger?.debug("@aws-sdk/credential-provider-node - defaultProvider::fromTokenFile");let{fromTokenFile:t}=await Promise.resolve().then(()=>Dn(am()));return t(e)()},async()=>(e.logger?.debug("@aws-sdk/credential-provider-node - defaultProvider::remoteProvider"),(await e8(e))()),async()=>{throw new qr.CredentialsProviderError("Could not load credentials from any providers",{tryNextLink:!1,logger:e.logger})}),FT,MT),"defaultProvider"),MT=tl(e=>e?.expiration!==void 0,"credentialsWillNeedRefresh"),FT=tl(e=>e?.expiration!==void 0&&e.expiration.getTime()-Date.now()<3e5,"credentialsTreatedAsExpired")});var $T=w((hce,jT)=>{"use strict";c();var nl=Object.defineProperty,r8=Object.getOwnPropertyDescriptor,n8=Object.getOwnPropertyNames,o8=Object.prototype.hasOwnProperty,ol=(e,t)=>nl(e,"name",{value:t,configurable:!0}),s8=(e,t)=>{for(var r in t)nl(e,r,{get:t[r],enumerable:!0})},i8=(e,t,r,n)=>{if(t&&typeof t=="object"||typeof t=="function")for(let o of n8(t))!o8.call(e,o)&&o!==r&&nl(e,o,{get:()=>t[o],enumerable:!(n=r8(t,o))||n.enumerable});return e},a8=e=>i8(nl({},"__esModule",{value:!0}),e),UT={};s8(UT,{eventStreamPayloadHandlerProvider:()=>u8});jT.exports=a8(UT);var c8=ga(),rl=F("stream"),l8=class extends rl.Transform{static{ol(this,"EventSigningStream")}priorSignature;messageSigner;eventStreamCodec;systemClockOffsetProvider;constructor(e){super({autoDestroy:!0,readableObjectMode:!0,writableObjectMode:!0,...e}),this.priorSignature=e.priorSignature,this.eventStreamCodec=e.eventStreamCodec,this.messageSigner=e.messageSigner,this.systemClockOffsetProvider=e.systemClockOffsetProvider}async _transform(e,t,r){try{let n=new Date(Date.now()+await this.systemClockOffsetProvider()),o={":date":{type:"timestamp",value:n}},s=await this.messageSigner.sign({message:{body:e,headers:o},priorSignature:this.priorSignature},{signingDate:n});this.priorSignature=s.signature;let i=this.eventStreamCodec.encode({headers:{...o,":chunk-signature":{type:"binary",value:HT(s.signature)}},body:e});return this.push(i),r()}catch(n){r(n)}}};function HT(e){let t=Buffer.from(e,"hex");return new Uint8Array(t.buffer,t.byteOffset,t.byteLength/Uint8Array.BYTES_PER_ELEMENT)}ol(HT,"getSignatureBinary");var d8=class{static{ol(this,"EventStreamPayloadHandler")}messageSigner;eventStreamCodec;systemClockOffsetProvider;constructor(e){this.messageSigner=e.messageSigner,this.eventStreamCodec=new c8.EventStreamCodec(e.utf8Encoder,e.utf8Decoder),this.systemClockOffsetProvider=async()=>e.systemClockOffset??0}async handle(e,t,r={}){let n=t.request,{body:o,query:s}=n;if(!(o instanceof rl.Readable))throw new Error("Eventstream payload must be a Readable stream.");let i=o;n.body=new rl.PassThrough({objectMode:!0});let l=n.headers?.authorization?.match(/Signature=([\w]+)$/)?.[1]??s?.["X-Amz-Signature"]??"",d=new l8({priorSignature:l,eventStreamCodec:this.eventStreamCodec,messageSigner:await this.messageSigner(),systemClockOffsetProvider:this.systemClockOffsetProvider});(0,rl.pipeline)(i,d,n.body,f=>{if(f)throw f});let u;try{u=await e(t)}catch(f){throw n.body.end(),f}return u}},u8=ol(e=>new d8(e),"eventStreamPayloadHandlerProvider")});var WT=w((Sce,zT)=>{c();var sl=Object.defineProperty,p8=Object.getOwnPropertyDescriptor,f8=Object.getOwnPropertyNames,m8=Object.prototype.hasOwnProperty,um=(e,t)=>sl(e,"name",{value:t,configurable:!0}),g8=(e,t)=>{for(var r in t)sl(e,r,{get:t[r],enumerable:!0})},h8=(e,t,r,n)=>{if(t&&typeof t=="object"||typeof t=="function")for(let o of f8(t))!m8.call(e,o)&&o!==r&&sl(e,o,{get:()=>t[o],enumerable:!(n=p8(t,o))||n.enumerable});return e},y8=e=>h8(sl({},"__esModule",{value:!0}),e),qT={};g8(qT,{EventStreamMarshaller:()=>VT,eventStreamSerdeProvider:()=>S8});zT.exports=y8(qT);var _8=sp(),v8=F("stream");async function*GT(e){let t=!1,r=!1,n=new Array;for(e.on("error",o=>{if(t||(t=!0),o)throw o}),e.on("data",o=>{n.push(o)}),e.on("end",()=>{t=!0});!r;){let o=await new Promise(s=>setTimeout(()=>s(n.shift()),0));o&&(yield o),r=t&&n.length===0}}um(GT,"readabletoIterable");var VT=class{static{um(this,"EventStreamMarshaller")}constructor({utf8Encoder:e,utf8Decoder:t}){this.universalMarshaller=new _8.EventStreamMarshaller({utf8Decoder:t,utf8Encoder:e})}deserialize(e,t){let r=typeof e[Symbol.asyncIterator]=="function"?e:GT(e);return this.universalMarshaller.deserialize(r,t)}serialize(e,t){return v8.Readable.from(this.universalMarshaller.serialize(e,t))}},S8=um(e=>new VT(e),"eventStreamSerdeProvider")});var aO=w(il=>{"use strict";c();Object.defineProperty(il,"__esModule",{value:!0});il.ruleSet=void 0;var oO="required",ft="fn",mt="argv",Fn="ref",KT=!0,YT="isSet",bs="booleanEquals",Mn="error",ws="endpoint",Se="tree",pm="PartitionResult",JT={[oO]:!1,type:"String"},XT={[oO]:!0,default:!1,type:"Boolean"},QT={[Fn]:"Endpoint"},sO={[ft]:bs,[mt]:[{[Fn]:"UseFIPS"},!0]},iO={[ft]:bs,[mt]:[{[Fn]:"UseDualStack"},!0]},pt={},ZT={[ft]:"getAttr",[mt]:[{[Fn]:pm},"supportsFIPS"]},eO={[ft]:bs,[mt]:[!0,{[ft]:"getAttr",[mt]:[{[Fn]:pm},"supportsDualStack"]}]},tO=[sO],rO=[iO],nO=[{[Fn]:"Region"}],E8={version:"1.0",parameters:{Region:JT,UseDualStack:XT,UseFIPS:XT,Endpoint:JT},rules:[{conditions:[{[ft]:YT,[mt]:[QT]}],rules:[{conditions:tO,error:"Invalid Configuration: FIPS and custom endpoint are not supported",type:Mn},{rules:[{conditions:rO,error:"Invalid Configuration: Dualstack and custom endpoint are not supported",type:Mn},{endpoint:{url:QT,properties:pt,headers:pt},type:ws}],type:Se}],type:Se},{rules:[{conditions:[{[ft]:YT,[mt]:nO}],rules:[{conditions:[{[ft]:"aws.partition",[mt]:nO,assign:pm}],rules:[{conditions:[sO,iO],rules:[{conditions:[{[ft]:bs,[mt]:[KT,ZT]},eO],rules:[{rules:[{endpoint:{url:"https://bedrock-runtime-fips.{Region}.{PartitionResult#dualStackDnsSuffix}",properties:pt,headers:pt},type:ws}],type:Se}],type:Se},{error:"FIPS and DualStack are enabled, but this partition does not support one or both",type:Mn}],type:Se},{conditions:tO,rules:[{conditions:[{[ft]:bs,[mt]:[ZT,KT]}],rules:[{rules:[{endpoint:{url:"https://bedrock-runtime-fips.{Region}.{PartitionResult#dnsSuffix}",properties:pt,headers:pt},type:ws}],type:Se}],type:Se},{error:"FIPS is enabled but this partition does not support FIPS",type:Mn}],type:Se},{conditions:rO,rules:[{conditions:[eO],rules:[{rules:[{endpoint:{url:"https://bedrock-runtime.{Region}.{PartitionResult#dualStackDnsSuffix}",properties:pt,headers:pt},type:ws}],type:Se}],type:Se},{error:"DualStack is enabled but this partition does not support DualStack",type:Mn}],type:Se},{rules:[{endpoint:{url:"https://bedrock-runtime.{Region}.{PartitionResult#dnsSuffix}",properties:pt,headers:pt},type:ws}],type:Se}],type:Se}],type:Se},{error:"Invalid Configuration: Missing Region",type:Mn}],type:Se}]};il.ruleSet=E8});var cO=w(al=>{"use strict";c();Object.defineProperty(al,"__esModule",{value:!0});al.defaultEndpointResolver=void 0;var w8=Zr(),fm=Qr(),b8=aO(),C8=new fm.EndpointCache({size:50,params:["Endpoint","Region","UseDualStack","UseFIPS"]}),x8=(e,t={})=>C8.get(e,()=>(0,fm.resolveEndpoint)(b8.ruleSet,{endpointParams:e,logger:t.logger}));al.defaultEndpointResolver=x8;fm.customEndpointFunctions.aws=w8.awsEndpointFunctions});var uO=w(cl=>{"use strict";c();Object.defineProperty(cl,"__esModule",{value:!0});cl.getRuntimeConfig=void 0;var P8=(ne(),D(nt)),A8=(ce(),D(wt)),T8=M(),O8=jt(),lO=ge(),dO=ie(),R8=Bp(),I8=cO(),N8=e=>({apiVersion:"2023-09-30",base64Decoder:e?.base64Decoder??lO.fromBase64,base64Encoder:e?.base64Encoder??lO.toBase64,disableHostPrefix:e?.disableHostPrefix??!1,endpointProvider:e?.endpointProvider??I8.defaultEndpointResolver,extensions:e?.extensions??[],httpAuthSchemeProvider:e?.httpAuthSchemeProvider??R8.defaultBedrockRuntimeHttpAuthSchemeProvider,httpAuthSchemes:e?.httpAuthSchemes??[{schemeId:"aws.auth#sigv4",identityProvider:t=>t.getIdentityProvider("aws.auth#sigv4"),signer:new P8.AwsSdkSigV4Signer},{schemeId:"smithy.api#httpBearerAuth",identityProvider:t=>t.getIdentityProvider("smithy.api#httpBearerAuth"),signer:new A8.HttpBearerAuthSigner}],logger:e?.logger??new T8.NoOpLogger,serviceId:e?.serviceId??"Bedrock Runtime",urlParser:e?.urlParser??O8.parseUrl,utf8Decoder:e?.utf8Decoder??dO.fromUtf8,utf8Encoder:e?.utf8Encoder??dO.toUtf8});cl.getRuntimeConfig=N8});var hO=w(dl=>{"use strict";c();Object.defineProperty(dl,"__esModule",{value:!0});dl.getRuntimeConfig=void 0;var k8=(dn(),D(ln)),D8=k8.__importDefault(gC()),mm=(ne(),D(nt)),M8=LT(),F8=$T(),pO=_f(),fO=Fo(),ll=it(),B8=(ce(),D(wt)),L8=WT(),U8=Bo(),mO=Pt(),Gr=er(),gO=mr(),H8=Lo(),j8=mn(),$8=uO(),q8=M(),G8=jo(),V8=M(),z8=e=>{(0,V8.emitWarningIfUnsupportedVersion)(process.version);let t=(0,G8.resolveDefaultsModeConfig)(e),r=()=>t().then(q8.loadConfigsForDefaultMode),n=(0,$8.getRuntimeConfig)(e);(0,mm.emitWarningIfUnsupportedVersion)(process.version);let o={profile:e?.profile,logger:n.logger,signingName:"bedrock"};return{...n,...e,runtime:"node",defaultsMode:t,authSchemePreference:e?.authSchemePreference??(0,Gr.loadConfig)(mm.NODE_AUTH_SCHEME_PREFERENCE_OPTIONS,o),bodyLengthChecker:e?.bodyLengthChecker??H8.calculateBodyLength,credentialDefaultProvider:e?.credentialDefaultProvider??M8.defaultProvider,defaultUserAgentProvider:e?.defaultUserAgentProvider??(0,fO.createDefaultUserAgentProvider)({serviceId:n.serviceId,clientVersion:D8.default.version}),eventStreamPayloadHandlerProvider:e?.eventStreamPayloadHandlerProvider??F8.eventStreamPayloadHandlerProvider,eventStreamSerdeProvider:e?.eventStreamSerdeProvider??L8.eventStreamSerdeProvider,httpAuthSchemes:e?.httpAuthSchemes??[{schemeId:"aws.auth#sigv4",identityProvider:s=>s.getIdentityProvider("aws.auth#sigv4"),signer:new mm.AwsSdkSigV4Signer},{schemeId:"smithy.api#httpBearerAuth",identityProvider:s=>s.getIdentityProvider("smithy.api#httpBearerAuth")||(async i=>{try{return await(0,pO.fromEnvSigningName)({signingName:"bedrock"})()}catch{return await(0,pO.nodeProvider)(i)(i)}}),signer:new B8.HttpBearerAuthSigner}],maxAttempts:e?.maxAttempts??(0,Gr.loadConfig)(mO.NODE_MAX_ATTEMPT_CONFIG_OPTIONS,e),region:e?.region??(0,Gr.loadConfig)(ll.NODE_REGION_CONFIG_OPTIONS,{...ll.NODE_REGION_CONFIG_FILE_OPTIONS,...o}),requestHandler:gO.NodeHttp2Handler.create(e?.requestHandler??(async()=>({...await r(),disableConcurrentStreams:!0}))),retryMode:e?.retryMode??(0,Gr.loadConfig)({...mO.NODE_RETRY_MODE_CONFIG_OPTIONS,default:async()=>(await r()).retryMode||j8.DEFAULT_RETRY_MODE},e),sha256:e?.sha256??U8.Hash.bind(null,"sha256"),streamCollector:e?.streamCollector??gO.streamCollector,useDualstackEndpoint:e?.useDualstackEndpoint??(0,Gr.loadConfig)(ll.NODE_USE_DUALSTACK_ENDPOINT_CONFIG_OPTIONS,o),useFipsEndpoint:e?.useFipsEndpoint??(0,Gr.loadConfig)(ll.NODE_USE_FIPS_ENDPOINT_CONFIG_OPTIONS,o),userAgentAppId:e?.userAgentAppId??(0,Gr.loadConfig)(fO.NODE_APP_ID_CONFIG_OPTIONS,o)}};dl.getRuntimeConfig=z8});var aI=w((Ice,iI)=>{"use strict";c();var xl=Object.defineProperty,W8=Object.getOwnPropertyDescriptor,K8=Object.getOwnPropertyNames,Y8=Object.prototype.hasOwnProperty,p=(e,t)=>xl(e,"name",{value:t,configurable:!0}),J8=(e,t)=>{for(var r in t)xl(e,r,{get:t[r],enumerable:!0})},X8=(e,t,r,n)=>{if(t&&typeof t=="object"||typeof t=="function")for(let o of K8(t))!Y8.call(e,o)&&o!==r&&xl(e,o,{get:()=>t[o],enumerable:!(n=W8(t,o))||n.enumerable});return e},Q8=e=>X8(xl({},"__esModule",{value:!0}),e),RO={};J8(RO,{AccessDeniedException:()=>DO,ApplyGuardrailCommand:()=>XR,ApplyGuardrailRequestFilterSensitiveLog:()=>lR,AsyncInvokeOutputDataConfig:()=>gm,AsyncInvokeStatus:()=>l6,AsyncInvokeSummaryFilterSensitiveLog:()=>sR,BedrockRuntime:()=>sI,BedrockRuntimeClient:()=>Rm,BedrockRuntimeServiceException:()=>xe,BidirectionalInputPayloadPartFilterSensitiveLog:()=>J6,BidirectionalOutputPayloadPartFilterSensitiveLog:()=>Q6,CachePointType:()=>R6,CitationGeneratedContent:()=>_m,CitationLocation:()=>hm,CitationSourceContent:()=>ym,ConflictException:()=>$O,ContentBlock:()=>Sl,ContentBlockDelta:()=>Cm,ContentBlockDeltaEventFilterSensitiveLog:()=>hR,ContentBlockDeltaFilterSensitiveLog:()=>gR,ContentBlockFilterSensitiveLog:()=>dR,ContentBlockStart:()=>xm,ConversationRole:()=>B6,ConverseCommand:()=>QR,ConverseOutput:()=>wm,ConverseOutputFilterSensitiveLog:()=>pR,ConverseRequestFilterSensitiveLog:()=>uR,ConverseResponseFilterSensitiveLog:()=>fR,ConverseStreamCommand:()=>ZR,ConverseStreamOutput:()=>Pm,ConverseStreamOutputFilterSensitiveLog:()=>Y6,ConverseStreamRequestFilterSensitiveLog:()=>mR,ConverseStreamResponseFilterSensitiveLog:()=>yR,DocumentContentBlock:()=>vm,DocumentFormat:()=>I6,DocumentSource:()=>fl,GetAsyncInvokeCommand:()=>eI,GetAsyncInvokeResponseFilterSensitiveLog:()=>oR,GuardrailAction:()=>h6,GuardrailContentBlock:()=>pl,GuardrailContentBlockFilterSensitiveLog:()=>cR,GuardrailContentFilterConfidence:()=>_6,GuardrailContentFilterStrength:()=>v6,GuardrailContentFilterType:()=>S6,GuardrailContentPolicyAction:()=>y6,GuardrailContentQualifier:()=>f6,GuardrailContentSource:()=>g6,GuardrailContextualGroundingFilterType:()=>w6,GuardrailContextualGroundingPolicyAction:()=>E6,GuardrailConverseContentBlock:()=>gl,GuardrailConverseContentBlockFilterSensitiveLog:()=>Im,GuardrailConverseContentQualifier:()=>k6,GuardrailConverseImageBlockFilterSensitiveLog:()=>V6,GuardrailConverseImageFormat:()=>N6,GuardrailConverseImageSource:()=>ml,GuardrailConverseImageSourceFilterSensitiveLog:()=>G6,GuardrailImageBlockFilterSensitiveLog:()=>q6,GuardrailImageFormat:()=>p6,GuardrailImageSource:()=>ul,GuardrailImageSourceFilterSensitiveLog:()=>$6,GuardrailManagedWordType:()=>T6,GuardrailOutputScope:()=>m6,GuardrailPiiEntityType:()=>C6,GuardrailSensitiveInformationPolicyAction:()=>b6,GuardrailStreamProcessingMode:()=>H6,GuardrailTopicPolicyAction:()=>x6,GuardrailTopicType:()=>P6,GuardrailTrace:()=>O6,GuardrailWordPolicyAction:()=>A6,ImageFormat:()=>D6,ImageSource:()=>hl,InternalServerException:()=>FO,InvokeModelCommand:()=>tI,InvokeModelRequestFilterSensitiveLog:()=>_R,InvokeModelResponseFilterSensitiveLog:()=>vR,InvokeModelWithBidirectionalStreamCommand:()=>rI,InvokeModelWithBidirectionalStreamInput:()=>Cl,InvokeModelWithBidirectionalStreamInputFilterSensitiveLog:()=>X6,InvokeModelWithBidirectionalStreamOutput:()=>Am,InvokeModelWithBidirectionalStreamOutputFilterSensitiveLog:()=>Z6,InvokeModelWithBidirectionalStreamRequestFilterSensitiveLog:()=>SR,InvokeModelWithBidirectionalStreamResponseFilterSensitiveLog:()=>ER,InvokeModelWithResponseStreamCommand:()=>nI,InvokeModelWithResponseStreamRequestFilterSensitiveLog:()=>wR,InvokeModelWithResponseStreamResponseFilterSensitiveLog:()=>bR,ListAsyncInvokesCommand:()=>Um,ListAsyncInvokesResponseFilterSensitiveLog:()=>iR,MessageFilterSensitiveLog:()=>Pl,ModelErrorException:()=>JO,ModelNotReadyException:()=>QO,ModelStreamErrorException:()=>rR,ModelTimeoutException:()=>eR,PayloadPartFilterSensitiveLog:()=>eW,PerformanceConfigLatency:()=>L6,PromptVariableValues:()=>Sm,ReasoningContentBlock:()=>yl,ReasoningContentBlockDelta:()=>bm,ReasoningContentBlockDeltaFilterSensitiveLog:()=>K6,ReasoningContentBlockFilterSensitiveLog:()=>W6,ReasoningTextBlockFilterSensitiveLog:()=>z6,ResourceNotFoundException:()=>GO,ResponseStream:()=>Tm,ResponseStreamFilterSensitiveLog:()=>tW,ServiceQuotaExceededException:()=>zO,ServiceUnavailableException:()=>KO,SortAsyncInvocationBy:()=>d6,SortOrder:()=>u6,StartAsyncInvokeCommand:()=>oI,StartAsyncInvokeRequestFilterSensitiveLog:()=>aR,StopReason:()=>U6,SystemContentBlock:()=>El,SystemContentBlockFilterSensitiveLog:()=>Nm,ThrottlingException:()=>LO,Tool:()=>bl,ToolChoice:()=>Em,ToolInputSchema:()=>wl,ToolResultContentBlock:()=>vl,ToolResultStatus:()=>F6,Trace:()=>j6,ValidationException:()=>HO,VideoFormat:()=>M6,VideoSource:()=>_l,__Client:()=>m.Client,paginateListAsyncInvokes:()=>V5});iI.exports=Q8(RO);var IO=lg(),yO=Ln(),Z8=Un(),e6=Hn(),_O=an(),NO=Pw(),t6=it(),Oe=(ce(),D(wt)),r6=Vw(),n6=Po(),gt=tr(),vO=Pt(),SO=Bp(),o6=p(e=>Object.assign(e,{useDualstackEndpoint:e.useDualstackEndpoint??!1,useFipsEndpoint:e.useFipsEndpoint??!1,defaultSigningName:"bedrock"}),"resolveClientEndpointParameters"),kt={UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}},s6=hO(),EO=$o(),wO=q(),m=M(),i6=p(e=>{let t=e.httpAuthSchemes,r=e.httpAuthSchemeProvider,n=e.credentials,o=e.token;return{setHttpAuthScheme(s){let i=t.findIndex(a=>a.schemeId===s.schemeId);i===-1?t.push(s):t.splice(i,1,s)},httpAuthSchemes(){return t},setHttpAuthSchemeProvider(s){r=s},httpAuthSchemeProvider(){return r},setCredentials(s){n=s},credentials(){return n},setToken(s){o=s},token(){return o}}},"getHttpAuthExtensionConfiguration"),a6=p(e=>({httpAuthSchemes:e.httpAuthSchemes(),httpAuthSchemeProvider:e.httpAuthSchemeProvider(),credentials:e.credentials(),token:e.token()}),"resolveHttpAuthRuntimeConfig"),c6=p((e,t)=>{let r=Object.assign((0,EO.getAwsRegionExtensionConfiguration)(e),(0,m.getDefaultExtensionConfiguration)(e),(0,wO.getHttpHandlerExtensionConfiguration)(e),i6(e));return t.forEach(n=>n.configure(r)),Object.assign(e,(0,EO.resolveAwsRegionExtensionConfiguration)(r),(0,m.resolveDefaultRuntimeConfig)(r),(0,wO.resolveHttpHandlerRuntimeConfig)(r),a6(r))},"resolveRuntimeExtensions"),Rm=class extends m.Client{static{p(this,"BedrockRuntimeClient")}config;constructor(...[e]){let t=(0,s6.getRuntimeConfig)(e||{});super(t),this.initConfig=t;let r=o6(t),n=(0,_O.resolveUserAgentConfig)(r),o=(0,vO.resolveRetryConfig)(n),s=(0,t6.resolveRegionConfig)(o),i=(0,yO.resolveHostHeaderConfig)(s),a=(0,gt.resolveEndpointConfig)(i),l=(0,r6.resolveEventStreamSerdeConfig)(a),d=(0,SO.resolveHttpAuthSchemeConfig)(l),u=(0,IO.resolveEventStreamConfig)(d),f=(0,NO.resolveWebSocketConfig)(u),g=c6(f,e?.extensions||[]);this.config=g,this.middlewareStack.use((0,_O.getUserAgentPlugin)(this.config)),this.middlewareStack.use((0,vO.getRetryPlugin)(this.config)),this.middlewareStack.use((0,n6.getContentLengthPlugin)(this.config)),this.middlewareStack.use((0,yO.getHostHeaderPlugin)(this.config)),this.middlewareStack.use((0,Z8.getLoggerPlugin)(this.config)),this.middlewareStack.use((0,e6.getRecursionDetectionPlugin)(this.config)),this.middlewareStack.use((0,Oe.getHttpAuthSchemeEndpointRuleSetPlugin)(this.config,{httpAuthSchemeParametersProvider:SO.defaultBedrockRuntimeHttpAuthSchemeParametersProvider,identityProviderConfigProvider:p(async h=>new Oe.DefaultIdentityProviderConfig({"aws.auth#sigv4":h.credentials,"smithy.api#httpBearerAuth":h.token}),"identityProviderConfigProvider")})),this.middlewareStack.use((0,Oe.getHttpSigningPlugin)(this.config))}destroy(){super.destroy()}},Dt=Bt(),xe=class kO extends m.ServiceException{static{p(this,"BedrockRuntimeServiceException")}constructor(t){super(t),Object.setPrototypeOf(this,kO.prototype)}},DO=class MO extends xe{static{p(this,"AccessDeniedException")}name="AccessDeniedException";$fault="client";constructor(t){super({name:"AccessDeniedException",$fault:"client",...t}),Object.setPrototypeOf(this,MO.prototype)}},gm;(e=>{e.visit=p((t,r)=>t.s3OutputDataConfig!==void 0?r.s3OutputDataConfig(t.s3OutputDataConfig):r._(t.$unknown[0],t.$unknown[1]),"visit")})(gm||(gm={}));var l6={COMPLETED:"Completed",FAILED:"Failed",IN_PROGRESS:"InProgress"},FO=class BO extends xe{static{p(this,"InternalServerException")}name="InternalServerException";$fault="server";constructor(t){super({name:"InternalServerException",$fault:"server",...t}),Object.setPrototypeOf(this,BO.prototype)}},LO=class UO extends xe{static{p(this,"ThrottlingException")}name="ThrottlingException";$fault="client";constructor(t){super({name:"ThrottlingException",$fault:"client",...t}),Object.setPrototypeOf(this,UO.prototype)}},HO=class jO extends xe{static{p(this,"ValidationException")}name="ValidationException";$fault="client";constructor(t){super({name:"ValidationException",$fault:"client",...t}),Object.setPrototypeOf(this,jO.prototype)}},d6={SUBMISSION_TIME:"SubmissionTime"},u6={ASCENDING:"Ascending",DESCENDING:"Descending"},$O=class qO extends xe{static{p(this,"ConflictException")}name="ConflictException";$fault="client";constructor(t){super({name:"ConflictException",$fault:"client",...t}),Object.setPrototypeOf(this,qO.prototype)}},GO=class VO extends xe{static{p(this,"ResourceNotFoundException")}name="ResourceNotFoundException";$fault="client";constructor(t){super({name:"ResourceNotFoundException",$fault:"client",...t}),Object.setPrototypeOf(this,VO.prototype)}},zO=class WO extends xe{static{p(this,"ServiceQuotaExceededException")}name="ServiceQuotaExceededException";$fault="client";constructor(t){super({name:"ServiceQuotaExceededException",$fault:"client",...t}),Object.setPrototypeOf(this,WO.prototype)}},KO=class YO extends xe{static{p(this,"ServiceUnavailableException")}name="ServiceUnavailableException";$fault="server";constructor(t){super({name:"ServiceUnavailableException",$fault:"server",...t}),Object.setPrototypeOf(this,YO.prototype)}},p6={JPEG:"jpeg",PNG:"png"},ul;(e=>{e.visit=p((t,r)=>t.bytes!==void 0?r.bytes(t.bytes):r._(t.$unknown[0],t.$unknown[1]),"visit")})(ul||(ul={}));var f6={GROUNDING_SOURCE:"grounding_source",GUARD_CONTENT:"guard_content",QUERY:"query"},pl;(e=>{e.visit=p((t,r)=>t.text!==void 0?r.text(t.text):t.image!==void 0?r.image(t.image):r._(t.$unknown[0],t.$unknown[1]),"visit")})(pl||(pl={}));var m6={FULL:"FULL",INTERVENTIONS:"INTERVENTIONS"},g6={INPUT:"INPUT",OUTPUT:"OUTPUT"},h6={GUARDRAIL_INTERVENED:"GUARDRAIL_INTERVENED",NONE:"NONE"},y6={BLOCKED:"BLOCKED",NONE:"NONE"},_6={HIGH:"HIGH",LOW:"LOW",MEDIUM:"MEDIUM",NONE:"NONE"},v6={HIGH:"HIGH",LOW:"LOW",MEDIUM:"MEDIUM",NONE:"NONE"},S6={HATE:"HATE",INSULTS:"INSULTS",MISCONDUCT:"MISCONDUCT",PROMPT_ATTACK:"PROMPT_ATTACK",SEXUAL:"SEXUAL",VIOLENCE:"VIOLENCE"},E6={BLOCKED:"BLOCKED",NONE:"NONE"},w6={GROUNDING:"GROUNDING",RELEVANCE:"RELEVANCE"},b6={ANONYMIZED:"ANONYMIZED",BLOCKED:"BLOCKED",NONE:"NONE"},C6={ADDRESS:"ADDRESS",AGE:"AGE",AWS_ACCESS_KEY:"AWS_ACCESS_KEY",AWS_SECRET_KEY:"AWS_SECRET_KEY",CA_HEALTH_NUMBER:"CA_HEALTH_NUMBER",CA_SOCIAL_INSURANCE_NUMBER:"CA_SOCIAL_INSURANCE_NUMBER",CREDIT_DEBIT_CARD_CVV:"CREDIT_DEBIT_CARD_CVV",CREDIT_DEBIT_CARD_EXPIRY:"CREDIT_DEBIT_CARD_EXPIRY",CREDIT_DEBIT_CARD_NUMBER:"CREDIT_DEBIT_CARD_NUMBER",DRIVER_ID:"DRIVER_ID",EMAIL:"EMAIL",INTERNATIONAL_BANK_ACCOUNT_NUMBER:"INTERNATIONAL_BANK_ACCOUNT_NUMBER",IP_ADDRESS:"IP_ADDRESS",LICENSE_PLATE:"LICENSE_PLATE",MAC_ADDRESS:"MAC_ADDRESS",NAME:"NAME",PASSWORD:"PASSWORD",PHONE:"PHONE",PIN:"PIN",SWIFT_CODE:"SWIFT_CODE",UK_NATIONAL_HEALTH_SERVICE_NUMBER:"UK_NATIONAL_HEALTH_SERVICE_NUMBER",UK_NATIONAL_INSURANCE_NUMBER:"UK_NATIONAL_INSURANCE_NUMBER",UK_UNIQUE_TAXPAYER_REFERENCE_NUMBER:"UK_UNIQUE_TAXPAYER_REFERENCE_NUMBER",URL:"URL",USERNAME:"USERNAME",US_BANK_ACCOUNT_NUMBER:"US_BANK_ACCOUNT_NUMBER",US_BANK_ROUTING_NUMBER:"US_BANK_ROUTING_NUMBER",US_INDIVIDUAL_TAX_IDENTIFICATION_NUMBER:"US_INDIVIDUAL_TAX_IDENTIFICATION_NUMBER",US_PASSPORT_NUMBER:"US_PASSPORT_NUMBER",US_SOCIAL_SECURITY_NUMBER:"US_SOCIAL_SECURITY_NUMBER",VEHICLE_IDENTIFICATION_NUMBER:"VEHICLE_IDENTIFICATION_NUMBER"},x6={BLOCKED:"BLOCKED",NONE:"NONE"},P6={DENY:"DENY"},A6={BLOCKED:"BLOCKED",NONE:"NONE"},T6={PROFANITY:"PROFANITY"},O6={DISABLED:"disabled",ENABLED:"enabled",ENABLED_FULL:"enabled_full"},R6={DEFAULT:"default"},hm;(e=>{e.visit=p((t,r)=>t.documentChar!==void 0?r.documentChar(t.documentChar):t.documentPage!==void 0?r.documentPage(t.documentPage):t.documentChunk!==void 0?r.documentChunk(t.documentChunk):r._(t.$unknown[0],t.$unknown[1]),"visit")})(hm||(hm={}));var ym;(e=>{e.visit=p((t,r)=>t.text!==void 0?r.text(t.text):r._(t.$unknown[0],t.$unknown[1]),"visit")})(ym||(ym={}));var _m;(e=>{e.visit=p((t,r)=>t.text!==void 0?r.text(t.text):r._(t.$unknown[0],t.$unknown[1]),"visit")})(_m||(_m={}));var I6={CSV:"csv",DOC:"doc",DOCX:"docx",HTML:"html",MD:"md",PDF:"pdf",TXT:"txt",XLS:"xls",XLSX:"xlsx"},vm;(e=>{e.visit=p((t,r)=>t.text!==void 0?r.text(t.text):r._(t.$unknown[0],t.$unknown[1]),"visit")})(vm||(vm={}));var fl;(e=>{e.visit=p((t,r)=>t.bytes!==void 0?r.bytes(t.bytes):t.s3Location!==void 0?r.s3Location(t.s3Location):t.text!==void 0?r.text(t.text):t.content!==void 0?r.content(t.content):r._(t.$unknown[0],t.$unknown[1]),"visit")})(fl||(fl={}));var N6={JPEG:"jpeg",PNG:"png"},ml;(e=>{e.visit=p((t,r)=>t.bytes!==void 0?r.bytes(t.bytes):r._(t.$unknown[0],t.$unknown[1]),"visit")})(ml||(ml={}));var k6={GROUNDING_SOURCE:"grounding_source",GUARD_CONTENT:"guard_content",QUERY:"query"},gl;(e=>{e.visit=p((t,r)=>t.text!==void 0?r.text(t.text):t.image!==void 0?r.image(t.image):r._(t.$unknown[0],t.$unknown[1]),"visit")})(gl||(gl={}));var D6={GIF:"gif",JPEG:"jpeg",PNG:"png",WEBP:"webp"},hl;(e=>{e.visit=p((t,r)=>t.bytes!==void 0?r.bytes(t.bytes):t.s3Location!==void 0?r.s3Location(t.s3Location):r._(t.$unknown[0],t.$unknown[1]),"visit")})(hl||(hl={}));var yl;(e=>{e.visit=p((t,r)=>t.reasoningText!==void 0?r.reasoningText(t.reasoningText):t.redactedContent!==void 0?r.redactedContent(t.redactedContent):r._(t.$unknown[0],t.$unknown[1]),"visit")})(yl||(yl={}));var M6={FLV:"flv",MKV:"mkv",MOV:"mov",MP4:"mp4",MPEG:"mpeg",MPG:"mpg",THREE_GP:"three_gp",WEBM:"webm",WMV:"wmv"},_l;(e=>{e.visit=p((t,r)=>t.bytes!==void 0?r.bytes(t.bytes):t.s3Location!==void 0?r.s3Location(t.s3Location):r._(t.$unknown[0],t.$unknown[1]),"visit")})(_l||(_l={}));var vl;(e=>{e.visit=p((t,r)=>t.json!==void 0?r.json(t.json):t.text!==void 0?r.text(t.text):t.image!==void 0?r.image(t.image):t.document!==void 0?r.document(t.document):t.video!==void 0?r.video(t.video):r._(t.$unknown[0],t.$unknown[1]),"visit")})(vl||(vl={}));var F6={ERROR:"error",SUCCESS:"success"},Sl;(e=>{e.visit=p((t,r)=>t.text!==void 0?r.text(t.text):t.image!==void 0?r.image(t.image):t.document!==void 0?r.document(t.document):t.video!==void 0?r.video(t.video):t.toolUse!==void 0?r.toolUse(t.toolUse):t.toolResult!==void 0?r.toolResult(t.toolResult):t.guardContent!==void 0?r.guardContent(t.guardContent):t.cachePoint!==void 0?r.cachePoint(t.cachePoint):t.reasoningContent!==void 0?r.reasoningContent(t.reasoningContent):t.citationsContent!==void 0?r.citationsContent(t.citationsContent):r._(t.$unknown[0],t.$unknown[1]),"visit")})(Sl||(Sl={}));var B6={ASSISTANT:"assistant",USER:"user"},L6={OPTIMIZED:"optimized",STANDARD:"standard"},Sm;(e=>{e.visit=p((t,r)=>t.text!==void 0?r.text(t.text):r._(t.$unknown[0],t.$unknown[1]),"visit")})(Sm||(Sm={}));var El;(e=>{e.visit=p((t,r)=>t.text!==void 0?r.text(t.text):t.guardContent!==void 0?r.guardContent(t.guardContent):t.cachePoint!==void 0?r.cachePoint(t.cachePoint):r._(t.$unknown[0],t.$unknown[1]),"visit")})(El||(El={}));var Em;(e=>{e.visit=p((t,r)=>t.auto!==void 0?r.auto(t.auto):t.any!==void 0?r.any(t.any):t.tool!==void 0?r.tool(t.tool):r._(t.$unknown[0],t.$unknown[1]),"visit")})(Em||(Em={}));var wl;(e=>{e.visit=p((t,r)=>t.json!==void 0?r.json(t.json):r._(t.$unknown[0],t.$unknown[1]),"visit")})(wl||(wl={}));var bl;(e=>{e.visit=p((t,r)=>t.toolSpec!==void 0?r.toolSpec(t.toolSpec):t.cachePoint!==void 0?r.cachePoint(t.cachePoint):r._(t.$unknown[0],t.$unknown[1]),"visit")})(bl||(bl={}));var wm;(e=>{e.visit=p((t,r)=>t.message!==void 0?r.message(t.message):r._(t.$unknown[0],t.$unknown[1]),"visit")})(wm||(wm={}));var U6={CONTENT_FILTERED:"content_filtered",END_TURN:"end_turn",GUARDRAIL_INTERVENED:"guardrail_intervened",MAX_TOKENS:"max_tokens",STOP_SEQUENCE:"stop_sequence",TOOL_USE:"tool_use"},JO=class XO extends xe{static{p(this,"ModelErrorException")}name="ModelErrorException";$fault="client";originalStatusCode;resourceName;constructor(t){super({name:"ModelErrorException",$fault:"client",...t}),Object.setPrototypeOf(this,XO.prototype),this.originalStatusCode=t.originalStatusCode,this.resourceName=t.resourceName}},QO=class ZO extends xe{static{p(this,"ModelNotReadyException")}name="ModelNotReadyException";$fault="client";$retryable={};constructor(t){super({name:"ModelNotReadyException",$fault:"client",...t}),Object.setPrototypeOf(this,ZO.prototype)}},eR=class tR extends xe{static{p(this,"ModelTimeoutException")}name="ModelTimeoutException";$fault="client";constructor(t){super({name:"ModelTimeoutException",$fault:"client",...t}),Object.setPrototypeOf(this,tR.prototype)}},H6={ASYNC:"async",SYNC:"sync"},bm;(e=>{e.visit=p((t,r)=>t.text!==void 0?r.text(t.text):t.redactedContent!==void 0?r.redactedContent(t.redactedContent):t.signature!==void 0?r.signature(t.signature):r._(t.$unknown[0],t.$unknown[1]),"visit")})(bm||(bm={}));var Cm;(e=>{e.visit=p((t,r)=>t.text!==void 0?r.text(t.text):t.toolUse!==void 0?r.toolUse(t.toolUse):t.reasoningContent!==void 0?r.reasoningContent(t.reasoningContent):t.citation!==void 0?r.citation(t.citation):r._(t.$unknown[0],t.$unknown[1]),"visit")})(Cm||(Cm={}));var xm;(e=>{e.visit=p((t,r)=>t.toolUse!==void 0?r.toolUse(t.toolUse):r._(t.$unknown[0],t.$unknown[1]),"visit")})(xm||(xm={}));var rR=class nR extends xe{static{p(this,"ModelStreamErrorException")}name="ModelStreamErrorException";$fault="client";originalStatusCode;originalMessage;constructor(t){super({name:"ModelStreamErrorException",$fault:"client",...t}),Object.setPrototypeOf(this,nR.prototype),this.originalStatusCode=t.originalStatusCode,this.originalMessage=t.originalMessage}},Pm;(e=>{e.visit=p((t,r)=>t.messageStart!==void 0?r.messageStart(t.messageStart):t.contentBlockStart!==void 0?r.contentBlockStart(t.contentBlockStart):t.contentBlockDelta!==void 0?r.contentBlockDelta(t.contentBlockDelta):t.contentBlockStop!==void 0?r.contentBlockStop(t.contentBlockStop):t.messageStop!==void 0?r.messageStop(t.messageStop):t.metadata!==void 0?r.metadata(t.metadata):t.internalServerException!==void 0?r.internalServerException(t.internalServerException):t.modelStreamErrorException!==void 0?r.modelStreamErrorException(t.modelStreamErrorException):t.validationException!==void 0?r.validationException(t.validationException):t.throttlingException!==void 0?r.throttlingException(t.throttlingException):t.serviceUnavailableException!==void 0?r.serviceUnavailableException(t.serviceUnavailableException):r._(t.$unknown[0],t.$unknown[1]),"visit")})(Pm||(Pm={}));var j6={DISABLED:"DISABLED",ENABLED:"ENABLED",ENABLED_FULL:"ENABLED_FULL"},Cl;(e=>{e.visit=p((t,r)=>t.chunk!==void 0?r.chunk(t.chunk):r._(t.$unknown[0],t.$unknown[1]),"visit")})(Cl||(Cl={}));var Am;(e=>{e.visit=p((t,r)=>t.chunk!==void 0?r.chunk(t.chunk):t.internalServerException!==void 0?r.internalServerException(t.internalServerException):t.modelStreamErrorException!==void 0?r.modelStreamErrorException(t.modelStreamErrorException):t.validationException!==void 0?r.validationException(t.validationException):t.throttlingException!==void 0?r.throttlingException(t.throttlingException):t.modelTimeoutException!==void 0?r.modelTimeoutException(t.modelTimeoutException):t.serviceUnavailableException!==void 0?r.serviceUnavailableException(t.serviceUnavailableException):r._(t.$unknown[0],t.$unknown[1]),"visit")})(Am||(Am={}));var Tm;(e=>{e.visit=p((t,r)=>t.chunk!==void 0?r.chunk(t.chunk):t.internalServerException!==void 0?r.internalServerException(t.internalServerException):t.modelStreamErrorException!==void 0?r.modelStreamErrorException(t.modelStreamErrorException):t.validationException!==void 0?r.validationException(t.validationException):t.throttlingException!==void 0?r.throttlingException(t.throttlingException):t.modelTimeoutException!==void 0?r.modelTimeoutException(t.modelTimeoutException):t.serviceUnavailableException!==void 0?r.serviceUnavailableException(t.serviceUnavailableException):r._(t.$unknown[0],t.$unknown[1]),"visit")})(Tm||(Tm={}));var oR=p(e=>({...e,...e.failureMessage&&{failureMessage:m.SENSITIVE_STRING},...e.outputDataConfig&&{outputDataConfig:e.outputDataConfig}}),"GetAsyncInvokeResponseFilterSensitiveLog"),sR=p(e=>({...e,...e.failureMessage&&{failureMessage:m.SENSITIVE_STRING},...e.outputDataConfig&&{outputDataConfig:e.outputDataConfig}}),"AsyncInvokeSummaryFilterSensitiveLog"),iR=p(e=>({...e,...e.asyncInvokeSummaries&&{asyncInvokeSummaries:e.asyncInvokeSummaries.map(t=>sR(t))}}),"ListAsyncInvokesResponseFilterSensitiveLog"),aR=p(e=>({...e,...e.modelInput&&{modelInput:m.SENSITIVE_STRING},...e.outputDataConfig&&{outputDataConfig:e.outputDataConfig}}),"StartAsyncInvokeRequestFilterSensitiveLog"),$6=p(e=>{if(e.bytes!==void 0)return{bytes:e.bytes};if(e.$unknown!==void 0)return{[e.$unknown[0]]:"UNKNOWN"}},"GuardrailImageSourceFilterSensitiveLog"),q6=p(e=>({...e,...e.source&&{source:m.SENSITIVE_STRING}}),"GuardrailImageBlockFilterSensitiveLog"),cR=p(e=>{if(e.text!==void 0)return{text:e.text};if(e.image!==void 0)return{image:m.SENSITIVE_STRING};if(e.$unknown!==void 0)return{[e.$unknown[0]]:"UNKNOWN"}},"GuardrailContentBlockFilterSensitiveLog"),lR=p(e=>({...e,...e.content&&{content:e.content.map(t=>cR(t))}}),"ApplyGuardrailRequestFilterSensitiveLog"),G6=p(e=>{if(e.bytes!==void 0)return{bytes:e.bytes};if(e.$unknown!==void 0)return{[e.$unknown[0]]:"UNKNOWN"}},"GuardrailConverseImageSourceFilterSensitiveLog"),V6=p(e=>({...e,...e.source&&{source:m.SENSITIVE_STRING}}),"GuardrailConverseImageBlockFilterSensitiveLog"),Im=p(e=>{if(e.text!==void 0)return{text:e.text};if(e.image!==void 0)return{image:m.SENSITIVE_STRING};if(e.$unknown!==void 0)return{[e.$unknown[0]]:"UNKNOWN"}},"GuardrailConverseContentBlockFilterSensitiveLog"),z6=p(e=>({...e}),"ReasoningTextBlockFilterSensitiveLog"),W6=p(e=>{if(e.reasoningText!==void 0)return{reasoningText:m.SENSITIVE_STRING};if(e.redactedContent!==void 0)return{redactedContent:e.redactedContent};if(e.$unknown!==void 0)return{[e.$unknown[0]]:"UNKNOWN"}},"ReasoningContentBlockFilterSensitiveLog"),dR=p(e=>{if(e.text!==void 0)return{text:e.text};if(e.image!==void 0)return{image:e.image};if(e.document!==void 0)return{document:e.document};if(e.video!==void 0)return{video:e.video};if(e.toolUse!==void 0)return{toolUse:e.toolUse};if(e.toolResult!==void 0)return{toolResult:e.toolResult};if(e.guardContent!==void 0)return{guardContent:Im(e.guardContent)};if(e.cachePoint!==void 0)return{cachePoint:e.cachePoint};if(e.reasoningContent!==void 0)return{reasoningContent:m.SENSITIVE_STRING};if(e.citationsContent!==void 0)return{citationsContent:e.citationsContent};if(e.$unknown!==void 0)return{[e.$unknown[0]]:"UNKNOWN"}},"ContentBlockFilterSensitiveLog"),Pl=p(e=>({...e,...e.content&&{content:e.content.map(t=>dR(t))}}),"MessageFilterSensitiveLog"),Nm=p(e=>{if(e.text!==void 0)return{text:e.text};if(e.guardContent!==void 0)return{guardContent:Im(e.guardContent)};if(e.cachePoint!==void 0)return{cachePoint:e.cachePoint};if(e.$unknown!==void 0)return{[e.$unknown[0]]:"UNKNOWN"}},"SystemContentBlockFilterSensitiveLog"),uR=p(e=>({...e,...e.messages&&{messages:e.messages.map(t=>Pl(t))},...e.system&&{system:e.system.map(t=>Nm(t))},...e.toolConfig&&{toolConfig:e.toolConfig},...e.promptVariables&&{promptVariables:m.SENSITIVE_STRING},...e.requestMetadata&&{requestMetadata:m.SENSITIVE_STRING}}),"ConverseRequestFilterSensitiveLog"),pR=p(e=>{if(e.message!==void 0)return{message:Pl(e.message)};if(e.$unknown!==void 0)return{[e.$unknown[0]]:"UNKNOWN"}},"ConverseOutputFilterSensitiveLog"),fR=p(e=>({...e,...e.output&&{output:pR(e.output)}}),"ConverseResponseFilterSensitiveLog"),mR=p(e=>({...e,...e.messages&&{messages:e.messages.map(t=>Pl(t))},...e.system&&{system:e.system.map(t=>Nm(t))},...e.toolConfig&&{toolConfig:e.toolConfig},...e.promptVariables&&{promptVariables:m.SENSITIVE_STRING},...e.requestMetadata&&{requestMetadata:m.SENSITIVE_STRING}}),"ConverseStreamRequestFilterSensitiveLog"),K6=p(e=>{if(e.text!==void 0)return{text:e.text};if(e.redactedContent!==void 0)return{redactedContent:e.redactedContent};if(e.signature!==void 0)return{signature:e.signature};if(e.$unknown!==void 0)return{[e.$unknown[0]]:"UNKNOWN"}},"ReasoningContentBlockDeltaFilterSensitiveLog"),gR=p(e=>{if(e.text!==void 0)return{text:e.text};if(e.toolUse!==void 0)return{toolUse:e.toolUse};if(e.reasoningContent!==void 0)return{reasoningContent:m.SENSITIVE_STRING};if(e.citation!==void 0)return{citation:e.citation};if(e.$unknown!==void 0)return{[e.$unknown[0]]:"UNKNOWN"}},"ContentBlockDeltaFilterSensitiveLog"),hR=p(e=>({...e,...e.delta&&{delta:gR(e.delta)}}),"ContentBlockDeltaEventFilterSensitiveLog"),Y6=p(e=>{if(e.messageStart!==void 0)return{messageStart:e.messageStart};if(e.contentBlockStart!==void 0)return{contentBlockStart:e.contentBlockStart};if(e.contentBlockDelta!==void 0)return{contentBlockDelta:hR(e.contentBlockDelta)};if(e.contentBlockStop!==void 0)return{contentBlockStop:e.contentBlockStop};if(e.messageStop!==void 0)return{messageStop:e.messageStop};if(e.metadata!==void 0)return{metadata:e.metadata};if(e.internalServerException!==void 0)return{internalServerException:e.internalServerException};if(e.modelStreamErrorException!==void 0)return{modelStreamErrorException:e.modelStreamErrorException};if(e.validationException!==void 0)return{validationException:e.validationException};if(e.throttlingException!==void 0)return{throttlingException:e.throttlingException};if(e.serviceUnavailableException!==void 0)return{serviceUnavailableException:e.serviceUnavailableException};if(e.$unknown!==void 0)return{[e.$unknown[0]]:"UNKNOWN"}},"ConverseStreamOutputFilterSensitiveLog"),yR=p(e=>({...e,...e.stream&&{stream:"STREAMING_CONTENT"}}),"ConverseStreamResponseFilterSensitiveLog"),_R=p(e=>({...e,...e.body&&{body:m.SENSITIVE_STRING}}),"InvokeModelRequestFilterSensitiveLog"),vR=p(e=>({...e,...e.body&&{body:m.SENSITIVE_STRING}}),"InvokeModelResponseFilterSensitiveLog"),J6=p(e=>({...e,...e.bytes&&{bytes:m.SENSITIVE_STRING}}),"BidirectionalInputPayloadPartFilterSensitiveLog"),X6=p(e=>{if(e.chunk!==void 0)return{chunk:m.SENSITIVE_STRING};if(e.$unknown!==void 0)return{[e.$unknown[0]]:"UNKNOWN"}},"InvokeModelWithBidirectionalStreamInputFilterSensitiveLog"),SR=p(e=>({...e,...e.body&&{body:"STREAMING_CONTENT"}}),"InvokeModelWithBidirectionalStreamRequestFilterSensitiveLog"),Q6=p(e=>({...e,...e.bytes&&{bytes:m.SENSITIVE_STRING}}),"BidirectionalOutputPayloadPartFilterSensitiveLog"),Z6=p(e=>{if(e.chunk!==void 0)return{chunk:m.SENSITIVE_STRING};if(e.internalServerException!==void 0)return{internalServerException:e.internalServerException};if(e.modelStreamErrorException!==void 0)return{modelStreamErrorException:e.modelStreamErrorException};if(e.validationException!==void 0)return{validationException:e.validationException};if(e.throttlingException!==void 0)return{throttlingException:e.throttlingException};if(e.modelTimeoutException!==void 0)return{modelTimeoutException:e.modelTimeoutException};if(e.serviceUnavailableException!==void 0)return{serviceUnavailableException:e.serviceUnavailableException};if(e.$unknown!==void 0)return{[e.$unknown[0]]:"UNKNOWN"}},"InvokeModelWithBidirectionalStreamOutputFilterSensitiveLog"),ER=p(e=>({...e,...e.body&&{body:"STREAMING_CONTENT"}}),"InvokeModelWithBidirectionalStreamResponseFilterSensitiveLog"),wR=p(e=>({...e,...e.body&&{body:m.SENSITIVE_STRING}}),"InvokeModelWithResponseStreamRequestFilterSensitiveLog"),eW=p(e=>({...e,...e.bytes&&{bytes:m.SENSITIVE_STRING}}),"PayloadPartFilterSensitiveLog"),tW=p(e=>{if(e.chunk!==void 0)return{chunk:m.SENSITIVE_STRING};if(e.internalServerException!==void 0)return{internalServerException:e.internalServerException};if(e.modelStreamErrorException!==void 0)return{modelStreamErrorException:e.modelStreamErrorException};if(e.validationException!==void 0)return{validationException:e.validationException};if(e.throttlingException!==void 0)return{throttlingException:e.throttlingException};if(e.modelTimeoutException!==void 0)return{modelTimeoutException:e.modelTimeoutException};if(e.serviceUnavailableException!==void 0)return{serviceUnavailableException:e.serviceUnavailableException};if(e.$unknown!==void 0)return{[e.$unknown[0]]:"UNKNOWN"}},"ResponseStreamFilterSensitiveLog"),bR=p(e=>({...e,...e.body&&{body:"STREAMING_CONTENT"}}),"InvokeModelWithResponseStreamResponseFilterSensitiveLog"),L=(ne(),D(nt)),rW=(Pp(),D(xp)),nW=p(async(e,t)=>{let r=(0,Oe.requestBuilder)(e,t),n={"content-type":"application/json"};r.bp("/guardrail/{guardrailIdentifier}/version/{guardrailVersion}/apply"),r.p("guardrailIdentifier",()=>e.guardrailIdentifier,"{guardrailIdentifier}",!1),r.p("guardrailVersion",()=>e.guardrailVersion,"{guardrailVersion}",!1);let o;return o=JSON.stringify((0,m.take)(e,{content:p(s=>zW(s,t),"content"),outputScope:[],source:[]})),r.m("POST").h(n).b(o),r.build()},"se_ApplyGuardrailCommand"),oW=p(async(e,t)=>{let r=(0,Oe.requestBuilder)(e,t),n={"content-type":"application/json"};r.bp("/model/{modelId}/converse"),r.p("modelId",()=>e.modelId,"{modelId}",!1);let o;return o=JSON.stringify((0,m.take)(e,{additionalModelRequestFields:p(s=>Cs(s,t),"additionalModelRequestFields"),additionalModelResponseFieldPaths:p(s=>(0,m._json)(s),"additionalModelResponseFieldPaths"),guardrailConfig:p(s=>(0,m._json)(s),"guardrailConfig"),inferenceConfig:p(s=>DR(s,t),"inferenceConfig"),messages:p(s=>MR(s,t),"messages"),performanceConfig:p(s=>(0,m._json)(s),"performanceConfig"),promptVariables:p(s=>(0,m._json)(s),"promptVariables"),requestMetadata:p(s=>(0,m._json)(s),"requestMetadata"),system:p(s=>FR(s,t),"system"),toolConfig:p(s=>BR(s,t),"toolConfig")})),r.m("POST").h(n).b(o),r.build()},"se_ConverseCommand"),sW=p(async(e,t)=>{let r=(0,Oe.requestBuilder)(e,t),n={"content-type":"application/json"};r.bp("/model/{modelId}/converse-stream"),r.p("modelId",()=>e.modelId,"{modelId}",!1);let o;return o=JSON.stringify((0,m.take)(e,{additionalModelRequestFields:p(s=>Cs(s,t),"additionalModelRequestFields"),additionalModelResponseFieldPaths:p(s=>(0,m._json)(s),"additionalModelResponseFieldPaths"),guardrailConfig:p(s=>(0,m._json)(s),"guardrailConfig"),inferenceConfig:p(s=>DR(s,t),"inferenceConfig"),messages:p(s=>MR(s,t),"messages"),performanceConfig:p(s=>(0,m._json)(s),"performanceConfig"),promptVariables:p(s=>(0,m._json)(s),"promptVariables"),requestMetadata:p(s=>(0,m._json)(s),"requestMetadata"),system:p(s=>FR(s,t),"system"),toolConfig:p(s=>BR(s,t),"toolConfig")})),r.m("POST").h(n).b(o),r.build()},"se_ConverseStreamCommand"),iW=p(async(e,t)=>{let r=(0,Oe.requestBuilder)(e,t),n={};return r.bp("/async-invoke/{invocationArn}"),r.p("invocationArn",()=>e.invocationArn,"{invocationArn}",!1),r.m("GET").h(n).b(void 0),r.build()},"se_GetAsyncInvokeCommand"),aW=p(async(e,t)=>{let r=(0,Oe.requestBuilder)(e,t),n=(0,m.map)({},m.isSerializableHeaderValue,{[Lm]:e[Tl]||"application/octet-stream",[Om]:e[Om],[JR]:e[WR],[KR]:e[VR],[YR]:e[zR],[Rl]:e[Ol]});r.bp("/model/{modelId}/invoke"),r.p("modelId",()=>e.modelId,"{modelId}",!1);let o;return e.body!==void 0&&(o=e.body),r.m("POST").h(n).b(o),r.build()},"se_InvokeModelCommand"),cW=p(async(e,t)=>{let r=(0,Oe.requestBuilder)(e,t),n={"content-type":"application/json"};r.bp("/model/{modelId}/invoke-with-bidirectional-stream"),r.p("modelId",()=>e.modelId,"{modelId}",!1);let o;return e.body!==void 0&&(o=TW(e.body,t)),r.m("POST").h(n).b(o),r.build()},"se_InvokeModelWithBidirectionalStreamCommand"),lW=p(async(e,t)=>{let r=(0,Oe.requestBuilder)(e,t),n=(0,m.map)({},m.isSerializableHeaderValue,{[Lm]:e[Tl]||"application/octet-stream",[$5]:e[Om],[JR]:e[WR],[KR]:e[VR],[YR]:e[zR],[Rl]:e[Ol]});r.bp("/model/{modelId}/invoke-with-response-stream"),r.p("modelId",()=>e.modelId,"{modelId}",!1);let o;return e.body!==void 0&&(o=e.body),r.m("POST").h(n).b(o),r.build()},"se_InvokeModelWithResponseStreamCommand"),dW=p(async(e,t)=>{let r=(0,Oe.requestBuilder)(e,t),n={};r.bp("/async-invoke");let o=(0,m.map)({[TO]:[()=>e.submitTimeAfter!==void 0,()=>(0,m.serializeDateTime)(e[TO]).toString()],[OO]:[()=>e.submitTimeBefore!==void 0,()=>(0,m.serializeDateTime)(e[OO]).toString()],[PO]:[,e[PO]],[bO]:[()=>e.maxResults!==void 0,()=>e[bO].toString()],[CO]:[,e[CO]],[xO]:[,e[xO]],[AO]:[,e[AO]]});return r.m("GET").h(n).q(o).b(void 0),r.build()},"se_ListAsyncInvokesCommand"),uW=p(async(e,t)=>{let r=(0,Oe.requestBuilder)(e,t),n={"content-type":"application/json"};r.bp("/async-invoke");let o;return o=JSON.stringify((0,m.take)(e,{clientRequestToken:[!0,s=>s??(0,rW.v4)()],modelId:[],modelInput:p(s=>ZW(s,t),"modelInput"),outputDataConfig:p(s=>(0,m._json)(s),"outputDataConfig"),tags:p(s=>(0,m._json)(s),"tags")})),r.m("POST").h(n).b(o),r.build()},"se_StartAsyncInvokeCommand"),pW=p(async(e,t)=>{if(e.statusCode!==200&&e.statusCode>=300)return Mt(e,t);let r=(0,m.map)({$metadata:X(e)}),n=(0,m.expectNonNull)((0,m.expectObject)(await(0,L.parseJsonBody)(e.body,t)),"body"),o=(0,m.take)(n,{action:m.expectString,actionReason:m.expectString,assessments:p(s=>jR(s,t),"assessments"),guardrailCoverage:m._json,outputs:m._json,usage:m._json});return Object.assign(r,o),r},"de_ApplyGuardrailCommand"),fW=p(async(e,t)=>{if(e.statusCode!==200&&e.statusCode>=300)return Mt(e,t);let r=(0,m.map)({$metadata:X(e)}),n=(0,m.expectNonNull)((0,m.expectObject)(await(0,L.parseJsonBody)(e.body,t)),"body"),o=(0,m.take)(n,{additionalModelResponseFields:p(s=>Al(s,t),"additionalModelResponseFields"),metrics:m._json,output:p(s=>_5((0,L.awsExpectUnion)(s),t),"output"),performanceConfig:m._json,stopReason:m.expectString,trace:p(s=>E5(s,t),"trace"),usage:m._json});return Object.assign(r,o),r},"de_ConverseCommand"),mW=p(async(e,t)=>{if(e.statusCode!==200&&e.statusCode>=300)return Mt(e,t);let r=(0,m.map)({$metadata:X(e)}),n=e.body;return r.stream=RW(n,t),r},"de_ConverseStreamCommand"),gW=p(async(e,t)=>{if(e.statusCode!==200&&e.statusCode>=300)return Mt(e,t);let r=(0,m.map)({$metadata:X(e)}),n=(0,m.expectNonNull)((0,m.expectObject)(await(0,L.parseJsonBody)(e.body,t)),"body"),o=(0,m.take)(n,{clientRequestToken:m.expectString,endTime:p(s=>(0,m.expectNonNull)((0,m.parseRfc3339DateTimeWithOffset)(s)),"endTime"),failureMessage:m.expectString,invocationArn:m.expectString,lastModifiedTime:p(s=>(0,m.expectNonNull)((0,m.parseRfc3339DateTimeWithOffset)(s)),"lastModifiedTime"),modelArn:m.expectString,outputDataConfig:p(s=>(0,m._json)((0,L.awsExpectUnion)(s)),"outputDataConfig"),status:m.expectString,submitTime:p(s=>(0,m.expectNonNull)((0,m.parseRfc3339DateTimeWithOffset)(s)),"submitTime")});return Object.assign(r,o),r},"de_GetAsyncInvokeCommand"),hW=p(async(e,t)=>{if(e.statusCode!==200&&e.statusCode>=300)return Mt(e,t);let r=(0,m.map)({$metadata:X(e),[Tl]:[,e.headers[Lm]],[Ol]:[,e.headers[Rl]]}),n=await(0,m.collectBody)(e.body,t);return r.body=n,r},"de_InvokeModelCommand"),yW=p(async(e,t)=>{if(e.statusCode!==200&&e.statusCode>=300)return Mt(e,t);let r=(0,m.map)({$metadata:X(e)}),n=e.body;return r.body=IW(n,t),r},"de_InvokeModelWithBidirectionalStreamCommand"),_W=p(async(e,t)=>{if(e.statusCode!==200&&e.statusCode>=300)return Mt(e,t);let r=(0,m.map)({$metadata:X(e),[Tl]:[,e.headers[q5]],[Ol]:[,e.headers[Rl]]}),n=e.body;return r.body=NW(n,t),r},"de_InvokeModelWithResponseStreamCommand"),vW=p(async(e,t)=>{if(e.statusCode!==200&&e.statusCode>=300)return Mt(e,t);let r=(0,m.map)({$metadata:X(e)}),n=(0,m.expectNonNull)((0,m.expectObject)(await(0,L.parseJsonBody)(e.body,t)),"body"),o=(0,m.take)(n,{asyncInvokeSummaries:p(s=>u5(s,t),"asyncInvokeSummaries"),nextToken:m.expectString});return Object.assign(r,o),r},"de_ListAsyncInvokesCommand"),SW=p(async(e,t)=>{if(e.statusCode!==200&&e.statusCode>=300)return Mt(e,t);let r=(0,m.map)({$metadata:X(e)}),n=(0,m.expectNonNull)((0,m.expectObject)(await(0,L.parseJsonBody)(e.body,t)),"body"),o=(0,m.take)(n,{invocationArn:m.expectString});return Object.assign(r,o),r},"de_StartAsyncInvokeCommand"),Mt=p(async(e,t)=>{let r={...e,body:await(0,L.parseJsonErrorBody)(e.body,t)},n=(0,L.loadRestJsonErrorCode)(e,r.body);switch(n){case"AccessDeniedException":case"com.amazonaws.bedrockruntime#AccessDeniedException":throw await wW(r,t);case"InternalServerException":case"com.amazonaws.bedrockruntime#InternalServerException":throw await CR(r,t);case"ResourceNotFoundException":case"com.amazonaws.bedrockruntime#ResourceNotFoundException":throw await PW(r,t);case"ServiceQuotaExceededException":case"com.amazonaws.bedrockruntime#ServiceQuotaExceededException":throw await AW(r,t);case"ThrottlingException":case"com.amazonaws.bedrockruntime#ThrottlingException":throw await TR(r,t);case"ValidationException":case"com.amazonaws.bedrockruntime#ValidationException":throw await OR(r,t);case"ModelErrorException":case"com.amazonaws.bedrockruntime#ModelErrorException":throw await CW(r,t);case"ModelNotReadyException":case"com.amazonaws.bedrockruntime#ModelNotReadyException":throw await xW(r,t);case"ModelTimeoutException":case"com.amazonaws.bedrockruntime#ModelTimeoutException":throw await PR(r,t);case"ServiceUnavailableException":case"com.amazonaws.bedrockruntime#ServiceUnavailableException":throw await AR(r,t);case"ModelStreamErrorException":case"com.amazonaws.bedrockruntime#ModelStreamErrorException":throw await xR(r,t);case"ConflictException":case"com.amazonaws.bedrockruntime#ConflictException":throw await bW(r,t);default:let o=r.body;return EW({output:e,parsedBody:o,errorCode:n})}},"de_CommandError"),EW=(0,m.withBaseException)(xe),wW=p(async(e,t)=>{let r=(0,m.map)({}),n=e.body,o=(0,m.take)(n,{message:m.expectString});Object.assign(r,o);let s=new DO({$metadata:X(e),...r});return(0,m.decorateServiceException)(s,e.body)},"de_AccessDeniedExceptionRes"),bW=p(async(e,t)=>{let r=(0,m.map)({}),n=e.body,o=(0,m.take)(n,{message:m.expectString});Object.assign(r,o);let s=new $O({$metadata:X(e),...r});return(0,m.decorateServiceException)(s,e.body)},"de_ConflictExceptionRes"),CR=p(async(e,t)=>{let r=(0,m.map)({}),n=e.body,o=(0,m.take)(n,{message:m.expectString});Object.assign(r,o);let s=new FO({$metadata:X(e),...r});return(0,m.decorateServiceException)(s,e.body)},"de_InternalServerExceptionRes"),CW=p(async(e,t)=>{let r=(0,m.map)({}),n=e.body,o=(0,m.take)(n,{message:m.expectString,originalStatusCode:m.expectInt32,resourceName:m.expectString});Object.assign(r,o);let s=new JO({$metadata:X(e),...r});return(0,m.decorateServiceException)(s,e.body)},"de_ModelErrorExceptionRes"),xW=p(async(e,t)=>{let r=(0,m.map)({}),n=e.body,o=(0,m.take)(n,{message:m.expectString});Object.assign(r,o);let s=new QO({$metadata:X(e),...r});return(0,m.decorateServiceException)(s,e.body)},"de_ModelNotReadyExceptionRes"),xR=p(async(e,t)=>{let r=(0,m.map)({}),n=e.body,o=(0,m.take)(n,{message:m.expectString,originalMessage:m.expectString,originalStatusCode:m.expectInt32});Object.assign(r,o);let s=new rR({$metadata:X(e),...r});return(0,m.decorateServiceException)(s,e.body)},"de_ModelStreamErrorExceptionRes"),PR=p(async(e,t)=>{let r=(0,m.map)({}),n=e.body,o=(0,m.take)(n,{message:m.expectString});Object.assign(r,o);let s=new eR({$metadata:X(e),...r});return(0,m.decorateServiceException)(s,e.body)},"de_ModelTimeoutExceptionRes"),PW=p(async(e,t)=>{let r=(0,m.map)({}),n=e.body,o=(0,m.take)(n,{message:m.expectString});Object.assign(r,o);let s=new GO({$metadata:X(e),...r});return(0,m.decorateServiceException)(s,e.body)},"de_ResourceNotFoundExceptionRes"),AW=p(async(e,t)=>{let r=(0,m.map)({}),n=e.body,o=(0,m.take)(n,{message:m.expectString});Object.assign(r,o);let s=new zO({$metadata:X(e),...r});return(0,m.decorateServiceException)(s,e.body)},"de_ServiceQuotaExceededExceptionRes"),AR=p(async(e,t)=>{let r=(0,m.map)({}),n=e.body,o=(0,m.take)(n,{message:m.expectString});Object.assign(r,o);let s=new KO({$metadata:X(e),...r});return(0,m.decorateServiceException)(s,e.body)},"de_ServiceUnavailableExceptionRes"),TR=p(async(e,t)=>{let r=(0,m.map)({}),n=e.body,o=(0,m.take)(n,{message:m.expectString});Object.assign(r,o);let s=new LO({$metadata:X(e),...r});return(0,m.decorateServiceException)(s,e.body)},"de_ThrottlingExceptionRes"),OR=p(async(e,t)=>{let r=(0,m.map)({}),n=e.body,o=(0,m.take)(n,{message:m.expectString});Object.assign(r,o);let s=new HO({$metadata:X(e),...r});return(0,m.decorateServiceException)(s,e.body)},"de_ValidationExceptionRes"),TW=p((e,t)=>{let r=p(n=>Cl.visit(n,{chunk:p(o=>OW(o,t),"chunk"),_:p(o=>o,"_")}),"eventMarshallingVisitor");return t.eventStreamMarshaller.serialize(e,r)},"se_InvokeModelWithBidirectionalStreamInput"),OW=p((e,t)=>{let r={":event-type":{type:"string",value:"chunk"},":message-type":{type:"string",value:"event"},":content-type":{type:"string",value:"application/json"}},n=new Uint8Array;return n=jW(e,t),n=t.utf8Decoder(JSON.stringify(n)),{headers:r,body:n}},"se_BidirectionalInputPayloadPart_event"),RW=p((e,t)=>t.eventStreamMarshaller.deserialize(e,async r=>r.messageStart!=null?{messageStart:await LW(r.messageStart,t)}:r.contentBlockStart!=null?{contentBlockStart:await MW(r.contentBlockStart,t)}:r.contentBlockDelta!=null?{contentBlockDelta:await DW(r.contentBlockDelta,t)}:r.contentBlockStop!=null?{contentBlockStop:await FW(r.contentBlockStop,t)}:r.messageStop!=null?{messageStop:await UW(r.messageStop,t)}:r.metadata!=null?{metadata:await BW(r.metadata,t)}:r.internalServerException!=null?{internalServerException:await km(r.internalServerException,t)}:r.modelStreamErrorException!=null?{modelStreamErrorException:await Dm(r.modelStreamErrorException,t)}:r.validationException!=null?{validationException:await Bm(r.validationException,t)}:r.throttlingException!=null?{throttlingException:await Fm(r.throttlingException,t)}:r.serviceUnavailableException!=null?{serviceUnavailableException:await Mm(r.serviceUnavailableException,t)}:{$unknown:r}),"de_ConverseStreamOutput"),IW=p((e,t)=>t.eventStreamMarshaller.deserialize(e,async r=>r.chunk!=null?{chunk:await kW(r.chunk,t)}:r.internalServerException!=null?{internalServerException:await km(r.internalServerException,t)}:r.modelStreamErrorException!=null?{modelStreamErrorException:await Dm(r.modelStreamErrorException,t)}:r.validationException!=null?{validationException:await Bm(r.validationException,t)}:r.throttlingException!=null?{throttlingException:await Fm(r.throttlingException,t)}:r.modelTimeoutException!=null?{modelTimeoutException:await RR(r.modelTimeoutException,t)}:r.serviceUnavailableException!=null?{serviceUnavailableException:await Mm(r.serviceUnavailableException,t)}:{$unknown:r}),"de_InvokeModelWithBidirectionalStreamOutput"),NW=p((e,t)=>t.eventStreamMarshaller.deserialize(e,async r=>r.chunk!=null?{chunk:await HW(r.chunk,t)}:r.internalServerException!=null?{internalServerException:await km(r.internalServerException,t)}:r.modelStreamErrorException!=null?{modelStreamErrorException:await Dm(r.modelStreamErrorException,t)}:r.validationException!=null?{validationException:await Bm(r.validationException,t)}:r.throttlingException!=null?{throttlingException:await Fm(r.throttlingException,t)}:r.modelTimeoutException!=null?{modelTimeoutException:await RR(r.modelTimeoutException,t)}:r.serviceUnavailableException!=null?{serviceUnavailableException:await Mm(r.serviceUnavailableException,t)}:{$unknown:r}),"de_ResponseStream"),kW=p(async(e,t)=>{let r={},n=await(0,L.parseJsonBody)(e.body,t);return Object.assign(r,f5(n,t)),r},"de_BidirectionalOutputPayloadPart_event"),DW=p(async(e,t)=>{let r={},n=await(0,L.parseJsonBody)(e.body,t);return Object.assign(r,h5(n,t)),r},"de_ContentBlockDeltaEvent_event"),MW=p(async(e,t)=>{let r={},n=await(0,L.parseJsonBody)(e.body,t);return Object.assign(r,(0,m._json)(n)),r},"de_ContentBlockStartEvent_event"),FW=p(async(e,t)=>{let r={},n=await(0,L.parseJsonBody)(e.body,t);return Object.assign(r,(0,m._json)(n)),r},"de_ContentBlockStopEvent_event"),BW=p(async(e,t)=>{let r={},n=await(0,L.parseJsonBody)(e.body,t);return Object.assign(r,v5(n,t)),r},"de_ConverseStreamMetadataEvent_event"),km=p(async(e,t)=>{let r={...e,body:await(0,L.parseJsonBody)(e.body,t)};return CR(r,t)},"de_InternalServerException_event"),LW=p(async(e,t)=>{let r={},n=await(0,L.parseJsonBody)(e.body,t);return Object.assign(r,(0,m._json)(n)),r},"de_MessageStartEvent_event"),UW=p(async(e,t)=>{let r={},n=await(0,L.parseJsonBody)(e.body,t);return Object.assign(r,k5(n,t)),r},"de_MessageStopEvent_event"),Dm=p(async(e,t)=>{let r={...e,body:await(0,L.parseJsonBody)(e.body,t)};return xR(r,t)},"de_ModelStreamErrorException_event"),RR=p(async(e,t)=>{let r={...e,body:await(0,L.parseJsonBody)(e.body,t)};return PR(r,t)},"de_ModelTimeoutException_event"),HW=p(async(e,t)=>{let r={},n=await(0,L.parseJsonBody)(e.body,t);return Object.assign(r,D5(n,t)),r},"de_PayloadPart_event"),Mm=p(async(e,t)=>{let r={...e,body:await(0,L.parseJsonBody)(e.body,t)};return AR(r,t)},"de_ServiceUnavailableException_event"),Fm=p(async(e,t)=>{let r={...e,body:await(0,L.parseJsonBody)(e.body,t)};return TR(r,t)},"de_ThrottlingException_event"),Bm=p(async(e,t)=>{let r={...e,body:await(0,L.parseJsonBody)(e.body,t)};return OR(r,t)},"de_ValidationException_event"),jW=p((e,t)=>(0,m.take)(e,{bytes:t.base64Encoder}),"se_BidirectionalInputPayloadPart"),$W=p((e,t)=>Sl.visit(e,{cachePoint:p(r=>({cachePoint:(0,m._json)(r)}),"cachePoint"),citationsContent:p(r=>({citationsContent:(0,m._json)(r)}),"citationsContent"),document:p(r=>({document:IR(r,t)}),"document"),guardContent:p(r=>({guardContent:NR(r,t)}),"guardContent"),image:p(r=>({image:kR(r,t)}),"image"),reasoningContent:p(r=>({reasoningContent:e5(r,t)}),"reasoningContent"),text:p(r=>({text:r}),"text"),toolResult:p(r=>({toolResult:o5(r,t)}),"toolResult"),toolUse:p(r=>({toolUse:l5(r,t)}),"toolUse"),video:p(r=>({video:LR(r,t)}),"video"),_:p((r,n)=>({[r]:n}),"_")}),"se_ContentBlock"),qW=p((e,t)=>e.filter(r=>r!=null).map(r=>$W(r,t)),"se_ContentBlocks"),IR=p((e,t)=>(0,m.take)(e,{citations:m._json,context:[],format:[],name:[],source:p(r=>GW(r,t),"source")}),"se_DocumentBlock"),GW=p((e,t)=>fl.visit(e,{bytes:p(r=>({bytes:t.base64Encoder(r)}),"bytes"),content:p(r=>({content:(0,m._json)(r)}),"content"),s3Location:p(r=>({s3Location:(0,m._json)(r)}),"s3Location"),text:p(r=>({text:r}),"text"),_:p((r,n)=>({[r]:n}),"_")}),"se_DocumentSource"),VW=p((e,t)=>pl.visit(e,{image:p(r=>({image:YW(r,t)}),"image"),text:p(r=>({text:(0,m._json)(r)}),"text"),_:p((r,n)=>({[r]:n}),"_")}),"se_GuardrailContentBlock"),zW=p((e,t)=>e.filter(r=>r!=null).map(r=>VW(r,t)),"se_GuardrailContentBlockList"),NR=p((e,t)=>gl.visit(e,{image:p(r=>({image:WW(r,t)}),"image"),text:p(r=>({text:(0,m._json)(r)}),"text"),_:p((r,n)=>({[r]:n}),"_")}),"se_GuardrailConverseContentBlock"),WW=p((e,t)=>(0,m.take)(e,{format:[],source:p(r=>KW(r,t),"source")}),"se_GuardrailConverseImageBlock"),KW=p((e,t)=>ml.visit(e,{bytes:p(r=>({bytes:t.base64Encoder(r)}),"bytes"),_:p((r,n)=>({[r]:n}),"_")}),"se_GuardrailConverseImageSource"),YW=p((e,t)=>(0,m.take)(e,{format:[],source:p(r=>JW(r,t),"source")}),"se_GuardrailImageBlock"),JW=p((e,t)=>ul.visit(e,{bytes:p(r=>({bytes:t.base64Encoder(r)}),"bytes"),_:p((r,n)=>({[r]:n}),"_")}),"se_GuardrailImageSource"),kR=p((e,t)=>(0,m.take)(e,{format:[],source:p(r=>XW(r,t),"source")}),"se_ImageBlock"),XW=p((e,t)=>hl.visit(e,{bytes:p(r=>({bytes:t.base64Encoder(r)}),"bytes"),s3Location:p(r=>({s3Location:(0,m._json)(r)}),"s3Location"),_:p((r,n)=>({[r]:n}),"_")}),"se_ImageSource"),DR=p((e,t)=>(0,m.take)(e,{maxTokens:[],stopSequences:m._json,temperature:m.serializeFloat,topP:m.serializeFloat}),"se_InferenceConfiguration"),QW=p((e,t)=>(0,m.take)(e,{content:p(r=>qW(r,t),"content"),role:[]}),"se_Message"),MR=p((e,t)=>e.filter(r=>r!=null).map(r=>QW(r,t)),"se_Messages"),ZW=p((e,t)=>e,"se_ModelInputPayload"),e5=p((e,t)=>yl.visit(e,{reasoningText:p(r=>({reasoningText:(0,m._json)(r)}),"reasoningText"),redactedContent:p(r=>({redactedContent:t.base64Encoder(r)}),"redactedContent"),_:p((r,n)=>({[r]:n}),"_")}),"se_ReasoningContentBlock"),t5=p((e,t)=>El.visit(e,{cachePoint:p(r=>({cachePoint:(0,m._json)(r)}),"cachePoint"),guardContent:p(r=>({guardContent:NR(r,t)}),"guardContent"),text:p(r=>({text:r}),"text"),_:p((r,n)=>({[r]:n}),"_")}),"se_SystemContentBlock"),FR=p((e,t)=>e.filter(r=>r!=null).map(r=>t5(r,t)),"se_SystemContentBlocks"),r5=p((e,t)=>bl.visit(e,{cachePoint:p(r=>({cachePoint:(0,m._json)(r)}),"cachePoint"),toolSpec:p(r=>({toolSpec:c5(r,t)}),"toolSpec"),_:p((r,n)=>({[r]:n}),"_")}),"se_Tool"),BR=p((e,t)=>(0,m.take)(e,{toolChoice:m._json,tools:p(r=>a5(r,t),"tools")}),"se_ToolConfiguration"),n5=p((e,t)=>wl.visit(e,{json:p(r=>({json:Cs(r,t)}),"json"),_:p((r,n)=>({[r]:n}),"_")}),"se_ToolInputSchema"),o5=p((e,t)=>(0,m.take)(e,{content:p(r=>i5(r,t),"content"),status:[],toolUseId:[]}),"se_ToolResultBlock"),s5=p((e,t)=>vl.visit(e,{document:p(r=>({document:IR(r,t)}),"document"),image:p(r=>({image:kR(r,t)}),"image"),json:p(r=>({json:Cs(r,t)}),"json"),text:p(r=>({text:r}),"text"),video:p(r=>({video:LR(r,t)}),"video"),_:p((r,n)=>({[r]:n}),"_")}),"se_ToolResultContentBlock"),i5=p((e,t)=>e.filter(r=>r!=null).map(r=>s5(r,t)),"se_ToolResultContentBlocks"),a5=p((e,t)=>e.filter(r=>r!=null).map(r=>r5(r,t)),"se_Tools"),c5=p((e,t)=>(0,m.take)(e,{description:[],inputSchema:p(r=>n5(r,t),"inputSchema"),name:[]}),"se_ToolSpecification"),l5=p((e,t)=>(0,m.take)(e,{input:p(r=>Cs(r,t),"input"),name:[],toolUseId:[]}),"se_ToolUseBlock"),LR=p((e,t)=>(0,m.take)(e,{format:[],source:p(r=>d5(r,t),"source")}),"se_VideoBlock"),d5=p((e,t)=>_l.visit(e,{bytes:p(r=>({bytes:t.base64Encoder(r)}),"bytes"),s3Location:p(r=>({s3Location:(0,m._json)(r)}),"s3Location"),_:p((r,n)=>({[r]:n}),"_")}),"se_VideoSource"),Cs=p((e,t)=>e,"se_Document"),u5=p((e,t)=>(e||[]).filter(n=>n!=null).map(n=>p5(n,t)),"de_AsyncInvokeSummaries"),p5=p((e,t)=>(0,m.take)(e,{clientRequestToken:m.expectString,endTime:p(r=>(0,m.expectNonNull)((0,m.parseRfc3339DateTimeWithOffset)(r)),"endTime"),failureMessage:m.expectString,invocationArn:m.expectString,lastModifiedTime:p(r=>(0,m.expectNonNull)((0,m.parseRfc3339DateTimeWithOffset)(r)),"lastModifiedTime"),modelArn:m.expectString,outputDataConfig:p(r=>(0,m._json)((0,L.awsExpectUnion)(r)),"outputDataConfig"),status:m.expectString,submitTime:p(r=>(0,m.expectNonNull)((0,m.parseRfc3339DateTimeWithOffset)(r)),"submitTime")}),"de_AsyncInvokeSummary"),f5=p((e,t)=>(0,m.take)(e,{bytes:t.base64Decoder}),"de_BidirectionalOutputPayloadPart"),m5=p((e,t)=>e.cachePoint!=null?{cachePoint:(0,m._json)(e.cachePoint)}:e.citationsContent!=null?{citationsContent:(0,m._json)(e.citationsContent)}:e.document!=null?{document:UR(e.document,t)}:e.guardContent!=null?{guardContent:T5((0,L.awsExpectUnion)(e.guardContent),t)}:e.image!=null?{image:qR(e.image,t)}:e.reasoningContent!=null?{reasoningContent:M5((0,L.awsExpectUnion)(e.reasoningContent),t)}:(0,m.expectString)(e.text)!==void 0?{text:(0,m.expectString)(e.text)}:e.toolResult!=null?{toolResult:B5(e.toolResult,t)}:e.toolUse!=null?{toolUse:H5(e.toolUse,t)}:e.video!=null?{video:GR(e.video,t)}:{$unknown:Object.entries(e)[0]},"de_ContentBlock"),g5=p((e,t)=>e.citation!=null?{citation:(0,m._json)(e.citation)}:e.reasoningContent!=null?{reasoningContent:F5((0,L.awsExpectUnion)(e.reasoningContent),t)}:(0,m.expectString)(e.text)!==void 0?{text:(0,m.expectString)(e.text)}:e.toolUse!=null?{toolUse:(0,m._json)(e.toolUse)}:{$unknown:Object.entries(e)[0]},"de_ContentBlockDelta"),h5=p((e,t)=>(0,m.take)(e,{contentBlockIndex:m.expectInt32,delta:p(r=>g5((0,L.awsExpectUnion)(r),t),"delta")}),"de_ContentBlockDeltaEvent"),y5=p((e,t)=>(e||[]).filter(n=>n!=null).map(n=>m5((0,L.awsExpectUnion)(n),t)),"de_ContentBlocks"),_5=p((e,t)=>e.message!=null?{message:N5(e.message,t)}:{$unknown:Object.entries(e)[0]},"de_ConverseOutput"),v5=p((e,t)=>(0,m.take)(e,{metrics:m._json,performanceConfig:m._json,trace:p(r=>S5(r,t),"trace"),usage:m._json}),"de_ConverseStreamMetadataEvent"),S5=p((e,t)=>(0,m.take)(e,{guardrail:p(r=>$R(r,t),"guardrail"),promptRouter:m._json}),"de_ConverseStreamTrace"),E5=p((e,t)=>(0,m.take)(e,{guardrail:p(r=>$R(r,t),"guardrail"),promptRouter:m._json}),"de_ConverseTrace"),UR=p((e,t)=>(0,m.take)(e,{citations:m._json,context:m.expectString,format:m.expectString,name:m.expectString,source:p(r=>w5((0,L.awsExpectUnion)(r),t),"source")}),"de_DocumentBlock"),w5=p((e,t)=>e.bytes!=null?{bytes:t.base64Decoder(e.bytes)}:e.content!=null?{content:(0,m._json)(e.content)}:e.s3Location!=null?{s3Location:(0,m._json)(e.s3Location)}:(0,m.expectString)(e.text)!==void 0?{text:(0,m.expectString)(e.text)}:{$unknown:Object.entries(e)[0]},"de_DocumentSource"),HR=p((e,t)=>(0,m.take)(e,{contentPolicy:m._json,contextualGroundingPolicy:p(r=>A5(r,t),"contextualGroundingPolicy"),invocationMetrics:m._json,sensitiveInformationPolicy:m._json,topicPolicy:m._json,wordPolicy:m._json}),"de_GuardrailAssessment"),jR=p((e,t)=>(e||[]).filter(n=>n!=null).map(n=>HR(n,t)),"de_GuardrailAssessmentList"),b5=p((e,t)=>Object.entries(e).reduce((r,[n,o])=>(o===null||(r[n]=jR(o,t)),r),{}),"de_GuardrailAssessmentListMap"),C5=p((e,t)=>Object.entries(e).reduce((r,[n,o])=>(o===null||(r[n]=HR(o,t)),r),{}),"de_GuardrailAssessmentMap"),x5=p((e,t)=>(0,m.take)(e,{action:m.expectString,detected:m.expectBoolean,score:m.limitedParseDouble,threshold:m.limitedParseDouble,type:m.expectString}),"de_GuardrailContextualGroundingFilter"),P5=p((e,t)=>(e||[]).filter(n=>n!=null).map(n=>x5(n,t)),"de_GuardrailContextualGroundingFilters"),A5=p((e,t)=>(0,m.take)(e,{filters:p(r=>P5(r,t),"filters")}),"de_GuardrailContextualGroundingPolicyAssessment"),T5=p((e,t)=>e.image!=null?{image:O5(e.image,t)}:e.text!=null?{text:(0,m._json)(e.text)}:{$unknown:Object.entries(e)[0]},"de_GuardrailConverseContentBlock"),O5=p((e,t)=>(0,m.take)(e,{format:m.expectString,source:p(r=>R5((0,L.awsExpectUnion)(r),t),"source")}),"de_GuardrailConverseImageBlock"),R5=p((e,t)=>e.bytes!=null?{bytes:t.base64Decoder(e.bytes)}:{$unknown:Object.entries(e)[0]},"de_GuardrailConverseImageSource"),$R=p((e,t)=>(0,m.take)(e,{actionReason:m.expectString,inputAssessment:p(r=>C5(r,t),"inputAssessment"),modelOutput:m._json,outputAssessments:p(r=>b5(r,t),"outputAssessments")}),"de_GuardrailTraceAssessment"),qR=p((e,t)=>(0,m.take)(e,{format:m.expectString,source:p(r=>I5((0,L.awsExpectUnion)(r),t),"source")}),"de_ImageBlock"),I5=p((e,t)=>e.bytes!=null?{bytes:t.base64Decoder(e.bytes)}:e.s3Location!=null?{s3Location:(0,m._json)(e.s3Location)}:{$unknown:Object.entries(e)[0]},"de_ImageSource"),N5=p((e,t)=>(0,m.take)(e,{content:p(r=>y5(r,t),"content"),role:m.expectString}),"de_Message"),k5=p((e,t)=>(0,m.take)(e,{additionalModelResponseFields:p(r=>Al(r,t),"additionalModelResponseFields"),stopReason:m.expectString}),"de_MessageStopEvent"),D5=p((e,t)=>(0,m.take)(e,{bytes:t.base64Decoder}),"de_PayloadPart"),M5=p((e,t)=>e.reasoningText!=null?{reasoningText:(0,m._json)(e.reasoningText)}:e.redactedContent!=null?{redactedContent:t.base64Decoder(e.redactedContent)}:{$unknown:Object.entries(e)[0]},"de_ReasoningContentBlock"),F5=p((e,t)=>e.redactedContent!=null?{redactedContent:t.base64Decoder(e.redactedContent)}:(0,m.expectString)(e.signature)!==void 0?{signature:(0,m.expectString)(e.signature)}:(0,m.expectString)(e.text)!==void 0?{text:(0,m.expectString)(e.text)}:{$unknown:Object.entries(e)[0]},"de_ReasoningContentBlockDelta"),B5=p((e,t)=>(0,m.take)(e,{content:p(r=>U5(r,t),"content"),status:m.expectString,toolUseId:m.expectString}),"de_ToolResultBlock"),L5=p((e,t)=>e.document!=null?{document:UR(e.document,t)}:e.image!=null?{image:qR(e.image,t)}:e.json!=null?{json:Al(e.json,t)}:(0,m.expectString)(e.text)!==void 0?{text:(0,m.expectString)(e.text)}:e.video!=null?{video:GR(e.video,t)}:{$unknown:Object.entries(e)[0]},"de_ToolResultContentBlock"),U5=p((e,t)=>(e||[]).filter(n=>n!=null).map(n=>L5((0,L.awsExpectUnion)(n),t)),"de_ToolResultContentBlocks"),H5=p((e,t)=>(0,m.take)(e,{input:p(r=>Al(r,t),"input"),name:m.expectString,toolUseId:m.expectString}),"de_ToolUseBlock"),GR=p((e,t)=>(0,m.take)(e,{format:m.expectString,source:p(r=>j5((0,L.awsExpectUnion)(r),t),"source")}),"de_VideoBlock"),j5=p((e,t)=>e.bytes!=null?{bytes:t.base64Decoder(e.bytes)}:e.s3Location!=null?{s3Location:(0,m._json)(e.s3Location)}:{$unknown:Object.entries(e)[0]},"de_VideoSource"),Al=p((e,t)=>e,"de_Document"),X=p(e=>({httpStatusCode:e.statusCode,requestId:e.headers["x-amzn-requestid"]??e.headers["x-amzn-request-id"]??e.headers["x-amz-request-id"],extendedRequestId:e.headers["x-amz-id-2"],cfId:e.headers["x-amz-cf-id"]}),"deserializeMetadata"),Om="accept",Tl="contentType",Lm="content-type",VR="guardrailIdentifier",zR="guardrailVersion",bO="maxResults",CO="nextToken",Ol="performanceConfigLatency",xO="sortBy",PO="statusEquals",AO="sortOrder",TO="submitTimeAfter",OO="submitTimeBefore",WR="trace",$5="x-amzn-bedrock-accept",q5="x-amzn-bedrock-content-type",KR="x-amzn-bedrock-guardrailidentifier",YR="x-amzn-bedrock-guardrailversion",Rl="x-amzn-bedrock-performanceconfig-latency",JR="x-amzn-bedrock-trace",XR=class extends m.Command.classBuilder().ep(kt).m(function(e,t,r,n){return[(0,Dt.getSerdePlugin)(r,this.serialize,this.deserialize),(0,gt.getEndpointPlugin)(r,e.getEndpointParameterInstructions())]}).s("AmazonBedrockFrontendService","ApplyGuardrail",{}).n("BedrockRuntimeClient","ApplyGuardrailCommand").f(lR,void 0).ser(nW).de(pW).build(){static{p(this,"ApplyGuardrailCommand")}},QR=class extends m.Command.classBuilder().ep(kt).m(function(e,t,r,n){return[(0,Dt.getSerdePlugin)(r,this.serialize,this.deserialize),(0,gt.getEndpointPlugin)(r,e.getEndpointParameterInstructions())]}).s("AmazonBedrockFrontendService","Converse",{}).n("BedrockRuntimeClient","ConverseCommand").f(uR,fR).ser(oW).de(fW).build(){static{p(this,"ConverseCommand")}},ZR=class extends m.Command.classBuilder().ep(kt).m(function(e,t,r,n){return[(0,Dt.getSerdePlugin)(r,this.serialize,this.deserialize),(0,gt.getEndpointPlugin)(r,e.getEndpointParameterInstructions())]}).s("AmazonBedrockFrontendService","ConverseStream",{eventStream:{output:!0}}).n("BedrockRuntimeClient","ConverseStreamCommand").f(mR,yR).ser(sW).de(mW).build(){static{p(this,"ConverseStreamCommand")}},eI=class extends m.Command.classBuilder().ep(kt).m(function(e,t,r,n){return[(0,Dt.getSerdePlugin)(r,this.serialize,this.deserialize),(0,gt.getEndpointPlugin)(r,e.getEndpointParameterInstructions())]}).s("AmazonBedrockFrontendService","GetAsyncInvoke",{}).n("BedrockRuntimeClient","GetAsyncInvokeCommand").f(void 0,oR).ser(iW).de(gW).build(){static{p(this,"GetAsyncInvokeCommand")}},tI=class extends m.Command.classBuilder().ep(kt).m(function(e,t,r,n){return[(0,Dt.getSerdePlugin)(r,this.serialize,this.deserialize),(0,gt.getEndpointPlugin)(r,e.getEndpointParameterInstructions())]}).s("AmazonBedrockFrontendService","InvokeModel",{}).n("BedrockRuntimeClient","InvokeModelCommand").f(_R,vR).ser(aW).de(hW).build(){static{p(this,"InvokeModelCommand")}},rI=class extends m.Command.classBuilder().ep(kt).m(function(e,t,r,n){return[(0,Dt.getSerdePlugin)(r,this.serialize,this.deserialize),(0,gt.getEndpointPlugin)(r,e.getEndpointParameterInstructions()),(0,IO.getEventStreamPlugin)(r),(0,NO.getWebSocketPlugin)(r,{headerPrefix:"x-amz-bedrock-"})]}).s("AmazonBedrockFrontendService","InvokeModelWithBidirectionalStream",{eventStream:{input:!0,output:!0}}).n("BedrockRuntimeClient","InvokeModelWithBidirectionalStreamCommand").f(SR,ER).ser(cW).de(yW).build(){static{p(this,"InvokeModelWithBidirectionalStreamCommand")}},nI=class extends m.Command.classBuilder().ep(kt).m(function(e,t,r,n){return[(0,Dt.getSerdePlugin)(r,this.serialize,this.deserialize),(0,gt.getEndpointPlugin)(r,e.getEndpointParameterInstructions())]}).s("AmazonBedrockFrontendService","InvokeModelWithResponseStream",{eventStream:{output:!0}}).n("BedrockRuntimeClient","InvokeModelWithResponseStreamCommand").f(wR,bR).ser(lW).de(_W).build(){static{p(this,"InvokeModelWithResponseStreamCommand")}},Um=class extends m.Command.classBuilder().ep(kt).m(function(e,t,r,n){return[(0,Dt.getSerdePlugin)(r,this.serialize,this.deserialize),(0,gt.getEndpointPlugin)(r,e.getEndpointParameterInstructions())]}).s("AmazonBedrockFrontendService","ListAsyncInvokes",{}).n("BedrockRuntimeClient","ListAsyncInvokesCommand").f(void 0,iR).ser(dW).de(vW).build(){static{p(this,"ListAsyncInvokesCommand")}},oI=class extends m.Command.classBuilder().ep(kt).m(function(e,t,r,n){return[(0,Dt.getSerdePlugin)(r,this.serialize,this.deserialize),(0,gt.getEndpointPlugin)(r,e.getEndpointParameterInstructions())]}).s("AmazonBedrockFrontendService","StartAsyncInvoke",{}).n("BedrockRuntimeClient","StartAsyncInvokeCommand").f(aR,void 0).ser(uW).de(SW).build(){static{p(this,"StartAsyncInvokeCommand")}},G5={ApplyGuardrailCommand:XR,ConverseCommand:QR,ConverseStreamCommand:ZR,GetAsyncInvokeCommand:eI,InvokeModelCommand:tI,InvokeModelWithBidirectionalStreamCommand:rI,InvokeModelWithResponseStreamCommand:nI,ListAsyncInvokesCommand:Um,StartAsyncInvokeCommand:oI},sI=class extends Rm{static{p(this,"BedrockRuntime")}};(0,m.createAggregatedClient)(G5,sI);var V5=(0,Oe.createPaginator)(Rm,Um,"nextToken","nextToken","maxResults")});c();var Il=E(aI(),1),z5=new Il.BedrockRuntimeClient({region:process.env.BEDROCK_REGION||"us-east-1"}),Gce=async e=>{try{console.log("=== Lambda function started ==="),console.log("Event:",JSON.stringify(e,null,2)),console.log("Environment variables:",{BEDROCK_REGION:process.env.BEDROCK_REGION,AWS_REGION:process.env.AWS_REGION});let{scoreA:t,scoreB:r,scoreC:n,total:o,highStress:s,userName:i,department:a,subscaleScores:l}=e.arguments,d=e.arguments.age,u=e.arguments.gender,f={scoreA:t,scoreB:r,scoreC:n,total:o,highStress:s};console.log("Processing stress scores:",f),console.log("User info:",{userName:i,department:a});let g=typeof l=="string"?JSON.parse(l):l,h=Y5(f,g,i||void 0,a||void 0,d,u);console.log("Generated prompt length:",h.length),console.log("Prompt preview:",h.substring(0,200)+"..."),console.log("Calling Bedrock API...");let _=await J5(h);console.log("AI comment generated successfully, length:",_.length);let v=W5(f);console.log("Analysis details:",v);let S={success:!0,aiComment:_,prompt:h,scores:f,analysisDetails:v};return console.log("=== Lambda function completed successfully ==="),console.log("Result summary:",{success:S.success,aiCommentLength:S.aiComment.length,hasAnalysisDetails:!!S.analysisDetails}),JSON.stringify(S)}catch(t){console.error("=== Lambda function error ==="),console.error("Error type:",t.constructor?.name||"Unknown"),console.error("Error message:",t instanceof Error?t.message:"Unknown error"),console.error("Error stack:",t instanceof Error?t.stack:"No stack trace");let r={success:!1,error:"AI \u30B3\u30E1\u30F3\u30C8\u306E\u751F\u6210\u306B\u5931\u6557\u3057\u307E\u3057\u305F\u3002",details:t instanceof Error?t.message:"Unknown error",errorType:t.constructor?.name||"Unknown"};return console.log("Returning error result:",r),JSON.stringify(r)}};function W5(e){let{scoreA:t,scoreB:r,scoreC:n,highStress:o}=e;return{workStressLevel:t>=45?"high":t>=30?"medium":"low",physicalStressLevel:r>=77?"high":r>=50?"medium":"low",supportLevel:n>=25?"low":n>=20?"medium":"high",overallRisk:o?"high":"normal",priorityAreas:K5(e)}}function K5(e){let t=[];return e.scoreA>=45&&t.push("\u4ED5\u4E8B\u306E\u30B9\u30C8\u30EC\u30B9\u8981\u56E0"),e.scoreB>=70&&t.push("\u5FC3\u8EAB\u306E\u30B9\u30C8\u30EC\u30B9\u53CD\u5FDC"),e.scoreC>=25&&t.push("\u5468\u56F2\u306E\u30B5\u30DD\u30FC\u30C8\u4E0D\u8DB3"),t}function Y5(e,t,r,n,o,s){let i=d=>{switch(d){case 1:return"\u4F4E\u3044";case 2:return"\u3084\u3084\u4F4E\u3044";case 3:return"\u4E2D\u7A0B\u5EA6";case 4:return"\u3084\u3084\u9AD8\u3044";case 5:return"\u9AD8\u3044";default:return""}},a=Object.entries(t).filter(([,d])=>(d.reverse?6-d.eval:d.eval)>3).map(([,d])=>{let u=i(d.eval);return`- ${d.label}: ${u}`}).join(`
`);return`\u3042\u306A\u305F\u306F\u7D4C\u9A13\u8C4A\u5BCC\u306A\u7523\u696D\u533B\u30FB\u30E1\u30F3\u30BF\u30EB\u30D8\u30EB\u30B9\u5C02\u9580\u5BB6\u3067\u3059\u3002\u4EE5\u4E0B\u306E\u60C5\u5831\u3092\u53C2\u8003\u306B\u3001\u91CD\u8981\u306A\u5C3A\u5EA6\u306B\u7126\u70B9\u3092\u5F53\u3066\u3066 400 \u6587\u5B57\u4EE5\u5185\u3067\u5177\u4F53\u7684\u304B\u3064\u524D\u5411\u304D\u306A\u30A2\u30C9\u30D0\u30A4\u30B9\u3092\u4F5C\u6210\u3057\u3066\u304F\u3060\u3055\u3044\u3002

\u3010\u5BFE\u8C61\u8005\u60C5\u5831\u3011
- \u6027\u5225: ${s==="male"?"\u7537\u6027":s==="female"?"\u5973\u6027":"\u4E0D\u660E"}
- \u5E74\u9F62: ${o??"\u4E0D\u660E"}\u6B73
- \u90E8\u7F72: ${n??"\u4E0D\u660E"}

\u3010\u9AD8\u30B9\u30C8\u30EC\u30B9\u8005\u5224\u5B9A\u3011${e.highStress?"\u306F\u3044\uFF08\u8981\u6CE8\u610F\uFF09":"\u3044\u3044\u3048"}

\u3010\u6CE8\u76EE\u3059\u3079\u304D\u5C3A\u5EA6\uFF085\u6BB5\u968E\u8A55\u4FA1\uFF09\u3011
${a}

\u3010\u30A2\u30C9\u30D0\u30A4\u30B9\u8981\u4EF6\u3011
1. \u6E29\u304B\u304F\u89AA\u3057\u307F\u3084\u3059\u3044\u8A9E\u8ABF
2. \u5177\u4F53\u7684\u3067\u5B9F\u884C\u53EF\u80FD\u306A\u6539\u5584\u7B56\u3092\u63D0\u793A
3. \u30DD\u30B8\u30C6\u30A3\u30D6\u3067\u5E0C\u671B\u3092\u6301\u3066\u308B\u5185\u5BB9
4. \u533B\u7642\u7684\u8A3A\u65AD\u3067\u306F\u306A\u304F\u4E00\u822C\u7684\u306A\u30E1\u30F3\u30BF\u30EB\u30D8\u30EB\u30B9\u652F\u63F4\u3068\u3057\u3066
5. \u5FC5\u8981\u306B\u5FDC\u3058\u3066\u5C02\u9580\u6A5F\u95A2\u3078\u306E\u76F8\u8AC7\u3092\u63A8\u5968

\u30A2\u30C9\u30D0\u30A4\u30B9:`}async function J5(e){try{let t="us.anthropic.claude-sonnet-4-20250514-v1:0";console.log("Using Bedrock model:",t),console.log("Bedrock region:",process.env.BEDROCK_REGION||"us-east-1");let r={anthropic_version:"bedrock-2023-05-31",max_tokens:500,temperature:.7,messages:[{role:"user",content:e}]};console.log("Bedrock request body:",JSON.stringify(r,null,2));let n=new Il.InvokeModelCommand({modelId:t,body:JSON.stringify(r),contentType:"application/json"});console.log("Sending request to Bedrock...");let o=await z5.send(n);if(console.log("Bedrock response metadata:",{statusCode:o.$metadata.httpStatusCode,requestId:o.$metadata.requestId}),!o.body)throw new Error("No response body from Bedrock");let s=new TextDecoder().decode(o.body);console.log("Raw Bedrock response:",s);let i=JSON.parse(s);if(console.log("Parsed Bedrock response:",i),!i.content||!i.content[0]?.text)throw new Error(`Invalid response format from Bedrock: ${JSON.stringify(i)}`);let a=i.content[0].text.trim();return console.log("Extracted AI comment length:",a.length),a}catch(t){if(console.error("Bedrock API error details:",{errorType:t.constructor?.name||"Unknown",errorMessage:t instanceof Error?t.message:"Unknown error",errorCode:t.$metadata?.httpStatusCode,errorStack:t instanceof Error?t.stack:"No stack trace"}),t instanceof Error){if(t.message.includes("AccessDenied")||t.message.includes("UnauthorizedOperation"))throw new Error("Bedrock API \u3078\u306E\u30A2\u30AF\u30BB\u30B9\u6A29\u9650\u304C\u3042\u308A\u307E\u305B\u3093\u3002IAM \u30ED\u30FC\u30EB\u3092\u78BA\u8A8D\u3057\u3066\u304F\u3060\u3055\u3044\u3002");if(t.message.includes("ValidationException"))throw new Error("Bedrock API \u30EA\u30AF\u30A8\u30B9\u30C8\u306E\u5F62\u5F0F\u304C\u7121\u52B9\u3067\u3059\u3002");if(t.message.includes("ThrottlingException"))throw new Error("Bedrock API \u306E\u30EC\u30FC\u30C8\u5236\u9650\u306B\u9054\u3057\u307E\u3057\u305F\u3002\u3057\u3070\u3089\u304F\u5F85\u3063\u3066\u304B\u3089\u518D\u8A66\u884C\u3057\u3066\u304F\u3060\u3055\u3044\u3002");if(t.message.includes("ModelNotReadyException"))throw new Error("Claude 3.5 Sonnet \u30E2\u30C7\u30EB\u304C\u5229\u7528\u3067\u304D\u307E\u305B\u3093\u3002")}throw t}}export{Gce as handler};
//# sourceMappingURL=index.mjs.map
